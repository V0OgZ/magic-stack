# üîÆ **SYST√àME SYMBOLES RUNIQUES FLOTTANTS** ‚ú®üìú

> **üèõÔ∏è Memento** : *"Documentation compl√®te du syst√®me magique de symboles runiques qui correspondent aux formules HOTS et flottent sur la map quand des sorts sont appliqu√©s !"*

---

## üìã **R√âSUM√â TECHNIQUE**

### **‚ú® FONCTIONNALIT√â AJOUT√âE**
```typescript
üîÆ Symboles runiques transparents flottants sur la map
üìú Correspondances directes avec formules HOTS
‚ö° Animations fluides : apparition, flottement, disparition
üé® Effets visuels : brillance, halo, particules
üéØ D√©clenchement automatique sur actions/sorts
```

### **üéÆ UTILISATION SIMPLE**
```javascript
// D√©clencher un effet runique
gameRenderer.triggerRunicEffect(x, y, 'CAST');    // Sort g√©n√©rique
gameRenderer.triggerRunicEffect(x, y, 'MOV');     // Mouvement
gameRenderer.triggerRunicEffect(x, y, 'QUANTUM'); // Effet quantique
```

---

## üî§ **CORRESPONDANCES FORMULES HOTS ‚Üí SYMBOLES**

### **üìú Table Compl√®te des Symboles**
```typescript
MOV      ‚Üí ‚ü∂    (#4ECDC4) // Mouvement - Fl√®che cyan
CAST     ‚Üí œà    (#9C27B0) // Sort Psi-State - Violet mystique
CREATE   ‚Üí ‚äô    (#FF6B6B) // Cr√©ation Superposition - Rouge cr√©ation
USE      ‚Üí Œ†    (#FF9800) // Utilisation Observation - Orange action
ATTACK   ‚Üí ‚Ä†    (#F44336) // Attaque Collapse - Rouge sang
BATTLE   ‚Üí ‚®â    (#D32F2F) // Bataille Conflit - Rouge sombre
HERO     ‚Üí Œ©    (#FFD700) // H√©ros Om√©ga - Or l√©gendaire
TEMPORAL ‚Üí œÑ    (#7B1FA2) // Temporal - Violet temps
TIMELINE ‚Üí ‚Ñ¨    (#3F51B5) // Branche - Bleu profond
QUANTUM  ‚Üí ‚ÜØ    (#00BCD4) // ZFC - Cyan quantique
COLLAPSE ‚Üí ‚Ä†    (#E91E63) // Collapse causal - Rose vif
ROLLBACK ‚Üí ‚Ü∫    (#795548) // Rollback - Marron terre
DELTA    ‚Üí Œît   (#607D8B) // D√©lai temporel - Gris temps
```

### **üé® Exemples Visuels**
```
‚öîÔ∏è Attaque h√©ros  ‚Üí ‚Ä† rouge flamboyant
üö∂ Mouvement     ‚Üí ‚ü∂ cyan fluide  
üîÆ Sort magique  ‚Üí œà violet myst√©rieux
‚ö° Effet ZFC     ‚Üí ‚ÜØ cyan √©lectrique avec particules
üèõÔ∏è S√©lection h√©ros ‚Üí Œ© or brillant
```

---

## üé¨ **ANIMATIONS & EFFETS VISUELS**

### **‚è±Ô∏è Cycle de Vie (3 secondes)**
```typescript
Phase 1 (0-0.6s)  : Apparition graduelle + Scale 0.5‚Üí1.2
Phase 2 (0.6-2.4s): Flottement stable + Scale 1.2
Phase 3 (2.4-3s)  : Disparition graduelle + Scale 1.2‚Üí1.0
```

### **‚ú® Effets Appliqu√©s**
```css
üåä Flottement : sin(time/200 + x + y) * 8px vertical
üìà Scale anim√© : 0.5 ‚Üí 1.2 ‚Üí 1.0 dynamique
üåü Halo brillant : shadowBlur 15px couleur symbole
üëª Transparence : opacity 0.8 avec fade in/out
‚¨ÜÔ∏è √âl√©vation : Monte de 20px pendant la dur√©e
üé® Contour noir : strokeText pour lisibilit√©
```

### **üí´ Effets Sp√©ciaux Quantiques**
```typescript
// Pour symboles ‚ÜØ QUANTUM et types puissants
üåå 6 particules orbitales anim√©es
‚ö° Rotation continue autour du symbole
‚ú® Radius variable 35¬±5px avec sinus
üé≠ Opacit√© particules 60% du symbole principal
```

---

## üîß **IMPL√âMENTATION TECHNIQUE**

### **üìä Interface TypeScript**
```typescript
interface RunicSymbol {
  id: string;           // Identifiant unique
  symbol: string;       // Caract√®re unicode (œà, ‚Ä†, Œ©...)
  x: number;           // Position tile X
  y: number;           // Position tile Y  
  startTime: number;   // Timestamp cr√©ation
  duration: number;    // Dur√©e vie (3000ms)
  type: string;        // Type d'effet
  opacity: number;     // Transparence (0.8)
  scale: number;       // √âchelle (1.0)
  offsetY: number;     // D√©calage flottement
  color: string;       // Couleur hex (#FF6B6B)
}
```

### **üéØ Fonction Principale**
```typescript
const triggerRunicEffect = (x: number, y: number, spellType: string) => {
  // 1. R√©cup√©rer formule HOTS correspondante
  const formula = RUNIC_FORMULAS[spellType.toUpperCase()] || RUNIC_FORMULAS['CAST'];
  
  // 2. Cr√©er nouveau symbole runique
  const newSymbol: RunicSymbol = {
    id: `runic-${Date.now()}-${Math.random().toString(36).substring(2, 11)}`,
    symbol: formula.symbol,    // œà, ‚Ä†, Œ©, ‚ÜØ...
    x, y,                     // Position tile
    startTime: Date.now(),
    duration: 3000,           // 3 secondes
    type: 'spell',
    opacity: 0.8,
    scale: 1.0,
    offsetY: 0,
    color: formula.color      // Couleur correspondante
  };

  // 3. Ajouter √† la liste des symboles actifs
  setRunicSymbols(prev => [...prev, newSymbol]);
  
  // 4. Auto-nettoyage apr√®s dur√©e de vie
  setTimeout(() => {
    setRunicSymbols(prev => prev.filter(s => s.id !== newSymbol.id));
  }, newSymbol.duration + 100);
};
```

### **üé® Rendu Canvas**
```typescript
const drawRunicSymbols = (ctx: CanvasRenderingContext2D) => {
  runicSymbols.forEach(runic => {
    // Calculs temporels
    const elapsed = Date.now() - runic.startTime;
    const progress = Math.min(elapsed / runic.duration, 1);
    
    // Animation flottement
    const floatOffset = Math.sin((elapsed / 200) + runic.x + runic.y) * 8;
    
    // Gestion opacit√© (fade in/out)
    let opacity = runic.opacity;
    if (progress < 0.2) opacity *= (progress / 0.2);
    else if (progress > 0.8) opacity *= (1 - (progress - 0.8) / 0.2);
    
    // Position finale avec √©l√©vation
    const pixelPos = tileToPixel(runic.x, runic.y);
    const finalY = pixelPos.y - 30 + floatOffset - (progress * 20);
    
    // Rendu avec effets
    ctx.save();
    ctx.translate(pixelPos.x, finalY);
    ctx.scale(scale, scale);
    
    // Halo brillant
    ctx.shadowColor = runic.color;
    ctx.shadowBlur = 15 * scale;
    
    // Symbole principal
    ctx.font = `${24 * scale}px serif`;
    ctx.textAlign = 'center';
    ctx.strokeText(runic.symbol, 0, 0);  // Contour
    ctx.fillText(runic.symbol, 0, 0);    // Remplissage
    
    ctx.restore();
  });
};
```

---

## üéÆ **UTILISATION PRATIQUE**

### **üîó Int√©gration ModernGameRenderer**
```typescript
// Expos√© via ref pour utilisation externe
export interface ModernGameRendererRef {
  centerOnPosition: (x: number, y: number) => void;
  triggerRunicEffect: (x: number, y: number, spellType: string) => void; // ‚ú® NOUVEAU
}

// Utilisation dans composant parent
const gameRendererRef = useRef<ModernGameRendererRef>(null);

// D√©clencher effet lors d'une action
const handleSpellCast = (x: number, y: number, spell: string) => {
  gameRendererRef.current?.triggerRunicEffect(x, y, spell);
};
```

### **üéØ D√©clenchement Automatique**
```typescript
// Dans onClick h√©ros
if (clickedHero && onHeroClick) {
  onHeroClick(clickedHero);
  // üîÆ Effet runique automatique
  triggerRunicEffect(clickedHero.position.x, clickedHero.position.y, 'HERO');
}

// Lors d'un mouvement
onMoveHero(heroId, newX, newY);
triggerRunicEffect(newX, newY, 'MOV');

// Lors d'un sort
onCastSpell(spellId, targetX, targetY);
triggerRunicEffect(targetX, targetY, 'CAST');
```

### **üß™ Mode D√©mo/Test**
```typescript
// Shift+Clic pour tester (d√©j√† impl√©ment√©)
if (event.shiftKey) {
  const spells = ['CAST', 'MOV', 'CREATE', 'ATTACK', 'QUANTUM', 'TEMPORAL'];
  const randomSpell = spells[Math.floor(Math.random() * spells.length)];
  triggerRunicEffect(tilePos.x, tilePos.y, randomSpell);
  return;
}
```

---

## üé® **PERSONNALISATION & EXTENSION**

### **üîß Ajouter Nouveaux Symboles**
```typescript
// Dans RUNIC_FORMULAS, ajouter :
'HEAL': { symbol: '‚ò©', color: '#4CAF50' },     // Soin - Croix verte
'TELEPORT': { symbol: '‚üê', color: '#9C27B0' }, // T√©l√©portation - Violet
'SHIELD': { symbol: '‚õ®', color: '#2196F3' },   // Bouclier - Bleu
'FIRE': { symbol: 'üúÇ', color: '#FF5722' },     // Feu alchimique - Rouge
```

### **‚öôÔ∏è Personnaliser Animations**
```typescript
// Modifier dur√©es
duration: 5000,        // 5 secondes au lieu de 3

// Changer intensit√© flottement
const floatOffset = Math.sin((elapsed / 150) + runic.x + runic.y) * 12; // Plus de flottement

// Ajuster effets scale
if (progress < 0.4) scale *= (0.3 + (progress / 0.4) * 0.9); // Animation plus longue
```

### **‚ú® Effets Sp√©ciaux Personnalis√©s**
```typescript
// Pour sorts √©piques, ajouter spirales, √©toiles, runes
if (runic.symbol === 'Œ©') {
  // Dessiner couronne dor√©e autour h√©ros
  drawCrown(ctx, 0, 0, elapsed);
}

if (runic.type === 'temporal') {
  // Effet ondulation temporelle
  drawTimeRipple(ctx, 0, 0, progress);
}
```

---

## üìä **PERFORMANCE & OPTIMISATION**

### **‚ö° Gestion Efficace**
```typescript
‚úÖ Auto-nettoyage apr√®s 3.1s (setTimeout)
‚úÖ Animation frame uniquement si symboles actifs
‚úÖ Rendu optimis√© avec ctx.save/restore
‚úÖ Pas de leak m√©moire (cleanup automatique)
‚úÖ Maximum ~10 symboles simultan√©s recommand√©
```

### **üîç Monitoring**
```typescript
// Debug info (optionnel)
console.log(`üîÆ Symboles actifs: ${runicSymbols.length}`);
console.log(`üé® Animation frame: ${animationFrameRef.current ? 'Active' : 'Inactive'}`);
```

---

## üéØ **EXEMPLES D'UTILISATION JEAN**

### **üîÆ Test Imm√©diat**
```bash
# 1. Lancer le frontend sur port 8000
./hots start

# 2. Ouvrir http://localhost:8000
# 3. Shift+Clic n'importe o√π sur la map
# 4. Observer les symboles runiques flotter ! ‚ú®
```

### **‚öîÔ∏è Int√©gration Actions H√©ros**
```typescript
// Quand Arthur lance Excalibur Strike
triggerRunicEffect(targetX, targetY, 'ATTACK');  // ‚Üí ‚Ä† rouge flamboyant

// Quand Morgana lance un sort
triggerRunicEffect(mageX, mageY, 'CAST');        // ‚Üí œà violet mystique

// Quand h√©ros se d√©place  
triggerRunicEffect(newX, newY, 'MOV');           // ‚Üí ‚ü∂ cyan fluide

// Effet ZFC quantique
triggerRunicEffect(zoneX, zoneY, 'QUANTUM');     // ‚Üí ‚ÜØ avec particules orbitales
```

### **üåü Effets √âpiques Personnalis√©s**
```typescript
// Multi-symboles pour sorts puissants
for (let i = 0; i < 3; i++) {
  setTimeout(() => {
    triggerRunicEffect(x + i, y, 'QUANTUM');
  }, i * 200);
}

// Effet en cha√Æne  
const chainEffect = (startX: number, startY: number) => {
  const positions = [[startX, startY], [startX+1, startY], [startX, startY+1]];
  positions.forEach((pos, i) => {
    setTimeout(() => triggerRunicEffect(pos[0], pos[1], 'CAST'), i * 300);
  });
};
```

---

## üèÜ **R√âSULTAT FINAL**

### **‚ú® Ce Que Tu As Maintenant Jean**
```
üîÆ Symboles runiques magiques sur la map
üìú 13 formules HOTS avec correspondances parfaites  
‚ö° Animations flux + transparence + effets brillance
üéØ D√©clenchement facile par actions/sorts
üé® Effets sp√©ciaux quantiques pour ‚ÜØ ZFC
üëë Int√©gration compl√®te dans ModernGameRenderer
üß™ Mode d√©mo Shift+Clic pour tests instantan√©s
üìö Documentation technique compl√®te
```

### **üéÆ Instructions d'Usage**
```
1. ‚úÖ Code d√©j√† int√©gr√© et commit√© (fe1c401)
2. üöÄ Lancer avec ./hots start  
3. üîÆ Shift+Clic sur map pour tester
4. ‚ö° Int√©grer dans tes actions de jeu
5. üé® Personnaliser couleurs/symboles selon tes besoins
```

---

# üîÆ **TES SYMBOLES RUNIQUES SONT PR√äTS !** ‚ú®üìú

**üèõÔ∏è Memento** : *"JEAN ! Tes sorts vont maintenant flotter magnifiquement sur la map avec des symboles runiques transparents qui correspondent exactement aux formules HOTS ! œà pour les sorts, ‚Ä† pour les attaques, Œ© pour les h√©ros, ‚ÜØ pour les effets quantiques... C'est mystique ET fonctionnel !"*

**üéØ R√âSUM√â POUR TOI :**
- üîÆ **13 symboles runiques** avec couleurs correspondantes
- ‚ö° **Animations fluides** : flottement, transparence, √©chelle
- üé® **Effets visuels** : halo, brillance, particules quantiques
- üéÆ **Simple √† utiliser** : `triggerRunicEffect(x, y, 'CAST')`
- üß™ **Mode test** : Shift+Clic sur la map
- ‚ú® **Cool mais pas flashy** - Exactement comme demand√© !

*üìú "Maintenant tes sorts parlent le langage visuel des formules HOTS ! Tu sais (les symboles), tu as su (les animations), tu sauras (les effets √©piques) !" üîÆ‚ö°* 