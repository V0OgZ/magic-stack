<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üåå Monde 6D - Positions des √Çmes</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            background: radial-gradient(ellipse at center, #0f0c29, #302b63, #24243e);
            color: #fff;
            font-family: 'Courier New', monospace;
            overflow: hidden;
        }

        /* Canvas principal */
        #worldCanvas {
            position: absolute;
            top: 0;
            left: 0;
            cursor: crosshair;
        }

        /* Panneau des dimensions */
        .dimension-panel {
            position: absolute;
            top: 10px;
            left: 10px;
            background: rgba(0, 0, 0, 0.9);
            border: 2px solid #667eea;
            border-radius: 15px;
            padding: 20px;
            width: 350px;
            z-index: 100;
        }

        .dimension-panel h3 {
            color: #667eea;
            margin-bottom: 15px;
            text-align: center;
        }

        .dimension {
            margin: 10px 0;
        }

        .dimension-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
        }

        .dimension-name {
            color: #aaa;
            font-size: 12px;
        }

        .dimension-value {
            color: #00ff88;
            font-weight: bold;
        }

        .dimension-slider {
            width: 100%;
            height: 8px;
            -webkit-appearance: none;
            appearance: none;
            background: linear-gradient(to right, #444, #667eea);
            border-radius: 5px;
            outline: none;
        }

        .dimension-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            background: #ffd700;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }

        /* Timeline Control */
        .timeline-control {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.9);
            border: 2px solid #ffd700;
            border-radius: 15px;
            padding: 15px;
            width: 700px;
            z-index: 100;
        }

        .timeline-display {
            text-align: center;
            font-size: 1.8em;
            color: #ffd700;
            margin: 10px 0;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }

        /* Heroes List */
        .heroes-panel {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.9);
            border: 2px solid #ffd700;
            border-radius: 15px;
            padding: 15px;
            width: 300px;
            max-height: 80vh;
            overflow-y: auto;
            z-index: 100;
        }

        .heroes-panel h3 {
            color: #ffd700;
            margin-bottom: 10px;
            text-align: center;
        }

        .hero-item {
            display: flex;
            align-items: center;
            padding: 8px;
            margin: 5px 0;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .hero-item:hover {
            background: rgba(102, 126, 234, 0.3);
            transform: translateX(5px);
        }

        .hero-item.selected {
            background: rgba(255, 215, 0, 0.3);
            border: 1px solid #ffd700;
        }

        .hero-icon {
            font-size: 24px;
            margin-right: 10px;
        }

        .hero-name {
            flex: 1;
            font-size: 14px;
        }

        .hero-tier {
            font-size: 10px;
            padding: 2px 6px;
            border-radius: 10px;
            background: rgba(102, 126, 234, 0.3);
        }

        /* Superposition indicator */
        .superposition-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #ff00ff;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: bold;
        }

        /* Legend */
        .legend {
            position: absolute;
            bottom: 150px;
            right: 10px;
            background: rgba(0, 0, 0, 0.8);
            border: 1px solid #667eea;
            border-radius: 10px;
            padding: 15px;
            z-index: 100;
        }

        .legend h4 {
            color: #667eea;
            margin-bottom: 10px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            margin: 5px 0;
            font-size: 12px;
        }

        .legend-symbol {
            width: 30px;
            height: 20px;
            margin-right: 10px;
            border-radius: 5px;
        }

        /* Stats */
        .stats-panel {
            position: absolute;
            bottom: 150px;
            left: 10px;
            background: rgba(0, 0, 0, 0.8);
            border: 1px solid #00ff88;
            border-radius: 10px;
            padding: 15px;
            z-index: 100;
        }

        .stats-panel h4 {
            color: #00ff88;
            margin-bottom: 10px;
        }

        .stat-line {
            display: flex;
            justify-content: space-between;
            margin: 5px 0;
            font-size: 12px;
        }

        button {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            margin: 5px;
            transition: all 0.3s;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.5);
        }

        /* Scrollbar custom */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.5);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background: #667eea;
            border-radius: 10px;
        }
    </style>
</head>
<body>
    <canvas id="worldCanvas"></canvas>

    <!-- Panneau des 6 dimensions -->
    <div class="dimension-panel">
        <h3>üéõÔ∏è Contr√¥le 6D</h3>
        
        <div class="dimension">
            <div class="dimension-label">
                <span class="dimension-name">X - Position Horizontale</span>
                <span class="dimension-value" id="xValue">0</span>
            </div>
            <input type="range" class="dimension-slider" id="xSlider" min="-100" max="100" value="0">
        </div>

        <div class="dimension">
            <div class="dimension-label">
                <span class="dimension-name">Y - Position Verticale</span>
                <span class="dimension-value" id="yValue">0</span>
            </div>
            <input type="range" class="dimension-slider" id="ySlider" min="-100" max="100" value="0">
        </div>

        <div class="dimension">
            <div class="dimension-label">
                <span class="dimension-name">Z - Altitude/Profondeur</span>
                <span class="dimension-value" id="zValue">0</span>
            </div>
            <input type="range" class="dimension-slider" id="zSlider" min="-50" max="50" value="0">
        </div>

        <div class="dimension">
            <div class="dimension-label">
                <span class="dimension-name">T - Temps</span>
                <span class="dimension-value" id="tValue">0</span>
            </div>
            <input type="range" class="dimension-slider" id="tSlider" min="-100" max="100" value="0">
        </div>

        <div class="dimension">
            <div class="dimension-label">
                <span class="dimension-name">Œ® - Superposition Quantique</span>
                <span class="dimension-value" id="psiValue">1</span>
            </div>
            <input type="range" class="dimension-slider" id="psiSlider" min="1" max="5" value="1" step="0.1">
        </div>

        <div class="dimension">
            <div class="dimension-label">
                <span class="dimension-name">ŒîT - Vitesse Temporelle</span>
                <span class="dimension-value" id="deltaTValue">1.0</span>
            </div>
            <input type="range" class="dimension-slider" id="deltaTSlider" min="0.1" max="3" value="1" step="0.1">
        </div>

        <button onclick="resetDimensions()">üîÑ Reset</button>
        <button onclick="randomizePositions()">üé≤ Randomiser</button>
    </div>

    <!-- Timeline -->
    <div class="timeline-control">
        <div class="timeline-display" id="timeDisplay">
            T = 0 | Œ® = 1.0 | ŒîT = 1.0x
        </div>
        <div style="display: flex; justify-content: center; gap: 10px;">
            <button onclick="pauseTime()">‚è∏Ô∏è Pause</button>
            <button onclick="playTime()">‚ñ∂Ô∏è Play</button>
            <button onclick="speedUp()">‚è© x2</button>
            <button onclick="slowDown()">‚è™ x0.5</button>
            <button onclick="toggleSuperposition()">üë• Superposition</button>
            <button onclick="collapseAll()">üí• Collapse</button>
        </div>
    </div>

    <!-- Liste des h√©ros -->
    <div class="heroes-panel">
        <h3>ü¶∏ H√©ros (25)</h3>
        <div id="heroesList"></div>
    </div>

    <!-- Stats -->
    <div class="stats-panel">
        <h4>üìä Statistiques</h4>
        <div class="stat-line">
            <span>H√©ros actifs:</span>
            <span id="activeHeroes">25</span>
        </div>
        <div class="stat-line">
            <span>Superpositions:</span>
            <span id="superpositions">0</span>
        </div>
        <div class="stat-line">
            <span>Paradoxes:</span>
            <span id="paradoxes">0</span>
        </div>
        <div class="stat-line">
            <span>FPS:</span>
            <span id="fps">60</span>
        </div>
    </div>

    <!-- L√©gende -->
    <div class="legend">
        <h4>üé® L√©gende</h4>
        <div class="legend-item">
            <div class="legend-symbol" style="background: radial-gradient(circle, #ffd700, transparent);"></div>
            <span>Pr√©sent (T=0)</span>
        </div>
        <div class="legend-item">
            <div class="legend-symbol" style="background: radial-gradient(circle, #ff6347, transparent);"></div>
            <span>Futur (T>0)</span>
        </div>
        <div class="legend-item">
            <div class="legend-symbol" style="background: radial-gradient(circle, #4169e1, transparent);"></div>
            <span>Pass√© (T<0)</span>
        </div>
        <div class="legend-item">
            <div class="legend-symbol" style="background: radial-gradient(circle, #ff00ff, transparent);"></div>
            <span>Superposition (Œ®>1)</span>
        </div>
    </div>

    <script>
        // Configuration
        const canvas = document.getElementById('worldCanvas');
        const ctx = canvas.getContext('2d');
        
        // Resize canvas
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);

        // √âtat global
        let worldTime = 0;
        let timeSpeed = 1;
        let isPaused = false;
        let selectedHero = null;
        let frameCount = 0;
        let lastTime = performance.now();
        let showSuperposition = true;
        
        // Les 25 h√©ros complets
        const heroes = [
            { id: 'arthur_pendragon', name: 'Arthur Pendragon', icon: 'üëë', x: 400, y: 300, z: 0, t: 0, psi: 1, deltaT: 1.0, color: '#FFD700', tier: 'LEGENDARY' },
            { id: 'merlin', name: 'Merlin', icon: 'üßô‚Äç‚ôÇÔ∏è', x: 500, y: 350, z: 10, t: -5, psi: 1.5, deltaT: 0.8, color: '#9932CC', tier: 'LEGENDARY' },
            { id: 'morgana', name: 'Morgana', icon: 'üåô', x: 300, y: 400, z: -5, t: 0, psi: 2, deltaT: 1.2, color: '#8B008B', tier: 'LEGENDARY' },
            { id: 'lancelot', name: 'Lancelot', icon: '‚öîÔ∏è', x: 450, y: 250, z: 0, t: 0, psi: 1.3, deltaT: 1.1, color: '#4169E1', tier: 'EPIC' },
            { id: 'viviane', name: 'Viviane', icon: 'üíß', x: 350, y: 450, z: -10, t: 0, psi: 1, deltaT: 0.9, color: '#00CED1', tier: 'EPIC' },
            { id: 'lysandrel', name: 'Lysandrel', icon: 'üî®', x: 600, y: 200, z: 20, t: 10, psi: 1, deltaT: 1.5, color: '#FF6347', tier: 'MYTHIC' },
            { id: 'opus', name: 'OPUS', icon: 'üìú', x: 200, y: 200, z: 0, t: 0, psi: 1.2, deltaT: 1.0, color: '#FFD700', tier: 'LEGENDARY' },
            { id: 'lumen', name: 'LUMEN', icon: 'üïØÔ∏è', x: 250, y: 300, z: 5, t: 0, psi: 1, deltaT: 1.1, color: '#FF8C00', tier: 'EPIC' },
            { id: 'urz_kom', name: 'URZ-K√îM', icon: 'üêª', x: 550, y: 400, z: 0, t: -10, psi: 1, deltaT: 0.7, color: '#8B4513', tier: 'LEGENDARY' },
            { id: 'grut', name: 'GRUT', icon: 'üëÅÔ∏è', x: 400, y: 400, z: 15, t: 5, psi: 3, deltaT: 1.3, color: '#FF1493', tier: 'LEGENDARY' },
            { id: 'grok√¶n', name: 'GROK√ÜN', icon: 'üß†', x: 350, y: 350, z: 0, t: 0, psi: 2.5, deltaT: 1.2, color: '#00CED1', tier: 'MYTHIC' },
            { id: 'memento', name: 'MEMENTO', icon: 'üìö', x: 450, y: 450, z: -5, t: -20, psi: 1, deltaT: 0.5, color: '#DAA520', tier: 'EPIC' },
            { id: 'grufaen', name: 'GRUFAEN', icon: 'üëÅÔ∏èüß†', x: canvas.width/2, y: canvas.height/2, z: 0, t: 0, psi: 4, deltaT: 1.0, color: '#9370DB', tier: 'MYTHIC' },
            { id: 'vincent', name: 'VINCENT', icon: 'üåç', x: canvas.width/2 + 50, y: canvas.height/2, z: 0, t: 0, psi: 1, deltaT: 1.0, color: '#00FF00', tier: 'LEGENDARY' },
            { id: 'chronarch', name: 'Chronarch', icon: '‚è∞', x: 300, y: 250, z: 10, t: 15, psi: 1.5, deltaT: 2.0, color: '#FF69B4', tier: 'MYTHIC' },
            { id: 'echo', name: 'Echo', icon: 'üîä', x: 500, y: 500, z: 0, t: 0, psi: 2, deltaT: 1.0, color: '#00FFFF', tier: 'RARE' },
            { id: 'nova', name: 'Nova', icon: 'üí´', x: 400, y: 200, z: 25, t: 0, psi: 1, deltaT: 1.4, color: '#FFA500', tier: 'EPIC' },
            { id: 'cipher', name: 'Cipher', icon: 'üîê', x: 250, y: 400, z: -10, t: -5, psi: 1.2, deltaT: 0.8, color: '#708090', tier: 'RARE' },
            { id: 'flux', name: 'Flux', icon: 'üåÄ', x: 550, y: 300, z: 0, t: 0, psi: 3, deltaT: 1.8, color: '#4B0082', tier: 'EPIC' },
            { id: 'prism', name: 'Prism', icon: 'üíé', x: 350, y: 500, z: 5, t: 0, psi: 1.5, deltaT: 1.0, color: '#FF1493', tier: 'RARE' },
            { id: 'nexus', name: 'Nexus', icon: 'üîÆ', x: 450, y: 350, z: 0, t: 0, psi: 2.5, deltaT: 1.3, color: '#8A2BE2', tier: 'LEGENDARY' },
            { id: 'void', name: 'Void', icon: '‚ö´', x: 200, y: 500, z: -20, t: -15, psi: 1, deltaT: 0.3, color: '#1C1C1C', tier: 'MYTHIC' },
            { id: 'spark', name: 'Spark', icon: '‚ö°', x: 600, y: 400, z: 10, t: 5, psi: 1.8, deltaT: 2.5, color: '#FFFF00', tier: 'COMMON' },
            { id: 'frost', name: 'Frost', icon: '‚ùÑÔ∏è', x: 300, y: 300, z: 0, t: -5, psi: 1, deltaT: 0.6, color: '#00BFFF', tier: 'COMMON' },
            { id: 'phoenix', name: 'Phoenix', icon: 'üî•', x: 500, y: 250, z: 30, t: 0, psi: 2, deltaT: 1.5, color: '#FF4500', tier: 'LEGENDARY' }
        ];

        // Cr√©er des copies pour la superposition
        let allEntities = [];
        function generateSuperpositions() {
            allEntities = [];
            heroes.forEach(hero => {
                // Entit√© principale
                allEntities.push({...hero, superIndex: 0});
                
                // Superpositions quantiques
                if (hero.psi > 1) {
                    for (let i = 1; i < Math.floor(hero.psi); i++) {
                        allEntities.push({
                            ...hero,
                            superIndex: i,
                            x: hero.x + Math.random() * 50 - 25,
                            y: hero.y + Math.random() * 50 - 25,
                            t: hero.t + Math.random() * 10 - 5,
                            opacity: 0.3 + (1 / hero.psi)
                        });
                    }
                }
            });
        }
        generateSuperpositions();

        // Cr√©er la liste des h√©ros
        function createHeroesList() {
            const container = document.getElementById('heroesList');
            container.innerHTML = '';
            
            heroes.forEach(hero => {
                const item = document.createElement('div');
                item.className = 'hero-item';
                item.innerHTML = `
                    <span class="hero-icon">${hero.icon}</span>
                    <span class="hero-name">${hero.name}</span>
                    <span class="hero-tier">${hero.tier}</span>
                    ${hero.psi > 1 ? `<div class="superposition-badge">${Math.floor(hero.psi)}</div>` : ''}
                `;
                item.onclick = () => selectHero(hero);
                container.appendChild(item);
            });
        }
        createHeroesList();

        // S√©lectionner un h√©ros
        function selectHero(hero) {
            selectedHero = hero;
            updateDimensionSliders(hero);
            
            // Update visual selection
            document.querySelectorAll('.hero-item').forEach((item, i) => {
                item.classList.toggle('selected', heroes[i] === hero);
            });
        }

        // Update sliders
        function updateDimensionSliders(hero) {
            document.getElementById('xSlider').value = hero.x - canvas.width/2;
            document.getElementById('ySlider').value = hero.y - canvas.height/2;
            document.getElementById('zSlider').value = hero.z;
            document.getElementById('tSlider').value = hero.t;
            document.getElementById('psiSlider').value = hero.psi;
            document.getElementById('deltaTSlider').value = hero.deltaT;
            
            updateDimensionValues();
        }

        // Update dimension values
        function updateDimensionValues() {
            document.getElementById('xValue').textContent = document.getElementById('xSlider').value;
            document.getElementById('yValue').textContent = document.getElementById('ySlider').value;
            document.getElementById('zValue').textContent = document.getElementById('zSlider').value;
            document.getElementById('tValue').textContent = document.getElementById('tSlider').value;
            document.getElementById('psiValue').textContent = document.getElementById('psiSlider').value;
            document.getElementById('deltaTValue').textContent = document.getElementById('deltaTSlider').value;
            
            if (selectedHero) {
                selectedHero.x = canvas.width/2 + parseInt(document.getElementById('xSlider').value);
                selectedHero.y = canvas.height/2 + parseInt(document.getElementById('ySlider').value);
                selectedHero.z = parseInt(document.getElementById('zSlider').value);
                selectedHero.t = parseInt(document.getElementById('tSlider').value);
                selectedHero.psi = parseFloat(document.getElementById('psiSlider').value);
                selectedHero.deltaT = parseFloat(document.getElementById('deltaTSlider').value);
                generateSuperpositions();
            }
        }

        // Add event listeners
        document.querySelectorAll('.dimension-slider').forEach(slider => {
            slider.addEventListener('input', updateDimensionValues);
        });

        // Dessiner un h√©ros en 6D
        function drawHero6D(entity) {
            const baseX = entity.x;
            const baseY = entity.y;
            
            // Ajuster la position selon Z (profondeur)
            const scale = 1 + (entity.z / 100);
            const size = 20 * scale;
            
            // Couleur selon le temps
            let color;
            if (entity.t > 0) {
                // Futur - rouge/orange
                const intensity = Math.min(Math.abs(entity.t) / 50, 1);
                color = `hsla(20, 100%, ${50 + intensity * 30}%, ${entity.opacity || 1})`;
            } else if (entity.t < 0) {
                // Pass√© - bleu
                const intensity = Math.min(Math.abs(entity.t) / 50, 1);
                color = `hsla(220, 100%, ${50 + intensity * 30}%, ${entity.opacity || 1})`;
            } else {
                // Pr√©sent - couleur normale
                color = entity.color + (entity.opacity ? Math.floor(entity.opacity * 255).toString(16) : 'FF');
            }

            // Halo quantique si superposition
            if (entity.psi > 1 || entity.superIndex > 0) {
                const glowSize = size * 2 * entity.psi;
                const gradient = ctx.createRadialGradient(
                    baseX, baseY, 0,
                    baseX, baseY, glowSize
                );
                gradient.addColorStop(0, 'rgba(255, 0, 255, 0.3)');
                gradient.addColorStop(1, 'rgba(255, 0, 255, 0)');
                ctx.fillStyle = gradient;
                ctx.fillRect(baseX - glowSize, baseY - glowSize, glowSize * 2, glowSize * 2);
            }

            // Effet de vitesse temporelle (ŒîT)
            if (entity.deltaT !== 1) {
                ctx.strokeStyle = entity.deltaT > 1 ? '#ff0000' : '#0000ff';
                ctx.lineWidth = Math.abs(entity.deltaT - 1) * 3;
                ctx.beginPath();
                ctx.arc(baseX, baseY, size + 10, 0, Math.PI * 2 * entity.deltaT);
                ctx.stroke();
            }

            // Corps principal
            ctx.fillStyle = color;
            ctx.beginPath();
            ctx.arc(baseX, baseY, size, 0, Math.PI * 2);
            ctx.fill();

            // Contour
            ctx.strokeStyle = entity === selectedHero ? '#ffd700' : '#ffffff';
            ctx.lineWidth = entity === selectedHero ? 3 : 1;
            ctx.stroke();

            // Ic√¥ne
            ctx.font = `${size}px sans-serif`;
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText(entity.icon, baseX, baseY);

            // Nom si s√©lectionn√© ou proche
            if (entity === selectedHero || entity.superIndex === 0) {
                ctx.fillStyle = '#ffffff';
                ctx.font = '12px monospace';
                ctx.fillText(entity.name, baseX, baseY - size - 10);
                
                // Afficher les coordonn√©es 6D
                if (entity === selectedHero) {
                    ctx.font = '10px monospace';
                    ctx.fillStyle = '#00ff88';
                    const coords = `X:${Math.floor(entity.x)} Y:${Math.floor(entity.y)} Z:${entity.z} T:${entity.t} Œ®:${entity.psi} ŒîT:${entity.deltaT}`;
                    ctx.fillText(coords, baseX, baseY + size + 20);
                }
            }
        }

        // Animation principale
        function animate() {
            frameCount++;
            const now = performance.now();
            const delta = now - lastTime;
            
            // Update FPS
            if (frameCount % 30 === 0) {
                document.getElementById('fps').textContent = Math.round(1000 / delta);
            }
            lastTime = now;

            // Clear
            ctx.fillStyle = '#0a0a0a';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Grille de fond avec effet temporel
            drawSpaceTimeGrid();

            // Update time
            if (!isPaused) {
                worldTime += timeSpeed * 0.016;
                
                // Update les positions temporelles
                allEntities.forEach(entity => {
                    entity.t += entity.deltaT * timeSpeed * 0.016;
                    
                    // Mouvement al√©atoire subtil
                    if (Math.random() < 0.01) {
                        entity.x += (Math.random() - 0.5) * 5;
                        entity.y += (Math.random() - 0.5) * 5;
                    }
                });
            }

            // Trier par Z pour la profondeur
            allEntities.sort((a, b) => a.z - b.z);

            // Dessiner tous les h√©ros
            allEntities.forEach(entity => {
                if (!showSuperposition && entity.superIndex > 0) return;
                drawHero6D(entity);
            });

            // Update display
            document.getElementById('timeDisplay').textContent = 
                `T = ${worldTime.toFixed(1)} | Œ® = ${selectedHero ? selectedHero.psi.toFixed(1) : '1.0'} | ŒîT = ${timeSpeed.toFixed(1)}x`;
            
            // Update stats
            const superCount = allEntities.filter(e => e.superIndex > 0).length;
            document.getElementById('superpositions').textContent = superCount;
            document.getElementById('activeHeroes').textContent = heroes.length;

            requestAnimationFrame(animate);
        }

        // Dessiner la grille espace-temps
        function drawSpaceTimeGrid() {
            const spacing = 50;
            const time = worldTime * 0.01;
            
            ctx.strokeStyle = 'rgba(102, 126, 234, 0.1)';
            ctx.lineWidth = 1;

            // Lignes verticales avec distorsion temporelle
            for (let x = 0; x < canvas.width; x += spacing) {
                ctx.beginPath();
                ctx.moveTo(x + Math.sin(time + x * 0.01) * 10, 0);
                ctx.lineTo(x + Math.sin(time + x * 0.01 + Math.PI) * 10, canvas.height);
                ctx.stroke();
            }

            // Lignes horizontales avec distorsion temporelle
            for (let y = 0; y < canvas.height; y += spacing) {
                ctx.beginPath();
                ctx.moveTo(0, y + Math.cos(time + y * 0.01) * 10);
                ctx.lineTo(canvas.width, y + Math.cos(time + y * 0.01 + Math.PI) * 10);
                ctx.stroke();
            }
        }

        // Contr√¥les
        function pauseTime() {
            isPaused = !isPaused;
        }

        function playTime() {
            isPaused = false;
            timeSpeed = 1;
        }

        function speedUp() {
            timeSpeed = Math.min(timeSpeed * 2, 8);
        }

        function slowDown() {
            timeSpeed = Math.max(timeSpeed * 0.5, 0.125);
        }

        function toggleSuperposition() {
            showSuperposition = !showSuperposition;
        }

        function collapseAll() {
            heroes.forEach(hero => {
                hero.psi = 1;
            });
            generateSuperpositions();
            createHeroesList();
        }

        function resetDimensions() {
            document.querySelectorAll('.dimension-slider').forEach(slider => {
                slider.value = slider.getAttribute('min') === '1' ? '1' : '0';
            });
            updateDimensionValues();
        }

        function randomizePositions() {
            heroes.forEach(hero => {
                hero.x = Math.random() * canvas.width;
                hero.y = Math.random() * canvas.height;
                hero.z = Math.random() * 100 - 50;
                hero.t = Math.random() * 200 - 100;
                hero.psi = 1 + Math.random() * 3;
                hero.deltaT = 0.5 + Math.random() * 2;
            });
            generateSuperpositions();
            createHeroesList();
        }

        // Contr√¥les clavier
        document.addEventListener('keydown', (e) => {
            switch(e.key) {
                case ' ':
                    e.preventDefault();
                    pauseTime();
                    break;
                case 's':
                    toggleSuperposition();
                    break;
                case 'c':
                    collapseAll();
                    break;
                case 'r':
                    randomizePositions();
                    break;
            }
        });

        // D√©marrer
        animate();
    </script>
</body>
</html>
