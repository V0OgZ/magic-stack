<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üè∞ HEROES OF TIME - HOMM3 TEMPOREL üè∞</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: linear-gradient(45deg, #1a1a2e, #16213e, #0f3460);
            color: #fff;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow: hidden;
        }
        
        /* üó∫Ô∏è MAP CONTAINER - ADAPT√â DE HEROWO */
        .map-container {
            width: 100vw;
            height: 100vh;
            position: relative;
            overflow: hidden;
        }
        
        .hex-grid {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            display: grid;
            grid-template-columns: repeat(15, 60px);
            grid-template-rows: repeat(10, 52px);
            gap: 2px;
            z-index: 1;
        }
        
        .hex-cell {
            width: 60px;
            height: 52px;
            background: linear-gradient(135deg, rgba(26,26,46,0.3), rgba(15,52,96,0.3));
            border: 1px solid rgba(138,43,226,0.3);
            position: relative;
            cursor: pointer;
            transition: all 0.3s ease;
            clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%);
        }
        
        .hex-cell:hover {
            background: linear-gradient(135deg, rgba(138,43,226,0.5), rgba(255,20,147,0.3));
            transform: scale(1.1);
            z-index: 5;
        }
        
        .hex-cell.occupied {
            background: linear-gradient(135deg, rgba(255,215,0,0.4), rgba(255,140,0,0.4));
        }
        
        /* üè∞ ENTIT√âS SUR LA MAP */
        .entity {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 24px;
            animation: pulse 2s infinite;
        }
        
        .entity.hero { color: #FFD700; }
        .entity.monster { color: #FF4444; }
        .entity.town { color: #00FFFF; }
        .entity.artifact { color: #FF69B4; }
        
        @keyframes pulse {
            0%, 100% { transform: translate(-50%, -50%) scale(1); }
            50% { transform: translate(-50%, -50%) scale(1.2); }
        }
        
        /* üéÆ UI PANELS */
        .ui-panel {
            position: fixed;
            background: rgba(0,0,0,0.8);
            border: 2px solid #8A2BE2;
            border-radius: 10px;
            padding: 15px;
            color: #fff;
            backdrop-filter: blur(10px);
            z-index: 1000;
        }
        
        .hero-panel {
            top: 20px;
            left: 20px;
            width: 300px;
        }
        
        .resources-panel {
            top: 20px;
            right: 20px;
            width: 250px;
        }
        
        .regulators-panel {
            bottom: 20px;
            left: 20px;
            width: 320px;
        }
        
        .combat-panel {
            bottom: 20px;
            right: 20px;
            width: 280px;
        }
        
        /* ‚öñÔ∏è R√âGULATEURS ADAPT√âS */
        .regulator {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 8px;
            margin: 5px 0;
            background: rgba(138,43,226,0.2);
            border-radius: 5px;
            border-left: 4px solid;
        }
        
        .regulator.judge { border-left-color: #FFD700; }
        .regulator.hunter { border-left-color: #00FFFF; }
        .regulator.anna { border-left-color: #FF1493; }
        
        .regulator.active {
            background: rgba(138,43,226,0.4);
            box-shadow: 0 0 10px rgba(138,43,226,0.6);
        }
        
        .regulator-status {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #4CAF50;
        }
        
        .status-indicator.inactive { background: #666; }
        .status-indicator.warning { background: #FF9800; }
        
        /* üé¥ IC√îNES MODERNES */
        .resource-item {
            display: flex;
            align-items: center;
            gap: 8px;
            margin: 5px 0;
        }
        
        .resource-icon {
            width: 24px;
            height: 24px;
            text-align: center;
            font-size: 16px;
        }
        
        /* üéÆ CONTR√îLES */
        .controls {
            position: fixed;
            bottom: 50%;
            left: 50%;
            transform: translate(-50%, 50%);
            display: flex;
            gap: 10px;
            z-index: 1000;
        }
        
        .control-btn {
            background: rgba(138,43,226,0.8);
            border: none;
            color: #fff;
            padding: 12px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .control-btn:hover {
            background: rgba(255,20,147,0.8);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(138,43,226,0.4);
        }
        
        /* üåü EFFETS TEMPORELS */
        .temporal-effect {
            position: absolute;
            pointer-events: none;
            font-size: 20px;
            color: #FFD700;
            animation: temporalRise 2s ease-out forwards;
            z-index: 999;
        }
        
        @keyframes temporalRise {
            0% { opacity: 1; transform: translateY(0) scale(1); }
            100% { opacity: 0; transform: translateY(-50px) scale(1.5); }
        }
        
        /* üì± RESPONSIVE */
        @media (max-width: 768px) {
            .ui-panel { font-size: 12px; padding: 10px; }
            .hex-cell { width: 40px; height: 35px; }
            .hex-grid { grid-template-columns: repeat(10, 40px); }
        }
    </style>
</head>
<body>
    <!-- üó∫Ô∏è MAP PRINCIPALE -->
    <div class="map-container" id="mapContainer">
        <div class="hex-grid" id="hexGrid">
            <!-- Les cellules hexagonales seront g√©n√©r√©es par JS -->
        </div>
    </div>
    
    <!-- üè∞ PANEL H√âROS -->
    <div class="ui-panel hero-panel">
        <h3><i class="fas fa-user-crown"></i> H√©ros Actuel</h3>
        <div id="heroInfo">
            <div class="resource-item">
                <i class="fas fa-sword resource-icon" style="color: #FFD700;"></i>
                <span>Attaque: <span id="heroAttack">15</span></span>
            </div>
            <div class="resource-item">
                <i class="fas fa-shield resource-icon" style="color: #87CEEB;"></i>
                <span>D√©fense: <span id="heroDefense">12</span></span>
            </div>
            <div class="resource-item">
                <i class="fas fa-magic resource-icon" style="color: #DDA0DD;"></i>
                <span>Magie: <span id="heroMagic">8</span></span>
            </div>
            <div class="resource-item">
                <i class="fas fa-clock resource-icon" style="color: #FF1493;"></i>
                <span>Temporal Power: <span id="heroTemporal">100</span></span>
            </div>
        </div>
    </div>
    
    <!-- üí∞ PANEL RESSOURCES -->
    <div class="ui-panel resources-panel">
        <h3><i class="fas fa-coins"></i> Ressources</h3>
        <div class="resource-item">
            <i class="fas fa-coins resource-icon" style="color: #FFD700;"></i>
            <span id="gold">10000</span>
        </div>
        <div class="resource-item">
            <i class="fas fa-tree resource-icon" style="color: #8B4513;"></i>
            <span id="wood">20</span>
        </div>
        <div class="resource-item">
            <i class="fas fa-mountain resource-icon" style="color: #708090;"></i>
            <span id="stone">15</span>
        </div>
        <div class="resource-item">
            <i class="fas fa-gem resource-icon" style="color: #FF1493;"></i>
            <span id="gems">5</span>
        </div>
        <div class="resource-item">
            <i class="fas fa-bolt resource-icon" style="color: #FFD700;"></i>
            <span>Timeline: <span id="timeline">42</span></span>
        </div>
    </div>
    
    <!-- ‚öñÔ∏è PANEL R√âGULATEURS -->
    <div class="ui-panel regulators-panel">
        <h3><i class="fas fa-balance-scale"></i> Les 3 R√©gulateurs</h3>
        
        <div class="regulator judge active" id="judgeRegulator">
            <div class="regulator-status">
                <i class="fas fa-gavel" style="color: #FFD700;"></i>
                <span>Juge Temporel</span>
            </div>
            <div class="status-indicator" id="judgeStatus"></div>
        </div>
        
        <div class="regulator hunter" id="hunterRegulator">
            <div class="regulator-status">
                <i class="fas fa-search" style="color: #00FFFF;"></i>
                <span>Chasseur Paradoxes</span>
            </div>
            <div class="status-indicator" id="hunterStatus"></div>
        </div>
        
        <div class="regulator anna active" id="annaRegulator">
            <div class="regulator-status">
                <i class="fas fa-hourglass-half" style="color: #FF1493;"></i>
                <span>Anna Martel</span>
            </div>
            <div class="status-indicator" id="annaStatus"></div>
        </div>
        
        <button class="control-btn" onclick="activateTrinityRegulation()">
            <i class="fas fa-crown"></i>
            Trinity Regulation
        </button>
    </div>
    
    <!-- ‚öîÔ∏è PANEL COMBAT -->
    <div class="ui-panel combat-panel">
        <h3><i class="fas fa-crossed-swords"></i> Syst√®me Combat</h3>
        <select id="combatMode" onchange="setCombatMode(this.value)" style="width: 100%; background: #333; color: #fff; border: 1px solid #8A2BE2; padding: 5px;">
            <option value="quantum">üåÄ Collapse Quantique</option>
            <option value="tcg">üé¥ Combat TCG</option>
            <option value="classic">‚öîÔ∏è HOMM3 Classique</option>
            <option value="hybrid">‚ö° Hybride Temporal</option>
        </select>
        <div style="margin-top: 10px;">
            <button class="control-btn" onclick="initiateCombat()">
                <i class="fas fa-fist-raised"></i>
                D√©clencher Combat
            </button>
        </div>
    </div>
    
    <!-- üéÆ CONTR√îLES CENTRAUX -->
    <div class="controls">
        <button class="control-btn" onclick="moveHero()">
            <i class="fas fa-walking"></i>
            D√©placer
        </button>
        <button class="control-btn" onclick="castTemporalSpell()">
            <i class="fas fa-magic"></i>
            Sort Temporel
        </button>
        <button class="control-btn" onclick="openTimeline()">
            <i class="fas fa-history"></i>
            Timeline
        </button>
        <button class="control-btn" onclick="buildStructure()">
            <i class="fas fa-hammer"></i>
            Construire
        </button>
    </div>

    <script>
        // üéØ HOMM3 TEMPOREL - FUSION HEROICO + NOS R√âGULATEURS
        
        // √âtat du jeu
        const gameState = {
            currentPlayer: 1,
            turn: 1,
            timeline: 42,
            selectedHex: null,
            heroes: new Map(),
            towns: new Map(),
            combatMode: 'quantum'
        };
        
        // üó∫Ô∏è G√âN√âRATEUR DE MAP HEXAGONALE (ADAPT√â DE HEROWO)
        function generateHexGrid() {
            const grid = document.getElementById('hexGrid');
            const cols = 15;
            const rows = 10;
            
            for (let row = 0; row < rows; row++) {
                for (let col = 0; col < cols; col++) {
                    const hexCell = document.createElement('div');
                    hexCell.className = 'hex-cell';
                    hexCell.dataset.x = col;
                    hexCell.dataset.y = row;
                    hexCell.dataset.id = `${col}-${row}`;
                    
                    // √âv√©nement de clic
                    hexCell.addEventListener('click', () => selectHex(col, row));
                    
                    // Spawner des entit√©s al√©atoirement
                    if (Math.random() < 0.1) {
                        spawnRandomEntity(hexCell, col, row);
                    }
                    
                    grid.appendChild(hexCell);
                }
            }
        }
        
        // üè∞ SPAWN ENTIT√âS (H√âROS, VILLES, MONSTRES)
        function spawnRandomEntity(hexCell, x, y) {
            const entities = [
                { type: 'hero', icon: 'fas fa-user-crown', class: 'hero' },
                { type: 'monster', icon: 'fas fa-dragon', class: 'monster' },
                { type: 'town', icon: 'fas fa-city', class: 'town' },
                { type: 'artifact', icon: 'fas fa-gem', class: 'artifact' }
            ];
            
            const entity = entities[Math.floor(Math.random() * entities.length)];
            const entityEl = document.createElement('div');
            entityEl.className = `entity ${entity.class}`;
            entityEl.innerHTML = `<i class="${entity.icon}"></i>`;
            entityEl.dataset.type = entity.type;
            entityEl.dataset.x = x;
            entityEl.dataset.y = y;
            
            hexCell.appendChild(entityEl);
            hexCell.classList.add('occupied');
        }
        
        // üéØ S√âLECTION HEXAGONE
        function selectHex(x, y) {
            // D√©s√©lectionner l'ancien
            if (gameState.selectedHex) {
                gameState.selectedHex.style.border = '1px solid rgba(138,43,226,0.3)';
            }
            
            // S√©lectionner le nouveau
            const hexCell = document.querySelector(`[data-id="${x}-${y}"]`);
            hexCell.style.border = '3px solid #FFD700';
            gameState.selectedHex = hexCell;
            
            console.log(`Hexagone s√©lectionn√©: ${x}, ${y}`);
            
            // V√©rifier si il y a une entit√©
            const entity = hexCell.querySelector('.entity');
            if (entity) {
                showEntityInfo(entity);
            }
        }
        
        // üìä AFFICHAGE INFO ENTIT√â
        function showEntityInfo(entity) {
            const type = entity.dataset.type;
            const x = entity.dataset.x;
            const y = entity.dataset.y;
            
            createTemporalEffect(entity.parentElement, `${type.toUpperCase()} @${x},${y}`);
        }
        
        // ‚öñÔ∏è SYST√àME R√âGULATEURS (ADAPT√â DE NOTRE CHASSE TEMPORELLE)
        const REGULATORS = {
            judge: { active: true, lastCheck: Date.now() },
            hunter: { active: false, lastCheck: Date.now() },
            anna: { active: true, lastCheck: Date.now() }
        };
        
        // ü§ñ R√âGULATEUR JUGE
        function performTemporalJudgment() {
            console.log('‚öñÔ∏è Juge: V√©rification √©quilibre temporal...');
            
            // V√©rifier si un joueur domine trop
            const entities = document.querySelectorAll('.entity');
            const heroCount = document.querySelectorAll('.entity.hero').length;
            const monsterCount = document.querySelectorAll('.entity.monster').length;
            
            if (heroCount > monsterCount * 2) {
                console.log('‚öñÔ∏è Juge: D√©s√©quilibre d√©tect√©! Spawn de monstres...');
                spawnBalancingMonsters();
                createTemporalEffect(document.querySelector('.regulators-panel'), '√âQUILIBRAGE TEMPORAL');
            }
            
            updateRegulatorStatus('judge', 'active');
        }
        
        // üîç R√âGULATEUR CHASSEUR
        function huntTemporalParadoxes() {
            console.log('üîç Chasseur: Recherche de paradoxes...');
            
            // D√©tecter les entit√©s au m√™me endroit (paradoxe spatial)
            const positions = new Map();
            document.querySelectorAll('.entity').forEach(entity => {
                const pos = `${entity.dataset.x}-${entity.dataset.y}`;
                if (positions.has(pos)) {
                    console.log('üîç Chasseur: Paradoxe spatial d√©tect√©!');
                    resolveSpacialParadox(entity);
                }
                positions.set(pos, entity);
            });
            
            updateRegulatorStatus('hunter', 'active');
        }
        
        // ‚è≥ R√âGULATEUR ANNA MARTEL
        function applyAnnaDecaySystem() {
            console.log('‚è≥ Anna: Application du syst√®me de decay...');
            
            // Appliquer decay aux entit√©s immobiles
            document.querySelectorAll('.entity').forEach(entity => {
                if (!entity.dataset.lastMove || Date.now() - entity.dataset.lastMove > 30000) {
                    entity.style.opacity = '0.7';
                    entity.style.filter = 'grayscale(50%)';
                }
            });
            
            updateRegulatorStatus('anna', 'active');
        }
        
        // üåü TRINITY REGULATION
        async function activateTrinityRegulation() {
            console.log('üåü TRINITY REGULATION ACTIV√âE!');
            
            // Effet visuel spectaculaire
            document.body.style.animation = 'flash 0.5s ease';
            
            // Activer tous les r√©gulateurs
            REGULATORS.judge.active = true;
            REGULATORS.hunter.active = true;
            REGULATORS.anna.active = true;
            
            // Synchroniser via Magic Stack
            try {
                const response = await fetch('http://localhost:8082/api/magic/cast', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        spell: 'TRINITY_REGULATION',
                        caster: 'HOMM3_TEMPORAL_SYSTEM',
                        position: { 
                            x: 7, y: 5, z: 0, 
                            t: gameState.timeline, 
                            c: Math.random() * 10, 
                            psi: Math.PI 
                        }
                    })
                });
                
                if (response.ok) {
                    createTemporalEffect(document.querySelector('.regulators-panel'), 'üåü TRINITY ACTIVATED');
                    resetGameBalance();
                }
            } catch (error) {
                console.log('Trinity Regulation local activ√©e');
                createTemporalEffect(document.querySelector('.regulators-panel'), '‚öñÔ∏è √âQUILIBRE RESTAUR√â');
            }
            
            // Mettre √† jour tous les statuts
            updateRegulatorStatus('judge', 'active');
            updateRegulatorStatus('hunter', 'active');
            updateRegulatorStatus('anna', 'active');
        }
        
        // üéÆ FONCTIONS DE JEU
        function moveHero() {
            if (!gameState.selectedHex) {
                alert('S√©lectionnez d\'abord un hexagone!');
                return;
            }
            
            const hero = gameState.selectedHex.querySelector('.entity.hero');
            if (hero) {
                hero.dataset.lastMove = Date.now();
                hero.style.opacity = '1';
                hero.style.filter = 'none';
                createTemporalEffect(gameState.selectedHex, 'üö∂ HERO MOVED');
            }
        }
        
        async function castTemporalSpell() {
            if (!gameState.selectedHex) return;
            
            const spells = ['SHIFT', 'FORK', 'MERGE', 'COLLAPSE', 'TEMPORAL_HEAL'];
            const spell = spells[Math.floor(Math.random() * spells.length)];
            
            try {
                const response = await fetch('http://localhost:8082/api/magic/cast', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        spell: spell,
                        caster: 'HOMM3_HERO',
                        position: {
                            x: parseInt(gameState.selectedHex.dataset.x),
                            y: parseInt(gameState.selectedHex.dataset.y),
                            z: 0,
                            t: gameState.timeline,
                            c: Math.random() * 10,
                            psi: Math.random() * 2 * Math.PI
                        }
                    })
                });
                
                createTemporalEffect(gameState.selectedHex, `‚ú® ${spell}`);
            } catch (error) {
                createTemporalEffect(gameState.selectedHex, `üîÆ ${spell} LOCAL`);
            }
        }
        
        // ‚öîÔ∏è SYST√àME COMBAT HYBRIDE
        function setCombatMode(mode) {
            gameState.combatMode = mode;
            console.log(`Mode combat chang√©: ${mode}`);
        }
        
        async function initiateCombat() {
            if (!gameState.selectedHex) {
                alert('S√©lectionnez une cible!');
                return;
            }
            
            const entity = gameState.selectedHex.querySelector('.entity');
            if (!entity) return;
            
            console.log(`Combat ${gameState.combatMode} initi√©!`);
            
            switch (gameState.combatMode) {
                case 'quantum':
                    await resolveQuantumCombat(entity);
                    break;
                case 'tcg':
                    resolveTCGCombat(entity);
                    break;
                case 'classic':
                    resolveClassicCombat(entity);
                    break;
                case 'hybrid':
                    await resolveHybridCombat(entity);
                    break;
            }
        }
        
        // üåÄ COMBAT QUANTIQUE
        async function resolveQuantumCombat(target) {
            createTemporalEffect(gameState.selectedHex, 'üåÄ QUANTUM COMBAT');
            
            // Simulation collapse quantique
            const probability = Math.random();
            if (probability > 0.5) {
                target.style.opacity = '0.3';
                createTemporalEffect(gameState.selectedHex, 'üíÄ COLLAPSED');
            } else {
                createTemporalEffect(gameState.selectedHex, 'üõ°Ô∏è RESISTANCE');
            }
        }
        
        // üé¥ COMBAT TCG
        function resolveTCGCombat(target) {
            createTemporalEffect(gameState.selectedHex, 'üé¥ TCG BATTLE');
            
            // Simuler combat de cartes
            const heroCard = Math.floor(Math.random() * 10) + 1;
            const enemyCard = Math.floor(Math.random() * 10) + 1;
            
            if (heroCard > enemyCard) {
                createTemporalEffect(gameState.selectedHex, `üèÜ WIN ${heroCard}-${enemyCard}`);
            } else {
                createTemporalEffect(gameState.selectedHex, `üíî LOSE ${heroCard}-${enemyCard}`);
            }
        }
        
        // ‚öîÔ∏è COMBAT CLASSIQUE HOMM3
        function resolveClassicCombat(target) {
            createTemporalEffect(gameState.selectedHex, '‚öîÔ∏è CLASSIC COMBAT');
            
            // Logique HOMM3 traditionnelle
            const heroAttack = parseInt(document.getElementById('heroAttack').textContent);
            const heroDefense = parseInt(document.getElementById('heroDefense').textContent);
            
            const damage = Math.max(1, heroAttack - Math.floor(Math.random() * 5));
            createTemporalEffect(gameState.selectedHex, `üí• DMG: ${damage}`);
        }
        
        // ‚ö° COMBAT HYBRIDE
        async function resolveHybridCombat(target) {
            // Choisir le syst√®me selon la situation
            const distance = Math.sqrt(
                Math.pow(target.dataset.x - 7, 2) + 
                Math.pow(target.dataset.y - 5, 2)
            );
            
            if (distance < 3) {
                await resolveQuantumCombat(target);
            } else {
                resolveTCGCombat(target);
            }
        }
        
        // üé® EFFETS VISUELS
        function createTemporalEffect(parent, text) {
            const effect = document.createElement('div');
            effect.className = 'temporal-effect';
            effect.textContent = text;
            effect.style.left = (Math.random() * 50) + 'px';
            effect.style.top = (Math.random() * 30) + 'px';
            
            parent.appendChild(effect);
            
            setTimeout(() => {
                effect.remove();
            }, 2000);
        }
        
        // üîß FONCTIONS UTILITAIRES
        function updateRegulatorStatus(regulator, status) {
            const statusEl = document.getElementById(`${regulator}Status`);
            const regulatorEl = document.getElementById(`${regulator}Regulator`);
            
            statusEl.className = `status-indicator ${status}`;
            if (status === 'active') {
                regulatorEl.classList.add('active');
            }
        }
        
        function spawnBalancingMonsters() {
            const emptyCells = document.querySelectorAll('.hex-cell:not(.occupied)');
            const randomCell = emptyCells[Math.floor(Math.random() * emptyCells.length)];
            
            if (randomCell) {
                const x = randomCell.dataset.x;
                const y = randomCell.dataset.y;
                spawnRandomEntity(randomCell, x, y);
            }
        }
        
        function resolveSpacialParadox(entity) {
            entity.style.transform = 'translate(-50%, -50%) scale(0.8)';
            entity.style.filter = 'hue-rotate(180deg)';
            createTemporalEffect(entity.parentElement, 'üåÄ PARADOX RESOLVED');
        }
        
        function resetGameBalance() {
            // R√©initialiser l'√©quilibre du jeu
            document.querySelectorAll('.entity').forEach(entity => {
                entity.style.opacity = '1';
                entity.style.filter = 'none';
                entity.style.transform = 'translate(-50%, -50%) scale(1)';
            });
        }
        
        function openTimeline() {
            alert(`Timeline actuelle: ${gameState.timeline}\nTour: ${gameState.turn}`);
        }
        
        function buildStructure() {
            if (gameState.selectedHex && !gameState.selectedHex.classList.contains('occupied')) {
                gameState.selectedHex.innerHTML = '<div class="entity town"><i class="fas fa-city"></i></div>';
                gameState.selectedHex.classList.add('occupied');
                createTemporalEffect(gameState.selectedHex, 'üèóÔ∏è BUILT');
            }
        }
        
        // üöÄ INITIALISATION
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üè∞ HOMM3 Temporel - Initialisation...');
            
            // G√©n√©rer la map
            generateHexGrid();
            
            // D√©marrer les r√©gulateurs
            setInterval(performTemporalJudgment, 15000);
            setInterval(huntTemporalParadoxes, 10000);
            setInterval(applyAnnaDecaySystem, 60000);
            
            // CSS pour flash
            const style = document.createElement('style');
            style.textContent = `
                @keyframes flash {
                    0%, 100% { background: linear-gradient(45deg, #1a1a2e, #16213e, #0f3460); }
                    50% { background: linear-gradient(45deg, #8A2BE2, #FF1493, #FFD700); }
                }
            `;
            document.head.appendChild(style);
            
            console.log('‚úÖ HOMM3 Temporel pr√™t! Les 3 R√©gulateurs surveillent...');
        });
    </script>
</body>
</html>
