<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>⚡ VINCENT'S CARD BATTLE SYSTEM ⚡</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Exo+2:wght@300;400;600&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            color: #fff;
            font-family: 'Exo 2', sans-serif;
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        .game-container {
            position: relative;
            width: 100vw;
            height: 100vh;
            background: url('assets/FIGHT/Epic Battle of Arcane Heroes.png') center/cover;
        }
        
        .game-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
        }
        
        .title-bar {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 80px;
            background: linear-gradient(90deg, #ff6b35, #f7931e, #ff6b35);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 100;
            box-shadow: 0 4px 20px rgba(255, 107, 53, 0.5);
        }
        
        .title-text {
            font-family: 'Orbitron', monospace;
            font-size: 2.5rem;
            font-weight: 900;
            text-shadow: 0 0 20px #ff6b35;
            animation: pulseGlow 2s ease-in-out infinite alternate;
        }
        
        @keyframes pulseGlow {
            from { text-shadow: 0 0 20px #ff6b35, 0 0 30px #ff6b35; }
            to { text-shadow: 0 0 30px #ff6b35, 0 0 40px #f7931e; }
        }
        
        .battlefield {
            position: absolute;
            top: 80px;
            left: 0;
            right: 0;
            bottom: 200px;
            display: grid;
            grid-template-rows: 1fr 1fr;
            gap: 20px;
            padding: 20px;
        }
        
        .opponent-zone, .player-zone {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 15px;
            padding: 20px;
            border: 2px solid #ff6b35;
            border-radius: 15px;
            background: rgba(255, 107, 53, 0.1);
        }
        
        .card-slot {
            aspect-ratio: 2/3;
            border: 2px dashed #666;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        
        .card-slot:hover {
            border-color: #ff6b35;
            background: rgba(255, 107, 53, 0.2);
        }
        
        .hand-zone {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 200px;
            background: linear-gradient(to top, rgba(0, 0, 0, 0.9), rgba(0, 0, 0, 0.7));
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            padding: 20px;
            overflow-x: auto;
        }
        
        .card {
            width: 140px;
            height: 200px;
            background: linear-gradient(135deg, #2c1810, #4a2c17);
            border: 3px solid #ff6b35;
            border-radius: 12px;
            position: relative;
            cursor: pointer;
            transition: all 0.3s ease;
            overflow: hidden;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.6);
        }
        
        .card:hover {
            transform: translateY(-20px) scale(1.1);
            box-shadow: 0 15px 40px rgba(255, 107, 53, 0.6);
            z-index: 50;
        }
        
        .card-image {
            width: 100%;
            height: 60%;
            background-size: cover;
            background-position: center;
            border-bottom: 2px solid #ff6b35;
        }
        
        .card-content {
            padding: 8px;
            height: 40%;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        
        .card-name {
            font-family: 'Orbitron', monospace;
            font-size: 0.9rem;
            font-weight: 700;
            color: #ff6b35;
            text-align: center;
            text-shadow: 0 0 10px #ff6b35;
        }
        
        .card-effect {
            font-size: 0.7rem;
            color: #ccc;
            text-align: center;
            line-height: 1.2;
        }
        
        .card-cost {
            position: absolute;
            top: 8px;
            left: 8px;
            width: 30px;
            height: 30px;
            background: #ff6b35;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 900;
            color: #000;
            box-shadow: 0 0 15px #ff6b35;
        }
        
        .special-effects {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1000;
        }
        
        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: #ff6b35;
            border-radius: 50%;
            animation: float 3s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); opacity: 0; }
            50% { transform: translateY(-50px) rotate(180deg); opacity: 1; }
        }
        
        .action-buttons {
            position: absolute;
            top: 50%;
            right: 20px;
            transform: translateY(-50%);
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .action-btn {
            padding: 12px 20px;
            background: linear-gradient(45deg, #ff6b35, #f7931e);
            border: none;
            border-radius: 8px;
            color: #fff;
            font-family: 'Orbitron', monospace;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(255, 107, 53, 0.4);
        }
        
        .action-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 25px rgba(255, 107, 53, 0.6);
        }
        
        .combat-log {
            position: absolute;
            top: 100px;
            left: 20px;
            width: 300px;
            height: 200px;
            background: rgba(0, 0, 0, 0.8);
            border: 2px solid #ff6b35;
            border-radius: 10px;
            padding: 15px;
            overflow-y: auto;
            font-size: 0.9rem;
            line-height: 1.4;
        }
        
        .log-entry {
            margin-bottom: 8px;
            color: #ccc;
        }
        
        .log-entry.special {
            color: #ff6b35;
            font-weight: bold;
        }
        
        .briefcase-glow {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 200px;
            height: 120px;
            background: radial-gradient(circle, #ffd700, #ffed4e, transparent);
            border-radius: 50%;
            opacity: 0;
            animation: briefcaseGlow 4s ease-in-out;
        }
        
        @keyframes briefcaseGlow {
            0% { opacity: 0; transform: translate(-50%, -50%) scale(0); }
            50% { opacity: 0.8; transform: translate(-50%, -50%) scale(1.5); }
            100% { opacity: 0; transform: translate(-50%, -50%) scale(2); }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="game-overlay"></div>
        
        <div class="title-bar">
            <div class="title-text">⚡ VINCENT'S CARD BATTLE ⚡</div>
        </div>
        
        <div class="battlefield">
            <div class="opponent-zone" id="opponent-field">
                <div class="card-slot"></div>
                <div class="card-slot"></div>
                <div class="card-slot"></div>
                <div class="card-slot"></div>
                <div class="card-slot"></div>
            </div>
            
            <div class="player-zone" id="player-field">
                <div class="card-slot"></div>
                <div class="card-slot"></div>
                <div class="card-slot"></div>
                <div class="card-slot"></div>
                <div class="card-slot"></div>
            </div>
        </div>
        
        <div class="hand-zone" id="player-hand">
            <!-- Cards will be populated by JavaScript -->
        </div>
        
        <div class="action-buttons">
            <button class="action-btn" onclick="endTurn()">END TURN</button>
            <button class="action-btn" onclick="openBriefcase()">BRIEFCASE</button>
            <button class="action-btn" onclick="vincentQuote()">QUOTE</button>
        </div>
        
        <div class="combat-log" id="combat-log">
            <div class="log-entry special">⚡ Vincent Vega enters the battlefield...</div>
            <div class="log-entry">"I'm gonna get medieval on your ass... with CARDS!"</div>
        </div>
        
        <div class="special-effects" id="effects-layer"></div>
    </div>

    <script>
        // Vincent's Special Cards Data
        const vincentCards = [
            {
                id: 'ezekiel',
                name: 'Ezekiel 25:17',
                cost: 4,
                effect: 'Righteous Fury',
                description: 'And I will strike down upon thee...',
                image: 'assets/FIGHT/Warrior Through Time and Light.png',
                formula: 'ψ_DIVINE: ⚡⊙(Enemies ⟶ Righteous_Fury)',
                power: 7
            },
            {
                id: 'royale',
                name: 'Royale with Cheese',
                cost: 2,
                effect: 'European Logic',
                description: 'Converts damage to metric system',
                image: 'assets/FIGHT/Sorcerer of Time at Twilight.png',
                formula: 'ψ_METRIC: ⊙(Reality ⟶ European_Logic)',
                power: 4
            },
            {
                id: 'dance',
                name: 'Dance Contest Victory',
                cost: 3,
                effect: 'Revival + Style',
                description: 'Revive fallen ally with style points',
                image: 'assets/FIGHT/Cosmic Shaman and Temporal Reflection.png',
                formula: 'ψ_TWIST: ⊙(Mia ⟶ Revival + Dance)',
                power: 5
            },
            {
                id: 'briefcase',
                name: 'The Briefcase',
                cost: 5,
                effect: 'Mystery ∞',
                description: 'We\'re gonna be like three little Fonzies here',
                image: 'assets/FIGHT/Convergence of Cosmic Forces.png',
                formula: 'ψ_MYSTERY: ⊙(∅ ⟶ ∞)',
                power: 9
            }
        ];

        let playerHand = [...vincentCards];
        let gameState = {
            playerMana: 5,
            opponentMana: 5,
            turn: 'player'
        };

        // Initialize game
        function initGame() {
            renderHand();
            createParticles();
            logMessage("Game initialized. Vincent's briefcase glows ominously...", 'special');
        }

        // Render player hand
        function renderHand() {
            const handElement = document.getElementById('player-hand');
            handElement.innerHTML = '';
            
            playerHand.forEach(card => {
                const cardElement = createCardElement(card);
                handElement.appendChild(cardElement);
            });
        }

        // Create card element
        function createCardElement(card) {
            const cardDiv = document.createElement('div');
            cardDiv.className = 'card';
            cardDiv.onclick = () => playCard(card);
            
            cardDiv.innerHTML = `
                <div class="card-cost">${card.cost}</div>
                <div class="card-image" style="background-image: url('${card.image}')"></div>
                <div class="card-content">
                    <div class="card-name">${card.name}</div>
                    <div class="card-effect">${card.description}</div>
                </div>
            `;
            
            return cardDiv;
        }

        // Play a card
        async function playCard(card) {
            if (gameState.playerMana < card.cost) {
                logMessage("Not enough mana! Vincent looks frustrated.", 'special');
                return;
            }

            // Deduct mana
            gameState.playerMana -= card.cost;
            
            // Remove card from hand
            playerHand = playerHand.filter(c => c.id !== card.id);
            
            // Play effect
            await playCardEffect(card);
            
            // Update display
            renderHand();
            
            logMessage(`Vincent plays "${card.name}" - ${card.effect}!`, 'special');
        }

        // Play card effect
        async function playCardEffect(card) {
            const effectsLayer = document.getElementById('effects-layer');
            
            switch(card.id) {
                case 'ezekiel':
                    logMessage('"The path of the righteous man is beset on all sides..."');
                    createLightningEffect();
                    break;
                    
                case 'royale':
                    logMessage('"You know what they call a Quarter Pounder in Paris?"');
                    createMetricEffect();
                    break;
                    
                case 'dance':
                    logMessage('"I wanna dance, I wanna win!"');
                    createDanceEffect();
                    break;
                    
                case 'briefcase':
                    logMessage('"We\'re gonna be like three little Fonzies here. And what\'s Fonzie like?"');
                    await openBriefcase();
                    break;
            }

            // Send to backend (Merlash integration)
            try {
                const response = await fetch('/api/combat/vincent-special', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        card: card.id,
                        formula: card.formula,
                        power: card.power
                    })
                });
                
                if (response.ok) {
                    const result = await response.json();
                    logMessage(`Backend confirms: ${result.message}`, 'special');
                }
            } catch (error) {
                logMessage('Backend offline - running in offline mode', 'special');
            }
        }

        // Special effects
        function createLightningEffect() {
            const lightning = document.createElement('div');
            lightning.style.cssText = `
                position: absolute;
                top: 0;
                left: 50%;
                width: 4px;
                height: 100%;
                background: linear-gradient(to bottom, #fff, #ff6b35);
                transform: translateX(-50%);
                animation: lightning 0.5s ease-out;
            `;
            
            document.getElementById('effects-layer').appendChild(lightning);
            setTimeout(() => lightning.remove(), 500);
        }

        function createMetricEffect() {
            const metric = document.createElement('div');
            metric.innerHTML = '🧀 METRIC SYSTEM ACTIVATED 🧀';
            metric.style.cssText = `
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                font-size: 2rem;
                color: #ff6b35;
                font-weight: bold;
                animation: fadeInOut 2s ease-out;
            `;
            
            document.getElementById('effects-layer').appendChild(metric);
            setTimeout(() => metric.remove(), 2000);
        }

        function createDanceEffect() {
            const dance = document.createElement('div');
            dance.innerHTML = '💃🕺 TWIST CONTEST 🕺💃';
            dance.style.cssText = `
                position: absolute;
                top: 30%;
                left: 50%;
                transform: translate(-50%, -50%);
                font-size: 2rem;
                color: #f7931e;
                font-weight: bold;
                animation: dance 3s ease-in-out;
            `;
            
            document.getElementById('effects-layer').appendChild(dance);
            setTimeout(() => dance.remove(), 3000);
        }

        async function openBriefcase() {
            const briefcase = document.createElement('div');
            briefcase.className = 'briefcase-glow';
            document.getElementById('effects-layer').appendChild(briefcase);
            
            logMessage('💼 The briefcase opens with a golden glow...', 'special');
            logMessage('"What\'s in the briefcase? That\'s between me and Marcellus Wallace."');
            
            setTimeout(() => briefcase.remove(), 4000);
        }

        // Create floating particles
        function createParticles() {
            const effectsLayer = document.getElementById('effects-layer');
            
            setInterval(() => {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 2 + 's';
                
                effectsLayer.appendChild(particle);
                
                setTimeout(() => particle.remove(), 3000);
            }, 500);
        }

        // Game actions
        function endTurn() {
            gameState.turn = gameState.turn === 'player' ? 'opponent' : 'player';
            gameState.playerMana = Math.min(gameState.playerMana + 1, 10);
            logMessage(`Turn ended. Mana restored to ${gameState.playerMana}.`);
        }

        function vincentQuote() {
            const quotes = [
                '"I\'m gonna get medieval on your ass!"',
                '"Royale with cheese, baby!"',
                '"Say \'what\' again! I dare you!"',
                '"We\'re gonna be like three little Fonzies here."',
                '"And you will know my name is the Lord..."'
            ];
            
            const quote = quotes[Math.floor(Math.random() * quotes.length)];
            logMessage(quote, 'special');
        }

        // Combat log
        function logMessage(message, type = 'normal') {
            const log = document.getElementById('combat-log');
            const entry = document.createElement('div');
            entry.className = `log-entry ${type}`;
            entry.textContent = message;
            
            log.appendChild(entry);
            log.scrollTop = log.scrollHeight;
        }

        // Add CSS animations
        const style = document.createElement('style');
        style.textContent = `
            @keyframes lightning {
                0% { opacity: 0; transform: translateX(-50%) scaleY(0); }
                50% { opacity: 1; transform: translateX(-50%) scaleY(1); }
                100% { opacity: 0; transform: translateX(-50%) scaleY(1); }
            }
            
            @keyframes fadeInOut {
                0%, 100% { opacity: 0; transform: translate(-50%, -50%) scale(0.5); }
                50% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
            }
            
            @keyframes dance {
                0%, 100% { transform: translate(-50%, -50%) rotate(0deg) scale(1); }
                25% { transform: translate(-50%, -50%) rotate(-10deg) scale(1.1); }
                75% { transform: translate(-50%, -50%) rotate(10deg) scale(1.1); }
            }
        `;
        document.head.appendChild(style);

        // Initialize when page loads
        window.onload = initGame;
    </script>
</body>
</html>