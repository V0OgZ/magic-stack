<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üßô‚Äç‚ôÇÔ∏è AVALON TCG - LAUNCHER AVANC√â</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: linear-gradient(135deg, #1a1a2e, #16213e, #0f3460);
            color: #fff;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .launcher-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            animation: fadeInDown 1s ease-out;
        }

        .header h1 {
            font-size: 3rem;
            background: linear-gradient(45deg, #ffd700, #ff6b35, #f7931e);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
            text-shadow: 0 0 30px rgba(255, 215, 0, 0.5);
        }

        .header p {
            font-size: 1.2rem;
            color: #ccc;
            opacity: 0.8;
        }

        /* SECTION H√âROS */
        .hero-section {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .hero-section h2 {
            color: #ffd700;
            margin-bottom: 20px;
            font-size: 1.8rem;
        }

        .hero-creation {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .hero-form {
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 10px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            color: #ffd700;
            font-weight: bold;
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 10px;
            border: none;
            border-radius: 5px;
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
            font-size: 1rem;
        }

        .form-group input:focus, .form-group select:focus {
            outline: none;
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }

        .hero-stats {
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 10px;
        }

        .stat-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            padding: 8px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 5px;
        }

        .stat-name {
            font-weight: bold;
            color: #ffd700;
        }

        .stat-value {
            font-size: 1.2rem;
            color: #fff;
        }

        /* MODES DE JEU */
        .game-modes {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .mode-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            backdrop-filter: blur(10px);
        }

        .mode-card:hover {
            transform: translateY(-5px);
            border-color: #ffd700;
            box-shadow: 0 10px 30px rgba(255, 215, 0, 0.3);
        }

        .mode-card.disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .mode-card.disabled:hover {
            transform: none;
            border-color: transparent;
            box-shadow: none;
        }

        .mode-icon {
            font-size: 3rem;
            margin-bottom: 15px;
            display: block;
        }

        .mode-title {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 10px;
            color: #ffd700;
        }

        .mode-description {
            color: #ccc;
            line-height: 1.5;
            margin-bottom: 15px;
        }

        .mode-status {
            font-size: 0.9rem;
            padding: 5px 10px;
            border-radius: 15px;
            display: inline-block;
        }

        .status-ready {
            background: rgba(0, 255, 0, 0.2);
            color: #00ff00;
        }

        .status-dev {
            background: rgba(255, 165, 0, 0.2);
            color: #ffa500;
        }

        .status-soon {
            background: rgba(128, 128, 128, 0.2);
            color: #888;
        }

        /* BOUTONS */
        .btn {
            background: linear-gradient(45deg, #ff6b35, #f7931e);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 20px rgba(255, 107, 53, 0.4);
        }

        .btn:disabled {
            background: #666;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .btn-secondary {
            background: linear-gradient(45deg, #667eea, #764ba2);
        }

        .btn-secondary:hover {
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }

        /* ANIMATIONS */
        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in {
            animation: fadeIn 0.5s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* RESPONSIVE */
        @media (max-width: 768px) {
            .hero-creation {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .game-modes {
                grid-template-columns: 1fr;
            }
        }

        /* HERO DISPLAY */
        .current-hero {
            background: rgba(0, 255, 0, 0.1);
            border: 2px solid rgba(0, 255, 0, 0.3);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .hero-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .level-bar {
            background: rgba(255, 255, 255, 0.1);
            height: 10px;
            border-radius: 5px;
            overflow: hidden;
            margin-top: 5px;
        }

        .level-progress {
            background: linear-gradient(90deg, #00ff00, #ffd700);
            height: 100%;
            transition: width 0.3s ease;
        }
    </style>
</head>
<body>
    <div class="launcher-container">
        <div class="header">
            <h1>üßô‚Äç‚ôÇÔ∏è AVALON TCG</h1>
            <p>Launcher Avanc√© - Par MERLIN DIRECT</p>
        </div>

        <!-- SECTION H√âROS -->
        <div class="hero-section">
            <h2>üë§ Gestion des H√©ros</h2>
            
            <div id="currentHeroDisplay" class="current-hero" style="display: none;">
                <h3>H√©ros Actuel</h3>
                <div class="hero-info">
                    <div>
                        <div><strong>Nom:</strong> <span id="heroName"></span></div>
                        <div><strong>Classe:</strong> <span id="heroClass"></span></div>
                        <div><strong>Niveau:</strong> <span id="heroLevel"></span></div>
                        <div class="level-bar">
                            <div id="levelProgress" class="level-progress"></div>
                        </div>
                        <small id="expText"></small>
                    </div>
                    <div class="hero-stats">
                        <div class="stat-row">
                            <span class="stat-name">HP:</span>
                            <span class="stat-value"><span id="heroHp"></span>/<span id="heroMaxHp"></span></span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-name">Mana:</span>
                            <span class="stat-value"><span id="heroMana"></span>/<span id="heroMaxMana"></span></span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-name">ATK:</span>
                            <span class="stat-value" id="heroAttack"></span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-name">DEF:</span>
                            <span class="stat-value" id="heroDefense"></span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="hero-creation">
                <div class="hero-form">
                    <h3>Cr√©er un H√©ros</h3>
                    <div class="form-group">
                        <label for="heroNameInput">Nom du H√©ros:</label>
                        <input type="text" id="heroNameInput" placeholder="Entrez le nom..." maxlength="20">
                    </div>
                    <div class="form-group">
                        <label for="heroClassSelect">Classe:</label>
                        <select id="heroClassSelect">
                            <option value="GUERRIER">üó°Ô∏è Guerrier</option>
                            <option value="MAGE">üîÆ Mage</option>
                        </select>
                    </div>
                    <button class="btn" onclick="createHero()">Cr√©er H√©ros</button>
                </div>

                <div class="hero-stats">
                    <h3>Stats de Base</h3>
                    <div class="stat-row">
                        <span class="stat-name">Force (STR):</span>
                        <span class="stat-value" id="previewStr">10</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-name">Agilit√© (AGI):</span>
                        <span class="stat-value" id="previewAgi">10</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-name">Intelligence (INT):</span>
                        <span class="stat-value" id="previewInt">10</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-name">Vitalit√© (VIT):</span>
                        <span class="stat-value" id="previewVit">10</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- MODES DE JEU -->
        <div class="game-modes">
            <div class="mode-card" onclick="launchMode('tactical_combat')">
                <span class="mode-icon">‚öîÔ∏è</span>
                <div class="mode-title">Combat Tactique</div>
                <div class="mode-description">
                    Combat sur grille 3x3 avec positionnement strat√©gique, 
                    syst√®me de progression et artefacts intelligents.
                </div>
                <span class="mode-status status-ready">‚úÖ Pr√™t</span>
            </div>

            <div class="mode-card" onclick="launchMode('card_battle')">
                <span class="mode-icon">üÉè</span>
                <div class="mode-title">Bataille de Cartes</div>
                <div class="mode-description">
                    Mode de combat classique avec cartes, sorts et effets magiques.
                    Syst√®me original AVALON TCG.
                </div>
                <span class="mode-status status-ready">‚úÖ Pr√™t</span>
            </div>

            <div class="mode-card disabled">
                <span class="mode-icon">üó∫Ô∏è</span>
                <div class="mode-title">Exploration</div>
                <div class="mode-description">
                    Explorez le monde d'AVALON, d√©couvrez des tr√©sors, 
                    rencontrez des PNJ et accomplissez des qu√™tes.
                </div>
                <span class="mode-status status-dev">üîß En d√©veloppement</span>
            </div>

            <div class="mode-card disabled">
                <span class="mode-icon">üèÜ</span>
                <div class="mode-title">Ar√®ne PvP</div>
                <div class="mode-description">
                    Affrontez d'autres joueurs dans des combats class√©s.
                    Montez dans le classement et d√©bloquez des r√©compenses.
                </div>
                <span class="mode-status status-soon">‚è≥ Bient√¥t</span>
            </div>

            <div class="mode-card disabled">
                <span class="mode-icon">üë•</span>
                <div class="mode-title">Coop√©ratif</div>
                <div class="mode-description">
                    √âquipe-toi avec des amis pour affronter des boss l√©gendaires
                    et partager le butin.
                </div>
                <span class="mode-status status-soon">‚è≥ Bient√¥t</span>
            </div>

            <div class="mode-card" onclick="launchMode('sandbox')">
                <span class="mode-icon">üß™</span>
                <div class="mode-title">Mode Test</div>
                <div class="mode-description">
                    Testez les m√©caniques, cr√©ez des scenarios personnalis√©s
                    et exp√©rimentez avec les syst√®mes.
                </div>
                <span class="mode-status status-ready">‚úÖ Pr√™t</span>
            </div>
        </div>

        <div style="text-align: center; margin-top: 40px;">
            <button class="btn btn-secondary" onclick="showSettings()">‚öôÔ∏è Param√®tres</button>
            <button class="btn btn-secondary" onclick="showCredits()">‚ÑπÔ∏è Cr√©dits</button>
        </div>
    </div>

    <!-- Scripts -->
    <script src="hero-progression-system.js"></script>
    <script src="tactical-combat-engine.js"></script>
    <script src="offline-card-engine.js"></script>
    
    <script>
        // üßô‚Äç‚ôÇÔ∏è LAUNCHER PRINCIPAL
        let heroSystem = null;
        let combatEngine = null;
        let currentHero = null;

        // Initialisation
        document.addEventListener('DOMContentLoaded', function() {
            console.log("üöÄ Initialisation du launcher AVALON TCG...");
            
            heroSystem = new HeroProgressionSystem();
            combatEngine = new TacticalCombatEngine(heroSystem);
            
            loadCurrentHero();
            updatePreview();
            
            console.log("‚úÖ Launcher initialis√© !");
        });

        // GESTION H√âROS
        function createHero() {
            const name = document.getElementById('heroNameInput').value.trim();
            const heroClass = document.getElementById('heroClassSelect').value;
            
            if (!name) {
                alert('‚ùå Veuillez entrer un nom pour votre h√©ros !');
                return;
            }
            
            if (name.length < 2) {
                alert('‚ùå Le nom doit faire au moins 2 caract√®res !');
                return;
            }
            
            // Cr√©er le h√©ros
            currentHero = heroSystem.createHero(name, heroClass);
            heroSystem.saveHero(currentHero);
            
            // Sauvegarder comme h√©ros actuel
            localStorage.setItem('avalon_current_hero', currentHero.id);
            
            updateHeroDisplay();
            
            // Reset form
            document.getElementById('heroNameInput').value = '';
            
            console.log(`‚úÖ H√©ros cr√©√©: ${currentHero.name} (${currentHero.class})`);
            alert(`üéâ H√©ros ${currentHero.name} cr√©√© avec succ√®s !`);
        }

        function loadCurrentHero() {
            const currentHeroId = localStorage.getItem('avalon_current_hero');
            if (currentHeroId) {
                currentHero = heroSystem.loadHero(currentHeroId);
                if (currentHero) {
                    updateHeroDisplay();
                }
            }
        }

        function updateHeroDisplay() {
            if (!currentHero) {
                document.getElementById('currentHeroDisplay').style.display = 'none';
                return;
            }
            
            const heroInfo = heroSystem.getHeroInfo(currentHero.id);
            
            document.getElementById('currentHeroDisplay').style.display = 'block';
            document.getElementById('heroName').textContent = heroInfo.name;
            document.getElementById('heroClass').textContent = heroInfo.class;
            document.getElementById('heroLevel').textContent = heroInfo.level;
            document.getElementById('heroHp').textContent = heroInfo.stats.currentHp;
            document.getElementById('heroMaxHp').textContent = heroInfo.stats.maxHp;
            document.getElementById('heroMana').textContent = heroInfo.stats.currentMana;
            document.getElementById('heroMaxMana').textContent = heroInfo.stats.maxMana;
            document.getElementById('heroAttack').textContent = heroInfo.stats.attack;
            document.getElementById('heroDefense').textContent = heroInfo.stats.defense;
            
            // Barre d'exp√©rience
            document.getElementById('levelProgress').style.width = heroInfo.nextLevelProgress + '%';
            document.getElementById('expText').textContent = 
                `${heroInfo.experience}/${heroInfo.experienceToNext} XP (${heroInfo.nextLevelProgress}%)`;
        }

        function updatePreview() {
            const heroClass = document.getElementById('heroClassSelect').value;
            
            // Stats de base selon la classe
            let stats = { str: 10, agi: 10, int: 10, vit: 10 };
            
            if (heroClass === 'GUERRIER') {
                stats = { str: 12, agi: 10, int: 8, vit: 12 };
            } else if (heroClass === 'MAGE') {
                stats = { str: 8, agi: 10, int: 14, vit: 10 };
            }
            
            document.getElementById('previewStr').textContent = stats.str;
            document.getElementById('previewAgi').textContent = stats.agi;
            document.getElementById('previewInt').textContent = stats.int;
            document.getElementById('previewVit').textContent = stats.vit;
        }

        // LANCEMENT DES MODES
        function launchMode(mode) {
            if (!currentHero) {
                alert('‚ùå Vous devez cr√©er un h√©ros avant de jouer !');
                return;
            }
            
            console.log(`üöÄ Lancement du mode: ${mode}`);
            
            switch (mode) {
                case 'tactical_combat':
                    launchTacticalCombat();
                    break;
                case 'card_battle':
                    launchCardBattle();
                    break;
                case 'sandbox':
                    launchSandbox();
                    break;
                default:
                    alert('‚ùå Mode non impl√©ment√©: ' + mode);
            }
        }

        function launchTacticalCombat() {
            // Cr√©er un ennemi de test
            const enemy = {
                name: "Gobelin Guerrier",
                level: Math.max(1, currentHero.level - 1),
                hp: 40 + (currentHero.level * 5),
                mana: 20,
                attack: 10 + (currentHero.level * 2),
                defense: 5 + currentHero.level,
                magicPower: 8,
                initiative: 8 + currentHero.level,
                criticalChance: 5,
                dodgeChance: 8,
                behavior: "aggressive",
                expReward: 30 + (currentHero.level * 5),
                goldReward: 15 + (currentHero.level * 2)
            };
            
            // Sauvegarder les donn√©es de combat
            sessionStorage.setItem('avalon_combat_hero', currentHero.id);
            sessionStorage.setItem('avalon_combat_enemy', JSON.stringify(enemy));
            
            // Rediriger vers l'interface de combat
            window.location.href = 'tactical-combat-interface.html';
        }

        function launchCardBattle() {
            // Rediriger vers l'ancien syst√®me TCG
            window.location.href = 'tcg-battle-interface.html';
        }

        function launchSandbox() {
            alert('üß™ Mode Sandbox - Fonctionnalit√©s de test disponibles dans la console !');
            
            // Rendre les syst√®mes accessibles globalement pour les tests
            window.testHero = currentHero;
            window.testHeroSystem = heroSystem;
            window.testCombatEngine = combatEngine;
            
            console.log("üß™ Mode Sandbox activ√© !");
            console.log("Variables disponibles: testHero, testHeroSystem, testCombatEngine");
            console.log("Exemple: testHeroSystem.gainExperience(testHero.id, 100, 'test')");
        }

        function showSettings() {
            alert('‚öôÔ∏è Param√®tres - √Ä impl√©menter');
        }

        function showCredits() {
            alert(`‚ÑπÔ∏è AVALON TCG - Launcher Avanc√©
            
üßô‚Äç‚ôÇÔ∏è Cr√©√© par MERLIN DIRECT
üìÖ JOUR 12 - C√©l√©bration

Syst√®mes impl√©ment√©s:
‚úÖ Progression de h√©ros
‚úÖ Combat tactique 3x3
‚úÖ Artefacts intelligents
‚úÖ Arbres de comp√©tences
‚úÖ Syst√®me anti-noob-trap

Action > Documentation !`);
        }

        // Event listeners
        document.getElementById('heroClassSelect').addEventListener('change', updatePreview);
        
        // Raccourcis clavier
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' && document.getElementById('heroNameInput') === document.activeElement) {
                createHero();
            }
        });
    </script>
</body>
</html>