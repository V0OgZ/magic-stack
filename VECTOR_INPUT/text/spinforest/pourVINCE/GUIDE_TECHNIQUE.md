# üîß GUIDE TECHNIQUE D√âTAILL√â

## üìä DIAGRAMME D'ARCHITECTURE

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    UTILISATEUR                           ‚îÇ
‚îÇ                  (Navigateur Web)                        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                         ‚îÇ
                         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                   REALGAME/play.html                     ‚îÇ
‚îÇ              (Interface de jeu principale)               ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Canvas ‚îÇ HUD ‚îÇ Inventaire ‚îÇ Messages ‚îÇ Dialogues       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
              ‚îÇ
              ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                  SYST√àMES DE JEU                         ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ Navigation   ‚îÇ   Combat     ‚îÇ  Narration   ‚îÇ Physique  ‚îÇ
‚îÇ (BRISURE)    ‚îÇ (Temps r√©el) ‚îÇ (Dialogues)  ‚îÇ (Preview) ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ ‚Ä¢ Portails   ‚îÇ ‚Ä¢ Attaques   ‚îÇ ‚Ä¢ NPCs       ‚îÇ ‚Ä¢ Gravit√© ‚îÇ
‚îÇ ‚Ä¢ T√©l√©port   ‚îÇ ‚Ä¢ D√©g√¢ts     ‚îÇ ‚Ä¢ Choix      ‚îÇ ‚Ä¢ Particules‚îÇ
‚îÇ ‚Ä¢ Dimensions ‚îÇ ‚Ä¢ IA ennemis ‚îÇ ‚Ä¢ Sc√©narios  ‚îÇ ‚Ä¢ Quantique‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
              ‚îÇ
              ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    √âTAT DU JEU                           ‚îÇ
‚îÇ                   (gameState)                            ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ player: {x, y, health, mana, energy}                    ‚îÇ
‚îÇ objects: [{x, y, type, icon}]                           ‚îÇ
‚îÇ enemies: [{x, y, health, icon}]                         ‚îÇ
‚îÇ portals: [{x, y, color, destination}]                   ‚îÇ
‚îÇ camera: {x, y, zoom}                                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
              ‚îÇ
              ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                  API WALTER (8080)                       ‚îÇ
‚îÇ              (Backend Spring Boot)                       ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ /api/magic-formulas/execute                             ‚îÇ
‚îÇ /actuator/health                                        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üéÆ FLUX DE JEU D√âTAILL√â

### 1. **Initialisation**
```javascript
init() {
    1. Cr√©er canvas (plein √©cran)
    2. Charger h√©ros sauvegard√©s
    3. Initialiser syst√®mes (BRISURE, Combat, etc.)
    4. Cr√©er le monde (objets, NPCs, ennemis)
    5. Configurer contr√¥les
    6. Lancer gameLoop()
}
```

### 2. **Boucle de jeu (60 FPS)**
```javascript
gameLoop() {
    1. UPDATE:
       - Lire inputs clavier/souris
       - D√©placer joueur
       - Mettre √† jour ennemis
       - R√©g√©n√©rer √©nergie
       - V√©rifier collisions
       
    2. RENDER:
       - Clear canvas
       - Dessiner grille ISO
       - Dessiner objets/NPCs
       - Dessiner portails (anim√©s)
       - Dessiner ennemis
       - Dessiner joueur
       - Dessiner effets
       
    3. REPEAT (requestAnimationFrame)
}
```

### 3. **Syst√®me de coordonn√©es**
```
Monde: 100x80 tuiles
Tuile: 40x40 pixels
Position joueur: En tuiles (float)
Cam√©ra: Suit le joueur, centr√©e
```

---

## üíæ STRUCTURE DES DONN√âES

### Player (Joueur)
```javascript
player: {
    x: 50,              // Position X en tuiles
    y: 40,              // Position Y en tuiles
    health: 100,        // Points de vie
    maxHealth: 100,     
    mana: 100,          // Points de magie
    maxMana: 100,
    energy: 100,        // √ânergie BRISURE
    maxEnergy: 100,
    speed: 0.5,         // Vitesse d√©placement
    sprite: 'üéØ'        // Apparence
}
```

### Portail
```javascript
portal: {
    x: 50,              // Position X
    y: 30,              // Position Y
    icon: 'üåÄ',         // Visuel
    color: '#8a2be2',   // Couleur aura
    name: 'Portail Standard',
    energyCost: 25,     // Co√ªt utilisation
    destination: {      // T√©l√©portation
        x: 20,
        y: 20
    }
}
```

### Ennemi
```javascript
enemy: {
    x: 60,              // Position
    y: 40,
    icon: 'üë∫',         // Visuel
    name: 'Gobelin',
    health: 30,         // Points de vie
    maxHealth: 30,
    damage: 5           // D√©g√¢ts (pas encore impl√©ment√©)
}
```

---

## üîå CONNEXIONS BACKEND

### 1. **Health Check**
```javascript
GET http://localhost:8080/actuator/health
Response: {"status": "UP"}
```

### 2. **Ex√©cuter formule magique**
```javascript
POST http://localhost:8080/api/magic-formulas/execute
Body: {
    "formula": "TELEPORT_HERO",
    "parameters": {
        "heroId": "sid-meier",
        "x": 10,
        "y": 20
    }
}
```

### 3. **Formules disponibles**
- `TELEPORT_HERO` : T√©l√©portation simple
- `CREATE_PORTAL` : Cr√©er un portail
- `PHASE_SHIFT` : Changer de dimension
- `QUANTUM_COLLAPSE` : Effet quantique

---

## üõ†Ô∏è COMMENT MODIFIER LE JEU

### Ajouter un nouvel ennemi
```javascript
// Dans createWorld()
game.enemies.push({
    x: 45,              // Position
    y: 50,
    icon: 'üßü',         // Emoji ou image
    name: 'Zombie',
    health: 60
});
```

### Ajouter un nouvel item
```javascript
// Dans useItem()
if (slot === 6) {
    // Nouvel item slot 6
    showMessage("Super pouvoir activ√© !");
    game.player.health = 100;  // Full heal
}
```

### Changer la vitesse
```javascript
// Dans game.player
speed: 1.0  // Au lieu de 0.5 (2x plus rapide)
```

### Ajouter un NPC
```javascript
game.objects.push({
    x: 55,
    y: 45,
    icon: 'üßô‚Äç‚ôÄÔ∏è',
    name: 'Sorci√®re',
    type: 'npc',
    dialogue: "Je vends des potions !"
});
```

---

## üö® POINTS D'EXTENSION

### 1. **Syst√®me de sauvegarde**
```javascript
// Sauvegarder
localStorage.setItem('gameState', JSON.stringify(game));

// Charger
const saved = localStorage.getItem('gameState');
if (saved) game = JSON.parse(saved);
```

### 2. **Multijoueur (WebSocket)**
```javascript
const ws = new WebSocket('ws://localhost:8080/game');
ws.onmessage = (event) => {
    const data = JSON.parse(event.data);
    // Synchroniser autres joueurs
};
```

### 3. **Sons**
```javascript
const audio = new Audio('sword.mp3');
audio.play();  // Lors d'une attaque
```

### 4. **Particules**
```javascript
// Utiliser le syst√®me d'URZ-K√îM
import { QuantumEngine } from './quantum-physics.js';
quantumEngine.createPortalEffect('VORTEX', position);
```

---

## üì± COMPATIBILIT√â

### Navigateurs support√©s
- ‚úÖ Chrome (recommand√©)
- ‚úÖ Firefox
- ‚úÖ Safari
- ‚úÖ Edge
- ‚ö†Ô∏è Mobile (contr√¥les tactiles pas impl√©ment√©s)

### Configuration minimale
- RAM: 2GB
- CPU: Tout processeur moderne
- GPU: Pas n√©cessaire (Canvas 2D)
- R√©solution: 1280x720 minimum

---

## üîç DEBUGGING

### Console JavaScript (F12)
```javascript
// Voir √©tat du jeu
console.log(game);

// T√©l√©porter joueur
game.player.x = 10;
game.player.y = 10;

// Donner √©nergie
game.player.energy = 100;

// Tuer tous les ennemis
game.enemies = [];
```

### Mode Debug (F3 in-game)
Affiche:
- FPS
- Position joueur
- Tuile actuelle
- Nombre d'entit√©s

---

## üìö RESSOURCES

### Fichiers importants
- `REALGAME/play.html` : Jeu principal
- `REALGAME/core/engine/UnifiedEngine.js` : Moteur unifi√©
- `REALGAME/heroes/heroes-data.json` : Donn√©es h√©ros
- `REALGAME/scenarios/*.hots` : Sc√©narios

### Documentation API
- Spring Boot : http://localhost:8080/swagger-ui.html
- HOTS Language : Voir `AVALON/ECOLE/GRAMMAIRE/`

### Assets
- Images Vincent : `REALGAME/FromVINCE/`
- Ymagirie : `Ymagirie/`
- Ic√¥nes : Emojis Unicode

---

Cette doc technique devrait t'aider √† comprendre comment tout fonctionne sous le capot ! üîß