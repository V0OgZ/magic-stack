<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Heroes of Time - Memento Archive Explorer</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@600&family=Crimson+Text:ital,wght@0,400;1,400&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Crimson Text', serif;
            background: #0a0a0a;
            color: #f0e6d6;
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
        }
        
        /* Effet Memento avec particules */
        .memory-particles {
            position: fixed;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }
        
        .particle {
            position: absolute;
            width: 2px;
            height: 2px;
            background: #ffd700;
            border-radius: 50%;
            opacity: 0;
            animation: float-up 10s infinite linear;
        }
        
        @keyframes float-up {
            0% {
                opacity: 0;
                transform: translateY(100vh) scale(0);
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                opacity: 0;
                transform: translateY(-100vh) scale(1.5);
            }
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 2;
        }
        
        /* Header avec effet temporel */
        .header {
            text-align: center;
            padding: 40px 0;
            background: linear-gradient(135deg, rgba(139, 115, 85, 0.1), rgba(255, 215, 0, 0.05));
            border-radius: 20px;
            margin-bottom: 40px;
            position: relative;
        }
        
        h1 {
            font-family: 'Cinzel', serif;
            font-size: 3em;
            color: #ffd700;
            text-shadow: 0 0 30px rgba(255, 215, 0, 0.5);
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: 1.2em;
            color: #90ee90;
            font-style: italic;
        }
        
        /* Barre de recherche Memento */
        .search-container {
            background: linear-gradient(135deg, rgba(30, 30, 40, 0.9), rgba(50, 50, 70, 0.9));
            border: 2px solid #8b7355;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }
        
        .search-box {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .search-input {
            flex: 1;
            background: rgba(0, 0, 0, 0.5);
            border: 2px solid #8b7355;
            border-radius: 10px;
            padding: 15px 20px;
            color: #f0e6d6;
            font-size: 1.1em;
            font-family: 'Crimson Text', serif;
        }
        
        .search-input::placeholder {
            color: rgba(240, 230, 214, 0.5);
        }
        
        .search-input:focus {
            outline: none;
            border-color: #ffd700;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.3);
        }
        
        .search-btn {
            background: linear-gradient(135deg, #8b7355, #5d4e37);
            border: 2px solid #8b7355;
            border-radius: 10px;
            padding: 15px 30px;
            color: #ffd700;
            font-size: 1.1em;
            font-family: 'Cinzel', serif;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .search-btn:hover {
            background: linear-gradient(135deg, #a08060, #6d5e47);
            box-shadow: 0 5px 20px rgba(255, 215, 0, 0.3);
            transform: translateY(-2px);
        }
        
        /* Filtres de recherche */
        .filters {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .filter-tag {
            background: rgba(139, 115, 85, 0.2);
            border: 1px solid #8b7355;
            border-radius: 20px;
            padding: 8px 16px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9em;
        }
        
        .filter-tag:hover {
            background: rgba(139, 115, 85, 0.4);
        }
        
        .filter-tag.active {
            background: #8b7355;
            color: #ffd700;
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.3);
        }
        
        /* Grille de r√©sultats */
        .results-grid {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 20px;
            margin-bottom: 40px;
        }
        
        /* Panel lat√©ral des archives */
        .archives-panel {
            background: rgba(30, 30, 40, 0.9);
            border: 2px solid #8b7355;
            border-radius: 15px;
            padding: 20px;
            height: fit-content;
            max-height: 600px;
            overflow-y: auto;
        }
        
        .archives-panel h3 {
            font-family: 'Cinzel', serif;
            color: #ffd700;
            margin-bottom: 15px;
            font-size: 1.3em;
        }
        
        .archive-item {
            background: rgba(139, 115, 85, 0.1);
            border-left: 3px solid #8b7355;
            padding: 10px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .archive-item:hover {
            background: rgba(139, 115, 85, 0.2);
            border-left-color: #ffd700;
            transform: translateX(5px);
        }
        
        .archive-item .title {
            color: #ffcc66;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .archive-item .type {
            font-size: 0.8em;
            color: #90ee90;
        }
        
        /* Zone de r√©sultats principale */
        .results-container {
            background: rgba(30, 30, 40, 0.9);
            border: 2px solid #8b7355;
            border-radius: 15px;
            padding: 30px;
            min-height: 400px;
        }
        
        .result-card {
            background: linear-gradient(135deg, rgba(139, 115, 85, 0.1), rgba(255, 215, 0, 0.02));
            border: 1px solid #8b7355;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }
        
        .result-card::before {
            content: "";
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 215, 0, 0.1), transparent);
            transition: left 0.5s;
        }
        
        .result-card:hover::before {
            left: 100%;
        }
        
        .result-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(255, 215, 0, 0.2);
        }
        
        .result-title {
            font-family: 'Cinzel', serif;
            color: #ffd700;
            font-size: 1.4em;
            margin-bottom: 10px;
        }
        
        .result-content {
            color: #f0e6d6;
            line-height: 1.8;
            margin-bottom: 15px;
        }
        
        .formula-display {
            background: #000;
            border: 1px solid #00ff00;
            border-radius: 5px;
            padding: 15px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            color: #00ff00;
            font-size: 1.1em;
        }
        
        .result-meta {
            display: flex;
            gap: 15px;
            font-size: 0.9em;
            color: #90ee90;
        }
        
        .result-meta span {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        /* Panneau Memento (Clippy am√©lior√©) */
        .memento-assistant {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 350px;
            background: linear-gradient(135deg, rgba(30, 30, 40, 0.95), rgba(50, 50, 70, 0.95));
            border: 2px solid #ffd700;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            z-index: 1000;
            transform: translateY(calc(100% + 40px));
            transition: transform 0.3s ease;
        }
        
        .memento-assistant.active {
            transform: translateY(0);
        }
        
        .memento-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .memento-title {
            color: #ffd700;
            font-family: 'Cinzel', serif;
            font-size: 1.2em;
        }
        
        .memento-close {
            background: none;
            border: none;
            color: #ffd700;
            font-size: 1.5em;
            cursor: pointer;
        }
        
        .memento-content {
            color: #f0e6d6;
            line-height: 1.6;
        }
        
        .memento-suggestions {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #8b7355;
        }
        
        .suggestion-link {
            display: block;
            color: #ffcc66;
            text-decoration: none;
            padding: 5px;
            margin: 5px 0;
            transition: all 0.3s;
        }
        
        .suggestion-link:hover {
            color: #ffd700;
            transform: translateX(5px);
        }
        
        /* Bouton Memento flottant */
        .memento-trigger {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #ffd700, #ffaa00);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 30px;
            cursor: pointer;
            box-shadow: 0 5px 20px rgba(255, 215, 0, 0.5);
            z-index: 999;
            transition: all 0.3s;
        }
        
        .memento-trigger:hover {
            transform: scale(1.1);
            box-shadow: 0 5px 30px rgba(255, 215, 0, 0.8);
        }
        
        /* Loading animation */
        .loading {
            text-align: center;
            padding: 40px;
        }
        
        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 3px solid rgba(255, 215, 0, 0.3);
            border-top: 3px solid #ffd700;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .results-grid {
                grid-template-columns: 1fr;
            }
            
            .archives-panel {
                max-height: 200px;
            }
            
            h1 {
                font-size: 2em;
            }
        }
    </style>
</head>
<body>
    <!-- Particules Memento -->
    <div class="memory-particles" id="particles"></div>
    
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>üìö MEMENTO ARCHIVE EXPLORER</h1>
            <div class="subtitle">Explorez les souvenirs temporels de Heroes of Time</div>
        </div>
        
        <!-- Barre de recherche -->
        <div class="search-container">
            <div class="search-box">
                <input type="text" class="search-input" id="searchInput" 
                       placeholder="Recherchez dans les archives temporelles... (ex: formule, h√©ros, temporal, quantum)">
                <button class="search-btn" onclick="performSearch()">üîÆ Rechercher</button>
            </div>
            
            <div class="filters">
                <div class="filter-tag" onclick="toggleFilter(this, 'formulas')">üìê Formules</div>
                <div class="filter-tag" onclick="toggleFilter(this, 'lore')">üìú Lore</div>
                <div class="filter-tag" onclick="toggleFilter(this, 'heroes')">üë• H√©ros</div>
                <div class="filter-tag" onclick="toggleFilter(this, 'temporal')">‚è∞ Temporel</div>
                <div class="filter-tag" onclick="toggleFilter(this, 'quantum')">üåÄ Quantique</div>
                <div class="filter-tag" onclick="toggleFilter(this, 'tcg')">üé¥ TCG</div>
                <div class="filter-tag" onclick="toggleFilter(this, 'interstice')">üåå Interstice</div>
            </div>
        </div>
        
        <!-- Grille de r√©sultats -->
        <div class="results-grid">
            <!-- Panel lat√©ral des archives -->
            <div class="archives-panel">
                <h3>üìÇ Archives R√©centes</h3>
                <div id="archivesList">
                    <div class="archive-item" onclick="loadArchive('temporal_grammar')">
                        <div class="title">Grammaire Temporelle</div>
                        <div class="type">‚è∞ Syst√®me Temporel</div>
                    </div>
                    <div class="archive-item" onclick="loadArchive('quantum_mechanics')">
                        <div class="title">M√©canique Quantique</div>
                        <div class="type">üåÄ Physique</div>
                    </div>
                    <div class="archive-item" onclick="loadArchive('hero_arthur')">
                        <div class="title">Roi Arthur</div>
                        <div class="type">üëë Personnage</div>
                    </div>
                    <div class="archive-item" onclick="loadArchive('tcg_combat')">
                        <div class="title">Syst√®me TCG</div>
                        <div class="type">üé¥ Combat</div>
                    </div>
                    <div class="archive-item" onclick="loadArchive('6d_system')">
                        <div class="title">Syst√®me 6D</div>
                        <div class="type">üåå Dimensions</div>
                    </div>
                    <div class="archive-item" onclick="loadArchive('energy_complex')">
                        <div class="title">√ânergie Complexe</div>
                        <div class="type">‚ö° √ânergie</div>
                    </div>
                </div>
            </div>
            
            <!-- Zone de r√©sultats principale -->
            <div class="results-container" id="resultsContainer">
                <div class="result-card">
                    <div class="result-title">üîÆ Bienvenue dans les Archives Memento</div>
                    <div class="result-content">
                        Les Archives Memento contiennent toute la connaissance accumul√©e sur Heroes of Time.
                        Utilisez la barre de recherche pour explorer les formules magiques, l'histoire des h√©ros,
                        les m√©caniques de jeu et les secrets de l'Interstice.
                    </div>
                    <div class="result-meta">
                        <span>üìö 10,789 documents</span>
                        <span>üîÆ 869 formules</span>
                        <span>üë• 6 h√©ros</span>
                        <span>üåå 6 dimensions</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Assistant Memento -->
    <div class="memento-trigger" onclick="toggleMemento()">üìé</div>
    
    <div class="memento-assistant" id="mementoAssistant">
        <div class="memento-header">
            <div class="memento-title">üß† Assistant Memento</div>
            <button class="memento-close" onclick="toggleMemento()">√ó</button>
        </div>
        <div class="memento-content" id="mementoContent">
            Bonjour ! Je suis votre assistant Memento. Je peux vous aider √† naviguer dans les archives
            temporelles et √† comprendre les concepts complexes du jeu.
        </div>
        <div class="memento-suggestions">
            <strong>Suggestions de recherche :</strong>
            <a href="#" class="suggestion-link" onclick="quickSearch('TEMPORAL_SHIFT')">‚Üí Formule TEMPORAL_SHIFT</a>
            <a href="#" class="suggestion-link" onclick="quickSearch('Merlin backwards')">‚Üí Merlin vit √† l'envers</a>
            <a href="#" class="suggestion-link" onclick="quickSearch('quantum superposition')">‚Üí Superposition quantique</a>
            <a href="#" class="suggestion-link" onclick="quickSearch('6D navigation')">‚Üí Navigation 6D</a>
        </div>
    </div>
    
    <script>
        // Base de donn√©es locale (simul√©e)
        const database = {
            temporal_grammar: {
                title: "Grammaire Temporelle de GROEKEN",
                content: `La Grammaire Temporelle est le langage sacr√© cr√©√© par GROEKEN pour commander la r√©alit√©.
                         Chaque symbole poss√®de un pouvoir intrins√®que.`,
                formulas: {
                    "Superposition": "‚äô - Place une entit√© en √©tats multiples",
                    "Collapse": "‚Ä†œà - Force l'effondrement quantique",
                    "Observation": "Œ† - Fixe un √©tat quantique",
                    "Delta Temporel": "Œît - Modifie le d√©calage temporel"
                },
                meta: { type: "Syst√®me", category: "Temporel", complexity: "Expert" }
            },
            
            quantum_mechanics: {
                title: "M√©canique Quantique dans Heroes of Time",
                content: `Le syst√®me quantique permet la superposition d'√©tats et l'intrication d'entit√©s.
                         L'identit√© quantique Œ® mesure la coh√©rence √† travers les timelines.`,
                formulas: {
                    "QUANTUM_COLLAPSE": "|Œ®‚ü© = Œ£(Œ±_i|i‚ü©) ‚Üí |n‚ü©",
                    "WAVE_FUNCTION": "Œ®(x,t) = A √ó sin(kx - œât + œÜ)"
                },
                meta: { type: "Physique", category: "Quantique", complexity: "Avanc√©" }
            },
            
            hero_arthur: {
                title: "Arthur - Roi d'Avalon",
                content: `Arthur est le porteur d'Excalibur Quantique. Sa volont√© peut forcer la convergence
                         des r√©alit√©s et unifier les timelines fragment√©es.`,
                abilities: [
                    "Excalibur Quantique - Coupe √† travers les dimensions",
                    "Volont√© Royale - Force la convergence des timelines",
                    "Camelot √âternel - Cr√©e une zone hors du temps"
                ],
                meta: { type: "H√©ros", category: "Personnage", complexity: "Normal" }
            },
            
            tcg_combat: {
                title: "Syst√®me de Combat TCG",
                content: `Les combats se r√©solvent via un syst√®me de cartes sophistiqu√©. L'IA Rust analyse
                         l'√©tat du jeu en 6D pour prendre des d√©cisions optimales.`,
                mechanics: {
                    "Points de vie": "100 PV au d√©part",
                    "√ânergie": "A + iŒ¶ n√©cessaire pour jouer",
                    "IA": "Analyse 6D par Rust backend"
                },
                meta: { type: "Gameplay", category: "Combat", complexity: "Normal" }
            },
            
            "6d_system": {
                title: "Syst√®me de Navigation 6D",
                content: `Chaque entit√© est d√©finie par 6 coordonn√©es : X, Y, Z (spatial), T (temporel),
                         C (causal), Œ® (quantique). Le pathfinding Q* calcule les chemins optimaux.`,
                formula: "Position(entit√©) = [X, Y, Z, T, C, Œ®]",
                meta: { type: "Syst√®me", category: "Navigation", complexity: "Expert" }
            },
            
            energy_complex: {
                title: "√ânergie Complexe",
                content: `L'√©nergie dans Heroes of Time suit les lois de la physique quantique avec
                         une composante r√©elle (amplitude) et imaginaire (phase).`,
                formula: "E = A √ó e^(iŒ¶) + ‚àá¬≤Œ®",
                usage: "Chaque sort consomme de l'√©nergie selon sa complexit√©",
                meta: { type: "Syst√®me", category: "√ânergie", complexity: "Avanc√©" }
            }
        };
        
        // Tous les contenus disponibles pour la recherche
        const searchableContent = [
            { id: "temporal_shift", title: "TEMPORAL_SHIFT", content: "D√©cale une entit√© dans le temps", formula: "Œ®(t) = Œ®‚ÇÄ √ó e^(iœât) √ó R(Œît)", tags: ["temporal", "formulas"] },
            { id: "quantum_collapse", title: "QUANTUM_COLLAPSE", content: "Force l'effondrement d'une superposition", formula: "|Œ®‚ü© = Œ£(Œ±_i|i‚ü©) ‚Üí |n‚ü©", tags: ["quantum", "formulas"] },
            { id: "causal_fork", title: "CAUSAL_FORK", content: "Cr√©e une bifurcation causale", formula: "C(t‚ÇÅ‚Üít‚ÇÇ) = ‚à´P(Œæ)dŒæ √ó Œò(t‚ÇÇ-t‚ÇÅ)", tags: ["temporal", "formulas"] },
            { id: "merlin", title: "Merlin l'Archimage", content: "Vit √† rebours dans le temps, conna√Æt tous les futurs possibles", tags: ["heroes", "lore", "temporal"] },
            { id: "morgana", title: "Morgana", content: "Tisseuse de r√©alit√©s, manipule les probabilit√©s causales", tags: ["heroes", "lore", "quantum"] },
            { id: "interstice", title: "L'Interstice", content: "Espace primordial entre les r√©alit√©s o√π les lois physiques sont mall√©ables", tags: ["interstice", "lore"] },
            { id: "tcg_ai", title: "IA TCG", content: "Syst√®me hybride Rust/Java pour d√©cisions optimales en combat", tags: ["tcg", "ai"] },
            { id: "energy", title: "√ânergie Complexe", content: "Syst√®me A + iŒ¶ bas√© sur amplitude et phase", formula: "E = A √ó e^(iŒ¶)", tags: ["formulas", "energy"] }
        ];
        
        let activeFilters = [];
        let mementoActive = false;
        
        // Initialisation
        document.addEventListener('DOMContentLoaded', () => {
            createParticles();
            setupEventListeners();
            connectToVectorDB();
        });
        
        // Cr√©er les particules Memento
        function createParticles() {
            const container = document.getElementById('particles');
            for (let i = 0; i < 50; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 10 + 's';
                particle.style.animationDuration = (10 + Math.random() * 10) + 's';
                container.appendChild(particle);
            }
        }
        
        // Event listeners
        function setupEventListeners() {
            document.getElementById('searchInput').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    performSearch();
                }
            });
            
            // Raccourci clavier pour Memento
            document.addEventListener('keydown', (e) => {
                if (e.key === 'm' || e.key === 'M') {
                    toggleMemento();
                }
            });
        }
        
        // Recherche
        function performSearch() {
            const query = document.getElementById('searchInput').value.toLowerCase();
            const container = document.getElementById('resultsContainer');
            
            if (!query) {
                showMessage("Entrez un terme de recherche");
                return;
            }
            
            // Animation de chargement
            container.innerHTML = '<div class="loading"><div class="loading-spinner"></div><p>Recherche dans les archives temporelles...</p></div>';
            
            // Simuler une recherche
            setTimeout(() => {
                const results = searchableContent.filter(item => {
                    const matchesQuery = item.title.toLowerCase().includes(query) || 
                                        item.content.toLowerCase().includes(query);
                    const matchesFilters = activeFilters.length === 0 || 
                                          activeFilters.some(filter => item.tags.includes(filter));
                    return matchesQuery && matchesFilters;
                });
                
                displayResults(results, query);
                updateMemento(`J'ai trouv√© ${results.length} r√©sultats pour "${query}"`);
            }, 1000);
        }
        
        // Afficher les r√©sultats
        function displayResults(results, query) {
            const container = document.getElementById('resultsContainer');
            
            if (results.length === 0) {
                container.innerHTML = `
                    <div class="result-card">
                        <div class="result-title">üîç Aucun r√©sultat</div>
                        <div class="result-content">
                            Aucune archive ne correspond √† votre recherche "${query}".
                            Essayez d'autres termes ou utilisez les filtres.
                        </div>
                    </div>
                `;
                return;
            }
            
            let html = '';
            results.forEach(result => {
                html += `
                    <div class="result-card">
                        <div class="result-title">${result.title}</div>
                        <div class="result-content">${result.content}</div>
                        ${result.formula ? `<div class="formula-display">${result.formula}</div>` : ''}
                        <div class="result-meta">
                            ${result.tags.map(tag => `<span>#${tag}</span>`).join(' ')}
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }
        
        // Charger une archive
        function loadArchive(archiveId) {
            const archive = database[archiveId];
            if (!archive) return;
            
            const container = document.getElementById('resultsContainer');
            let html = `
                <div class="result-card">
                    <div class="result-title">${archive.title}</div>
                    <div class="result-content">${archive.content}</div>
            `;
            
            if (archive.formulas) {
                html += '<div class="formula-display">';
                for (let [key, value] of Object.entries(archive.formulas)) {
                    html += `<div><strong>${key}:</strong> ${value}</div>`;
                }
                html += '</div>';
            }
            
            if (archive.formula) {
                html += `<div class="formula-display">${archive.formula}</div>`;
            }
            
            if (archive.abilities) {
                html += '<ul style="margin: 15px 0; padding-left: 20px;">';
                archive.abilities.forEach(ability => {
                    html += `<li style="margin: 5px 0;">${ability}</li>`;
                });
                html += '</ul>';
            }
            
            if (archive.meta) {
                html += '<div class="result-meta">';
                html += `<span>üìÅ ${archive.meta.type}</span>`;
                html += `<span>üè∑Ô∏è ${archive.meta.category}</span>`;
                html += `<span>‚ö° ${archive.meta.complexity}</span>`;
                html += '</div>';
            }
            
            html += '</div>';
            container.innerHTML = html;
            
            updateMemento(`Archive "${archive.title}" charg√©e avec succ√®s`);
        }
        
        // Toggle filter
        function toggleFilter(element, filter) {
            element.classList.toggle('active');
            
            if (activeFilters.includes(filter)) {
                activeFilters = activeFilters.filter(f => f !== filter);
            } else {
                activeFilters.push(filter);
            }
            
            // Relancer la recherche si il y a d√©j√† une query
            const query = document.getElementById('searchInput').value;
            if (query) {
                performSearch();
            }
        }
        
        // Recherche rapide
        function quickSearch(query) {
            document.getElementById('searchInput').value = query;
            performSearch();
            toggleMemento(); // Fermer Memento
        }
        
        // Toggle Memento Assistant
        function toggleMemento() {
            mementoActive = !mementoActive;
            document.getElementById('mementoAssistant').classList.toggle('active');
        }
        
        // Update Memento content
        function updateMemento(message) {
            if (mementoActive) {
                document.getElementById('mementoContent').innerHTML = message;
            }
        }
        
        // Afficher un message
        function showMessage(message) {
            const container = document.getElementById('resultsContainer');
            container.innerHTML = `
                <div class="result-card">
                    <div class="result-title">üí° Information</div>
                    <div class="result-content">${message}</div>
                </div>
            `;
        }
        
        // Connection au Vector DB (simul√©e pour l'instant)
        async function connectToVectorDB() {
            try {
                const response = await fetch('http://localhost:5001/health');
                if (response.ok) {
                    console.log('‚úÖ Vector DB connect√©');
                    updateMemento('Vector DB connect√© sur port 5001');
                }
            } catch (e) {
                console.log('‚ö†Ô∏è Vector DB non disponible, utilisation du cache local');
            }
        }
        
        // Recherche dans le Vector DB
        async function searchVectorDB(query) {
            try {
                const response = await fetch('http://localhost:5001/search', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ query: query, limit: 10 })
                });
                
                if (response.ok) {
                    return await response.json();
                }
            } catch (e) {
                console.error('Erreur Vector DB:', e);
            }
            return null;
        }
        
        // Easter egg
        let konamiCode = [];
        const konamiSequence = ['ArrowUp', 'ArrowUp', 'ArrowDown', 'ArrowDown', 
                               'ArrowLeft', 'ArrowRight', 'ArrowLeft', 'ArrowRight', 'b', 'a'];
        
        document.addEventListener('keydown', (e) => {
            konamiCode.push(e.key);
            konamiCode = konamiCode.slice(-10);
            
            if (konamiCode.join(',') === konamiSequence.join(',')) {
                document.body.style.background = 'linear-gradient(135deg, #ffd700 0%, #ff00ff 100%)';
                alert("üîì Mode GROEKEN activ√© ! Acc√®s total aux archives temporelles !");
                
                // D√©bloquer toutes les archives
                loadArchive('temporal_grammar');
                updateMemento("Mode GROEKEN : Toutes les archives d√©bloqu√©es !");
            }
        });
    </script>
</body>
</html>
