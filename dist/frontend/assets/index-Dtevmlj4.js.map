{"version":3,"mappings":"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","names":["f","require$$0","k","l","m","n","p","q","c","a","g","b","d","e","h","reactJsxRuntime_production_min","jsxRuntimeModule","client","Subscribable","listener","isServer","noop","functionalUpdate","updater","input","isValidTimeout","value","timeUntilStale","updatedAt","staleTime","resolveStaleTime","query","resolveEnabled","enabled","matchQuery","filters","type","exact","fetchStatus","predicate","queryKey","stale","hashQueryKeyByOptions","partialMatchKey","isActive","matchMutation","mutation","status","mutationKey","hashKey","options","_","val","isPlainObject","result","key","replaceEqualDeep","array","isPlainArray","aItems","aSize","bItems","bSize","copy","aItemsSet","equalItems","i","o","hasObjectPrototype","ctor","prot","sleep","timeout","resolve","replaceData","prevData","data","addToEnd","items","item","max","newItems","addToStart","skipToken","ensureQueryFn","fetchOptions","FocusManager","_a","__privateAdd","_focused","_cleanup","_setup","__privateSet","onFocus","__privateGet","setup","focused","isFocused","focusManager","OnlineManager","_online","onOnline","onlineListener","offlineListener","online","onlineManager","pendingThenable","reject","thenable","_resolve","_reject","finalize","reason","defaultRetryDelay","failureCount","canFetch","networkMode","CancelledError","isCancelledError","createRetryer","config","isRetryCancelled","isResolved","continueFn","cancel","cancelOptions","cancelRetry","continueRetry","canContinue","canStart","pause","continueResolve","run","promiseOrValue","initialPromise","error","retry","retryDelay","delay","shouldRetry","defaultScheduler","cb","createNotifyManager","queue","transactions","notifyFn","callback","batchNotifyFn","scheduleFn","schedule","flush","originalQueue","args","fn","notifyManager","Removable","_gcTimeout","newGcTime","Query","_Query_instances","_initialState","_revertState","_cache","_client","_retryer","_defaultOptions","_abortSignalConsumed","getDefaultState","newData","__privateMethod","dispatch_fn","state","setStateOptions","promise","_b","observer","x","abortController","addSignalProperty","object","fetchFn","queryFn","queryFnContext","queryFnContext2","context","context2","_c","onError","_d","action","reducer","fetchState","hasData","initialDataUpdatedAt","QueryCache","_queries","queryHash","queryInMap","defaultedFilters","queries","event","Mutation","_Mutation_instances","_observers","_mutationCache","variables","onContinue","restored","isPaused","_f","_e","_h","_g","_j","_i","_l","_k","_n","_m","_p","_o","_r","_q","_t","_s","MutationCache","_mutations","_scopes","_mutationId","__privateWrapper","scope","scopeFor","scopedMutations","index","mutationsWithSameScope","firstPendingMutation","foundMutation","pausedMutations","infiniteQueryBehavior","pages","direction","oldPages","oldPageParams","currentPage","cancelled","fetchPage","param","previous","page","maxPages","addTo","pageParamFn","getPreviousPageParam","getNextPageParam","oldData","remainingPages","pageParams","lastIndex","QueryClient","_queryCache","_queryDefaults","_mutationDefaults","_mountCount","_unsubscribeFocus","_unsubscribeOnline","defaultedOptions","cachedData","queryCache","defaultedCancelOptions","promises","defaults","queryDefault","QueryClientContext","React.createContext","QueryClientProvider","children","React.useEffect","jsx","HexGrid","width","height","hexSize","hexes","selectedHex","onHexClick","onHexHover","onHexRightClick","showCoordinates","showGrid","enableDrag","viewport","isDragging","setIsDragging","React","dragStart","setDragStart","viewOffset","setViewOffset","hexWidth","hexHeight","vertDist","horizDist","hexToPixel","y","offsetY","handleMouseDown","handleMouseMove","handleMouseUp","handleWheel","newZoom","getTerrainStyle","terrain","terrainStyles","getFogStyle","fog","renderHex","hex","pos","isSelected","jsxs","hexElements","style","TemporalDisplay","temporal","variant","showEnergy","showParadoxes","animated","onParadoxClick","drift","getDriftColor","getDriftStatus","getEnergyMagnitude","A","phi","paradox","DEFAULT_ICONS","DEFAULT_COLORS","ResourceBar","resources","maxValues","showLabels","showMax","onChange","customIcons","icons","prevResources","setPrevResources","animatingResources","setAnimatingResources","changed","renderResource","percentage","isAnimating","isLow","color","resourceEntries","trackedConnections","getTrackedConnectionState","name","api","api2","extractConnectionInformation","store","extensionConnector","existingConnection","newConnection","devtoolsImpl","devtoolsOptions","set","get","anonymousActionType","__vite_import_meta_env__","connection","connectionInformation","isRecording","replace","nameOrAction","r","setStateFromDevtools","originalIsRecording","initialState","store2","didWarnAboutReservedActionType","originalDispatch","message","parseJsonThen","stateFromDevtools","nextLiftedState","lastComputedState","devtools","stringified","parsed","createJSONStorage","getStorage","storage","parse","str2","str","newValue","toThenable","onFulfilled","_onRejected","_onFulfilled","onRejected","oldImpl","baseOptions","persistedState","currentState","hasHydrated","hydrationListeners","finishHydrationListeners","thenableSerialize","setItem","errorInSync","serializedValue","savedSetState","configResult","stateFromStorage","hydrate","postRehydrationCallback","storageValue","deserializedStorageValue","migratedState","_a2","newOptions","newImpl","migrationResult","migrated","persistImpl","persist","useGameStore","create","view","cost","newTurn","newDay","dayEvents","response","resource","amount","position","decayRate","newStack","mode","difficulty","saveData","useHexStore","newHexes","terrains","hexStore","GameView","navigate","useNavigate","gameState","currentView","setCurrentView","moveHero","endTurn","ViewButton","Routes","Route","MapView","CombatView","TimelineView","setSelectedHex","day","active","onClick","useEditorStore","icon","tool","newHistory","from","to","fromKey","toKey","fromHex","toHex","newIndex","hexData","MapIconPlacerWrapper","iframeRef","useRef","apiStatus","setApiStatus","useState","useEffect","checkAPIs","handleMessage","payload","json","sendToIframe","mapWrapper","mapData","results","answer","checks","check","prev","EditorView","setMode","isRunning","setIsRunning","importMap","setTemporal","interval","t","handleImport","file","reader","Link","DIFFICULTY_PRESETS","useChasseStore","dx","dy","newX","newY","vx","vy","oldPos","energyCost","vision","driftRate","newTw","newTe","newDebt","settings","hero","enemyDensity","resourceScarcity","zoneX","zoneY","entity","poi","poiTypes","newDiscovered","volume","sound","ChasseView","gameStarted","setGameStarted","selectedDifficulty","setSelectedDifficulty","ChasseGame","DifficultySelector","diff","onStart","difficulties","setViewport","heroPosition","tick","handleKeyDown","vp","visibleHexes","visible","getDifficultyColor","displayX","displayY","realX","realY","Minimap","scale","HomePage","ModeCard","StatusIndicator","title","description","featured","label","port","isOnline","setIsOnline","DECKS","StartTCG","deck","setDeck","gameId","setGameId","setStatus","start","MultiplayerMode","AIBattleAutoplay","battleLog","setBattleLog","startBattle","log","SpectatorGodMode","selectedDimension","setSelectedDimension","timelinePosition","setTimelinePosition","dim","HEROES","getHeroesByTier","tier","getHeroCount","LEGENDARY_HEROES","EPIC_HEROES","RARE_HEROES","COMMON_HEROES","acc","HeroBackstoryEditor","selectedHero","setSelectedHero","backstory","setBackstory","isEditing","setIsEditing","isSaving","setIsSaving","vectorDBStatus","setVectorDBStatus","showPreview","setShowPreview","generatedDialogue","setGeneratedDialogue","loadBackstory","checkVectorDBConnection","heroId","saveBackstory","generateDialogue","prompt","exportToPrompt","v","motion","trait","newTraits","idx","mot","newMot","fear","newFears","memory","newMemories","newPrompts","AnimatePresence","DEFAULT_CONFIG","V2AdapterClass","__publicField","positions","timeline","id","text","params","V2Adapter","util","assertIs","_arg","assertNever","_x","obj","validKeys","filtered","keys","arr","checker","joinValues","separator","objectUtil","first","second","ZodParsedType","getParsedType","ZodIssueCode","ZodError","issues","sub","subs","actualProto","_mapper","mapper","issue","fieldErrors","processError","curr","el","formErrors","firstEl","errorMap","_ctx","overrideErrorMap","defaultErrorMap","getErrorMap","makeIssue","path","errorMaps","issueData","fullPath","fullIssue","errorMessage","maps","map","addIssueToContext","ctx","overrideMap","ParseStatus","arrayValue","s","INVALID","pairs","syncPairs","pair","finalObject","DIRTY","OK","isAborted","isDirty","isValid","isAsync","errorUtil","ParseInputLazyPath","parent","handleResult","processCreateParams","invalid_type_error","required_error","iss","ZodType","err","maybeAsyncResult","getIssueProperties","setError","refinementData","refinement","ZodEffects","ZodFirstPartyTypeKind","def","ZodOptional","ZodNullable","ZodArray","ZodPromise","option","ZodUnion","incoming","ZodIntersection","transform","defaultValueFunc","ZodDefault","ZodBranded","catchValueFunc","ZodCatch","This","target","ZodPipeline","ZodReadonly","cuidRegex","cuid2Regex","ulidRegex","uuidRegex","nanoidRegex","jwtRegex","durationRegex","emailRegex","_emojiRegex","emojiRegex","ipv4Regex","ipv4CidrRegex","ipv6Regex","ipv6CidrRegex","base64Regex","base64urlRegex","dateRegexSource","dateRegex","timeRegexSource","secondsRegexSource","secondsQuantifier","timeRegex","datetimeRegex","regex","opts","isValidIP","ip","version","isValidJWT","jwt","alg","header","base64","decoded","isValidCidr","ZodString","tooBig","tooSmall","validation","minLength","maxLength","len","ch","min","floatSafeRemainder","step","valDecCount","stepDecCount","decCount","valInt","stepInt","ZodNumber","kind","inclusive","ZodBigInt","ZodBoolean","ZodDate","minDate","maxDate","ZodSymbol","ZodUndefined","ZodNull","ZodAny","ZodUnknown","ZodNever","ZodVoid","schema","deepPartialify","ZodObject","newShape","fieldSchema","ZodTuple","shape","shapeKeys","extraKeys","keyValidator","unknownKeys","catchall","defaultError","augmentation","merging","mask","newField","createZodEnum","handleResults","unionErrors","childCtx","dirty","types","mergeValues","aType","bType","bKeys","sharedKeys","newObj","sharedValue","newArray","itemA","itemB","handleParsed","parsedLeft","parsedRight","merged","left","right","itemIndex","rest","schemas","ZodRecord","keyType","valueType","third","ZodMap","finalMap","ZodSet","finalizeSet","elements","parsedSet","element","minSize","maxSize","size","ZodLazy","getter","ZodLiteral","values","ZodEnum","expectedValues","enumValues","newDef","opt","ZodNativeEnum","nativeEnumValues","promisified","effect","checkCtx","arg","processed","executeRefinement","inner","base","preprocess","newCtx","ZodNaN","inResult","freeze","stringType","numberType","booleanType","anyType","arrayType","objectType","unionType","recordType","literalType","enumType","HexPositionSchema","z.object","z.number","HexTerrainSchema","z.enum","z.boolean","z.record","z.any","RegionSchema","z.string","z.array","SpatialConnectionSchema","WorldSchema","z.literal","Position6DSchema","EnergyComplexSchema","PlacedResourceSchema","ResourceConnectionSchema","TemporalEventSchema","RegulatorsSchema","VictoryConditionSchema","MapSchema","z.union","validateWorld","validateMap","createEmptyWorld","hexagons","offsetQ","createEmptyMap","worldIdOrWorld","MapFileServiceClass","world","worlds","worldId","mapId","local","backend","jsonData","filename","blob","url","stored","worldsSize","mapsSize","MapFileService","useUnifiedMapStore","currentWorld","worldPath","currentMap","mapPath","bundle","brushTerrain","brushSize","updatedHexagons","radius","dq","dr","hexIndex","newRegion","updates","iconInfo","typ","newResource","selectedIcon","eventData","newEvent","simulationRunning","level","appearDay","disappearDay","daysSince","StructureEditor","canvasRef","showRegions","zoomLevel","paintTerrain","setTool","isDrawing","setIsDrawing","HEX_SIZE","TERRAIN_COLORS","pixelToHex","adjustedX","adjustedY","drawHex","centerX","centerY","highlight","angle","canvas","resize","pixel","region","rect","handleCanvasClick","ModeSelector","currentMode","onModeChange","modes","ToolPalette","setBrushTerrain","setBrushSize","getTools","Fragment","TimelineBar","setCurrentDay","startSimulation","stopSimulation","maxDays","events","getEventsForDay","PlayControls","StatusBar","time","setTime","backends","setBackends","timer","checkBackends","res","ws","getStatusColor","_AssetsServiceClass","creature","artifact","formula","category","portal","AssetsServiceClass","AssetsService","PlayMapBridge","setGameState","selectedEntity","setSelectedEntity","isPlaying","setIsPlaying","entities","stats","heroData","creatureData","newEntities","spawn","moveEntity","entityId","condition","MapIconPlacerV2","lazy","__vitePreload","SpatioTemporalMapEditor","UnifiedMapSystem","showConnections","showTimeline","newWorld","newMap","exportToFile","playMap","canPlayMap","AssetsService$1","renderEditor","Suspense","LoadingEditor","TimelineWrapper","OverlayMode","last","AIBattleWrapper","isConnected","setIsConnected","battleState","setBattleState","useV2API","setUseV2API","wsStatus","setWsStatus","htmlPath","battleEvent","sendToV2Backend","iframe","iframeWindow","script","v2Adapter","v2Event","executeAIAction","handleStartWithV2","handleStartLocal","ChasseMegaMapWrapper","currentPosition","setCurrentPosition","gameEvent","tickInterval","tickResult","driftResult","energyResult","paradoxResult","teleportTo","activateTimeTravel","queryClient","App","BrowserRouter","SettingsPage","AboutPage","ReactDOM"],"ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,21,37,38,39,40,41,42,43],"sources":["../../node_modules/react/cjs/react-jsx-runtime.production.min.js","../../node_modules/react/jsx-runtime.js","../../node_modules/react-dom/client.js","../../node_modules/@tanstack/query-core/build/modern/subscribable.js","../../node_modules/@tanstack/query-core/build/modern/utils.js","../../node_modules/@tanstack/query-core/build/modern/focusManager.js","../../node_modules/@tanstack/query-core/build/modern/onlineManager.js","../../node_modules/@tanstack/query-core/build/modern/thenable.js","../../node_modules/@tanstack/query-core/build/modern/retryer.js","../../node_modules/@tanstack/query-core/build/modern/notifyManager.js","../../node_modules/@tanstack/query-core/build/modern/removable.js","../../node_modules/@tanstack/query-core/build/modern/query.js","../../node_modules/@tanstack/query-core/build/modern/queryCache.js","../../node_modules/@tanstack/query-core/build/modern/mutation.js","../../node_modules/@tanstack/query-core/build/modern/mutationCache.js","../../node_modules/@tanstack/query-core/build/modern/infiniteQueryBehavior.js","../../node_modules/@tanstack/query-core/build/modern/queryClient.js","../../node_modules/@tanstack/react-query/build/modern/QueryClientProvider.js","../../src/shared/components/HexGrid.tsx","../../src/shared/components/TemporalDisplay.tsx","../../src/shared/components/ResourceBar.tsx","../../node_modules/zustand/esm/middleware.mjs","../../src/modes/game/store/gameStore.ts","../../src/modes/game/GameView.tsx","../../src/modes/editor/store/editorStore.ts","../../src/modes/editor/MapIconPlacerWrapper.tsx","../../src/modes/editor/EditorView.tsx","../../src/modes/chasse/store/chasseStore.ts","../../src/modes/chasse/ChasseView.tsx","../../src/pages/HomePage.tsx","../../src/pages/StartTCG.tsx","../../src/modes/multiplayer/MultiplayerMode.tsx","../../src/modes/ai-battle/AIBattleAutoplay.tsx","../../src/modes/spectator/SpectatorGodMode.tsx","../../src/data/heroes.ts","../../src/modes/editor/HeroBackstoryEditor.tsx","../../src/shared/v2-adapter.ts","../../node_modules/zod/v3/helpers/util.js","../../node_modules/zod/v3/ZodError.js","../../node_modules/zod/v3/locales/en.js","../../node_modules/zod/v3/errors.js","../../node_modules/zod/v3/helpers/parseUtil.js","../../node_modules/zod/v3/helpers/errorUtil.js","../../node_modules/zod/v3/types.js","../../src/shared/schemas/unified-map.schema.ts","../../src/services/MapFileService.ts","../../src/shared/store/unifiedMapStore.ts","../../src/modes/unified/components/StructureEditor.tsx","../../src/modes/unified/components/ModeSelector.tsx","../../src/modes/unified/components/ToolPalette.tsx","../../src/modes/unified/components/TimelineBar.tsx","../../src/modes/unified/components/PlayControls.tsx","../../src/modes/unified/components/StatusBar.tsx","../../src/services/AssetsService.ts","../../src/modes/unified/PlayMapBridge.tsx","../../src/modes/unified/UnifiedMapSystem.tsx","../../src/modes/combat/AIBattleWrapper.tsx","../../src/modes/chasse/ChasseMegaMapWrapper.tsx","../../src/App.tsx","../../src/main.tsx"],"sourcesContent":["/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","// src/subscribable.ts\nvar Subscribable = class {\n  constructor() {\n    this.listeners = /* @__PURE__ */ new Set();\n    this.subscribe = this.subscribe.bind(this);\n  }\n  subscribe(listener) {\n    this.listeners.add(listener);\n    this.onSubscribe();\n    return () => {\n      this.listeners.delete(listener);\n      this.onUnsubscribe();\n    };\n  }\n  hasListeners() {\n    return this.listeners.size > 0;\n  }\n  onSubscribe() {\n  }\n  onUnsubscribe() {\n  }\n};\nexport {\n  Subscribable\n};\n//# sourceMappingURL=subscribable.js.map","// src/utils.ts\nvar isServer = typeof window === \"undefined\" || \"Deno\" in globalThis;\nfunction noop() {\n}\nfunction functionalUpdate(updater, input) {\n  return typeof updater === \"function\" ? updater(input) : updater;\n}\nfunction isValidTimeout(value) {\n  return typeof value === \"number\" && value >= 0 && value !== Infinity;\n}\nfunction timeUntilStale(updatedAt, staleTime) {\n  return Math.max(updatedAt + (staleTime || 0) - Date.now(), 0);\n}\nfunction resolveStaleTime(staleTime, query) {\n  return typeof staleTime === \"function\" ? staleTime(query) : staleTime;\n}\nfunction resolveEnabled(enabled, query) {\n  return typeof enabled === \"function\" ? enabled(query) : enabled;\n}\nfunction matchQuery(filters, query) {\n  const {\n    type = \"all\",\n    exact,\n    fetchStatus,\n    predicate,\n    queryKey,\n    stale\n  } = filters;\n  if (queryKey) {\n    if (exact) {\n      if (query.queryHash !== hashQueryKeyByOptions(queryKey, query.options)) {\n        return false;\n      }\n    } else if (!partialMatchKey(query.queryKey, queryKey)) {\n      return false;\n    }\n  }\n  if (type !== \"all\") {\n    const isActive = query.isActive();\n    if (type === \"active\" && !isActive) {\n      return false;\n    }\n    if (type === \"inactive\" && isActive) {\n      return false;\n    }\n  }\n  if (typeof stale === \"boolean\" && query.isStale() !== stale) {\n    return false;\n  }\n  if (fetchStatus && fetchStatus !== query.state.fetchStatus) {\n    return false;\n  }\n  if (predicate && !predicate(query)) {\n    return false;\n  }\n  return true;\n}\nfunction matchMutation(filters, mutation) {\n  const { exact, status, predicate, mutationKey } = filters;\n  if (mutationKey) {\n    if (!mutation.options.mutationKey) {\n      return false;\n    }\n    if (exact) {\n      if (hashKey(mutation.options.mutationKey) !== hashKey(mutationKey)) {\n        return false;\n      }\n    } else if (!partialMatchKey(mutation.options.mutationKey, mutationKey)) {\n      return false;\n    }\n  }\n  if (status && mutation.state.status !== status) {\n    return false;\n  }\n  if (predicate && !predicate(mutation)) {\n    return false;\n  }\n  return true;\n}\nfunction hashQueryKeyByOptions(queryKey, options) {\n  const hashFn = options?.queryKeyHashFn || hashKey;\n  return hashFn(queryKey);\n}\nfunction hashKey(queryKey) {\n  return JSON.stringify(\n    queryKey,\n    (_, val) => isPlainObject(val) ? Object.keys(val).sort().reduce((result, key) => {\n      result[key] = val[key];\n      return result;\n    }, {}) : val\n  );\n}\nfunction partialMatchKey(a, b) {\n  if (a === b) {\n    return true;\n  }\n  if (typeof a !== typeof b) {\n    return false;\n  }\n  if (a && b && typeof a === \"object\" && typeof b === \"object\") {\n    return Object.keys(b).every((key) => partialMatchKey(a[key], b[key]));\n  }\n  return false;\n}\nfunction replaceEqualDeep(a, b) {\n  if (a === b) {\n    return a;\n  }\n  const array = isPlainArray(a) && isPlainArray(b);\n  if (array || isPlainObject(a) && isPlainObject(b)) {\n    const aItems = array ? a : Object.keys(a);\n    const aSize = aItems.length;\n    const bItems = array ? b : Object.keys(b);\n    const bSize = bItems.length;\n    const copy = array ? [] : {};\n    const aItemsSet = new Set(aItems);\n    let equalItems = 0;\n    for (let i = 0; i < bSize; i++) {\n      const key = array ? i : bItems[i];\n      if ((!array && aItemsSet.has(key) || array) && a[key] === void 0 && b[key] === void 0) {\n        copy[key] = void 0;\n        equalItems++;\n      } else {\n        copy[key] = replaceEqualDeep(a[key], b[key]);\n        if (copy[key] === a[key] && a[key] !== void 0) {\n          equalItems++;\n        }\n      }\n    }\n    return aSize === bSize && equalItems === aSize ? a : copy;\n  }\n  return b;\n}\nfunction shallowEqualObjects(a, b) {\n  if (!b || Object.keys(a).length !== Object.keys(b).length) {\n    return false;\n  }\n  for (const key in a) {\n    if (a[key] !== b[key]) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction isPlainArray(value) {\n  return Array.isArray(value) && value.length === Object.keys(value).length;\n}\nfunction isPlainObject(o) {\n  if (!hasObjectPrototype(o)) {\n    return false;\n  }\n  const ctor = o.constructor;\n  if (ctor === void 0) {\n    return true;\n  }\n  const prot = ctor.prototype;\n  if (!hasObjectPrototype(prot)) {\n    return false;\n  }\n  if (!prot.hasOwnProperty(\"isPrototypeOf\")) {\n    return false;\n  }\n  if (Object.getPrototypeOf(o) !== Object.prototype) {\n    return false;\n  }\n  return true;\n}\nfunction hasObjectPrototype(o) {\n  return Object.prototype.toString.call(o) === \"[object Object]\";\n}\nfunction sleep(timeout) {\n  return new Promise((resolve) => {\n    setTimeout(resolve, timeout);\n  });\n}\nfunction replaceData(prevData, data, options) {\n  if (typeof options.structuralSharing === \"function\") {\n    return options.structuralSharing(prevData, data);\n  } else if (options.structuralSharing !== false) {\n    if (process.env.NODE_ENV !== \"production\") {\n      try {\n        return replaceEqualDeep(prevData, data);\n      } catch (error) {\n        console.error(\n          `Structural sharing requires data to be JSON serializable. To fix this, turn off structuralSharing or return JSON-serializable data from your queryFn. [${options.queryHash}]: ${error}`\n        );\n        throw error;\n      }\n    }\n    return replaceEqualDeep(prevData, data);\n  }\n  return data;\n}\nfunction keepPreviousData(previousData) {\n  return previousData;\n}\nfunction addToEnd(items, item, max = 0) {\n  const newItems = [...items, item];\n  return max && newItems.length > max ? newItems.slice(1) : newItems;\n}\nfunction addToStart(items, item, max = 0) {\n  const newItems = [item, ...items];\n  return max && newItems.length > max ? newItems.slice(0, -1) : newItems;\n}\nvar skipToken = Symbol();\nfunction ensureQueryFn(options, fetchOptions) {\n  if (process.env.NODE_ENV !== \"production\") {\n    if (options.queryFn === skipToken) {\n      console.error(\n        `Attempted to invoke queryFn when set to skipToken. This is likely a configuration error. Query hash: '${options.queryHash}'`\n      );\n    }\n  }\n  if (!options.queryFn && fetchOptions?.initialPromise) {\n    return () => fetchOptions.initialPromise;\n  }\n  if (!options.queryFn || options.queryFn === skipToken) {\n    return () => Promise.reject(new Error(`Missing queryFn: '${options.queryHash}'`));\n  }\n  return options.queryFn;\n}\nfunction shouldThrowError(throwOnError, params) {\n  if (typeof throwOnError === \"function\") {\n    return throwOnError(...params);\n  }\n  return !!throwOnError;\n}\nexport {\n  addToEnd,\n  addToStart,\n  ensureQueryFn,\n  functionalUpdate,\n  hashKey,\n  hashQueryKeyByOptions,\n  isPlainArray,\n  isPlainObject,\n  isServer,\n  isValidTimeout,\n  keepPreviousData,\n  matchMutation,\n  matchQuery,\n  noop,\n  partialMatchKey,\n  replaceData,\n  replaceEqualDeep,\n  resolveEnabled,\n  resolveStaleTime,\n  shallowEqualObjects,\n  shouldThrowError,\n  skipToken,\n  sleep,\n  timeUntilStale\n};\n//# sourceMappingURL=utils.js.map","// src/focusManager.ts\nimport { Subscribable } from \"./subscribable.js\";\nimport { isServer } from \"./utils.js\";\nvar FocusManager = class extends Subscribable {\n  #focused;\n  #cleanup;\n  #setup;\n  constructor() {\n    super();\n    this.#setup = (onFocus) => {\n      if (!isServer && window.addEventListener) {\n        const listener = () => onFocus();\n        window.addEventListener(\"visibilitychange\", listener, false);\n        return () => {\n          window.removeEventListener(\"visibilitychange\", listener);\n        };\n      }\n      return;\n    };\n  }\n  onSubscribe() {\n    if (!this.#cleanup) {\n      this.setEventListener(this.#setup);\n    }\n  }\n  onUnsubscribe() {\n    if (!this.hasListeners()) {\n      this.#cleanup?.();\n      this.#cleanup = void 0;\n    }\n  }\n  setEventListener(setup) {\n    this.#setup = setup;\n    this.#cleanup?.();\n    this.#cleanup = setup((focused) => {\n      if (typeof focused === \"boolean\") {\n        this.setFocused(focused);\n      } else {\n        this.onFocus();\n      }\n    });\n  }\n  setFocused(focused) {\n    const changed = this.#focused !== focused;\n    if (changed) {\n      this.#focused = focused;\n      this.onFocus();\n    }\n  }\n  onFocus() {\n    const isFocused = this.isFocused();\n    this.listeners.forEach((listener) => {\n      listener(isFocused);\n    });\n  }\n  isFocused() {\n    if (typeof this.#focused === \"boolean\") {\n      return this.#focused;\n    }\n    return globalThis.document?.visibilityState !== \"hidden\";\n  }\n};\nvar focusManager = new FocusManager();\nexport {\n  FocusManager,\n  focusManager\n};\n//# sourceMappingURL=focusManager.js.map","// src/onlineManager.ts\nimport { Subscribable } from \"./subscribable.js\";\nimport { isServer } from \"./utils.js\";\nvar OnlineManager = class extends Subscribable {\n  #online = true;\n  #cleanup;\n  #setup;\n  constructor() {\n    super();\n    this.#setup = (onOnline) => {\n      if (!isServer && window.addEventListener) {\n        const onlineListener = () => onOnline(true);\n        const offlineListener = () => onOnline(false);\n        window.addEventListener(\"online\", onlineListener, false);\n        window.addEventListener(\"offline\", offlineListener, false);\n        return () => {\n          window.removeEventListener(\"online\", onlineListener);\n          window.removeEventListener(\"offline\", offlineListener);\n        };\n      }\n      return;\n    };\n  }\n  onSubscribe() {\n    if (!this.#cleanup) {\n      this.setEventListener(this.#setup);\n    }\n  }\n  onUnsubscribe() {\n    if (!this.hasListeners()) {\n      this.#cleanup?.();\n      this.#cleanup = void 0;\n    }\n  }\n  setEventListener(setup) {\n    this.#setup = setup;\n    this.#cleanup?.();\n    this.#cleanup = setup(this.setOnline.bind(this));\n  }\n  setOnline(online) {\n    const changed = this.#online !== online;\n    if (changed) {\n      this.#online = online;\n      this.listeners.forEach((listener) => {\n        listener(online);\n      });\n    }\n  }\n  isOnline() {\n    return this.#online;\n  }\n};\nvar onlineManager = new OnlineManager();\nexport {\n  OnlineManager,\n  onlineManager\n};\n//# sourceMappingURL=onlineManager.js.map","// src/thenable.ts\nimport { noop } from \"./utils.js\";\nfunction pendingThenable() {\n  let resolve;\n  let reject;\n  const thenable = new Promise((_resolve, _reject) => {\n    resolve = _resolve;\n    reject = _reject;\n  });\n  thenable.status = \"pending\";\n  thenable.catch(() => {\n  });\n  function finalize(data) {\n    Object.assign(thenable, data);\n    delete thenable.resolve;\n    delete thenable.reject;\n  }\n  thenable.resolve = (value) => {\n    finalize({\n      status: \"fulfilled\",\n      value\n    });\n    resolve(value);\n  };\n  thenable.reject = (reason) => {\n    finalize({\n      status: \"rejected\",\n      reason\n    });\n    reject(reason);\n  };\n  return thenable;\n}\nfunction tryResolveSync(promise) {\n  let data;\n  promise.then((result) => {\n    data = result;\n    return result;\n  }, noop)?.catch(noop);\n  if (data !== void 0) {\n    return { data };\n  }\n  return void 0;\n}\nexport {\n  pendingThenable,\n  tryResolveSync\n};\n//# sourceMappingURL=thenable.js.map","// src/retryer.ts\nimport { focusManager } from \"./focusManager.js\";\nimport { onlineManager } from \"./onlineManager.js\";\nimport { pendingThenable } from \"./thenable.js\";\nimport { isServer, sleep } from \"./utils.js\";\nfunction defaultRetryDelay(failureCount) {\n  return Math.min(1e3 * 2 ** failureCount, 3e4);\n}\nfunction canFetch(networkMode) {\n  return (networkMode ?? \"online\") === \"online\" ? onlineManager.isOnline() : true;\n}\nvar CancelledError = class extends Error {\n  constructor(options) {\n    super(\"CancelledError\");\n    this.revert = options?.revert;\n    this.silent = options?.silent;\n  }\n};\nfunction isCancelledError(value) {\n  return value instanceof CancelledError;\n}\nfunction createRetryer(config) {\n  let isRetryCancelled = false;\n  let failureCount = 0;\n  let isResolved = false;\n  let continueFn;\n  const thenable = pendingThenable();\n  const cancel = (cancelOptions) => {\n    if (!isResolved) {\n      reject(new CancelledError(cancelOptions));\n      config.abort?.();\n    }\n  };\n  const cancelRetry = () => {\n    isRetryCancelled = true;\n  };\n  const continueRetry = () => {\n    isRetryCancelled = false;\n  };\n  const canContinue = () => focusManager.isFocused() && (config.networkMode === \"always\" || onlineManager.isOnline()) && config.canRun();\n  const canStart = () => canFetch(config.networkMode) && config.canRun();\n  const resolve = (value) => {\n    if (!isResolved) {\n      isResolved = true;\n      config.onSuccess?.(value);\n      continueFn?.();\n      thenable.resolve(value);\n    }\n  };\n  const reject = (value) => {\n    if (!isResolved) {\n      isResolved = true;\n      config.onError?.(value);\n      continueFn?.();\n      thenable.reject(value);\n    }\n  };\n  const pause = () => {\n    return new Promise((continueResolve) => {\n      continueFn = (value) => {\n        if (isResolved || canContinue()) {\n          continueResolve(value);\n        }\n      };\n      config.onPause?.();\n    }).then(() => {\n      continueFn = void 0;\n      if (!isResolved) {\n        config.onContinue?.();\n      }\n    });\n  };\n  const run = () => {\n    if (isResolved) {\n      return;\n    }\n    let promiseOrValue;\n    const initialPromise = failureCount === 0 ? config.initialPromise : void 0;\n    try {\n      promiseOrValue = initialPromise ?? config.fn();\n    } catch (error) {\n      promiseOrValue = Promise.reject(error);\n    }\n    Promise.resolve(promiseOrValue).then(resolve).catch((error) => {\n      if (isResolved) {\n        return;\n      }\n      const retry = config.retry ?? (isServer ? 0 : 3);\n      const retryDelay = config.retryDelay ?? defaultRetryDelay;\n      const delay = typeof retryDelay === \"function\" ? retryDelay(failureCount, error) : retryDelay;\n      const shouldRetry = retry === true || typeof retry === \"number\" && failureCount < retry || typeof retry === \"function\" && retry(failureCount, error);\n      if (isRetryCancelled || !shouldRetry) {\n        reject(error);\n        return;\n      }\n      failureCount++;\n      config.onFail?.(failureCount, error);\n      sleep(delay).then(() => {\n        return canContinue() ? void 0 : pause();\n      }).then(() => {\n        if (isRetryCancelled) {\n          reject(error);\n        } else {\n          run();\n        }\n      });\n    });\n  };\n  return {\n    promise: thenable,\n    cancel,\n    continue: () => {\n      continueFn?.();\n      return thenable;\n    },\n    cancelRetry,\n    continueRetry,\n    canStart,\n    start: () => {\n      if (canStart()) {\n        run();\n      } else {\n        pause().then(run);\n      }\n      return thenable;\n    }\n  };\n}\nexport {\n  CancelledError,\n  canFetch,\n  createRetryer,\n  isCancelledError\n};\n//# sourceMappingURL=retryer.js.map","// src/notifyManager.ts\nvar defaultScheduler = (cb) => setTimeout(cb, 0);\nfunction createNotifyManager() {\n  let queue = [];\n  let transactions = 0;\n  let notifyFn = (callback) => {\n    callback();\n  };\n  let batchNotifyFn = (callback) => {\n    callback();\n  };\n  let scheduleFn = defaultScheduler;\n  const schedule = (callback) => {\n    if (transactions) {\n      queue.push(callback);\n    } else {\n      scheduleFn(() => {\n        notifyFn(callback);\n      });\n    }\n  };\n  const flush = () => {\n    const originalQueue = queue;\n    queue = [];\n    if (originalQueue.length) {\n      scheduleFn(() => {\n        batchNotifyFn(() => {\n          originalQueue.forEach((callback) => {\n            notifyFn(callback);\n          });\n        });\n      });\n    }\n  };\n  return {\n    batch: (callback) => {\n      let result;\n      transactions++;\n      try {\n        result = callback();\n      } finally {\n        transactions--;\n        if (!transactions) {\n          flush();\n        }\n      }\n      return result;\n    },\n    /**\n     * All calls to the wrapped function will be batched.\n     */\n    batchCalls: (callback) => {\n      return (...args) => {\n        schedule(() => {\n          callback(...args);\n        });\n      };\n    },\n    schedule,\n    /**\n     * Use this method to set a custom notify function.\n     * This can be used to for example wrap notifications with `React.act` while running tests.\n     */\n    setNotifyFunction: (fn) => {\n      notifyFn = fn;\n    },\n    /**\n     * Use this method to set a custom function to batch notifications together into a single tick.\n     * By default React Query will use the batch function provided by ReactDOM or React Native.\n     */\n    setBatchNotifyFunction: (fn) => {\n      batchNotifyFn = fn;\n    },\n    setScheduler: (fn) => {\n      scheduleFn = fn;\n    }\n  };\n}\nvar notifyManager = createNotifyManager();\nexport {\n  createNotifyManager,\n  defaultScheduler,\n  notifyManager\n};\n//# sourceMappingURL=notifyManager.js.map","// src/removable.ts\nimport { isServer, isValidTimeout } from \"./utils.js\";\nvar Removable = class {\n  #gcTimeout;\n  destroy() {\n    this.clearGcTimeout();\n  }\n  scheduleGc() {\n    this.clearGcTimeout();\n    if (isValidTimeout(this.gcTime)) {\n      this.#gcTimeout = setTimeout(() => {\n        this.optionalRemove();\n      }, this.gcTime);\n    }\n  }\n  updateGcTime(newGcTime) {\n    this.gcTime = Math.max(\n      this.gcTime || 0,\n      newGcTime ?? (isServer ? Infinity : 5 * 60 * 1e3)\n    );\n  }\n  clearGcTimeout() {\n    if (this.#gcTimeout) {\n      clearTimeout(this.#gcTimeout);\n      this.#gcTimeout = void 0;\n    }\n  }\n};\nexport {\n  Removable\n};\n//# sourceMappingURL=removable.js.map","// src/query.ts\nimport {\n  ensureQueryFn,\n  noop,\n  replaceData,\n  resolveEnabled,\n  resolveStaleTime,\n  skipToken,\n  timeUntilStale\n} from \"./utils.js\";\nimport { notifyManager } from \"./notifyManager.js\";\nimport { canFetch, createRetryer, isCancelledError } from \"./retryer.js\";\nimport { Removable } from \"./removable.js\";\nvar Query = class extends Removable {\n  #initialState;\n  #revertState;\n  #cache;\n  #client;\n  #retryer;\n  #defaultOptions;\n  #abortSignalConsumed;\n  constructor(config) {\n    super();\n    this.#abortSignalConsumed = false;\n    this.#defaultOptions = config.defaultOptions;\n    this.setOptions(config.options);\n    this.observers = [];\n    this.#client = config.client;\n    this.#cache = this.#client.getQueryCache();\n    this.queryKey = config.queryKey;\n    this.queryHash = config.queryHash;\n    this.#initialState = getDefaultState(this.options);\n    this.state = config.state ?? this.#initialState;\n    this.scheduleGc();\n  }\n  get meta() {\n    return this.options.meta;\n  }\n  get promise() {\n    return this.#retryer?.promise;\n  }\n  setOptions(options) {\n    this.options = { ...this.#defaultOptions, ...options };\n    this.updateGcTime(this.options.gcTime);\n  }\n  optionalRemove() {\n    if (!this.observers.length && this.state.fetchStatus === \"idle\") {\n      this.#cache.remove(this);\n    }\n  }\n  setData(newData, options) {\n    const data = replaceData(this.state.data, newData, this.options);\n    this.#dispatch({\n      data,\n      type: \"success\",\n      dataUpdatedAt: options?.updatedAt,\n      manual: options?.manual\n    });\n    return data;\n  }\n  setState(state, setStateOptions) {\n    this.#dispatch({ type: \"setState\", state, setStateOptions });\n  }\n  cancel(options) {\n    const promise = this.#retryer?.promise;\n    this.#retryer?.cancel(options);\n    return promise ? promise.then(noop).catch(noop) : Promise.resolve();\n  }\n  destroy() {\n    super.destroy();\n    this.cancel({ silent: true });\n  }\n  reset() {\n    this.destroy();\n    this.setState(this.#initialState);\n  }\n  isActive() {\n    return this.observers.some(\n      (observer) => resolveEnabled(observer.options.enabled, this) !== false\n    );\n  }\n  isDisabled() {\n    if (this.getObserversCount() > 0) {\n      return !this.isActive();\n    }\n    return this.options.queryFn === skipToken || this.state.dataUpdateCount + this.state.errorUpdateCount === 0;\n  }\n  isStatic() {\n    if (this.getObserversCount() > 0) {\n      return this.observers.some(\n        (observer) => resolveStaleTime(observer.options.staleTime, this) === \"static\"\n      );\n    }\n    return false;\n  }\n  isStale() {\n    if (this.getObserversCount() > 0) {\n      return this.observers.some(\n        (observer) => observer.getCurrentResult().isStale\n      );\n    }\n    return this.state.data === void 0 || this.state.isInvalidated;\n  }\n  isStaleByTime(staleTime = 0) {\n    if (this.state.data === void 0) {\n      return true;\n    }\n    if (staleTime === \"static\") {\n      return false;\n    }\n    if (this.state.isInvalidated) {\n      return true;\n    }\n    return !timeUntilStale(this.state.dataUpdatedAt, staleTime);\n  }\n  onFocus() {\n    const observer = this.observers.find((x) => x.shouldFetchOnWindowFocus());\n    observer?.refetch({ cancelRefetch: false });\n    this.#retryer?.continue();\n  }\n  onOnline() {\n    const observer = this.observers.find((x) => x.shouldFetchOnReconnect());\n    observer?.refetch({ cancelRefetch: false });\n    this.#retryer?.continue();\n  }\n  addObserver(observer) {\n    if (!this.observers.includes(observer)) {\n      this.observers.push(observer);\n      this.clearGcTimeout();\n      this.#cache.notify({ type: \"observerAdded\", query: this, observer });\n    }\n  }\n  removeObserver(observer) {\n    if (this.observers.includes(observer)) {\n      this.observers = this.observers.filter((x) => x !== observer);\n      if (!this.observers.length) {\n        if (this.#retryer) {\n          if (this.#abortSignalConsumed) {\n            this.#retryer.cancel({ revert: true });\n          } else {\n            this.#retryer.cancelRetry();\n          }\n        }\n        this.scheduleGc();\n      }\n      this.#cache.notify({ type: \"observerRemoved\", query: this, observer });\n    }\n  }\n  getObserversCount() {\n    return this.observers.length;\n  }\n  invalidate() {\n    if (!this.state.isInvalidated) {\n      this.#dispatch({ type: \"invalidate\" });\n    }\n  }\n  fetch(options, fetchOptions) {\n    if (this.state.fetchStatus !== \"idle\") {\n      if (this.state.data !== void 0 && fetchOptions?.cancelRefetch) {\n        this.cancel({ silent: true });\n      } else if (this.#retryer) {\n        this.#retryer.continueRetry();\n        return this.#retryer.promise;\n      }\n    }\n    if (options) {\n      this.setOptions(options);\n    }\n    if (!this.options.queryFn) {\n      const observer = this.observers.find((x) => x.options.queryFn);\n      if (observer) {\n        this.setOptions(observer.options);\n      }\n    }\n    if (process.env.NODE_ENV !== \"production\") {\n      if (!Array.isArray(this.options.queryKey)) {\n        console.error(\n          `As of v4, queryKey needs to be an Array. If you are using a string like 'repoData', please change it to an Array, e.g. ['repoData']`\n        );\n      }\n    }\n    const abortController = new AbortController();\n    const addSignalProperty = (object) => {\n      Object.defineProperty(object, \"signal\", {\n        enumerable: true,\n        get: () => {\n          this.#abortSignalConsumed = true;\n          return abortController.signal;\n        }\n      });\n    };\n    const fetchFn = () => {\n      const queryFn = ensureQueryFn(this.options, fetchOptions);\n      const createQueryFnContext = () => {\n        const queryFnContext2 = {\n          client: this.#client,\n          queryKey: this.queryKey,\n          meta: this.meta\n        };\n        addSignalProperty(queryFnContext2);\n        return queryFnContext2;\n      };\n      const queryFnContext = createQueryFnContext();\n      this.#abortSignalConsumed = false;\n      if (this.options.persister) {\n        return this.options.persister(\n          queryFn,\n          queryFnContext,\n          this\n        );\n      }\n      return queryFn(queryFnContext);\n    };\n    const createFetchContext = () => {\n      const context2 = {\n        fetchOptions,\n        options: this.options,\n        queryKey: this.queryKey,\n        client: this.#client,\n        state: this.state,\n        fetchFn\n      };\n      addSignalProperty(context2);\n      return context2;\n    };\n    const context = createFetchContext();\n    this.options.behavior?.onFetch(context, this);\n    this.#revertState = this.state;\n    if (this.state.fetchStatus === \"idle\" || this.state.fetchMeta !== context.fetchOptions?.meta) {\n      this.#dispatch({ type: \"fetch\", meta: context.fetchOptions?.meta });\n    }\n    const onError = (error) => {\n      if (!(isCancelledError(error) && error.silent)) {\n        this.#dispatch({\n          type: \"error\",\n          error\n        });\n      }\n      if (!isCancelledError(error)) {\n        this.#cache.config.onError?.(\n          error,\n          this\n        );\n        this.#cache.config.onSettled?.(\n          this.state.data,\n          error,\n          this\n        );\n      }\n      this.scheduleGc();\n    };\n    this.#retryer = createRetryer({\n      initialPromise: fetchOptions?.initialPromise,\n      fn: context.fetchFn,\n      abort: abortController.abort.bind(abortController),\n      onSuccess: (data) => {\n        if (data === void 0) {\n          if (process.env.NODE_ENV !== \"production\") {\n            console.error(\n              `Query data cannot be undefined. Please make sure to return a value other than undefined from your query function. Affected query key: ${this.queryHash}`\n            );\n          }\n          onError(new Error(`${this.queryHash} data is undefined`));\n          return;\n        }\n        try {\n          this.setData(data);\n        } catch (error) {\n          onError(error);\n          return;\n        }\n        this.#cache.config.onSuccess?.(data, this);\n        this.#cache.config.onSettled?.(\n          data,\n          this.state.error,\n          this\n        );\n        this.scheduleGc();\n      },\n      onError,\n      onFail: (failureCount, error) => {\n        this.#dispatch({ type: \"failed\", failureCount, error });\n      },\n      onPause: () => {\n        this.#dispatch({ type: \"pause\" });\n      },\n      onContinue: () => {\n        this.#dispatch({ type: \"continue\" });\n      },\n      retry: context.options.retry,\n      retryDelay: context.options.retryDelay,\n      networkMode: context.options.networkMode,\n      canRun: () => true\n    });\n    return this.#retryer.start();\n  }\n  #dispatch(action) {\n    const reducer = (state) => {\n      switch (action.type) {\n        case \"failed\":\n          return {\n            ...state,\n            fetchFailureCount: action.failureCount,\n            fetchFailureReason: action.error\n          };\n        case \"pause\":\n          return {\n            ...state,\n            fetchStatus: \"paused\"\n          };\n        case \"continue\":\n          return {\n            ...state,\n            fetchStatus: \"fetching\"\n          };\n        case \"fetch\":\n          return {\n            ...state,\n            ...fetchState(state.data, this.options),\n            fetchMeta: action.meta ?? null\n          };\n        case \"success\":\n          this.#revertState = void 0;\n          return {\n            ...state,\n            data: action.data,\n            dataUpdateCount: state.dataUpdateCount + 1,\n            dataUpdatedAt: action.dataUpdatedAt ?? Date.now(),\n            error: null,\n            isInvalidated: false,\n            status: \"success\",\n            ...!action.manual && {\n              fetchStatus: \"idle\",\n              fetchFailureCount: 0,\n              fetchFailureReason: null\n            }\n          };\n        case \"error\":\n          const error = action.error;\n          if (isCancelledError(error) && error.revert && this.#revertState) {\n            return { ...this.#revertState, fetchStatus: \"idle\" };\n          }\n          return {\n            ...state,\n            error,\n            errorUpdateCount: state.errorUpdateCount + 1,\n            errorUpdatedAt: Date.now(),\n            fetchFailureCount: state.fetchFailureCount + 1,\n            fetchFailureReason: error,\n            fetchStatus: \"idle\",\n            status: \"error\"\n          };\n        case \"invalidate\":\n          return {\n            ...state,\n            isInvalidated: true\n          };\n        case \"setState\":\n          return {\n            ...state,\n            ...action.state\n          };\n      }\n    };\n    this.state = reducer(this.state);\n    notifyManager.batch(() => {\n      this.observers.forEach((observer) => {\n        observer.onQueryUpdate();\n      });\n      this.#cache.notify({ query: this, type: \"updated\", action });\n    });\n  }\n};\nfunction fetchState(data, options) {\n  return {\n    fetchFailureCount: 0,\n    fetchFailureReason: null,\n    fetchStatus: canFetch(options.networkMode) ? \"fetching\" : \"paused\",\n    ...data === void 0 && {\n      error: null,\n      status: \"pending\"\n    }\n  };\n}\nfunction getDefaultState(options) {\n  const data = typeof options.initialData === \"function\" ? options.initialData() : options.initialData;\n  const hasData = data !== void 0;\n  const initialDataUpdatedAt = hasData ? typeof options.initialDataUpdatedAt === \"function\" ? options.initialDataUpdatedAt() : options.initialDataUpdatedAt : 0;\n  return {\n    data,\n    dataUpdateCount: 0,\n    dataUpdatedAt: hasData ? initialDataUpdatedAt ?? Date.now() : 0,\n    error: null,\n    errorUpdateCount: 0,\n    errorUpdatedAt: 0,\n    fetchFailureCount: 0,\n    fetchFailureReason: null,\n    fetchMeta: null,\n    isInvalidated: false,\n    status: hasData ? \"success\" : \"pending\",\n    fetchStatus: \"idle\"\n  };\n}\nexport {\n  Query,\n  fetchState\n};\n//# sourceMappingURL=query.js.map","// src/queryCache.ts\nimport { hashQueryKeyByOptions, matchQuery } from \"./utils.js\";\nimport { Query } from \"./query.js\";\nimport { notifyManager } from \"./notifyManager.js\";\nimport { Subscribable } from \"./subscribable.js\";\nvar QueryCache = class extends Subscribable {\n  constructor(config = {}) {\n    super();\n    this.config = config;\n    this.#queries = /* @__PURE__ */ new Map();\n  }\n  #queries;\n  build(client, options, state) {\n    const queryKey = options.queryKey;\n    const queryHash = options.queryHash ?? hashQueryKeyByOptions(queryKey, options);\n    let query = this.get(queryHash);\n    if (!query) {\n      query = new Query({\n        client,\n        queryKey,\n        queryHash,\n        options: client.defaultQueryOptions(options),\n        state,\n        defaultOptions: client.getQueryDefaults(queryKey)\n      });\n      this.add(query);\n    }\n    return query;\n  }\n  add(query) {\n    if (!this.#queries.has(query.queryHash)) {\n      this.#queries.set(query.queryHash, query);\n      this.notify({\n        type: \"added\",\n        query\n      });\n    }\n  }\n  remove(query) {\n    const queryInMap = this.#queries.get(query.queryHash);\n    if (queryInMap) {\n      query.destroy();\n      if (queryInMap === query) {\n        this.#queries.delete(query.queryHash);\n      }\n      this.notify({ type: \"removed\", query });\n    }\n  }\n  clear() {\n    notifyManager.batch(() => {\n      this.getAll().forEach((query) => {\n        this.remove(query);\n      });\n    });\n  }\n  get(queryHash) {\n    return this.#queries.get(queryHash);\n  }\n  getAll() {\n    return [...this.#queries.values()];\n  }\n  find(filters) {\n    const defaultedFilters = { exact: true, ...filters };\n    return this.getAll().find(\n      (query) => matchQuery(defaultedFilters, query)\n    );\n  }\n  findAll(filters = {}) {\n    const queries = this.getAll();\n    return Object.keys(filters).length > 0 ? queries.filter((query) => matchQuery(filters, query)) : queries;\n  }\n  notify(event) {\n    notifyManager.batch(() => {\n      this.listeners.forEach((listener) => {\n        listener(event);\n      });\n    });\n  }\n  onFocus() {\n    notifyManager.batch(() => {\n      this.getAll().forEach((query) => {\n        query.onFocus();\n      });\n    });\n  }\n  onOnline() {\n    notifyManager.batch(() => {\n      this.getAll().forEach((query) => {\n        query.onOnline();\n      });\n    });\n  }\n};\nexport {\n  QueryCache\n};\n//# sourceMappingURL=queryCache.js.map","// src/mutation.ts\nimport { notifyManager } from \"./notifyManager.js\";\nimport { Removable } from \"./removable.js\";\nimport { createRetryer } from \"./retryer.js\";\nvar Mutation = class extends Removable {\n  #observers;\n  #mutationCache;\n  #retryer;\n  constructor(config) {\n    super();\n    this.mutationId = config.mutationId;\n    this.#mutationCache = config.mutationCache;\n    this.#observers = [];\n    this.state = config.state || getDefaultState();\n    this.setOptions(config.options);\n    this.scheduleGc();\n  }\n  setOptions(options) {\n    this.options = options;\n    this.updateGcTime(this.options.gcTime);\n  }\n  get meta() {\n    return this.options.meta;\n  }\n  addObserver(observer) {\n    if (!this.#observers.includes(observer)) {\n      this.#observers.push(observer);\n      this.clearGcTimeout();\n      this.#mutationCache.notify({\n        type: \"observerAdded\",\n        mutation: this,\n        observer\n      });\n    }\n  }\n  removeObserver(observer) {\n    this.#observers = this.#observers.filter((x) => x !== observer);\n    this.scheduleGc();\n    this.#mutationCache.notify({\n      type: \"observerRemoved\",\n      mutation: this,\n      observer\n    });\n  }\n  optionalRemove() {\n    if (!this.#observers.length) {\n      if (this.state.status === \"pending\") {\n        this.scheduleGc();\n      } else {\n        this.#mutationCache.remove(this);\n      }\n    }\n  }\n  continue() {\n    return this.#retryer?.continue() ?? // continuing a mutation assumes that variables are set, mutation must have been dehydrated before\n    this.execute(this.state.variables);\n  }\n  async execute(variables) {\n    const onContinue = () => {\n      this.#dispatch({ type: \"continue\" });\n    };\n    this.#retryer = createRetryer({\n      fn: () => {\n        if (!this.options.mutationFn) {\n          return Promise.reject(new Error(\"No mutationFn found\"));\n        }\n        return this.options.mutationFn(variables);\n      },\n      onFail: (failureCount, error) => {\n        this.#dispatch({ type: \"failed\", failureCount, error });\n      },\n      onPause: () => {\n        this.#dispatch({ type: \"pause\" });\n      },\n      onContinue,\n      retry: this.options.retry ?? 0,\n      retryDelay: this.options.retryDelay,\n      networkMode: this.options.networkMode,\n      canRun: () => this.#mutationCache.canRun(this)\n    });\n    const restored = this.state.status === \"pending\";\n    const isPaused = !this.#retryer.canStart();\n    try {\n      if (restored) {\n        onContinue();\n      } else {\n        this.#dispatch({ type: \"pending\", variables, isPaused });\n        await this.#mutationCache.config.onMutate?.(\n          variables,\n          this\n        );\n        const context = await this.options.onMutate?.(variables);\n        if (context !== this.state.context) {\n          this.#dispatch({\n            type: \"pending\",\n            context,\n            variables,\n            isPaused\n          });\n        }\n      }\n      const data = await this.#retryer.start();\n      await this.#mutationCache.config.onSuccess?.(\n        data,\n        variables,\n        this.state.context,\n        this\n      );\n      await this.options.onSuccess?.(data, variables, this.state.context);\n      await this.#mutationCache.config.onSettled?.(\n        data,\n        null,\n        this.state.variables,\n        this.state.context,\n        this\n      );\n      await this.options.onSettled?.(data, null, variables, this.state.context);\n      this.#dispatch({ type: \"success\", data });\n      return data;\n    } catch (error) {\n      try {\n        await this.#mutationCache.config.onError?.(\n          error,\n          variables,\n          this.state.context,\n          this\n        );\n        await this.options.onError?.(\n          error,\n          variables,\n          this.state.context\n        );\n        await this.#mutationCache.config.onSettled?.(\n          void 0,\n          error,\n          this.state.variables,\n          this.state.context,\n          this\n        );\n        await this.options.onSettled?.(\n          void 0,\n          error,\n          variables,\n          this.state.context\n        );\n        throw error;\n      } finally {\n        this.#dispatch({ type: \"error\", error });\n      }\n    } finally {\n      this.#mutationCache.runNext(this);\n    }\n  }\n  #dispatch(action) {\n    const reducer = (state) => {\n      switch (action.type) {\n        case \"failed\":\n          return {\n            ...state,\n            failureCount: action.failureCount,\n            failureReason: action.error\n          };\n        case \"pause\":\n          return {\n            ...state,\n            isPaused: true\n          };\n        case \"continue\":\n          return {\n            ...state,\n            isPaused: false\n          };\n        case \"pending\":\n          return {\n            ...state,\n            context: action.context,\n            data: void 0,\n            failureCount: 0,\n            failureReason: null,\n            error: null,\n            isPaused: action.isPaused,\n            status: \"pending\",\n            variables: action.variables,\n            submittedAt: Date.now()\n          };\n        case \"success\":\n          return {\n            ...state,\n            data: action.data,\n            failureCount: 0,\n            failureReason: null,\n            error: null,\n            status: \"success\",\n            isPaused: false\n          };\n        case \"error\":\n          return {\n            ...state,\n            data: void 0,\n            error: action.error,\n            failureCount: state.failureCount + 1,\n            failureReason: action.error,\n            isPaused: false,\n            status: \"error\"\n          };\n      }\n    };\n    this.state = reducer(this.state);\n    notifyManager.batch(() => {\n      this.#observers.forEach((observer) => {\n        observer.onMutationUpdate(action);\n      });\n      this.#mutationCache.notify({\n        mutation: this,\n        type: \"updated\",\n        action\n      });\n    });\n  }\n};\nfunction getDefaultState() {\n  return {\n    context: void 0,\n    data: void 0,\n    error: null,\n    failureCount: 0,\n    failureReason: null,\n    isPaused: false,\n    status: \"idle\",\n    variables: void 0,\n    submittedAt: 0\n  };\n}\nexport {\n  Mutation,\n  getDefaultState\n};\n//# sourceMappingURL=mutation.js.map","// src/mutationCache.ts\nimport { notifyManager } from \"./notifyManager.js\";\nimport { Mutation } from \"./mutation.js\";\nimport { matchMutation, noop } from \"./utils.js\";\nimport { Subscribable } from \"./subscribable.js\";\nvar MutationCache = class extends Subscribable {\n  constructor(config = {}) {\n    super();\n    this.config = config;\n    this.#mutations = /* @__PURE__ */ new Set();\n    this.#scopes = /* @__PURE__ */ new Map();\n    this.#mutationId = 0;\n  }\n  #mutations;\n  #scopes;\n  #mutationId;\n  build(client, options, state) {\n    const mutation = new Mutation({\n      mutationCache: this,\n      mutationId: ++this.#mutationId,\n      options: client.defaultMutationOptions(options),\n      state\n    });\n    this.add(mutation);\n    return mutation;\n  }\n  add(mutation) {\n    this.#mutations.add(mutation);\n    const scope = scopeFor(mutation);\n    if (typeof scope === \"string\") {\n      const scopedMutations = this.#scopes.get(scope);\n      if (scopedMutations) {\n        scopedMutations.push(mutation);\n      } else {\n        this.#scopes.set(scope, [mutation]);\n      }\n    }\n    this.notify({ type: \"added\", mutation });\n  }\n  remove(mutation) {\n    if (this.#mutations.delete(mutation)) {\n      const scope = scopeFor(mutation);\n      if (typeof scope === \"string\") {\n        const scopedMutations = this.#scopes.get(scope);\n        if (scopedMutations) {\n          if (scopedMutations.length > 1) {\n            const index = scopedMutations.indexOf(mutation);\n            if (index !== -1) {\n              scopedMutations.splice(index, 1);\n            }\n          } else if (scopedMutations[0] === mutation) {\n            this.#scopes.delete(scope);\n          }\n        }\n      }\n    }\n    this.notify({ type: \"removed\", mutation });\n  }\n  canRun(mutation) {\n    const scope = scopeFor(mutation);\n    if (typeof scope === \"string\") {\n      const mutationsWithSameScope = this.#scopes.get(scope);\n      const firstPendingMutation = mutationsWithSameScope?.find(\n        (m) => m.state.status === \"pending\"\n      );\n      return !firstPendingMutation || firstPendingMutation === mutation;\n    } else {\n      return true;\n    }\n  }\n  runNext(mutation) {\n    const scope = scopeFor(mutation);\n    if (typeof scope === \"string\") {\n      const foundMutation = this.#scopes.get(scope)?.find((m) => m !== mutation && m.state.isPaused);\n      return foundMutation?.continue() ?? Promise.resolve();\n    } else {\n      return Promise.resolve();\n    }\n  }\n  clear() {\n    notifyManager.batch(() => {\n      this.#mutations.forEach((mutation) => {\n        this.notify({ type: \"removed\", mutation });\n      });\n      this.#mutations.clear();\n      this.#scopes.clear();\n    });\n  }\n  getAll() {\n    return Array.from(this.#mutations);\n  }\n  find(filters) {\n    const defaultedFilters = { exact: true, ...filters };\n    return this.getAll().find(\n      (mutation) => matchMutation(defaultedFilters, mutation)\n    );\n  }\n  findAll(filters = {}) {\n    return this.getAll().filter((mutation) => matchMutation(filters, mutation));\n  }\n  notify(event) {\n    notifyManager.batch(() => {\n      this.listeners.forEach((listener) => {\n        listener(event);\n      });\n    });\n  }\n  resumePausedMutations() {\n    const pausedMutations = this.getAll().filter((x) => x.state.isPaused);\n    return notifyManager.batch(\n      () => Promise.all(\n        pausedMutations.map((mutation) => mutation.continue().catch(noop))\n      )\n    );\n  }\n};\nfunction scopeFor(mutation) {\n  return mutation.options.scope?.id;\n}\nexport {\n  MutationCache\n};\n//# sourceMappingURL=mutationCache.js.map","// src/infiniteQueryBehavior.ts\nimport { addToEnd, addToStart, ensureQueryFn } from \"./utils.js\";\nfunction infiniteQueryBehavior(pages) {\n  return {\n    onFetch: (context, query) => {\n      const options = context.options;\n      const direction = context.fetchOptions?.meta?.fetchMore?.direction;\n      const oldPages = context.state.data?.pages || [];\n      const oldPageParams = context.state.data?.pageParams || [];\n      let result = { pages: [], pageParams: [] };\n      let currentPage = 0;\n      const fetchFn = async () => {\n        let cancelled = false;\n        const addSignalProperty = (object) => {\n          Object.defineProperty(object, \"signal\", {\n            enumerable: true,\n            get: () => {\n              if (context.signal.aborted) {\n                cancelled = true;\n              } else {\n                context.signal.addEventListener(\"abort\", () => {\n                  cancelled = true;\n                });\n              }\n              return context.signal;\n            }\n          });\n        };\n        const queryFn = ensureQueryFn(context.options, context.fetchOptions);\n        const fetchPage = async (data, param, previous) => {\n          if (cancelled) {\n            return Promise.reject();\n          }\n          if (param == null && data.pages.length) {\n            return Promise.resolve(data);\n          }\n          const createQueryFnContext = () => {\n            const queryFnContext2 = {\n              client: context.client,\n              queryKey: context.queryKey,\n              pageParam: param,\n              direction: previous ? \"backward\" : \"forward\",\n              meta: context.options.meta\n            };\n            addSignalProperty(queryFnContext2);\n            return queryFnContext2;\n          };\n          const queryFnContext = createQueryFnContext();\n          const page = await queryFn(queryFnContext);\n          const { maxPages } = context.options;\n          const addTo = previous ? addToStart : addToEnd;\n          return {\n            pages: addTo(data.pages, page, maxPages),\n            pageParams: addTo(data.pageParams, param, maxPages)\n          };\n        };\n        if (direction && oldPages.length) {\n          const previous = direction === \"backward\";\n          const pageParamFn = previous ? getPreviousPageParam : getNextPageParam;\n          const oldData = {\n            pages: oldPages,\n            pageParams: oldPageParams\n          };\n          const param = pageParamFn(options, oldData);\n          result = await fetchPage(oldData, param, previous);\n        } else {\n          const remainingPages = pages ?? oldPages.length;\n          do {\n            const param = currentPage === 0 ? oldPageParams[0] ?? options.initialPageParam : getNextPageParam(options, result);\n            if (currentPage > 0 && param == null) {\n              break;\n            }\n            result = await fetchPage(result, param);\n            currentPage++;\n          } while (currentPage < remainingPages);\n        }\n        return result;\n      };\n      if (context.options.persister) {\n        context.fetchFn = () => {\n          return context.options.persister?.(\n            fetchFn,\n            {\n              client: context.client,\n              queryKey: context.queryKey,\n              meta: context.options.meta,\n              signal: context.signal\n            },\n            query\n          );\n        };\n      } else {\n        context.fetchFn = fetchFn;\n      }\n    }\n  };\n}\nfunction getNextPageParam(options, { pages, pageParams }) {\n  const lastIndex = pages.length - 1;\n  return pages.length > 0 ? options.getNextPageParam(\n    pages[lastIndex],\n    pages,\n    pageParams[lastIndex],\n    pageParams\n  ) : void 0;\n}\nfunction getPreviousPageParam(options, { pages, pageParams }) {\n  return pages.length > 0 ? options.getPreviousPageParam?.(pages[0], pages, pageParams[0], pageParams) : void 0;\n}\nfunction hasNextPage(options, data) {\n  if (!data) return false;\n  return getNextPageParam(options, data) != null;\n}\nfunction hasPreviousPage(options, data) {\n  if (!data || !options.getPreviousPageParam) return false;\n  return getPreviousPageParam(options, data) != null;\n}\nexport {\n  hasNextPage,\n  hasPreviousPage,\n  infiniteQueryBehavior\n};\n//# sourceMappingURL=infiniteQueryBehavior.js.map","// src/queryClient.ts\nimport {\n  functionalUpdate,\n  hashKey,\n  hashQueryKeyByOptions,\n  noop,\n  partialMatchKey,\n  resolveStaleTime,\n  skipToken\n} from \"./utils.js\";\nimport { QueryCache } from \"./queryCache.js\";\nimport { MutationCache } from \"./mutationCache.js\";\nimport { focusManager } from \"./focusManager.js\";\nimport { onlineManager } from \"./onlineManager.js\";\nimport { notifyManager } from \"./notifyManager.js\";\nimport { infiniteQueryBehavior } from \"./infiniteQueryBehavior.js\";\nvar QueryClient = class {\n  #queryCache;\n  #mutationCache;\n  #defaultOptions;\n  #queryDefaults;\n  #mutationDefaults;\n  #mountCount;\n  #unsubscribeFocus;\n  #unsubscribeOnline;\n  constructor(config = {}) {\n    this.#queryCache = config.queryCache || new QueryCache();\n    this.#mutationCache = config.mutationCache || new MutationCache();\n    this.#defaultOptions = config.defaultOptions || {};\n    this.#queryDefaults = /* @__PURE__ */ new Map();\n    this.#mutationDefaults = /* @__PURE__ */ new Map();\n    this.#mountCount = 0;\n  }\n  mount() {\n    this.#mountCount++;\n    if (this.#mountCount !== 1) return;\n    this.#unsubscribeFocus = focusManager.subscribe(async (focused) => {\n      if (focused) {\n        await this.resumePausedMutations();\n        this.#queryCache.onFocus();\n      }\n    });\n    this.#unsubscribeOnline = onlineManager.subscribe(async (online) => {\n      if (online) {\n        await this.resumePausedMutations();\n        this.#queryCache.onOnline();\n      }\n    });\n  }\n  unmount() {\n    this.#mountCount--;\n    if (this.#mountCount !== 0) return;\n    this.#unsubscribeFocus?.();\n    this.#unsubscribeFocus = void 0;\n    this.#unsubscribeOnline?.();\n    this.#unsubscribeOnline = void 0;\n  }\n  isFetching(filters) {\n    return this.#queryCache.findAll({ ...filters, fetchStatus: \"fetching\" }).length;\n  }\n  isMutating(filters) {\n    return this.#mutationCache.findAll({ ...filters, status: \"pending\" }).length;\n  }\n  /**\n   * Imperative (non-reactive) way to retrieve data for a QueryKey.\n   * Should only be used in callbacks or functions where reading the latest data is necessary, e.g. for optimistic updates.\n   *\n   * Hint: Do not use this function inside a component, because it won't receive updates.\n   * Use `useQuery` to create a `QueryObserver` that subscribes to changes.\n   */\n  getQueryData(queryKey) {\n    const options = this.defaultQueryOptions({ queryKey });\n    return this.#queryCache.get(options.queryHash)?.state.data;\n  }\n  ensureQueryData(options) {\n    const defaultedOptions = this.defaultQueryOptions(options);\n    const query = this.#queryCache.build(this, defaultedOptions);\n    const cachedData = query.state.data;\n    if (cachedData === void 0) {\n      return this.fetchQuery(options);\n    }\n    if (options.revalidateIfStale && query.isStaleByTime(resolveStaleTime(defaultedOptions.staleTime, query))) {\n      void this.prefetchQuery(defaultedOptions);\n    }\n    return Promise.resolve(cachedData);\n  }\n  getQueriesData(filters) {\n    return this.#queryCache.findAll(filters).map(({ queryKey, state }) => {\n      const data = state.data;\n      return [queryKey, data];\n    });\n  }\n  setQueryData(queryKey, updater, options) {\n    const defaultedOptions = this.defaultQueryOptions({ queryKey });\n    const query = this.#queryCache.get(\n      defaultedOptions.queryHash\n    );\n    const prevData = query?.state.data;\n    const data = functionalUpdate(updater, prevData);\n    if (data === void 0) {\n      return void 0;\n    }\n    return this.#queryCache.build(this, defaultedOptions).setData(data, { ...options, manual: true });\n  }\n  setQueriesData(filters, updater, options) {\n    return notifyManager.batch(\n      () => this.#queryCache.findAll(filters).map(({ queryKey }) => [\n        queryKey,\n        this.setQueryData(queryKey, updater, options)\n      ])\n    );\n  }\n  getQueryState(queryKey) {\n    const options = this.defaultQueryOptions({ queryKey });\n    return this.#queryCache.get(\n      options.queryHash\n    )?.state;\n  }\n  removeQueries(filters) {\n    const queryCache = this.#queryCache;\n    notifyManager.batch(() => {\n      queryCache.findAll(filters).forEach((query) => {\n        queryCache.remove(query);\n      });\n    });\n  }\n  resetQueries(filters, options) {\n    const queryCache = this.#queryCache;\n    return notifyManager.batch(() => {\n      queryCache.findAll(filters).forEach((query) => {\n        query.reset();\n      });\n      return this.refetchQueries(\n        {\n          type: \"active\",\n          ...filters\n        },\n        options\n      );\n    });\n  }\n  cancelQueries(filters, cancelOptions = {}) {\n    const defaultedCancelOptions = { revert: true, ...cancelOptions };\n    const promises = notifyManager.batch(\n      () => this.#queryCache.findAll(filters).map((query) => query.cancel(defaultedCancelOptions))\n    );\n    return Promise.all(promises).then(noop).catch(noop);\n  }\n  invalidateQueries(filters, options = {}) {\n    return notifyManager.batch(() => {\n      this.#queryCache.findAll(filters).forEach((query) => {\n        query.invalidate();\n      });\n      if (filters?.refetchType === \"none\") {\n        return Promise.resolve();\n      }\n      return this.refetchQueries(\n        {\n          ...filters,\n          type: filters?.refetchType ?? filters?.type ?? \"active\"\n        },\n        options\n      );\n    });\n  }\n  refetchQueries(filters, options = {}) {\n    const fetchOptions = {\n      ...options,\n      cancelRefetch: options.cancelRefetch ?? true\n    };\n    const promises = notifyManager.batch(\n      () => this.#queryCache.findAll(filters).filter((query) => !query.isDisabled() && !query.isStatic()).map((query) => {\n        let promise = query.fetch(void 0, fetchOptions);\n        if (!fetchOptions.throwOnError) {\n          promise = promise.catch(noop);\n        }\n        return query.state.fetchStatus === \"paused\" ? Promise.resolve() : promise;\n      })\n    );\n    return Promise.all(promises).then(noop);\n  }\n  fetchQuery(options) {\n    const defaultedOptions = this.defaultQueryOptions(options);\n    if (defaultedOptions.retry === void 0) {\n      defaultedOptions.retry = false;\n    }\n    const query = this.#queryCache.build(this, defaultedOptions);\n    return query.isStaleByTime(\n      resolveStaleTime(defaultedOptions.staleTime, query)\n    ) ? query.fetch(defaultedOptions) : Promise.resolve(query.state.data);\n  }\n  prefetchQuery(options) {\n    return this.fetchQuery(options).then(noop).catch(noop);\n  }\n  fetchInfiniteQuery(options) {\n    options.behavior = infiniteQueryBehavior(options.pages);\n    return this.fetchQuery(options);\n  }\n  prefetchInfiniteQuery(options) {\n    return this.fetchInfiniteQuery(options).then(noop).catch(noop);\n  }\n  ensureInfiniteQueryData(options) {\n    options.behavior = infiniteQueryBehavior(options.pages);\n    return this.ensureQueryData(options);\n  }\n  resumePausedMutations() {\n    if (onlineManager.isOnline()) {\n      return this.#mutationCache.resumePausedMutations();\n    }\n    return Promise.resolve();\n  }\n  getQueryCache() {\n    return this.#queryCache;\n  }\n  getMutationCache() {\n    return this.#mutationCache;\n  }\n  getDefaultOptions() {\n    return this.#defaultOptions;\n  }\n  setDefaultOptions(options) {\n    this.#defaultOptions = options;\n  }\n  setQueryDefaults(queryKey, options) {\n    this.#queryDefaults.set(hashKey(queryKey), {\n      queryKey,\n      defaultOptions: options\n    });\n  }\n  getQueryDefaults(queryKey) {\n    const defaults = [...this.#queryDefaults.values()];\n    const result = {};\n    defaults.forEach((queryDefault) => {\n      if (partialMatchKey(queryKey, queryDefault.queryKey)) {\n        Object.assign(result, queryDefault.defaultOptions);\n      }\n    });\n    return result;\n  }\n  setMutationDefaults(mutationKey, options) {\n    this.#mutationDefaults.set(hashKey(mutationKey), {\n      mutationKey,\n      defaultOptions: options\n    });\n  }\n  getMutationDefaults(mutationKey) {\n    const defaults = [...this.#mutationDefaults.values()];\n    const result = {};\n    defaults.forEach((queryDefault) => {\n      if (partialMatchKey(mutationKey, queryDefault.mutationKey)) {\n        Object.assign(result, queryDefault.defaultOptions);\n      }\n    });\n    return result;\n  }\n  defaultQueryOptions(options) {\n    if (options._defaulted) {\n      return options;\n    }\n    const defaultedOptions = {\n      ...this.#defaultOptions.queries,\n      ...this.getQueryDefaults(options.queryKey),\n      ...options,\n      _defaulted: true\n    };\n    if (!defaultedOptions.queryHash) {\n      defaultedOptions.queryHash = hashQueryKeyByOptions(\n        defaultedOptions.queryKey,\n        defaultedOptions\n      );\n    }\n    if (defaultedOptions.refetchOnReconnect === void 0) {\n      defaultedOptions.refetchOnReconnect = defaultedOptions.networkMode !== \"always\";\n    }\n    if (defaultedOptions.throwOnError === void 0) {\n      defaultedOptions.throwOnError = !!defaultedOptions.suspense;\n    }\n    if (!defaultedOptions.networkMode && defaultedOptions.persister) {\n      defaultedOptions.networkMode = \"offlineFirst\";\n    }\n    if (defaultedOptions.queryFn === skipToken) {\n      defaultedOptions.enabled = false;\n    }\n    return defaultedOptions;\n  }\n  defaultMutationOptions(options) {\n    if (options?._defaulted) {\n      return options;\n    }\n    return {\n      ...this.#defaultOptions.mutations,\n      ...options?.mutationKey && this.getMutationDefaults(options.mutationKey),\n      ...options,\n      _defaulted: true\n    };\n  }\n  clear() {\n    this.#queryCache.clear();\n    this.#mutationCache.clear();\n  }\n};\nexport {\n  QueryClient\n};\n//# sourceMappingURL=queryClient.js.map","\"use client\";\n\n// src/QueryClientProvider.tsx\nimport * as React from \"react\";\nimport { jsx } from \"react/jsx-runtime\";\nvar QueryClientContext = React.createContext(\n  void 0\n);\nvar useQueryClient = (queryClient) => {\n  const client = React.useContext(QueryClientContext);\n  if (queryClient) {\n    return queryClient;\n  }\n  if (!client) {\n    throw new Error(\"No QueryClient set, use QueryClientProvider to set one\");\n  }\n  return client;\n};\nvar QueryClientProvider = ({\n  client,\n  children\n}) => {\n  React.useEffect(() => {\n    client.mount();\n    return () => {\n      client.unmount();\n    };\n  }, [client]);\n  return /* @__PURE__ */ jsx(QueryClientContext.Provider, { value: client, children });\n};\nexport {\n  QueryClientContext,\n  QueryClientProvider,\n  useQueryClient\n};\n//# sourceMappingURL=QueryClientProvider.js.map","/**\n *  HexGrid Component - Composant rutilisable pour grille hexagonale\n * Utilisable dans Game, Editor, Chasse Temporelle\n */\n\nimport React from 'react';\n\nexport interface Hex {\n  x: number;\n  y: number;\n  terrain?: string;\n  entity?: any;\n  fog?: 'total' | 'partial' | 'clear';\n  overlay?: string;\n}\n\nexport interface HexGridProps {\n  width: number;\n  height: number;\n  hexSize?: number;\n  hexes: Map<string, Hex>;\n  selectedHex?: { x: number; y: number } | null;\n  onHexClick?: (x: number, y: number) => void;\n  onHexHover?: (x: number, y: number) => void;\n  onHexRightClick?: (x: number, y: number) => void;\n  showCoordinates?: boolean;\n  showGrid?: boolean;\n  enableDrag?: boolean;\n  viewport?: { x: number; y: number; zoom: number };\n}\n\nexport function HexGrid({\n  width,\n  height,\n  hexSize = 60,\n  hexes,\n  selectedHex,\n  onHexClick,\n  onHexHover,\n  onHexRightClick,\n  showCoordinates = false,\n  showGrid = true,\n  enableDrag = false,\n  viewport = { x: 0, y: 0, zoom: 1 }\n}: HexGridProps): React.ReactElement {\n  const [isDragging, setIsDragging] = React.useState(false);\n  const [dragStart, setDragStart] = React.useState({ x: 0, y: 0 });\n  const [viewOffset, setViewOffset] = React.useState(viewport);\n  \n  // Calcul des dimensions hexagonales\n  const hexWidth = hexSize * 2;\n  const hexHeight = Math.sqrt(3) * hexSize;\n  const vertDist = hexHeight * 0.75;\n  const horizDist = hexWidth * 0.75;\n  \n  // Conversion coordonnes hex  pixel\n  const hexToPixel = (x: number, y: number) => {\n    const offsetY = x % 2 === 1 ? hexHeight / 2 : 0;\n    return {\n      x: x * horizDist,\n      y: y * vertDist + offsetY\n    };\n  };\n  \n  // Conversion pixel  hex (pour les clics)\n  const pixelToHex = (pixelX: number, pixelY: number) => {\n    const x = Math.round(pixelX / horizDist);\n    const offsetY = x % 2 === 1 ? hexHeight / 2 : 0;\n    const y = Math.round((pixelY - offsetY) / vertDist);\n    return { x, y };\n  };\n  \n  // Gestion du drag\n  const handleMouseDown = (e: React.MouseEvent) => {\n    if (!enableDrag) return;\n    setIsDragging(true);\n    setDragStart({ x: e.clientX - viewOffset.x, y: e.clientY - viewOffset.y });\n  };\n  \n  const handleMouseMove = (e: React.MouseEvent) => {\n    if (!isDragging || !enableDrag) return;\n    setViewOffset({\n      ...viewOffset,\n      x: e.clientX - dragStart.x,\n      y: e.clientY - dragStart.y\n    });\n  };\n  \n  const handleMouseUp = () => {\n    setIsDragging(false);\n  };\n  \n  // Gestion du zoom\n  const handleWheel = (e: React.WheelEvent) => {\n    if (!enableDrag) return;\n    e.preventDefault();\n    const newZoom = Math.max(0.5, Math.min(2, viewOffset.zoom + e.deltaY * -0.001));\n    setViewOffset({ ...viewOffset, zoom: newZoom });\n  };\n  \n  // Style du terrain\n  const getTerrainStyle = (terrain?: string) => {\n    const terrainStyles: Record<string, React.CSSProperties> = {\n      grass: { background: 'linear-gradient(135deg, #2d5016, #4a8025)' },\n      forest: { background: 'linear-gradient(135deg, #1a3a1a, #2a5a2a)' },\n      mountain: { background: 'linear-gradient(135deg, #5a5a5a, #8a8a8a)' },\n      water: { background: 'linear-gradient(135deg, #1e3a5f, #2e5a8f)' },\n      mystique: { background: 'linear-gradient(135deg, #4a1a5a, #6a3a7a)' },\n      quantum: { background: 'linear-gradient(135deg, #1a3a4a, #3a5a6a)' },\n      nexus: { \n        background: 'radial-gradient(circle, #ff00ff, #00ffff)',\n        animation: 'pulse 2s infinite'\n      }\n    };\n    return terrainStyles[terrain || 'grass'] || terrainStyles.grass;\n  };\n  \n  // Style du brouillard\n  const getFogStyle = (fog?: string): React.CSSProperties => {\n    switch (fog) {\n      case 'total':\n        return { \n          background: '#000',\n          opacity: 0.9\n        };\n      case 'partial':\n        return {\n          opacity: 0.5,\n          filter: 'blur(2px)'\n        };\n      default:\n        return {};\n    }\n  };\n  \n  // Rendu d'un hexagone\n  const renderHex = (hex: Hex) => {\n    const pos = hexToPixel(hex.x, hex.y);\n    const isSelected = selectedHex?.x === hex.x && selectedHex?.y === hex.y;\n    const key = `${hex.x},${hex.y}`;\n    \n    return (\n      <div\n        key={key}\n        className={`hex-cell ${isSelected ? 'hex-selected' : ''}`}\n        onClick={() => onHexClick?.(hex.x, hex.y)}\n        onMouseEnter={() => onHexHover?.(hex.x, hex.y)}\n        onContextMenu={(e) => {\n          e.preventDefault();\n          onHexRightClick?.(hex.x, hex.y);\n        }}\n        style={{\n          position: 'absolute',\n          left: pos.x,\n          top: pos.y,\n          width: hexWidth,\n          height: hexHeight,\n          clipPath: 'polygon(30% 0%, 70% 0%, 100% 50%, 70% 100%, 30% 100%, 0% 50%)',\n          ...getTerrainStyle(hex.terrain),\n          ...getFogStyle(hex.fog),\n          border: isSelected ? '3px solid #ffd700' : showGrid ? '1px solid rgba(255,255,255,0.1)' : 'none',\n          cursor: 'pointer',\n          transition: 'all 0.2s',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n        }}\n      >\n        {/* Coordonnes */}\n        {showCoordinates && (\n          <span style={{\n            fontSize: 10,\n            color: 'rgba(255,255,255,0.5)',\n            userSelect: 'none',\n          }}>\n            {hex.x},{hex.y}\n          </span>\n        )}\n        \n        {/* Entit */}\n        {hex.entity && (\n          <div style={{\n            fontSize: 24,\n            filter: 'drop-shadow(0 0 4px rgba(0,0,0,0.8))',\n          }}>\n            {hex.entity.icon || ''}\n          </div>\n        )}\n        \n        {/* Overlay (CF, OPC, etc) */}\n        {hex.overlay && (\n          <div style={{\n            position: 'absolute',\n            inset: 0,\n            background: hex.overlay,\n            opacity: 0.3,\n            pointerEvents: 'none',\n          }} />\n        )}\n      </div>\n    );\n  };\n  \n  // Gnration de tous les hexagones\n  const hexElements: React.ReactElement[] = [];\n  for (let x = 0; x < width; x++) {\n    for (let y = 0; y < height; y++) {\n      const key = `${x},${y}`;\n      const hex = hexes.get(key) || { x, y };\n      hexElements.push(renderHex(hex));\n    }\n  }\n  \n  return (\n    <div\n      className=\"hex-grid-container\"\n      onMouseDown={handleMouseDown}\n      onMouseMove={handleMouseMove}\n      onMouseUp={handleMouseUp}\n      onMouseLeave={handleMouseUp}\n      onWheel={handleWheel}\n      style={{\n        position: 'relative',\n        width: '100%',\n        height: '100%',\n        overflow: 'hidden',\n        cursor: isDragging ? 'grabbing' : enableDrag ? 'grab' : 'default',\n        background: '#0a0e1a',\n      }}\n    >\n      <div\n        className=\"hex-grid-viewport\"\n        style={{\n          position: 'absolute',\n          transform: `translate(${viewOffset.x}px, ${viewOffset.y}px) scale(${viewOffset.zoom})`,\n          transformOrigin: 'top left',\n        }}\n      >\n        <div className=\"hex-grid\" style={{ position: 'relative' }}>\n          {hexElements}\n        </div>\n      </div>\n      \n      {/* Mini-map (optionnel) */}\n      {enableDrag && (\n        <div style={{\n          position: 'absolute',\n          bottom: 20,\n          right: 20,\n          width: 150,\n          height: 100,\n          background: 'rgba(0,0,0,0.8)',\n          border: '1px solid rgba(255,255,255,0.2)',\n          borderRadius: 4,\n          padding: 4,\n        }}>\n          <div style={{\n            fontSize: 10,\n            color: 'rgba(255,255,255,0.5)',\n            marginBottom: 2,\n          }}>\n            Mini-map\n          </div>\n          <div style={{\n            width: '100%',\n            height: 'calc(100% - 15px)',\n            background: 'rgba(255,255,255,0.1)',\n            position: 'relative',\n          }}>\n            {/* Viewport indicator */}\n            <div style={{\n              position: 'absolute',\n              left: `${(viewOffset.x / (width * horizDist)) * 100}%`,\n              top: `${(viewOffset.y / (height * vertDist)) * 100}%`,\n              width: `${(100 / viewOffset.zoom)}%`,\n              height: `${(100 / viewOffset.zoom)}%`,\n              border: '1px solid #ffd700',\n              background: 'rgba(255,215,0,0.1)',\n            }} />\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\n// CSS pour animations\nif (typeof document !== 'undefined' && !document.getElementById('hex-grid-styles')) {\n  const style = document.createElement('style');\n  style.id = 'hex-grid-styles';\n  style.textContent = `\n    @keyframes pulse {\n      0%, 100% { opacity: 0.8; }\n      50% { opacity: 1; }\n    }\n    \n    .hex-cell:hover {\n      transform: translateY(-2px);\n      filter: brightness(1.2);\n    }\n    \n    .hex-selected {\n      animation: pulse 1s infinite;\n      z-index: 10;\n    }\n  `;\n  document.head.appendChild(style);\n}\n","/**\n *  TemporalDisplay Component - Affichage temporel V2\n * Affiche tw, te, drift, dette, nergie complexe\n */\n\nimport React from 'react';\n\nexport interface TemporalState {\n  tw: number;\n  te: number;\n  debt?: number;\n  debtRate?: number;\n  energy_complex?: {\n    A: number;\n    phi: number;\n  };\n  paradoxes?: Array<{\n    type: string;\n    severity: string;\n  }>;\n}\n\nexport interface TemporalDisplayProps {\n  temporal: TemporalState;\n  variant?: 'compact' | 'full' | 'minimal';\n  showEnergy?: boolean;\n  showParadoxes?: boolean;\n  animated?: boolean;\n  onParadoxClick?: (paradox: any) => void;\n}\n\nexport function TemporalDisplay({\n  temporal,\n  variant = 'full',\n  showEnergy = true,\n  showParadoxes = true,\n  animated = true,\n  onParadoxClick\n}: TemporalDisplayProps): React.ReactElement {\n  const drift = Math.abs(temporal.tw - temporal.te);\n  \n  // Calcul des couleurs selon le drift\n  const getDriftColor = () => {\n    if (drift < 2) return '#48bb78'; // Vert\n    if (drift < 5) return '#f6ad55'; // Orange\n    if (drift < 10) return '#fc8181'; // Rouge\n    return '#e53e3e'; // Rouge critique\n  };\n  \n  const getDriftStatus = () => {\n    if (drift < 2) return 'Stable';\n    if (drift < 5) return 'Drive';\n    if (drift < 10) return 'Danger';\n    return 'Critique!';\n  };\n  \n  // Calcul magnitude nergie complexe\n  const getEnergyMagnitude = () => {\n    if (!temporal.energy_complex) return 0;\n    const { A, phi } = temporal.energy_complex;\n    return Math.sqrt(A * A + phi * phi);\n  };\n  \n  // Rendu minimal (juste les chiffres)\n  if (variant === 'minimal') {\n    return (\n      <div style={{\n        display: 'flex',\n        gap: 12,\n        padding: '4px 8px',\n        background: 'rgba(0,0,0,0.5)',\n        borderRadius: 4,\n        fontSize: 12,\n        color: '#e8ecff',\n      }}>\n        <span>TW: {temporal.tw.toFixed(1)}</span>\n        <span>TE: {temporal.te.toFixed(1)}</span>\n        <span style={{ color: getDriftColor() }}>: {drift.toFixed(1)}</span>\n      </div>\n    );\n  }\n  \n  // Rendu compact (une ligne)\n  if (variant === 'compact') {\n    return (\n      <div style={{\n        display: 'flex',\n        alignItems: 'center',\n        gap: 16,\n        padding: '8px 16px',\n        background: 'linear-gradient(135deg, rgba(20, 24, 36, 0.9) 0%, rgba(26, 31, 46, 0.9) 100%)',\n        border: '1px solid rgba(102, 126, 234, 0.3)',\n        borderRadius: 8,\n        backdropFilter: 'blur(10px)',\n      }}>\n        <div style={{ display: 'flex', gap: 12 }}>\n          <div style={{ display: 'flex', alignItems: 'center', gap: 4 }}>\n            <span style={{ fontSize: 10, color: '#718096' }}>TW</span>\n            <span style={{ fontSize: 16, fontWeight: 600, color: '#667eea' }}>\n              {temporal.tw.toFixed(1)}\n            </span>\n          </div>\n          \n          <div style={{ display: 'flex', alignItems: 'center', gap: 4 }}>\n            <span style={{ fontSize: 10, color: '#718096' }}>TE</span>\n            <span style={{ fontSize: 16, fontWeight: 600, color: '#48bb78' }}>\n              {temporal.te.toFixed(1)}\n            </span>\n          </div>\n          \n          <div style={{ display: 'flex', alignItems: 'center', gap: 4 }}>\n            <span style={{ fontSize: 10, color: '#718096' }}>t</span>\n            <span style={{ \n              fontSize: 16, \n              fontWeight: 600, \n              color: getDriftColor(),\n              animation: drift > 5 && animated ? 'pulse 1s infinite' : 'none',\n            }}>\n              {drift.toFixed(1)}\n            </span>\n          </div>\n        </div>\n        \n        {temporal.debt && temporal.debt > 0 && (\n          <div style={{\n            padding: '2px 8px',\n            background: 'rgba(252, 129, 129, 0.2)',\n            border: '1px solid rgba(252, 129, 129, 0.4)',\n            borderRadius: 4,\n            fontSize: 11,\n            color: '#fc8181',\n          }}>\n             Dette: {temporal.debt.toFixed(1)}\n          </div>\n        )}\n      </div>\n    );\n  }\n  \n  // Rendu complet (full)\n  return (\n    <div style={{\n      background: 'linear-gradient(135deg, rgba(20, 24, 36, 0.95) 0%, rgba(26, 31, 46, 0.95) 100%)',\n      border: '1px solid rgba(102, 126, 234, 0.3)',\n      borderRadius: 12,\n      padding: 16,\n      backdropFilter: 'blur(20px)',\n      boxShadow: '0 8px 32px rgba(0, 0, 0, 0.3)',\n      minWidth: 280,\n    }}>\n      {/* Header */}\n      <div style={{\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        marginBottom: 16,\n        paddingBottom: 12,\n        borderBottom: '1px solid rgba(255, 255, 255, 0.1)',\n      }}>\n        <h3 style={{ margin: 0, color: '#667eea', fontSize: 14 }}>\n           tat Temporel\n        </h3>\n        <span style={{\n          fontSize: 11,\n          padding: '2px 8px',\n          background: `${getDriftColor()}20`,\n          border: `1px solid ${getDriftColor()}40`,\n          borderRadius: 4,\n          color: getDriftColor(),\n        }}>\n          {getDriftStatus()}\n        </span>\n      </div>\n      \n      {/* Valeurs principales */}\n      <div style={{\n        display: 'grid',\n        gridTemplateColumns: '1fr 1fr 1fr',\n        gap: 12,\n        marginBottom: 16,\n      }}>\n        <div style={{ textAlign: 'center' }}>\n          <div style={{ fontSize: 10, color: '#718096', marginBottom: 4 }}>\n            Temps Monde\n          </div>\n          <div style={{ \n            fontSize: 24, \n            fontWeight: 'bold', \n            color: '#667eea',\n            animation: animated ? 'fadeIn 0.5s' : 'none',\n          }}>\n            {temporal.tw.toFixed(1)}\n          </div>\n        </div>\n        \n        <div style={{ textAlign: 'center' }}>\n          <div style={{ fontSize: 10, color: '#718096', marginBottom: 4 }}>\n            Temps Entit\n          </div>\n          <div style={{ \n            fontSize: 24, \n            fontWeight: 'bold', \n            color: '#48bb78',\n            animation: animated ? 'fadeIn 0.5s 0.1s both' : 'none',\n          }}>\n            {temporal.te.toFixed(1)}\n          </div>\n        </div>\n        \n        <div style={{ textAlign: 'center' }}>\n          <div style={{ fontSize: 10, color: '#718096', marginBottom: 4 }}>\n            Drive\n          </div>\n          <div style={{ \n            fontSize: 24, \n            fontWeight: 'bold', \n            color: getDriftColor(),\n            animation: drift > 5 && animated ? 'pulse 1s infinite' : \n                      animated ? 'fadeIn 0.5s 0.2s both' : 'none',\n          }}>\n            {drift.toFixed(1)}\n          </div>\n        </div>\n      </div>\n      \n      {/* Barre de drift visuelle */}\n      <div style={{ marginBottom: 16 }}>\n        <div style={{ \n          display: 'flex', \n          justifyContent: 'space-between',\n          fontSize: 10,\n          color: '#718096',\n          marginBottom: 4,\n        }}>\n          <span>Synchronisation</span>\n          <span>{Math.max(0, 100 - drift * 10).toFixed(0)}%</span>\n        </div>\n        <div style={{\n          height: 6,\n          background: 'rgba(0, 0, 0, 0.3)',\n          borderRadius: 3,\n          overflow: 'hidden',\n        }}>\n          <div style={{\n            width: `${Math.max(0, 100 - drift * 10)}%`,\n            height: '100%',\n            background: `linear-gradient(90deg, ${getDriftColor()} 0%, ${getDriftColor()}cc 100%)`,\n            transition: 'width 0.5s ease',\n          }} />\n        </div>\n      </div>\n      \n      {/* Dette temporelle */}\n      {temporal.debt !== undefined && temporal.debt > 0 && (\n        <div style={{\n          padding: 12,\n          background: 'rgba(252, 129, 129, 0.1)',\n          border: '1px solid rgba(252, 129, 129, 0.3)',\n          borderRadius: 8,\n          marginBottom: 12,\n        }}>\n          <div style={{ \n            display: 'flex', \n            justifyContent: 'space-between',\n            alignItems: 'center',\n          }}>\n            <div>\n              <div style={{ fontSize: 12, color: '#fc8181', fontWeight: 600 }}>\n                 Dette Temporelle\n              </div>\n              <div style={{ fontSize: 10, color: '#fca5a5', marginTop: 2 }}>\n                Accumulation: {((temporal.debtRate || 0.05) * 100).toFixed(0)}%/tick\n              </div>\n            </div>\n            <div style={{ fontSize: 20, fontWeight: 'bold', color: '#fc8181' }}>\n              {temporal.debt.toFixed(1)}\n            </div>\n          </div>\n        </div>\n      )}\n      \n      {/* nergie complexe */}\n      {showEnergy && temporal.energy_complex && (\n        <div style={{\n          padding: 12,\n          background: 'rgba(102, 126, 234, 0.1)',\n          border: '1px solid rgba(102, 126, 234, 0.3)',\n          borderRadius: 8,\n          marginBottom: 12,\n        }}>\n          <div style={{ fontSize: 12, color: '#a0aec0', marginBottom: 8 }}>\n             nergie Complexe\n          </div>\n          <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n            <div style={{ fontSize: 14, color: '#e8ecff' }}>\n              E = {temporal.energy_complex.A.toFixed(0)} + {temporal.energy_complex.phi.toFixed(2)}i\n            </div>\n            <div style={{ fontSize: 12, color: '#9f7aea' }}>\n              |E| = {getEnergyMagnitude().toFixed(1)}\n            </div>\n          </div>\n          \n          {/* Barre visuelle */}\n          <div style={{\n            display: 'flex',\n            height: 4,\n            borderRadius: 2,\n            overflow: 'hidden',\n            marginTop: 8,\n          }}>\n            <div style={{\n              width: `${(temporal.energy_complex.A / 100) * 100}%`,\n              background: 'linear-gradient(90deg, #667eea, #764ba2)',\n            }} />\n            <div style={{\n              width: `${(temporal.energy_complex.phi / Math.PI) * 50}%`,\n              background: 'linear-gradient(90deg, #f093fb, #f5576c)',\n            }} />\n          </div>\n        </div>\n      )}\n      \n      {/* Paradoxes */}\n      {showParadoxes && temporal.paradoxes && temporal.paradoxes.length > 0 && (\n        <div style={{\n          padding: 12,\n          background: 'rgba(237, 137, 54, 0.1)',\n          border: '1px solid rgba(237, 137, 54, 0.3)',\n          borderRadius: 8,\n        }}>\n          <div style={{ fontSize: 12, color: '#ed8936', marginBottom: 8, fontWeight: 600 }}>\n             Paradoxes Dtects\n          </div>\n          <div style={{ display: 'flex', flexDirection: 'column', gap: 6 }}>\n            {temporal.paradoxes.map((paradox, i) => (\n              <div\n                key={i}\n                onClick={() => onParadoxClick?.(paradox)}\n                style={{\n                  padding: '4px 8px',\n                  background: 'rgba(237, 137, 54, 0.1)',\n                  borderRadius: 4,\n                  fontSize: 11,\n                  color: '#f6ad55',\n                  cursor: onParadoxClick ? 'pointer' : 'default',\n                  transition: 'background 0.2s',\n                }}\n                onMouseEnter={(e) => {\n                  if (onParadoxClick) {\n                    e.currentTarget.style.background = 'rgba(237, 137, 54, 0.2)';\n                  }\n                }}\n                onMouseLeave={(e) => {\n                  e.currentTarget.style.background = 'rgba(237, 137, 54, 0.1)';\n                }}\n              >\n                {paradox.type.replace(/_/g, ' ')} - {paradox.severity}\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\n// CSS pour animations\nif (typeof document !== 'undefined' && !document.getElementById('temporal-display-styles')) {\n  const style = document.createElement('style');\n  style.id = 'temporal-display-styles';\n  style.textContent = `\n    @keyframes fadeIn {\n      from {\n        opacity: 0;\n        transform: translateY(-10px);\n      }\n      to {\n        opacity: 1;\n        transform: translateY(0);\n      }\n    }\n    \n    @keyframes pulse {\n      0%, 100% {\n        opacity: 1;\n      }\n      50% {\n        opacity: 0.7;\n      }\n    }\n  `;\n  document.head.appendChild(style);\n}\n","/**\n *  ResourceBar Component - Barre de ressources rutilisable\n * Cristaux, nergie, Temporal, Quantum\n */\n\nimport React from 'react';\n\nexport interface Resources {\n  crystals?: number;\n  energy?: number;\n  temporal?: number;\n  quantum?: number;\n  [key: string]: number | undefined; // Ressources custom\n}\n\nexport interface ResourceBarProps {\n  resources: Resources;\n  maxValues?: Resources;\n  variant?: 'horizontal' | 'vertical' | 'compact';\n  showLabels?: boolean;\n  showMax?: boolean;\n  animated?: boolean;\n  onChange?: (resource: string, value: number) => void;\n  customIcons?: Record<string, string>;\n}\n\n// Icnes par dfaut ( remplacer par Icons JD / SVG Repo)\nconst DEFAULT_ICONS: Record<string, string> = {\n  crystals: '',\n  energy: '',\n  temporal: '',\n  quantum: '',\n};\n\nconst DEFAULT_COLORS: Record<string, string> = {\n  crystals: '#63b3ed',\n  energy: '#f6ad55',\n  temporal: '#9f7aea',\n  quantum: '#48bb78',\n};\n\nexport function ResourceBar({\n  resources,\n  maxValues,\n  variant = 'horizontal',\n  showLabels = true,\n  showMax = true,\n  animated = true,\n  onChange,\n  customIcons = {}\n}: ResourceBarProps): React.ReactElement {\n  const icons = { ...DEFAULT_ICONS, ...customIcons };\n  \n  // Animation de changement de valeur\n  const [prevResources, setPrevResources] = React.useState(resources);\n  const [animatingResources, setAnimatingResources] = React.useState<Set<string>>(new Set());\n  \n  React.useEffect(() => {\n    const changed = new Set<string>();\n    Object.keys(resources).forEach(key => {\n      if (prevResources[key] !== resources[key]) {\n        changed.add(key);\n      }\n    });\n    \n    if (changed.size > 0 && animated) {\n      setAnimatingResources(changed);\n      setTimeout(() => setAnimatingResources(new Set()), 500);\n    }\n    \n    setPrevResources(resources);\n  }, [resources, animated, prevResources]);\n  \n  const renderResource = (key: string, value: number | undefined) => {\n    if (value === undefined) return null;\n    \n    const max = maxValues?.[key];\n    const percentage = max ? (value / max) * 100 : 0;\n    const isAnimating = animatingResources.has(key);\n    const isLow = max && value < max * 0.25;\n    const color = DEFAULT_COLORS[key] || '#667eea';\n    \n    // Compact variant\n    if (variant === 'compact') {\n      return (\n        <div\n          key={key}\n          style={{\n            display: 'flex',\n            alignItems: 'center',\n            gap: 4,\n            padding: '4px 8px',\n            background: 'rgba(255, 255, 255, 0.05)',\n            borderRadius: 4,\n            border: isAnimating ? `1px solid ${color}` : '1px solid transparent',\n            transition: 'all 0.3s',\n          }}\n        >\n          <span style={{ fontSize: 16 }}>{icons[key]}</span>\n          <span style={{\n            fontSize: 14,\n            fontWeight: 600,\n            color: isLow ? '#fc8181' : '#e8ecff',\n            animation: isAnimating ? 'pulse 0.5s' : 'none',\n          }}>\n            {value}\n          </span>\n        </div>\n      );\n    }\n    \n    // Full resource display\n    return (\n      <div\n        key={key}\n        style={{\n          display: 'flex',\n          flexDirection: variant === 'vertical' ? 'column' : 'row',\n          gap: 8,\n          flex: 1,\n          minWidth: variant === 'vertical' ? 'auto' : 120,\n        }}\n      >\n        {/* Icon & Label */}\n        <div style={{\n          display: 'flex',\n          alignItems: 'center',\n          gap: 6,\n          minWidth: variant === 'vertical' ? 'auto' : 80,\n        }}>\n          <span style={{\n            fontSize: 20,\n            filter: isAnimating ? `drop-shadow(0 0 8px ${color})` : 'none',\n            transition: 'filter 0.3s',\n          }}>\n            {icons[key]}\n          </span>\n          {showLabels && (\n            <span style={{\n              fontSize: 11,\n              color: '#a0aec0',\n              textTransform: 'capitalize',\n            }}>\n              {key}\n            </span>\n          )}\n        </div>\n        \n        {/* Value & Bar */}\n        <div style={{\n          flex: 1,\n          display: 'flex',\n          flexDirection: 'column',\n          gap: 4,\n        }}>\n          <div style={{\n            display: 'flex',\n            justifyContent: 'space-between',\n            alignItems: 'baseline',\n          }}>\n            <span style={{\n              fontSize: 16,\n              fontWeight: 'bold',\n              color: isLow ? '#fc8181' : '#e8ecff',\n              animation: isAnimating ? 'bounceValue 0.5s' : 'none',\n            }}>\n              {value}\n            </span>\n            {showMax && max && (\n              <span style={{\n                fontSize: 11,\n                color: '#718096',\n              }}>\n                / {max}\n              </span>\n            )}\n          </div>\n          \n          {/* Progress bar */}\n          {max && (\n            <div style={{\n              height: 4,\n              background: 'rgba(0, 0, 0, 0.3)',\n              borderRadius: 2,\n              overflow: 'hidden',\n            }}>\n              <div style={{\n                width: `${Math.min(100, percentage)}%`,\n                height: '100%',\n                background: `linear-gradient(90deg, ${color}, ${color}cc)`,\n                transition: 'width 0.5s ease',\n                boxShadow: isLow ? `0 0 8px ${color}` : 'none',\n                animation: isLow ? 'pulse 1s infinite' : 'none',\n              }} />\n            </div>\n          )}\n        </div>\n        \n        {/* Interactive buttons (if onChange provided) */}\n        {onChange && (\n          <div style={{\n            display: 'flex',\n            gap: 4,\n          }}>\n            <button\n              onClick={() => onChange(key, Math.max(0, value - 1))}\n              style={{\n                width: 20,\n                height: 20,\n                borderRadius: 4,\n                background: 'rgba(252, 129, 129, 0.2)',\n                border: '1px solid rgba(252, 129, 129, 0.4)',\n                color: '#fc8181',\n                cursor: 'pointer',\n                fontSize: 12,\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n              }}\n            >\n              -\n            </button>\n            <button\n              onClick={() => onChange(key, value + 1)}\n              style={{\n                width: 20,\n                height: 20,\n                borderRadius: 4,\n                background: 'rgba(72, 187, 120, 0.2)',\n                border: '1px solid rgba(72, 187, 120, 0.4)',\n                color: '#48bb78',\n                cursor: 'pointer',\n                fontSize: 12,\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n              }}\n            >\n              +\n            </button>\n          </div>\n        )}\n      </div>\n    );\n  };\n  \n  const resourceEntries = Object.entries(resources).filter(([_, value]) => value !== undefined);\n  \n  return (\n    <div\n      className=\"resource-bar\"\n      style={{\n        display: 'flex',\n        flexDirection: variant === 'vertical' ? 'column' : 'row',\n        gap: variant === 'compact' ? 8 : 16,\n        padding: variant === 'compact' ? 8 : 12,\n        background: variant === 'compact' \n          ? 'transparent'\n          : 'linear-gradient(135deg, rgba(20, 24, 36, 0.9) 0%, rgba(26, 31, 46, 0.9) 100%)',\n        border: variant === 'compact' ? 'none' : '1px solid rgba(102, 126, 234, 0.2)',\n        borderRadius: variant === 'compact' ? 0 : 8,\n        backdropFilter: variant === 'compact' ? 'none' : 'blur(10px)',\n        flexWrap: variant === 'compact' ? 'wrap' : 'nowrap',\n      }}\n    >\n      {resourceEntries.map(([key, value]) => renderResource(key, value))}\n      \n      {/* Empty state */}\n      {resourceEntries.length === 0 && (\n        <div style={{\n          color: '#718096',\n          fontSize: 12,\n          fontStyle: 'italic',\n        }}>\n          Aucune ressource\n        </div>\n      )}\n    </div>\n  );\n}\n\n// CSS pour animations\nif (typeof document !== 'undefined' && !document.getElementById('resource-bar-styles')) {\n  const style = document.createElement('style');\n  style.id = 'resource-bar-styles';\n  style.textContent = `\n    @keyframes bounceValue {\n      0%, 100% { transform: scale(1); }\n      50% { transform: scale(1.2); }\n    }\n    \n    @keyframes pulse {\n      0%, 100% { opacity: 1; }\n      50% { opacity: 0.6; }\n    }\n  `;\n  document.head.appendChild(style);\n}\n","const reduxImpl = (reducer, initial) => (set, _get, api) => {\n  api.dispatch = (action) => {\n    set((state) => reducer(state, action), false, action);\n    return action;\n  };\n  api.dispatchFromDevtools = true;\n  return { dispatch: (...a) => api.dispatch(...a), ...initial };\n};\nconst redux = reduxImpl;\n\nconst trackedConnections = /* @__PURE__ */ new Map();\nconst getTrackedConnectionState = (name) => {\n  const api = trackedConnections.get(name);\n  if (!api) return {};\n  return Object.fromEntries(\n    Object.entries(api.stores).map(([key, api2]) => [key, api2.getState()])\n  );\n};\nconst extractConnectionInformation = (store, extensionConnector, options) => {\n  if (store === void 0) {\n    return {\n      type: \"untracked\",\n      connection: extensionConnector.connect(options)\n    };\n  }\n  const existingConnection = trackedConnections.get(options.name);\n  if (existingConnection) {\n    return { type: \"tracked\", store, ...existingConnection };\n  }\n  const newConnection = {\n    connection: extensionConnector.connect(options),\n    stores: {}\n  };\n  trackedConnections.set(options.name, newConnection);\n  return { type: \"tracked\", store, ...newConnection };\n};\nconst devtoolsImpl = (fn, devtoolsOptions = {}) => (set, get, api) => {\n  const { enabled, anonymousActionType, store, ...options } = devtoolsOptions;\n  let extensionConnector;\n  try {\n    extensionConnector = (enabled != null ? enabled : (import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") && window.__REDUX_DEVTOOLS_EXTENSION__;\n  } catch (_e) {\n  }\n  if (!extensionConnector) {\n    if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\" && enabled) {\n      console.warn(\n        \"[zustand devtools middleware] Please install/enable Redux devtools extension\"\n      );\n    }\n    return fn(set, get, api);\n  }\n  const { connection, ...connectionInformation } = extractConnectionInformation(store, extensionConnector, options);\n  let isRecording = true;\n  api.setState = (state, replace, nameOrAction) => {\n    const r = set(state, replace);\n    if (!isRecording) return r;\n    const action = nameOrAction === void 0 ? { type: anonymousActionType || \"anonymous\" } : typeof nameOrAction === \"string\" ? { type: nameOrAction } : nameOrAction;\n    if (store === void 0) {\n      connection == null ? void 0 : connection.send(action, get());\n      return r;\n    }\n    connection == null ? void 0 : connection.send(\n      {\n        ...action,\n        type: `${store}/${action.type}`\n      },\n      {\n        ...getTrackedConnectionState(options.name),\n        [store]: api.getState()\n      }\n    );\n    return r;\n  };\n  const setStateFromDevtools = (...a) => {\n    const originalIsRecording = isRecording;\n    isRecording = false;\n    set(...a);\n    isRecording = originalIsRecording;\n  };\n  const initialState = fn(api.setState, get, api);\n  if (connectionInformation.type === \"untracked\") {\n    connection == null ? void 0 : connection.init(initialState);\n  } else {\n    connectionInformation.stores[connectionInformation.store] = api;\n    connection == null ? void 0 : connection.init(\n      Object.fromEntries(\n        Object.entries(connectionInformation.stores).map(([key, store2]) => [\n          key,\n          key === connectionInformation.store ? initialState : store2.getState()\n        ])\n      )\n    );\n  }\n  if (api.dispatchFromDevtools && typeof api.dispatch === \"function\") {\n    let didWarnAboutReservedActionType = false;\n    const originalDispatch = api.dispatch;\n    api.dispatch = (...a) => {\n      if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\" && a[0].type === \"__setState\" && !didWarnAboutReservedActionType) {\n        console.warn(\n          '[zustand devtools middleware] \"__setState\" action type is reserved to set state from the devtools. Avoid using it.'\n        );\n        didWarnAboutReservedActionType = true;\n      }\n      originalDispatch(...a);\n    };\n  }\n  connection.subscribe((message) => {\n    var _a;\n    switch (message.type) {\n      case \"ACTION\":\n        if (typeof message.payload !== \"string\") {\n          console.error(\n            \"[zustand devtools middleware] Unsupported action format\"\n          );\n          return;\n        }\n        return parseJsonThen(\n          message.payload,\n          (action) => {\n            if (action.type === \"__setState\") {\n              if (store === void 0) {\n                setStateFromDevtools(action.state);\n                return;\n              }\n              if (Object.keys(action.state).length !== 1) {\n                console.error(\n                  `\n                    [zustand devtools middleware] Unsupported __setState action format. \n                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),\n                    and value of this only key should be a state object. Example: { \"type\": \"__setState\", \"state\": { \"abc123Store\": { \"foo\": \"bar\" } } }\n                    `\n                );\n              }\n              const stateFromDevtools = action.state[store];\n              if (stateFromDevtools === void 0 || stateFromDevtools === null) {\n                return;\n              }\n              if (JSON.stringify(api.getState()) !== JSON.stringify(stateFromDevtools)) {\n                setStateFromDevtools(stateFromDevtools);\n              }\n              return;\n            }\n            if (!api.dispatchFromDevtools) return;\n            if (typeof api.dispatch !== \"function\") return;\n            api.dispatch(action);\n          }\n        );\n      case \"DISPATCH\":\n        switch (message.payload.type) {\n          case \"RESET\":\n            setStateFromDevtools(initialState);\n            if (store === void 0) {\n              return connection == null ? void 0 : connection.init(api.getState());\n            }\n            return connection == null ? void 0 : connection.init(getTrackedConnectionState(options.name));\n          case \"COMMIT\":\n            if (store === void 0) {\n              connection == null ? void 0 : connection.init(api.getState());\n              return;\n            }\n            return connection == null ? void 0 : connection.init(getTrackedConnectionState(options.name));\n          case \"ROLLBACK\":\n            return parseJsonThen(message.state, (state) => {\n              if (store === void 0) {\n                setStateFromDevtools(state);\n                connection == null ? void 0 : connection.init(api.getState());\n                return;\n              }\n              setStateFromDevtools(state[store]);\n              connection == null ? void 0 : connection.init(getTrackedConnectionState(options.name));\n            });\n          case \"JUMP_TO_STATE\":\n          case \"JUMP_TO_ACTION\":\n            return parseJsonThen(message.state, (state) => {\n              if (store === void 0) {\n                setStateFromDevtools(state);\n                return;\n              }\n              if (JSON.stringify(api.getState()) !== JSON.stringify(state[store])) {\n                setStateFromDevtools(state[store]);\n              }\n            });\n          case \"IMPORT_STATE\": {\n            const { nextLiftedState } = message.payload;\n            const lastComputedState = (_a = nextLiftedState.computedStates.slice(-1)[0]) == null ? void 0 : _a.state;\n            if (!lastComputedState) return;\n            if (store === void 0) {\n              setStateFromDevtools(lastComputedState);\n            } else {\n              setStateFromDevtools(lastComputedState[store]);\n            }\n            connection == null ? void 0 : connection.send(\n              null,\n              // FIXME no-any\n              nextLiftedState\n            );\n            return;\n          }\n          case \"PAUSE_RECORDING\":\n            return isRecording = !isRecording;\n        }\n        return;\n    }\n  });\n  return initialState;\n};\nconst devtools = devtoolsImpl;\nconst parseJsonThen = (stringified, f) => {\n  let parsed;\n  try {\n    parsed = JSON.parse(stringified);\n  } catch (e) {\n    console.error(\n      \"[zustand devtools middleware] Could not parse the received json\",\n      e\n    );\n  }\n  if (parsed !== void 0) f(parsed);\n};\n\nconst subscribeWithSelectorImpl = (fn) => (set, get, api) => {\n  const origSubscribe = api.subscribe;\n  api.subscribe = (selector, optListener, options) => {\n    let listener = selector;\n    if (optListener) {\n      const equalityFn = (options == null ? void 0 : options.equalityFn) || Object.is;\n      let currentSlice = selector(api.getState());\n      listener = (state) => {\n        const nextSlice = selector(state);\n        if (!equalityFn(currentSlice, nextSlice)) {\n          const previousSlice = currentSlice;\n          optListener(currentSlice = nextSlice, previousSlice);\n        }\n      };\n      if (options == null ? void 0 : options.fireImmediately) {\n        optListener(currentSlice, currentSlice);\n      }\n    }\n    return origSubscribe(listener);\n  };\n  const initialState = fn(set, get, api);\n  return initialState;\n};\nconst subscribeWithSelector = subscribeWithSelectorImpl;\n\nconst combine = (initialState, create) => (...a) => Object.assign({}, initialState, create(...a));\n\nfunction createJSONStorage(getStorage, options) {\n  let storage;\n  try {\n    storage = getStorage();\n  } catch (_e) {\n    return;\n  }\n  const persistStorage = {\n    getItem: (name) => {\n      var _a;\n      const parse = (str2) => {\n        if (str2 === null) {\n          return null;\n        }\n        return JSON.parse(str2, options == null ? void 0 : options.reviver);\n      };\n      const str = (_a = storage.getItem(name)) != null ? _a : null;\n      if (str instanceof Promise) {\n        return str.then(parse);\n      }\n      return parse(str);\n    },\n    setItem: (name, newValue) => storage.setItem(\n      name,\n      JSON.stringify(newValue, options == null ? void 0 : options.replacer)\n    ),\n    removeItem: (name) => storage.removeItem(name)\n  };\n  return persistStorage;\n}\nconst toThenable = (fn) => (input) => {\n  try {\n    const result = fn(input);\n    if (result instanceof Promise) {\n      return result;\n    }\n    return {\n      then(onFulfilled) {\n        return toThenable(onFulfilled)(result);\n      },\n      catch(_onRejected) {\n        return this;\n      }\n    };\n  } catch (e) {\n    return {\n      then(_onFulfilled) {\n        return this;\n      },\n      catch(onRejected) {\n        return toThenable(onRejected)(e);\n      }\n    };\n  }\n};\nconst oldImpl = (config, baseOptions) => (set, get, api) => {\n  let options = {\n    getStorage: () => localStorage,\n    serialize: JSON.stringify,\n    deserialize: JSON.parse,\n    partialize: (state) => state,\n    version: 0,\n    merge: (persistedState, currentState) => ({\n      ...currentState,\n      ...persistedState\n    }),\n    ...baseOptions\n  };\n  let hasHydrated = false;\n  const hydrationListeners = /* @__PURE__ */ new Set();\n  const finishHydrationListeners = /* @__PURE__ */ new Set();\n  let storage;\n  try {\n    storage = options.getStorage();\n  } catch (_e) {\n  }\n  if (!storage) {\n    return config(\n      (...args) => {\n        console.warn(\n          `[zustand persist middleware] Unable to update item '${options.name}', the given storage is currently unavailable.`\n        );\n        set(...args);\n      },\n      get,\n      api\n    );\n  }\n  const thenableSerialize = toThenable(options.serialize);\n  const setItem = () => {\n    const state = options.partialize({ ...get() });\n    let errorInSync;\n    const thenable = thenableSerialize({ state, version: options.version }).then(\n      (serializedValue) => storage.setItem(options.name, serializedValue)\n    ).catch((e) => {\n      errorInSync = e;\n    });\n    if (errorInSync) {\n      throw errorInSync;\n    }\n    return thenable;\n  };\n  const savedSetState = api.setState;\n  api.setState = (state, replace) => {\n    savedSetState(state, replace);\n    void setItem();\n  };\n  const configResult = config(\n    (...args) => {\n      set(...args);\n      void setItem();\n    },\n    get,\n    api\n  );\n  let stateFromStorage;\n  const hydrate = () => {\n    var _a;\n    if (!storage) return;\n    hasHydrated = false;\n    hydrationListeners.forEach((cb) => cb(get()));\n    const postRehydrationCallback = ((_a = options.onRehydrateStorage) == null ? void 0 : _a.call(options, get())) || void 0;\n    return toThenable(storage.getItem.bind(storage))(options.name).then((storageValue) => {\n      if (storageValue) {\n        return options.deserialize(storageValue);\n      }\n    }).then((deserializedStorageValue) => {\n      if (deserializedStorageValue) {\n        if (typeof deserializedStorageValue.version === \"number\" && deserializedStorageValue.version !== options.version) {\n          if (options.migrate) {\n            return options.migrate(\n              deserializedStorageValue.state,\n              deserializedStorageValue.version\n            );\n          }\n          console.error(\n            `State loaded from storage couldn't be migrated since no migrate function was provided`\n          );\n        } else {\n          return deserializedStorageValue.state;\n        }\n      }\n    }).then((migratedState) => {\n      var _a2;\n      stateFromStorage = options.merge(\n        migratedState,\n        (_a2 = get()) != null ? _a2 : configResult\n      );\n      set(stateFromStorage, true);\n      return setItem();\n    }).then(() => {\n      postRehydrationCallback == null ? void 0 : postRehydrationCallback(stateFromStorage, void 0);\n      hasHydrated = true;\n      finishHydrationListeners.forEach((cb) => cb(stateFromStorage));\n    }).catch((e) => {\n      postRehydrationCallback == null ? void 0 : postRehydrationCallback(void 0, e);\n    });\n  };\n  api.persist = {\n    setOptions: (newOptions) => {\n      options = {\n        ...options,\n        ...newOptions\n      };\n      if (newOptions.getStorage) {\n        storage = newOptions.getStorage();\n      }\n    },\n    clearStorage: () => {\n      storage == null ? void 0 : storage.removeItem(options.name);\n    },\n    getOptions: () => options,\n    rehydrate: () => hydrate(),\n    hasHydrated: () => hasHydrated,\n    onHydrate: (cb) => {\n      hydrationListeners.add(cb);\n      return () => {\n        hydrationListeners.delete(cb);\n      };\n    },\n    onFinishHydration: (cb) => {\n      finishHydrationListeners.add(cb);\n      return () => {\n        finishHydrationListeners.delete(cb);\n      };\n    }\n  };\n  hydrate();\n  return stateFromStorage || configResult;\n};\nconst newImpl = (config, baseOptions) => (set, get, api) => {\n  let options = {\n    storage: createJSONStorage(() => localStorage),\n    partialize: (state) => state,\n    version: 0,\n    merge: (persistedState, currentState) => ({\n      ...currentState,\n      ...persistedState\n    }),\n    ...baseOptions\n  };\n  let hasHydrated = false;\n  const hydrationListeners = /* @__PURE__ */ new Set();\n  const finishHydrationListeners = /* @__PURE__ */ new Set();\n  let storage = options.storage;\n  if (!storage) {\n    return config(\n      (...args) => {\n        console.warn(\n          `[zustand persist middleware] Unable to update item '${options.name}', the given storage is currently unavailable.`\n        );\n        set(...args);\n      },\n      get,\n      api\n    );\n  }\n  const setItem = () => {\n    const state = options.partialize({ ...get() });\n    return storage.setItem(options.name, {\n      state,\n      version: options.version\n    });\n  };\n  const savedSetState = api.setState;\n  api.setState = (state, replace) => {\n    savedSetState(state, replace);\n    void setItem();\n  };\n  const configResult = config(\n    (...args) => {\n      set(...args);\n      void setItem();\n    },\n    get,\n    api\n  );\n  api.getInitialState = () => configResult;\n  let stateFromStorage;\n  const hydrate = () => {\n    var _a, _b;\n    if (!storage) return;\n    hasHydrated = false;\n    hydrationListeners.forEach((cb) => {\n      var _a2;\n      return cb((_a2 = get()) != null ? _a2 : configResult);\n    });\n    const postRehydrationCallback = ((_b = options.onRehydrateStorage) == null ? void 0 : _b.call(options, (_a = get()) != null ? _a : configResult)) || void 0;\n    return toThenable(storage.getItem.bind(storage))(options.name).then((deserializedStorageValue) => {\n      if (deserializedStorageValue) {\n        if (typeof deserializedStorageValue.version === \"number\" && deserializedStorageValue.version !== options.version) {\n          if (options.migrate) {\n            return [\n              true,\n              options.migrate(\n                deserializedStorageValue.state,\n                deserializedStorageValue.version\n              )\n            ];\n          }\n          console.error(\n            `State loaded from storage couldn't be migrated since no migrate function was provided`\n          );\n        } else {\n          return [false, deserializedStorageValue.state];\n        }\n      }\n      return [false, void 0];\n    }).then((migrationResult) => {\n      var _a2;\n      const [migrated, migratedState] = migrationResult;\n      stateFromStorage = options.merge(\n        migratedState,\n        (_a2 = get()) != null ? _a2 : configResult\n      );\n      set(stateFromStorage, true);\n      if (migrated) {\n        return setItem();\n      }\n    }).then(() => {\n      postRehydrationCallback == null ? void 0 : postRehydrationCallback(stateFromStorage, void 0);\n      stateFromStorage = get();\n      hasHydrated = true;\n      finishHydrationListeners.forEach((cb) => cb(stateFromStorage));\n    }).catch((e) => {\n      postRehydrationCallback == null ? void 0 : postRehydrationCallback(void 0, e);\n    });\n  };\n  api.persist = {\n    setOptions: (newOptions) => {\n      options = {\n        ...options,\n        ...newOptions\n      };\n      if (newOptions.storage) {\n        storage = newOptions.storage;\n      }\n    },\n    clearStorage: () => {\n      storage == null ? void 0 : storage.removeItem(options.name);\n    },\n    getOptions: () => options,\n    rehydrate: () => hydrate(),\n    hasHydrated: () => hasHydrated,\n    onHydrate: (cb) => {\n      hydrationListeners.add(cb);\n      return () => {\n        hydrationListeners.delete(cb);\n      };\n    },\n    onFinishHydration: (cb) => {\n      finishHydrationListeners.add(cb);\n      return () => {\n        finishHydrationListeners.delete(cb);\n      };\n    }\n  };\n  if (!options.skipHydration) {\n    hydrate();\n  }\n  return stateFromStorage || configResult;\n};\nconst persistImpl = (config, baseOptions) => {\n  if (\"getStorage\" in baseOptions || \"serialize\" in baseOptions || \"deserialize\" in baseOptions) {\n    if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n      console.warn(\n        \"[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead.\"\n      );\n    }\n    return oldImpl(config, baseOptions);\n  }\n  return newImpl(config, baseOptions);\n};\nconst persist = persistImpl;\n\nexport { combine, createJSONStorage, devtools, persist, redux, subscribeWithSelector };\n","/**\n *  Game Store - tat global du jeu avec Zustand\n * Migration depuis HOT_GAME_UNIFIED.html\n */\n\nimport { create } from 'zustand';\nimport { devtools, persist } from 'zustand/middleware';\n\nexport interface GameState {\n  // Temporal V2\n  temporal: {\n    tw: number;\n    te: number;\n    debt: number;\n    debtRate: number;\n    entities: Map<string, any>;\n    energy_complex?: {\n      A: number;\n      phi: number;\n    };\n  };\n  \n  // Resources\n  resources: {\n    crystals: number;\n    energy: number;\n    temporal: number;\n    quantum: number;\n  };\n  \n  // Game info\n  day: number;\n  turn: number;\n  mode: 'campaign' | 'skirmish' | 'tutorial' | 'sandbox';\n  difficulty: 'easy' | 'normal' | 'hard' | 'nightmare';\n  \n  // Hero\n  heroPosition: { x: number; y: number } | null;\n  heroStats: {\n    health: number;\n    maxHealth: number;\n    attack: number;\n    defense: number;\n    movement: number;\n  };\n  \n  // Regulators\n  regulators: {\n    vince: { active: boolean; intensity: number; position?: { x: number; y: number } };\n    anna: { active: boolean; decayRate: number; zone?: string };\n    overload: { stack: number; maxStack: number };\n  };\n  \n  // Events\n  events: Array<{\n    id: string;\n    day: number;\n    type: string;\n    name: string;\n    description?: string;\n  }>;\n  \n  // UI State\n  currentView: 'map' | 'combat' | 'timeline';\n  selectedHex: { x: number; y: number } | null;\n}\n\ninterface GameActions {\n  // View management\n  setCurrentView: (view: 'map' | 'combat' | 'timeline') => void;\n  setSelectedHex: (hex: { x: number; y: number } | null) => void;\n  \n  // Hero actions\n  moveHero: (x: number, y: number) => void;\n  \n  // Turn management\n  endTurn: () => void;\n  tick: () => Promise<void>;\n  \n  // Resource management\n  addResource: (resource: keyof GameState['resources'], amount: number) => void;\n  consumeResource: (resource: keyof GameState['resources'], amount: number) => boolean;\n  \n  // Regulator actions\n  activateVince: (position: { x: number; y: number }) => void;\n  activateAnna: (decayRate: number) => void;\n  triggerOverload: () => void;\n  \n  // Game management\n  startNewGame: (mode: GameState['mode'], difficulty: GameState['difficulty']) => void;\n  saveGame: () => void;\n  loadGame: (saveData: any) => void;\n  \n  // Utils\n  reset: () => void;\n}\n\n// Initial state\nconst initialState: GameState = {\n  temporal: {\n    tw: 0,\n    te: 0,\n    debt: 0,\n    debtRate: 0.05,\n    entities: new Map(),\n    energy_complex: {\n      A: 50,\n      phi: Math.PI / 4,\n    },\n  },\n  resources: {\n    crystals: 100,\n    energy: 50,\n    temporal: 25,\n    quantum: 10,\n  },\n  day: 1,\n  turn: 1,\n  mode: 'campaign',\n  difficulty: 'normal',\n  heroPosition: { x: 10, y: 10 },\n  heroStats: {\n    health: 100,\n    maxHealth: 100,\n    attack: 10,\n    defense: 5,\n    movement: 3,\n  },\n  regulators: {\n    vince: { active: false, intensity: 0 },\n    anna: { active: false, decayRate: 5 },\n    overload: { stack: 0, maxStack: 10 },\n  },\n  events: [],\n  currentView: 'map',\n  selectedHex: null,\n};\n\n// Store avec Zustand\nexport const useGameStore = create<GameState & GameActions>()(\n  devtools(\n    persist(\n      (set, get) => ({\n        ...initialState,\n        \n        // View management\n        setCurrentView: (view) => set({ currentView: view }),\n        setSelectedHex: (hex) => set({ selectedHex: hex }),\n        \n        // Hero actions\n        moveHero: (x, y) => {\n          const state = get();\n          const distance = Math.abs(x - (state.heroPosition?.x || 0)) + \n                          Math.abs(y - (state.heroPosition?.y || 0));\n          \n          // Cot en nergie pour le dplacement\n          const cost = distance * 5;\n          if (state.resources.energy >= cost) {\n            set((state) => ({\n              heroPosition: { x, y },\n              resources: {\n                ...state.resources,\n                energy: state.resources.energy - cost,\n              },\n            }));\n          }\n        },\n        \n        // Turn management\n        endTurn: async () => {\n          const state = get();\n          \n          // Tick V2\n          await get().tick();\n          \n          // Increment turn/day\n          const newTurn = state.turn + 1;\n          const newDay = Math.floor(newTurn / 10) + 1;\n          \n          // Resources regeneration\n          set((state) => ({\n            turn: newTurn,\n            day: newDay,\n            resources: {\n              ...state.resources,\n              energy: Math.min(100, state.resources.energy + 10),\n              temporal: Math.min(100, state.resources.temporal + 5),\n            },\n          }));\n          \n          // Check for events\n          const dayEvents = state.events.filter(e => e.day === newDay);\n          if (dayEvents.length > 0) {\n            console.log(' vnements du jour:', dayEvents);\n          }\n        },\n        \n        tick: async () => {\n          // Appel au backend V2 (si disponible)\n          try {\n            const response = await fetch('http://localhost:3001/api/v2/tick', {\n              method: 'POST',\n              headers: { 'Content-Type': 'application/json' },\n              body: JSON.stringify(get()),\n            });\n            \n            if (response.ok) {\n              const result = await response.json();\n              set((state) => ({\n                temporal: {\n                  ...state.temporal,\n                  tw: result.new_tw || state.temporal.tw + 1,\n                  te: result.new_te || state.temporal.te + 0.95,\n                  debt: result.debt || state.temporal.debt,\n                },\n              }));\n            }\n          } catch (error) {\n            // Fallback local\n            set((state) => ({\n              temporal: {\n                ...state.temporal,\n                tw: state.temporal.tw + 1,\n                te: state.temporal.te + 0.95,\n              },\n            }));\n          }\n        },\n        \n        // Resource management\n        addResource: (resource, amount) => {\n          set((state) => ({\n            resources: {\n              ...state.resources,\n              [resource]: state.resources[resource] + amount,\n            },\n          }));\n        },\n        \n        consumeResource: (resource, amount) => {\n          const state = get();\n          if (state.resources[resource] >= amount) {\n            set((state) => ({\n              resources: {\n                ...state.resources,\n                [resource]: state.resources[resource] - amount,\n              },\n            }));\n            return true;\n          }\n          return false;\n        },\n        \n        // Regulator actions\n        activateVince: (position) => {\n          set((state) => ({\n            regulators: {\n              ...state.regulators,\n              vince: {\n                active: true,\n                intensity: 1,\n                position,\n              },\n            },\n          }));\n        },\n        \n        activateAnna: (decayRate) => {\n          set((state) => ({\n            regulators: {\n              ...state.regulators,\n              anna: {\n                active: true,\n                decayRate,\n              },\n            },\n          }));\n        },\n        \n        triggerOverload: () => {\n          const state = get();\n          const newStack = state.regulators.overload.stack + 1;\n          \n          if (newStack >= state.regulators.overload.maxStack) {\n            console.log(' OVERLOAD EXPLOSION!');\n            set((state) => ({\n              regulators: {\n                ...state.regulators,\n                overload: { ...state.regulators.overload, stack: 0 },\n              },\n            }));\n          } else {\n            set((state) => ({\n              regulators: {\n                ...state.regulators,\n                overload: { ...state.regulators.overload, stack: newStack },\n              },\n            }));\n          }\n        },\n        \n        // Game management\n        startNewGame: (mode, difficulty) => {\n          set({\n            ...initialState,\n            mode,\n            difficulty,\n          });\n        },\n        \n        saveGame: () => {\n          const state = get();\n          const saveData = JSON.stringify(state);\n          localStorage.setItem('magic-stack-save', saveData);\n          console.log(' Jeu sauvegard');\n        },\n        \n        loadGame: (saveData) => {\n          try {\n            const state = JSON.parse(saveData);\n            set(state);\n            console.log(' Jeu charg');\n          } catch (error) {\n            console.error('Erreur chargement:', error);\n          }\n        },\n        \n        // Utils\n        reset: () => set(initialState),\n      }),\n      {\n        name: 'magic-stack-game',\n        partialize: (state) => ({\n          // Ne persister que les donnes de jeu, pas l'UI\n          temporal: state.temporal,\n          resources: state.resources,\n          day: state.day,\n          turn: state.turn,\n          mode: state.mode,\n          difficulty: state.difficulty,\n          heroPosition: state.heroPosition,\n          heroStats: state.heroStats,\n          regulators: state.regulators,\n          events: state.events,\n        }),\n      }\n    )\n  )\n);\n\n// Hexes store spar pour la map (performance)\nexport const useHexStore = create<{\n  hexes: Map<string, any>;\n  setHex: (x: number, y: number, data: any) => void;\n  getHex: (x: number, y: number) => any;\n  generateMap: (width: number, height: number) => void;\n}>((set, get) => ({\n  hexes: new Map(),\n  \n  setHex: (x, y, data) => {\n    const key = `${x},${y}`;\n    set((state) => {\n      const newHexes = new Map(state.hexes);\n      newHexes.set(key, { x, y, ...data });\n      return { hexes: newHexes };\n    });\n  },\n  \n  getHex: (x, y) => {\n    const key = `${x},${y}`;\n    return get().hexes.get(key);\n  },\n  \n  generateMap: (width, height) => {\n    const newHexes = new Map();\n    const terrains = ['grass', 'forest', 'mountain', 'water', 'mystique', 'quantum'];\n    \n    for (let x = 0; x < width; x++) {\n      for (let y = 0; y < height; y++) {\n        const key = `${x},${y}`;\n        newHexes.set(key, {\n          x,\n          y,\n          terrain: terrains[Math.floor(Math.random() * terrains.length)],\n          fog: Math.random() > 0.7 ? 'partial' : 'clear',\n        });\n      }\n    }\n    \n    set({ hexes: newHexes });\n  },\n}));\n\n// Auto-generate map on load\nif (typeof window !== 'undefined') {\n  const hexStore = useHexStore.getState();\n  if (hexStore.hexes.size === 0) {\n    hexStore.generateMap(20, 20);\n  }\n}\n","/**\n *  GameView - Vue principale du jeu Heroes of Time\n * Migration depuis HOT_GAME_UNIFIED.html\n */\n\nimport React from 'react';\nimport { Routes, Route, useNavigate } from 'react-router-dom';\nimport { HexGrid } from '../../shared/components/HexGrid';\nimport { TemporalDisplay } from '../../shared/components/TemporalDisplay';\nimport { ResourceBar } from '../../shared/components/ResourceBar';\nimport { useGameStore, useHexStore } from './store/gameStore';\n\nexport function GameView(): React.ReactElement {\n  const navigate = useNavigate();\n  const {\n    gameState,\n    currentView,\n    setCurrentView,\n    moveHero,\n    endTurn,\n  } = useGameStore();\n  \n  return (\n    <div style={{\n      display: 'flex',\n      flexDirection: 'column',\n      height: '100vh',\n      background: '#0a0e1a',\n    }}>\n      {/* Header avec ressources et temporal */}\n      <header style={{\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        padding: '12px 20px',\n        background: 'linear-gradient(180deg, rgba(20, 24, 36, 0.95) 0%, rgba(26, 31, 46, 0.9) 100%)',\n        borderBottom: '1px solid rgba(102, 126, 234, 0.3)',\n        backdropFilter: 'blur(10px)',\n      }}>\n        {/* Logo & Navigation */}\n        <div style={{ display: 'flex', alignItems: 'center', gap: 20 }}>\n          <h1 style={{\n            fontSize: 24,\n            fontWeight: 'bold',\n            background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n            WebkitBackgroundClip: 'text',\n            WebkitTextFillColor: 'transparent',\n            margin: 0,\n          }}>\n             Heroes of Time\n          </h1>\n          \n          <nav style={{ display: 'flex', gap: 8 }}>\n            <ViewButton\n              active={currentView === 'map'}\n              onClick={() => setCurrentView('map')}\n            >\n               Carte\n            </ViewButton>\n            <ViewButton\n              active={currentView === 'combat'}\n              onClick={() => setCurrentView('combat')}\n            >\n               Combat\n            </ViewButton>\n            <ViewButton\n              active={currentView === 'timeline'}\n              onClick={() => setCurrentView('timeline')}\n            >\n               Timeline\n            </ViewButton>\n          </nav>\n        </div>\n        \n        {/* Temporal Display */}\n        <TemporalDisplay\n          temporal={gameState.temporal}\n          variant=\"compact\"\n          showEnergy={true}\n        />\n      </header>\n      \n      {/* Resources Bar */}\n      <div style={{\n        padding: '0 20px',\n        background: 'rgba(20, 24, 36, 0.5)',\n      }}>\n        <ResourceBar\n          resources={gameState.resources}\n          maxValues={{\n            crystals: 999,\n            energy: 100,\n            temporal: 100,\n            quantum: 50,\n          }}\n          variant=\"horizontal\"\n        />\n      </div>\n      \n      {/* Main Content */}\n      <main style={{\n        flex: 1,\n        position: 'relative',\n        overflow: 'hidden',\n      }}>\n        <Routes>\n          <Route path=\"/\" element={<MapView />} />\n          <Route path=\"/map\" element={<MapView />} />\n          <Route path=\"/combat\" element={<CombatView />} />\n          <Route path=\"/timeline\" element={<TimelineView />} />\n        </Routes>\n        \n        {/* Si pas de route, afficher la map par dfaut */}\n        {currentView === 'map' && <MapView />}\n        {currentView === 'combat' && <CombatView />}\n        {currentView === 'timeline' && <TimelineView />}\n      </main>\n      \n      {/* Footer avec actions */}\n      <footer style={{\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        padding: '12px 20px',\n        background: 'rgba(20, 24, 36, 0.9)',\n        borderTop: '1px solid rgba(102, 126, 234, 0.3)',\n      }}>\n        <div style={{ display: 'flex', gap: 8 }}>\n          <button\n            onClick={endTurn}\n            style={{\n              padding: '10px 20px',\n              background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n              color: 'white',\n              border: 'none',\n              borderRadius: 8,\n              cursor: 'pointer',\n              fontWeight: 600,\n              fontSize: 14,\n            }}\n          >\n             Fin de Tour\n          </button>\n          \n          <button\n            onClick={() => navigate('/')}\n            style={{\n              padding: '10px 20px',\n              background: 'rgba(255, 255, 255, 0.1)',\n              color: 'white',\n              border: '1px solid rgba(255, 255, 255, 0.2)',\n              borderRadius: 8,\n              cursor: 'pointer',\n              fontSize: 14,\n            }}\n          >\n             Menu\n          </button>\n        </div>\n        \n        <div style={{\n          display: 'flex',\n          alignItems: 'center',\n          gap: 12,\n          fontSize: 14,\n          color: '#a0aec0',\n        }}>\n          <span>Jour {gameState.day || 1}</span>\n          <span></span>\n          <span>Tour {gameState.turn || 1}</span>\n          <span></span>\n          <span>Mode: {gameState.mode || 'Campaign'}</span>\n        </div>\n      </footer>\n    </div>\n  );\n}\n\n// Vue Map\nfunction MapView(): React.ReactElement {\n  const { gameState, selectedHex, setSelectedHex, moveHero } = useGameStore();\n  const { hexes } = useHexStore();\n  \n  return (\n    <HexGrid\n      width={20}\n      height={20}\n      hexes={hexes}\n      selectedHex={selectedHex}\n      onHexClick={(x, y) => {\n        setSelectedHex({ x, y });\n        // Si c'est le hros, le dplacer\n        if (gameState.heroPosition) {\n          moveHero(x, y);\n        }\n      }}\n      enableDrag={true}\n      showGrid={true}\n    />\n  );\n}\n\n// Vue Combat (placeholder)\nfunction CombatView(): React.ReactElement {\n  return (\n    <div style={{\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n      height: '100%',\n      flexDirection: 'column',\n      gap: 20,\n    }}>\n      <div style={{ fontSize: 64 }}></div>\n      <h2 style={{ fontSize: 32, color: '#667eea' }}>Mode Combat</h2>\n      <p style={{ color: '#a0aec0' }}>TCG ou Auto-rsolution</p>\n      <div style={{\n        display: 'flex',\n        gap: 16,\n      }}>\n        <button style={{\n          padding: '12px 24px',\n          background: 'linear-gradient(135deg, #fc8181 0%, #f56565 100%)',\n          color: 'white',\n          border: 'none',\n          borderRadius: 8,\n          cursor: 'pointer',\n          fontSize: 16,\n        }}>\n           Mode TCG\n        </button>\n        <button style={{\n          padding: '12px 24px',\n          background: 'linear-gradient(135deg, #48bb78 0%, #38b2ac 100%)',\n          color: 'white',\n          border: 'none',\n          borderRadius: 8,\n          cursor: 'pointer',\n          fontSize: 16,\n        }}>\n           Auto-Rsolution\n        </button>\n      </div>\n    </div>\n  );\n}\n\n// Vue Timeline (placeholder)\nfunction TimelineView(): React.ReactElement {\n  const { gameState } = useGameStore();\n  \n  return (\n    <div style={{\n      padding: 40,\n      maxWidth: 1200,\n      margin: '0 auto',\n    }}>\n      <h2 style={{ fontSize: 32, color: '#667eea', marginBottom: 24 }}>\n         Timeline Temporelle\n      </h2>\n      \n      <div style={{\n        display: 'grid',\n        gridTemplateColumns: 'repeat(auto-fill, minmax(200px, 1fr))',\n        gap: 16,\n      }}>\n        {[1, 5, 10, 15, 20, 25, 30].map(day => (\n          <div\n            key={day}\n            style={{\n              padding: 16,\n              background: day === gameState.day \n                ? 'linear-gradient(135deg, rgba(102, 126, 234, 0.2) 0%, rgba(118, 75, 162, 0.2) 100%)'\n                : 'rgba(255, 255, 255, 0.05)',\n              border: day === gameState.day\n                ? '2px solid #667eea'\n                : '1px solid rgba(255, 255, 255, 0.1)',\n              borderRadius: 8,\n            }}\n          >\n            <div style={{ fontSize: 24, marginBottom: 8 }}>\n              Jour {day}\n            </div>\n            {day === 30 && (\n              <div style={{ fontSize: 12, color: '#ffd700' }}>\n                 vnement Spcial\n              </div>\n            )}\n          </div>\n        ))}\n      </div>\n      \n      <div style={{\n        marginTop: 32,\n        padding: 20,\n        background: 'rgba(102, 126, 234, 0.1)',\n        border: '1px solid rgba(102, 126, 234, 0.3)',\n        borderRadius: 8,\n      }}>\n        <h3 style={{ color: '#9f7aea', marginBottom: 12 }}>\n          Prochains vnements\n        </h3>\n        <ul style={{ listStyle: 'none', padding: 0 }}>\n          <li>Jour 8: Premiers contacts</li>\n          <li>Jour 15: Les rgulateurs arrivent</li>\n          <li>Jour 20: Bataille majeure</li>\n          <li>Jour 25: Convergence temporelle</li>\n          <li>Jour 30: L'Apocalypse Temporelle</li>\n        </ul>\n      </div>\n    </div>\n  );\n}\n\n// Bouton de vue\nfunction ViewButton({ \n  active, \n  onClick, \n  children \n}: {\n  active: boolean;\n  onClick: () => void;\n  children: React.ReactNode;\n}): React.ReactElement {\n  return (\n    <button\n      onClick={onClick}\n      style={{\n        padding: '8px 16px',\n        background: active\n          ? 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)'\n          : 'transparent',\n        color: active ? 'white' : '#a0aec0',\n        border: active ? 'none' : '1px solid rgba(255, 255, 255, 0.1)',\n        borderRadius: 6,\n        cursor: 'pointer',\n        fontSize: 14,\n        transition: 'all 0.2s',\n      }}\n    >\n      {children}\n    </button>\n  );\n}\n","/**\n *  Editor Store - tat de l'diteur de cartes\n */\n\nimport { create } from 'zustand';\nimport { devtools } from 'zustand/middleware';\n\ninterface Icon {\n  id: string;\n  emoji: string;\n  name: string;\n}\n\ninterface Hex {\n  x: number;\n  y: number;\n  terrain?: string;\n  icon?: Icon;\n  connections?: string[];\n  metadata?: any;\n}\n\ninterface EditorState {\n  // Map\n  hexes: Map<string, Hex>;\n  mapSize: { width: number; height: number };\n  \n  // Selection\n  selectedHex: { x: number; y: number } | null;\n  selectedIcon: Icon | null;\n  \n  // Tools\n  currentTool: 'select' | 'terrain' | 'icon' | 'erase' | 'connect';\n  \n  // History (undo/redo)\n  history: Hex[][];\n  historyIndex: number;\n}\n\ninterface EditorActions {\n  // Selection\n  setSelectedHex: (hex: { x: number; y: number } | null) => void;\n  setSelectedIcon: (icon: Icon | null) => void;\n  \n  // Tools\n  setCurrentTool: (tool: EditorState['currentTool']) => void;\n  \n  // Map operations\n  placeIcon: (x: number, y: number, icon: Icon) => void;\n  setTerrain: (x: number, y: number, terrain: string) => void;\n  clearHex: (x: number, y: number) => void;\n  connectHexes: (from: { x: number; y: number }, to: { x: number; y: number }) => void;\n  \n  // Import/Export\n  exportMap: () => any;\n  importMap: (data: any) => void;\n  \n  // History\n  undo: () => void;\n  redo: () => void;\n  \n  // Utils\n  reset: () => void;\n  initializeMap: (width: number, height: number) => void;\n}\n\nconst initialState: EditorState = {\n  hexes: new Map(),\n  mapSize: { width: 30, height: 20 },\n  selectedHex: null,\n  selectedIcon: null,\n  currentTool: 'select',\n  history: [],\n  historyIndex: -1,\n};\n\nexport const useEditorStore = create<EditorState & EditorActions>()(\n  devtools((set, get) => ({\n    ...initialState,\n    \n    // Selection\n    setSelectedHex: (hex) => set({ selectedHex: hex }),\n    setSelectedIcon: (icon) => set({ selectedIcon: icon }),\n    \n    // Tools\n    setCurrentTool: (tool) => set({ currentTool: tool }),\n    \n    // Map operations\n    placeIcon: (x, y, icon) => {\n      const key = `${x},${y}`;\n      set((state) => {\n        const newHexes = new Map(state.hexes);\n        const hex = newHexes.get(key) || { x, y };\n        hex.icon = icon;\n        newHexes.set(key, hex);\n        \n        // Add to history\n        const newHistory = state.history.slice(0, state.historyIndex + 1);\n        newHistory.push(Array.from(newHexes.values()));\n        \n        return {\n          hexes: newHexes,\n          history: newHistory,\n          historyIndex: newHistory.length - 1,\n        };\n      });\n    },\n    \n    setTerrain: (x, y, terrain) => {\n      const key = `${x},${y}`;\n      set((state) => {\n        const newHexes = new Map(state.hexes);\n        const hex = newHexes.get(key) || { x, y };\n        hex.terrain = terrain;\n        newHexes.set(key, hex);\n        return { hexes: newHexes };\n      });\n    },\n    \n    clearHex: (x, y) => {\n      const key = `${x},${y}`;\n      set((state) => {\n        const newHexes = new Map(state.hexes);\n        newHexes.delete(key);\n        return { hexes: newHexes };\n      });\n    },\n    \n    connectHexes: (from, to) => {\n      const fromKey = `${from.x},${from.y}`;\n      const toKey = `${to.x},${to.y}`;\n      \n      set((state) => {\n        const newHexes = new Map(state.hexes);\n        \n        // Add connection from -> to\n        const fromHex = newHexes.get(fromKey) || { x: from.x, y: from.y };\n        fromHex.connections = fromHex.connections || [];\n        if (!fromHex.connections.includes(toKey)) {\n          fromHex.connections.push(toKey);\n        }\n        newHexes.set(fromKey, fromHex);\n        \n        // Add connection to -> from (bidirectional)\n        const toHex = newHexes.get(toKey) || { x: to.x, y: to.y };\n        toHex.connections = toHex.connections || [];\n        if (!toHex.connections.includes(fromKey)) {\n          toHex.connections.push(fromKey);\n        }\n        newHexes.set(toKey, toHex);\n        \n        return { hexes: newHexes };\n      });\n    },\n    \n    // Import/Export\n    exportMap: () => {\n      const state = get();\n      return {\n        version: '1.0.0',\n        mapSize: state.mapSize,\n        hexes: Array.from(state.hexes.values()),\n        metadata: {\n          createdAt: new Date().toISOString(),\n          tool: 'Magic Stack Unified Editor',\n        },\n      };\n    },\n    \n    importMap: (data) => {\n      if (!data || !data.hexes) return;\n      \n      const newHexes = new Map();\n      data.hexes.forEach((hex: Hex) => {\n        newHexes.set(`${hex.x},${hex.y}`, hex);\n      });\n      \n      set({\n        hexes: newHexes,\n        mapSize: data.mapSize || { width: 30, height: 20 },\n      });\n    },\n    \n    // History\n    undo: () => {\n      const state = get();\n      if (state.historyIndex > 0) {\n        const newIndex = state.historyIndex - 1;\n        const hexData = state.history[newIndex];\n        const newHexes = new Map();\n        hexData.forEach(hex => {\n          newHexes.set(`${hex.x},${hex.y}`, hex);\n        });\n        set({\n          hexes: newHexes,\n          historyIndex: newIndex,\n        });\n      }\n    },\n    \n    redo: () => {\n      const state = get();\n      if (state.historyIndex < state.history.length - 1) {\n        const newIndex = state.historyIndex + 1;\n        const hexData = state.history[newIndex];\n        const newHexes = new Map();\n        hexData.forEach(hex => {\n          newHexes.set(`${hex.x},${hex.y}`, hex);\n        });\n        set({\n          hexes: newHexes,\n          historyIndex: newIndex,\n        });\n      }\n    },\n    \n    // Utils\n    reset: () => set(initialState),\n    \n    initializeMap: (width, height) => {\n      const newHexes = new Map();\n      const terrains = ['grass', 'forest', 'mountain', 'water'];\n      \n      for (let x = 0; x < width; x++) {\n        for (let y = 0; y < height; y++) {\n          const key = `${x},${y}`;\n          newHexes.set(key, {\n            x,\n            y,\n            terrain: terrains[Math.floor(Math.random() * terrains.length)],\n          });\n        }\n      }\n      \n      set({\n        hexes: newHexes,\n        mapSize: { width, height },\n      });\n    },\n  }))\n);\n\n// Auto-initialize map on load\nif (typeof window !== 'undefined') {\n  const store = useEditorStore.getState();\n  if (store.hexes.size === 0) {\n    store.initializeMap(30, 20);\n  }\n}\n","import React, { useEffect, useRef, useState } from 'react';\n\nexport function MapIconPlacerWrapper() {\n  const iframeRef = useRef<HTMLIFrameElement>(null);\n  const [apiStatus, setApiStatus] = useState({ rust: false, java: false, vectorDB: false });\n\n  useEffect(() => {\n    // Vrifier les APIs au dmarrage\n    checkAPIs();\n\n    // Communication bidirectionnelle avec le HTML\n    const handleMessage = async (event: MessageEvent) => {\n      const { type, data } = event.data;\n\n      switch(type) {\n        case 'SAVE_MAP':\n          // Sauvegarde vers Interstice (Java 8082)\n          try {\n            const payload = {\n              type: 'unified_map',\n              name: `map_export_${Date.now()}`,\n              data,\n              metadata: {\n                totalIcons: Array.isArray(data?.icons) ? data.icons.length : undefined,\n                totalConnections: Array.isArray(data?.connections) ? data.connections.length : undefined,\n                created: data?.created,\n                version: data?.version,\n              },\n            };\n            const response = await fetch('http://localhost:8082/api/interstice/upload', {\n              method: 'POST',\n              headers: { 'Content-Type': 'application/json' },\n              body: JSON.stringify(payload),\n            });\n            if (response.ok) {\n              const json = await response.json().catch(() => ({}));\n              sendToIframe({ type: 'SAVE_SUCCESS', message: 'Map sauvegarde!', data: json });\n            } else {\n              sendToIframe({ type: 'SAVE_ERROR', message: `HTTP ${response.status}` });\n            }\n          } catch (error) {\n            sendToIframe({ type: 'SAVE_ERROR', message: 'Erreur sauvegarde' });\n          }\n          break;\n\n        case 'LOAD_MAP':\n          // Chargement depuis Interstice (Java 8082)\n          try {\n            const response = await fetch(`http://localhost:8082/api/interstice/${data.mapId}`);\n            if (response.ok) {\n              const mapWrapper = await response.json();\n              const mapData = mapWrapper?.data ?? mapWrapper;\n              sendToIframe({ type: 'MAP_LOADED', data: mapData });\n            } else {\n              sendToIframe({ type: 'LOAD_ERROR', message: `HTTP ${response.status}` });\n            }\n          } catch (error) {\n            sendToIframe({ type: 'LOAD_ERROR', message: 'Erreur chargement' });\n          }\n          break;\n\n        case 'CALCULATE_6D':\n          // Calcul 6D via Rust\n          try {\n            const response = await fetch('http://localhost:3001/api/v2/calculate', {\n              method: 'POST',\n              headers: { 'Content-Type': 'application/json' },\n              body: JSON.stringify(data)\n            });\n            if (response.ok) {\n              const result = await response.json();\n              sendToIframe({ type: '6D_RESULT', data: result });\n            }\n          } catch (error) {\n            console.error('Erreur calcul 6D:', error);\n          }\n          break;\n\n        case 'SEARCH_LORE':\n          // Recherche dans Vector DB\n          try {\n            const response = await fetch('http://localhost:7500/search', {\n              method: 'POST',\n              headers: { 'Content-Type': 'application/json' },\n              body: JSON.stringify({ query: data.query })\n            });\n            if (response.ok) {\n              const results = await response.json();\n              sendToIframe({ type: 'LORE_RESULTS', data: results });\n            }\n          } catch (error) {\n            console.error('Erreur recherche lore:', error);\n          }\n          break;\n\n        case 'ASK_CLIPPY':\n          // Question  Clippy\n          try {\n            const response = await fetch('http://localhost:7501/api/clippy/ask', {\n              method: 'POST',\n              headers: { 'Content-Type': 'application/json' },\n              body: JSON.stringify({ question: data.question, context: data.context })\n            });\n            if (response.ok) {\n              const answer = await response.json();\n              sendToIframe({ type: 'CLIPPY_ANSWER', data: answer });\n            }\n          } catch (error) {\n            console.error('Erreur Clippy:', error);\n          }\n          break;\n      }\n    };\n\n    window.addEventListener('message', handleMessage);\n    return () => window.removeEventListener('message', handleMessage);\n  }, []);\n\n  const sendToIframe = (message: any) => {\n    if (iframeRef.current?.contentWindow) {\n      iframeRef.current.contentWindow.postMessage(message, '*');\n    }\n  };\n\n  const checkAPIs = async () => {\n    // Vrifier chaque backend\n    const checks = [\n      { url: 'http://localhost:3001/health', key: 'rust' },\n      { url: 'http://localhost:8082/health', key: 'java' },\n      { url: 'http://localhost:7500/health', key: 'vectorDB' }\n    ];\n\n    for (const check of checks) {\n      try {\n        const response = await fetch(check.url);\n        setApiStatus(prev => ({ ...prev, [check.key]: response.ok }));\n      } catch {\n        setApiStatus(prev => ({ ...prev, [check.key]: false }));\n      }\n    }\n  };\n\n  return (\n    <div style={{ width: '100%', height: '100vh', position: 'relative' }}>\n      {/* Barre de statut des APIs */}\n      <div style={{\n        position: 'absolute',\n        top: 10,\n        right: 10,\n        zIndex: 1000,\n        background: 'rgba(0, 0, 0, 0.8)',\n        padding: '10px',\n        borderRadius: '8px',\n        display: 'flex',\n        gap: '10px'\n      }}>\n        <span style={{ color: apiStatus.rust ? '#4ade80' : '#ef4444' }}>\n          Rust {apiStatus.rust ? '' : ''}\n        </span>\n        <span style={{ color: apiStatus.java ? '#4ade80' : '#ef4444' }}>\n          Java {apiStatus.java ? '' : ''}\n        </span>\n        <span style={{ color: apiStatus.vectorDB ? '#4ade80' : '#ef4444' }}>\n          Vector {apiStatus.vectorDB ? '' : ''}\n        </span>\n      </div>\n\n      {/* Le chef-d'uvre HTML */}\n      <iframe\n        ref={iframeRef}\n        src=\"/assets/MAP_ICON_PLACER_ADVANCED.html\"\n        style={{\n          width: '100%',\n          height: '100%',\n          border: 'none'\n        }}\n        title=\"Map Icon Placer HD\"\n        onLoad={() => {\n          // Envoyer la config initiale au HTML\n          sendToIframe({\n            type: 'INIT',\n            apis: {\n              rust: 'http://localhost:3001',\n              java: 'http://localhost:8082',\n              vectorDB: 'http://localhost:7500',\n              clippy: 'http://localhost:7501'\n            }\n          });\n        }}\n      />\n    </div>\n  );\n}","/**\n *  EditorView - Mode TEST & INSTANTIATION\n * Pour tester les maps cres dans World Editor\n */\n\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport { HexGrid } from '../../shared/components/HexGrid';\nimport { TemporalDisplay } from '../../shared/components/TemporalDisplay';\nimport { ResourceBar } from '../../shared/components/ResourceBar';\nimport { useEditorStore } from './store/editorStore';\nimport { MapIconPlacerV2 } from './MapIconPlacerV2';\nimport { MapIconPlacerWrapper } from './MapIconPlacerWrapper';\n\nexport function EditorView(): React.ReactElement {\n  const [mode, setMode] = React.useState<'edit' | 'test' | 'import' | 'icon-placer'>('import');\n  const [isRunning, setIsRunning] = React.useState(false);\n  const { hexes, selectedHex, setSelectedHex, importMap } = useEditorStore();\n  \n  // tat temporel pour les tests\n  const [temporal, setTemporal] = React.useState({\n    tw: 0,\n    te: 0,\n    debt: 0,\n    debtRate: 0.05,\n    energy_complex: { A: 50, phi: Math.PI / 4 }\n  });\n  \n  // Tick V2 pour tester\n  React.useEffect(() => {\n    if (!isRunning) return;\n    \n    const interval = setInterval(() => {\n      setTemporal(t => ({\n        ...t,\n        tw: t.tw + 1,\n        te: t.te + 0.95,\n        debt: t.debt + (Math.abs(t.tw - t.te) * t.debtRate)\n      }));\n    }, 1000);\n    \n    return () => clearInterval(interval);\n  }, [isRunning]);\n  \n  // Charger un scnario depuis le World Editor\n  const handleImport = () => {\n    const input = document.createElement('input');\n    input.type = 'file';\n    input.accept = '.json';\n    input.onchange = (e: any) => {\n      const file = e.target.files[0];\n      if (file) {\n        const reader = new FileReader();\n        reader.onload = (event) => {\n          try {\n            const data = JSON.parse(event.target?.result as string);\n            importMap(data);\n            setMode('test');\n            console.log(' Scnario import:', data);\n          } catch (error) {\n            console.error(' Erreur import:', error);\n          }\n        };\n        reader.readAsText(file);\n      }\n    };\n    input.click();\n  };\n  \n  // Mode Icon Placer V2 - diteur de carte avec APIs V2\n  if (mode === 'icon-placer') {\n    return <MapIconPlacerWrapper />;\n  }\n  \n  // Mode Import - cran d'accueil\n  if (mode === 'import') {\n    return (\n      <div style={{\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        justifyContent: 'center',\n        height: '100vh',\n        gap: 30,\n        background: 'linear-gradient(135deg, #0a0e1a 0%, #1a1d3a 100%)',\n      }}>\n        <h1 style={{\n          fontSize: 48,\n          background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n          WebkitBackgroundClip: 'text',\n          WebkitTextFillColor: 'transparent',\n        }}>\n           Mode Test & Instantiation\n        </h1>\n        \n        <p style={{\n          fontSize: 18,\n          color: '#a0aec0',\n          textAlign: 'center',\n          maxWidth: 600,\n        }}>\n          Testez vos crations du World Editor en conditions relles\n          avec les mcaniques V2 et les backends actifs\n        </p>\n        \n        <div style={{\n          display: 'flex',\n          gap: 20,\n        }}>\n          <button\n            onClick={handleImport}\n            style={{\n              padding: '15px 30px',\n              background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n              color: 'white',\n              border: 'none',\n              borderRadius: 12,\n              fontSize: 18,\n              fontWeight: 'bold',\n              cursor: 'pointer',\n              transition: 'transform 0.2s',\n            }}\n            onMouseEnter={(e) => e.currentTarget.style.transform = 'scale(1.05)'}\n            onMouseLeave={(e) => e.currentTarget.style.transform = 'scale(1)'}\n          >\n             Importer un Scnario\n          </button>\n          \n          <button\n            onClick={() => setMode('icon-placer')}\n            style={{\n              padding: '15px 30px',\n              background: 'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)',\n              color: 'white',\n              border: 'none',\n              borderRadius: 12,\n              fontSize: 18,\n              fontWeight: 'bold',\n              cursor: 'pointer',\n              transition: 'transform 0.2s',\n            }}\n            onMouseEnter={(e) => e.currentTarget.style.transform = 'scale(1.05)'}\n            onMouseLeave={(e) => e.currentTarget.style.transform = 'scale(1)'}\n          >\n             Map Icon Placer V2\n          </button>\n          \n          <a\n            onClick={() => setMode('icon-placer')}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            style={{\n              padding: '15px 30px',\n              background: 'rgba(255, 255, 255, 0.1)',\n              color: 'white',\n              border: '2px solid #667eea',\n              borderRadius: 12,\n              fontSize: 18,\n              fontWeight: 'bold',\n              cursor: 'pointer',\n              textDecoration: 'none',\n              display: 'flex',\n              alignItems: 'center',\n              gap: 10,\n            }}\n          >\n             Ouvrir World Editor\n          </a>\n        </div>\n        \n        <div style={{\n          marginTop: 40,\n          padding: 20,\n          background: 'rgba(102, 126, 234, 0.1)',\n          border: '1px solid rgba(102, 126, 234, 0.3)',\n          borderRadius: 12,\n          maxWidth: 600,\n        }}>\n          <h3 style={{ color: '#667eea', marginBottom: 10 }}>\n             Workflow recommand\n          </h3>\n          <ol style={{ color: '#a0aec0', lineHeight: 1.8 }}>\n            <li>Crez votre map dans le <strong>World Editor</strong> (cet diteur)</li>\n            <li>Exportez en JSON</li>\n            <li>Importez ici pour tester avec V2</li>\n            <li>Vrifiez drift, paradoxes, rgulateurs</li>\n            <li>Si OK  Publiez vers le jeu</li>\n          </ol>\n        </div>\n        \n        <Link\n          to=\"/\"\n          style={{\n            marginTop: 20,\n            padding: '10px 20px',\n            background: 'rgba(255, 255, 255, 0.1)',\n            color: 'white',\n            border: '1px solid rgba(255, 255, 255, 0.2)',\n            borderRadius: 8,\n            textDecoration: 'none',\n          }}\n        >\n           Retour au menu\n        </Link>\n      </div>\n    );\n  }\n  \n  // Mode Test - map charge\n  return (\n    <div style={{\n      display: 'flex',\n      flexDirection: 'column',\n      height: '100vh',\n      background: '#0a0e1a',\n    }}>\n      {/* Header avec contrles de test */}\n      <header style={{\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        padding: '12px 20px',\n        background: 'linear-gradient(180deg, rgba(20, 24, 36, 0.95) 0%, rgba(26, 31, 46, 0.9) 100%)',\n        borderBottom: '1px solid rgba(102, 126, 234, 0.3)',\n      }}>\n        <div style={{ display: 'flex', alignItems: 'center', gap: 20 }}>\n          <button\n            onClick={() => setMode('import')}\n            style={{\n              padding: '8px 16px',\n              background: 'rgba(255, 255, 255, 0.1)',\n              color: 'white',\n              border: '1px solid rgba(255, 255, 255, 0.2)',\n              borderRadius: 8,\n              cursor: 'pointer',\n            }}\n          >\n             Nouveau\n          </button>\n          \n          <h2 style={{\n            fontSize: 24,\n            fontWeight: 'bold',\n            background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n            WebkitBackgroundClip: 'text',\n            WebkitTextFillColor: 'transparent',\n            margin: 0,\n          }}>\n             Test de Scnario\n          </h2>\n        </div>\n        \n        {/* Contrles de simulation */}\n        <div style={{ display: 'flex', gap: 12 }}>\n          <button\n            onClick={() => setIsRunning(!isRunning)}\n            style={{\n              padding: '10px 20px',\n              background: isRunning\n                ? 'linear-gradient(135deg, #fc8181 0%, #f56565 100%)'\n                : 'linear-gradient(135deg, #48bb78 0%, #38b2ac 100%)',\n              color: 'white',\n              border: 'none',\n              borderRadius: 8,\n              cursor: 'pointer',\n              fontWeight: 'bold',\n              fontSize: 16,\n            }}\n          >\n            {isRunning ? ' Pause' : ' Start V2'}\n          </button>\n          \n          <button\n            style={{\n              padding: '10px 20px',\n              background: 'linear-gradient(135deg, #f6ad55 0%, #ed8936 100%)',\n              color: 'white',\n              border: 'none',\n              borderRadius: 8,\n              cursor: 'pointer',\n              fontWeight: 'bold',\n            }}\n          >\n             Paradoxe\n          </button>\n          \n          <button\n            style={{\n              padding: '10px 20px',\n              background: 'linear-gradient(135deg, #9f7aea 0%, #805ad5 100%)',\n              color: 'white',\n              border: 'none',\n              borderRadius: 8,\n              cursor: 'pointer',\n              fontWeight: 'bold',\n            }}\n          >\n             Rgulateur\n          </button>\n        </div>\n        \n        {/* Temporal Display */}\n        <TemporalDisplay\n          temporal={temporal}\n          variant=\"compact\"\n          showEnergy={true}\n        />\n      </header>\n      \n      {/* Resources Bar */}\n      <div style={{\n        padding: '0 20px',\n        background: 'rgba(20, 24, 36, 0.5)',\n      }}>\n        <ResourceBar\n          resources={{ crystals: 100, energy: 50, temporal: 25, quantum: 10 }}\n          variant=\"compact\"\n        />\n      </div>\n      \n      {/* Main - Map de test */}\n      <main style={{\n        flex: 1,\n        position: 'relative',\n        overflow: 'hidden',\n      }}>\n        <HexGrid\n          width={30}\n          height={20}\n          hexes={hexes}\n          selectedHex={selectedHex}\n          onHexClick={(x, y) => setSelectedHex({ x, y })}\n          enableDrag={true}\n          showGrid={true}\n        />\n        \n        {/* Panel de debug */}\n        <div style={{\n          position: 'absolute',\n          top: 20,\n          right: 20,\n          width: 300,\n          padding: 20,\n          background: 'rgba(0, 0, 0, 0.9)',\n          border: '2px solid #667eea',\n          borderRadius: 12,\n        }}>\n          <h3 style={{\n            fontSize: 16,\n            color: '#667eea',\n            marginBottom: 15,\n          }}>\n             Debug V2\n          </h3>\n          \n          <div style={{ fontSize: 14, color: '#e8ecff', lineHeight: 1.8 }}>\n            <div>TW: {temporal.tw.toFixed(1)}</div>\n            <div>TE: {temporal.te.toFixed(1)}</div>\n            <div>Drift: {Math.abs(temporal.tw - temporal.te).toFixed(2)}</div>\n            <div>Dette: {temporal.debt.toFixed(2)}</div>\n            <div>nergie: {temporal.energy_complex.A.toFixed(0)} + {temporal.energy_complex.phi.toFixed(2)}i</div>\n          </div>\n          \n          <div style={{\n            marginTop: 15,\n            paddingTop: 15,\n            borderTop: '1px solid rgba(102, 126, 234, 0.3)',\n          }}>\n            <div style={{ fontSize: 12, color: '#a0aec0' }}>\n              Hexes: {hexes.size}<br/>\n              FPS: 60<br/>\n              Backends:  Rust |  Java |  Vector\n            </div>\n          </div>\n        </div>\n      </main>\n      \n      {/* Footer */}\n      <footer style={{\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        padding: '12px 20px',\n        background: 'rgba(20, 24, 36, 0.9)',\n        borderTop: '1px solid rgba(102, 126, 234, 0.3)',\n        fontSize: 14,\n        color: '#a0aec0',\n      }}>\n        <span>Mode: {isRunning ? ' Running' : ' Paused'}</span>\n        <span>Scnario: Test_Map_001</span>\n        <span>Tick: {temporal.tw}</span>\n      </footer>\n    </div>\n  );\n}","/**\n *  Chasse Store - tat pour le mode Chasse Temporelle\n * Map 120x120 avec viewport 20x20\n */\n\nimport { create } from 'zustand';\nimport { devtools } from 'zustand/middleware';\n\ninterface ChasseState {\n  // Viewport (fentre visible 20x20)\n  viewport: { x: number; y: number };\n  \n  // Temporal V2\n  temporal: {\n    tw: number;\n    te: number;\n    debt: number;\n    debtMax: number;\n    driftRate: number;\n  };\n  \n  // Resources\n  resources: {\n    crystals: number;\n    energy: number;\n    temporal: number;\n  };\n  \n  // Difficulty settings\n  difficulty: 'easy' | 'normal' | 'hard' | 'nightmare';\n  difficultySettings: {\n    driftRate: number;\n    debtMax: number;\n    enemyDensity: number;\n    resourceScarcity: number;\n  };\n  \n  // Hero\n  heroPosition: { x: number; y: number } | null;\n  heroStats: {\n    health: number;\n    maxHealth: number;\n    vision: number; // Rayon de vision pour le brouillard\n  };\n  \n  // Map data (120x120)\n  mapSize: { width: number; height: number };\n  hexes: Map<string, any>;\n  discoveredHexes: Set<string>; // Pour le brouillard de guerre\n  \n  // Selection\n  selectedHex: { x: number; y: number } | null;\n  \n  // Audio\n  audioEnabled: boolean;\n  audioVolume: number;\n}\n\ninterface ChasseActions {\n  // Viewport\n  setViewport: (viewport: { x: number; y: number }) => void;\n  moveViewport: (dx: number, dy: number) => void;\n  centerOnHero: () => void;\n  \n  // Hero\n  moveHero: (x: number, y: number) => void;\n  \n  // Selection\n  setSelectedHex: (hex: { x: number; y: number } | null) => void;\n  \n  // Temporal\n  tick: () => void;\n  \n  // Game\n  initGame: (difficulty: 'easy' | 'normal' | 'hard' | 'nightmare') => void;\n  generateMegaMap: () => void;\n  \n  // Hexes\n  setHex: (x: number, y: number, data: any) => void;\n  getHex: (x: number, y: number) => any;\n  discoverHex: (x: number, y: number) => void;\n  \n  // Audio\n  toggleAudio: () => void;\n  setVolume: (volume: number) => void;\n  playSound: (sound: string) => void;\n}\n\nconst DIFFICULTY_PRESETS = {\n  easy: {\n    driftRate: 0.1,\n    debtMax: 100,\n    enemyDensity: 0.1,\n    resourceScarcity: 0.2,\n  },\n  normal: {\n    driftRate: 0.3,\n    debtMax: 50,\n    enemyDensity: 0.2,\n    resourceScarcity: 0.4,\n  },\n  hard: {\n    driftRate: 0.5,\n    debtMax: 30,\n    enemyDensity: 0.35,\n    resourceScarcity: 0.6,\n  },\n  nightmare: {\n    driftRate: 1.0,\n    debtMax: 10,\n    enemyDensity: 0.5,\n    resourceScarcity: 0.8,\n  },\n};\n\nexport const useChasseStore = create<ChasseState & ChasseActions>()(\n  devtools((set, get) => ({\n    // Initial state\n    viewport: { x: 50, y: 50 }, // Start au centre\n    temporal: {\n      tw: 0,\n      te: 0,\n      debt: 0,\n      debtMax: 50,\n      driftRate: 0.3,\n    },\n    resources: {\n      crystals: 50,\n      energy: 100,\n      temporal: 25,\n    },\n    difficulty: 'normal',\n    difficultySettings: DIFFICULTY_PRESETS.normal,\n    heroPosition: { x: 60, y: 60 },\n    heroStats: {\n      health: 100,\n      maxHealth: 100,\n      vision: 5,\n    },\n    mapSize: { width: 120, height: 120 },\n    hexes: new Map(),\n    discoveredHexes: new Set(),\n    selectedHex: null,\n    audioEnabled: true,\n    audioVolume: 0.5,\n    \n    // Actions\n    setViewport: (viewport) => set({ viewport }),\n    \n    moveViewport: (dx, dy) => {\n      const state = get();\n      const newX = Math.max(0, Math.min(100, state.viewport.x + dx));\n      const newY = Math.max(0, Math.min(100, state.viewport.y + dy));\n      set({ viewport: { x: newX, y: newY } });\n    },\n    \n    centerOnHero: () => {\n      const state = get();\n      if (state.heroPosition) {\n        const vx = Math.max(0, Math.min(100, state.heroPosition.x - 10));\n        const vy = Math.max(0, Math.min(100, state.heroPosition.y - 10));\n        set({ viewport: { x: vx, y: vy } });\n      }\n    },\n    \n    moveHero: (x, y) => {\n      const state = get();\n      const oldPos = state.heroPosition;\n      \n      if (!oldPos) return;\n      \n      // Calcul distance\n      const distance = Math.abs(x - oldPos.x) + Math.abs(y - oldPos.y);\n      const energyCost = distance * 2;\n      \n      // Vrifier l'nergie\n      if (state.resources.energy < energyCost) {\n        console.log(' Pas assez d\\'nergie!');\n        return;\n      }\n      \n      // Dplacer et consommer nergie\n      set((state) => ({\n        heroPosition: { x, y },\n        resources: {\n          ...state.resources,\n          energy: state.resources.energy - energyCost,\n        },\n      }));\n      \n      // Dcouvrir les hexagones autour\n      const vision = state.heroStats.vision;\n      for (let dx = -vision; dx <= vision; dx++) {\n        for (let dy = -vision; dy <= vision; dy++) {\n          get().discoverHex(x + dx, y + dy);\n        }\n      }\n      \n      // Son de dplacement\n      get().playSound('move');\n    },\n    \n    setSelectedHex: (hex) => set({ selectedHex: hex }),\n    \n    tick: () => {\n      const state = get();\n      const { driftRate } = state.difficultySettings;\n      \n      // Update temporal\n      const newTw = state.temporal.tw + 1;\n      const newTe = state.temporal.te + (1 - driftRate);\n      const drift = Math.abs(newTw - newTe);\n      \n      // Accumulation de dette\n      let newDebt = state.temporal.debt;\n      if (drift > 5) {\n        newDebt += drift * 0.1;\n      }\n      \n      // Game over si dette max dpasse\n      if (newDebt > state.temporal.debtMax) {\n        console.log(' GAME OVER - Dette temporelle maximale atteinte!');\n        get().playSound('gameover');\n      }\n      \n      set((state) => ({\n        temporal: {\n          ...state.temporal,\n          tw: newTw,\n          te: newTe,\n          debt: Math.min(newDebt, state.temporal.debtMax),\n        },\n      }));\n    },\n    \n    initGame: (difficulty) => {\n      const settings = DIFFICULTY_PRESETS[difficulty];\n      \n      set({\n        difficulty,\n        difficultySettings: settings,\n        temporal: {\n          tw: 0,\n          te: 0,\n          debt: 0,\n          debtMax: settings.debtMax,\n          driftRate: settings.driftRate,\n        },\n        resources: {\n          crystals: difficulty === 'easy' ? 100 : \n                   difficulty === 'normal' ? 50 : \n                   difficulty === 'hard' ? 25 : 10,\n          energy: 100,\n          temporal: 25,\n        },\n        heroPosition: { x: 60, y: 60 },\n        viewport: { x: 50, y: 50 },\n      });\n      \n      // Gnrer la mega map\n      get().generateMegaMap();\n      \n      // Dcouvrir zone initiale\n      const hero = get().heroPosition;\n      if (hero) {\n        const vision = get().heroStats.vision;\n        for (let dx = -vision; dx <= vision; dx++) {\n          for (let dy = -vision; dy <= vision; dy++) {\n            get().discoverHex(hero.x + dx, hero.y + dy);\n          }\n        }\n      }\n    },\n    \n    generateMegaMap: () => {\n      const newHexes = new Map();\n      const { enemyDensity, resourceScarcity } = get().difficultySettings;\n      \n      const terrains = ['grass', 'forest', 'mountain', 'water', 'mystique', 'quantum', 'nexus'];\n      \n      // Gnration procdurale avec zones\n      for (let x = 0; x < 120; x++) {\n        for (let y = 0; y < 120; y++) {\n          const key = `${x},${y}`;\n          \n          // Terrain de base avec zones\n          let terrain = 'grass';\n          const zoneX = Math.floor(x / 20);\n          const zoneY = Math.floor(y / 20);\n          \n          // Zones thmatiques (6x6 zones de 20x20)\n          if (zoneX === 0 && zoneY === 0) {\n            // Zone de dpart - prairie\n            terrain = Math.random() > 0.3 ? 'grass' : 'forest';\n          } else if (zoneX === 5 && zoneY === 5) {\n            // Zone finale - quantum/nexus\n            terrain = Math.random() > 0.5 ? 'quantum' : 'nexus';\n          } else if (zoneX === 2 && zoneY === 3) {\n            // Zone mystique\n            terrain = Math.random() > 0.4 ? 'mystique' : 'mountain';\n          } else {\n            // Zones mixtes\n            terrain = terrains[Math.floor(Math.random() * terrains.length)];\n          }\n          \n          // Entits (ennemis)\n          let entity = null;\n          if (Math.random() < enemyDensity && !(x === 60 && y === 60)) {\n            entity = {\n              type: 'enemy',\n              icon: '',\n              strength: Math.floor(Math.random() * 10) + 1,\n            };\n          }\n          \n          // Ressources\n          let resource = null;\n          if (!entity && Math.random() > resourceScarcity) {\n            const resourceTypes = ['crystals', 'energy', 'temporal'];\n            resource = {\n              type: resourceTypes[Math.floor(Math.random() * 3)],\n              amount: Math.floor(Math.random() * 20) + 5,\n            };\n          }\n          \n          // Points d'intrt spciaux\n          let poi = null;\n          if (Math.random() < 0.02) { // 2% de chance\n            const poiTypes = [\n              { name: 'Sanctuaire Temporel', icon: '', effect: 'reset_drift' },\n              { name: 'Cristal Ancien', icon: '', effect: 'bonus_crystals' },\n              { name: 'Puits Quantique', icon: '', effect: 'teleport' },\n              { name: 'Archive OPUS', icon: '', effect: 'reveal_map' },\n            ];\n            poi = poiTypes[Math.floor(Math.random() * poiTypes.length)];\n          }\n          \n          newHexes.set(key, {\n            x,\n            y,\n            terrain,\n            entity,\n            resource,\n            poi,\n            fog: 'total', // Tout commence cach\n          });\n        }\n      }\n      \n      // Placer des vnements spciaux\n      // Zone de dpart scurise\n      for (let dx = -3; dx <= 3; dx++) {\n        for (let dy = -3; dy <= 3; dy++) {\n          const key = `${60 + dx},${60 + dy}`;\n          const hex = newHexes.get(key);\n          if (hex) {\n            hex.entity = null; // Pas d'ennemis\n            hex.terrain = 'grass';\n          }\n        }\n      }\n      \n      // Boss final au centre de la dernire zone\n      newHexes.set('110,110', {\n        x: 110,\n        y: 110,\n        terrain: 'nexus',\n        entity: {\n          type: 'boss',\n          icon: '',\n          name: 'Gardien Temporel',\n          strength: 100,\n        },\n        fog: 'total',\n      });\n      \n      set({ hexes: newHexes });\n      console.log(' Mega map 120x120 gnre!');\n    },\n    \n    setHex: (x, y, data) => {\n      const key = `${x},${y}`;\n      set((state) => {\n        const newHexes = new Map(state.hexes);\n        newHexes.set(key, { x, y, ...data });\n        return { hexes: newHexes };\n      });\n    },\n    \n    getHex: (x, y) => {\n      const key = `${x},${y}`;\n      return get().hexes.get(key);\n    },\n    \n    discoverHex: (x, y) => {\n      if (x < 0 || x >= 120 || y < 0 || y >= 120) return;\n      \n      const key = `${x},${y}`;\n      set((state) => {\n        const newDiscovered = new Set(state.discoveredHexes);\n        newDiscovered.add(key);\n        \n        // Mettre  jour le brouillard\n        const newHexes = new Map(state.hexes);\n        const hex = newHexes.get(key);\n        if (hex) {\n          hex.fog = 'clear';\n          newHexes.set(key, hex);\n        }\n        \n        return {\n          discoveredHexes: newDiscovered,\n          hexes: newHexes,\n        };\n      });\n    },\n    \n    toggleAudio: () => set((state) => ({ audioEnabled: !state.audioEnabled })),\n    \n    setVolume: (volume) => set({ audioVolume: volume }),\n    \n    playSound: (sound) => {\n      const state = get();\n      if (!state.audioEnabled) return;\n      \n      // Jouer le son (placeholder - ncessite Web Audio API)\n      console.log(` Playing sound: ${sound} at volume ${state.audioVolume}`);\n    },\n  }))\n);\n","/**\n *  ChasseView - Mode Chasse Temporelle\n * Migration depuis CHASSE_TEMPORELLE_MEGA_MAP.html\n * Map 120x120 avec viewport 20x20\n */\n\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport { HexGrid } from '../../shared/components/HexGrid';\nimport { TemporalDisplay } from '../../shared/components/TemporalDisplay';\nimport { ResourceBar } from '../../shared/components/ResourceBar';\nimport { useChasseStore } from './store/chasseStore';\n\nexport function ChasseView(): React.ReactElement {\n  const [gameStarted, setGameStarted] = React.useState(false);\n  const [selectedDifficulty, setSelectedDifficulty] = React.useState<\n    'easy' | 'normal' | 'hard' | 'nightmare'\n  >('normal');\n  \n  if (!gameStarted) {\n    return <DifficultySelector \n      onStart={(diff) => {\n        setSelectedDifficulty(diff);\n        setGameStarted(true);\n      }}\n    />;\n  }\n  \n  return <ChasseGame difficulty={selectedDifficulty} />;\n}\n\n// Slecteur de difficult\nfunction DifficultySelector({ onStart }: { \n  onStart: (diff: 'easy' | 'normal' | 'hard' | 'nightmare') => void \n}): React.ReactElement {\n  const difficulties = [\n    { \n      id: 'easy' as const, \n      name: ' Facile', \n      color: '#48bb78',\n      drift: 0.1, \n      debtMax: 100,\n      description: 'Drift minimal, dette gnreuse'\n    },\n    { \n      id: 'normal' as const, \n      name: ' Normal', \n      color: '#63b3ed',\n      drift: 0.3, \n      debtMax: 50,\n      description: 'quilibr pour dcouvrir'\n    },\n    { \n      id: 'hard' as const, \n      name: ' Difficile', \n      color: '#f6ad55',\n      drift: 0.5, \n      debtMax: 30,\n      description: 'Drift lev, ressources limites'\n    },\n    { \n      id: 'nightmare' as const, \n      name: ' Cauchemar', \n      color: '#fc8181',\n      drift: 1.0, \n      debtMax: 10,\n      description: 'Survie impossible?'\n    },\n  ];\n  \n  return (\n    <div style={{\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center',\n      justifyContent: 'center',\n      height: '100vh',\n      gap: 32,\n      padding: 20,\n      background: 'linear-gradient(135deg, #0a0e1a 0%, #1a1d3a 100%)',\n    }}>\n      <div style={{ textAlign: 'center' }}>\n        <h1 style={{\n          fontSize: 48,\n          background: 'linear-gradient(135deg, #f6ad55 0%, #fc8181 100%)',\n          WebkitBackgroundClip: 'text',\n          WebkitTextFillColor: 'transparent',\n          marginBottom: 16,\n        }}>\n           Chasse Temporelle\n        </h1>\n        \n        <p style={{\n          fontSize: 18,\n          color: '#a0aec0',\n          marginBottom: 8,\n        }}>\n          Map gigantesque 120x120 hexagones\n        </p>\n        \n        <p style={{\n          fontSize: 14,\n          color: '#718096',\n        }}>\n          6x6 crans  Brouillard de guerre  Rgulateurs\n        </p>\n      </div>\n      \n      <div style={{\n        display: 'grid',\n        gridTemplateColumns: 'repeat(2, 1fr)',\n        gap: 20,\n        maxWidth: 600,\n        width: '100%',\n      }}>\n        {difficulties.map(diff => (\n          <button\n            key={diff.id}\n            onClick={() => onStart(diff.id)}\n            style={{\n              padding: 20,\n              background: `linear-gradient(135deg, ${diff.color}20, ${diff.color}10)`,\n              border: `2px solid ${diff.color}`,\n              borderRadius: 12,\n              color: 'white',\n              cursor: 'pointer',\n              transition: 'all 0.3s',\n              textAlign: 'left',\n            }}\n            onMouseEnter={(e) => {\n              e.currentTarget.style.transform = 'translateY(-4px)';\n              e.currentTarget.style.boxShadow = `0 10px 30px ${diff.color}40`;\n            }}\n            onMouseLeave={(e) => {\n              e.currentTarget.style.transform = 'translateY(0)';\n              e.currentTarget.style.boxShadow = 'none';\n            }}\n          >\n            <div style={{\n              fontSize: 24,\n              fontWeight: 'bold',\n              color: diff.color,\n              marginBottom: 8,\n            }}>\n              {diff.name}\n            </div>\n            \n            <div style={{\n              fontSize: 12,\n              color: '#e8ecff',\n              marginBottom: 12,\n            }}>\n              {diff.description}\n            </div>\n            \n            <div style={{\n              display: 'flex',\n              gap: 16,\n              fontSize: 11,\n              color: '#a0aec0',\n            }}>\n              <span>Drift: {diff.drift}</span>\n              <span>Dette max: {diff.debtMax}</span>\n            </div>\n          </button>\n        ))}\n      </div>\n      \n      <Link\n        to=\"/\"\n        style={{\n          marginTop: 20,\n          padding: '10px 20px',\n          background: 'rgba(255, 255, 255, 0.1)',\n          color: 'white',\n          border: '1px solid rgba(255, 255, 255, 0.2)',\n          borderRadius: 8,\n          textDecoration: 'none',\n        }}\n      >\n         Retour au menu\n      </Link>\n    </div>\n  );\n}\n\n// Jeu principal\nfunction ChasseGame({ difficulty }: { \n  difficulty: 'easy' | 'normal' | 'hard' | 'nightmare' \n}): React.ReactElement {\n  const {\n    viewport,\n    setViewport,\n    temporal,\n    resources,\n    heroPosition,\n    moveHero,\n    hexes,\n    selectedHex,\n    setSelectedHex,\n    tick,\n  } = useChasseStore();\n  \n  // Init difficulty\n  React.useEffect(() => {\n    const store = useChasseStore.getState();\n    store.initGame(difficulty);\n  }, [difficulty]);\n  \n  // Tick auto\n  React.useEffect(() => {\n    const interval = setInterval(() => {\n      tick();\n    }, 1000);\n    return () => clearInterval(interval);\n  }, [tick]);\n  \n  // Gestion clavier pour dplacement viewport\n  React.useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      const step = 10;\n      const vp = useChasseStore.getState().viewport;\n      \n      switch(e.key) {\n        case 'ArrowUp':\n          setViewport({ ...vp, y: Math.max(0, vp.y - step) });\n          break;\n        case 'ArrowDown':\n          setViewport({ ...vp, y: Math.min(100, vp.y + step) });\n          break;\n        case 'ArrowLeft':\n          setViewport({ ...vp, x: Math.max(0, vp.x - step) });\n          break;\n        case 'ArrowRight':\n          setViewport({ ...vp, x: Math.min(100, vp.x + step) });\n          break;\n      }\n    };\n    \n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  }, [setViewport]);\n  \n  // Hexes visibles dans le viewport\n  const visibleHexes = React.useMemo(() => {\n    const visible = new Map();\n    const { x: vx, y: vy } = viewport;\n    \n    for (let x = vx; x < vx + 20 && x < 120; x++) {\n      for (let y = vy; y < vy + 20 && y < 120; y++) {\n        const key = `${x},${y}`;\n        const hex = hexes.get(key);\n        if (hex) {\n          // Ajuster les coordonnes pour l'affichage\n          visible.set(`${x - vx},${y - vy}`, {\n            ...hex,\n            displayX: x - vx,\n            displayY: y - vy,\n            realX: x,\n            realY: y,\n          });\n        }\n      }\n    }\n    \n    return visible;\n  }, [viewport, hexes]);\n  \n  return (\n    <div style={{\n      display: 'flex',\n      flexDirection: 'column',\n      height: '100vh',\n      background: '#0a0e1a',\n    }}>\n      {/* Header */}\n      <header style={{\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        padding: '12px 20px',\n        background: 'linear-gradient(180deg, rgba(20, 24, 36, 0.95) 0%, rgba(26, 31, 46, 0.9) 100%)',\n        borderBottom: '1px solid rgba(246, 173, 85, 0.3)',\n      }}>\n        <div style={{ display: 'flex', alignItems: 'center', gap: 20 }}>\n          <h2 style={{\n            fontSize: 24,\n            fontWeight: 'bold',\n            background: 'linear-gradient(135deg, #f6ad55 0%, #fc8181 100%)',\n            WebkitBackgroundClip: 'text',\n            WebkitTextFillColor: 'transparent',\n            margin: 0,\n          }}>\n             Chasse Temporelle\n          </h2>\n          \n          <span style={{\n            padding: '4px 12px',\n            background: getDifficultyColor(difficulty) + '20',\n            border: `1px solid ${getDifficultyColor(difficulty)}`,\n            borderRadius: 6,\n            fontSize: 12,\n            color: getDifficultyColor(difficulty),\n          }}>\n            {difficulty.toUpperCase()}\n          </span>\n        </div>\n        \n        <TemporalDisplay\n          temporal={temporal}\n          variant=\"compact\"\n          showEnergy={true}\n        />\n      </header>\n      \n      {/* Resources */}\n      <div style={{\n        padding: '0 20px',\n        background: 'rgba(20, 24, 36, 0.5)',\n      }}>\n        <ResourceBar\n          resources={resources}\n          variant=\"compact\"\n        />\n      </div>\n      \n      {/* Main Map */}\n      <main style={{\n        flex: 1,\n        position: 'relative',\n        overflow: 'hidden',\n      }}>\n        <HexGrid\n          width={20}\n          height={20}\n          hexes={visibleHexes}\n          selectedHex={selectedHex ? {\n            x: selectedHex.x - viewport.x,\n            y: selectedHex.y - viewport.y,\n          } : null}\n          onHexClick={(displayX, displayY) => {\n            const realX = displayX + viewport.x;\n            const realY = displayY + viewport.y;\n            setSelectedHex({ x: realX, y: realY });\n            \n            // Dplacer le hros si possible\n            if (heroPosition) {\n              const distance = Math.abs(realX - heroPosition.x) + \n                              Math.abs(realY - heroPosition.y);\n              if (distance <= 3) {\n                moveHero(realX, realY);\n              }\n            }\n          }}\n          showGrid={true}\n          enableDrag={false} // Viewport gr autrement\n        />\n        \n        {/* Minimap */}\n        <Minimap />\n        \n        {/* Position actuelle */}\n        <div style={{\n          position: 'absolute',\n          top: 10,\n          left: 10,\n          padding: '8px 12px',\n          background: 'rgba(0, 0, 0, 0.8)',\n          borderRadius: 6,\n          fontSize: 12,\n          color: '#a0aec0',\n        }}>\n          <div>Viewport: [{viewport.x},{viewport.y}]  [{viewport.x + 20},{viewport.y + 20}]</div>\n          {heroPosition && (\n            <div>Hros: [{heroPosition.x},{heroPosition.y}]</div>\n          )}\n          <div style={{ marginTop: 4, fontSize: 10, color: '#718096' }}>\n            Utilisez les flches pour naviguer\n          </div>\n        </div>\n      </main>\n      \n      {/* Footer */}\n      <footer style={{\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        padding: '12px 20px',\n        background: 'rgba(20, 24, 36, 0.9)',\n        borderTop: '1px solid rgba(246, 173, 85, 0.3)',\n      }}>\n        <div style={{ display: 'flex', gap: 8 }}>\n          <Link\n            to=\"/\"\n            style={{\n              padding: '10px 20px',\n              background: 'rgba(255, 255, 255, 0.1)',\n              color: 'white',\n              border: '1px solid rgba(255, 255, 255, 0.2)',\n              borderRadius: 8,\n              textDecoration: 'none',\n            }}\n          >\n             Menu\n          </Link>\n        </div>\n        \n        <div style={{\n          fontSize: 14,\n          color: '#a0aec0',\n        }}>\n          Map totale: 120120 | Zone visible: 2020\n        </div>\n      </footer>\n    </div>\n  );\n}\n\n// Minimap component\nfunction Minimap(): React.ReactElement {\n  const { viewport, heroPosition, hexes } = useChasseStore();\n  const scale = 2; // 120 / 60 pixels\n  \n  return (\n    <div style={{\n      position: 'absolute',\n      bottom: 20,\n      right: 20,\n      width: 240,\n      height: 240,\n      background: 'rgba(0, 0, 0, 0.9)',\n      border: '2px solid rgba(246, 173, 85, 0.5)',\n      borderRadius: 8,\n      padding: 4,\n    }}>\n      <div style={{\n        fontSize: 10,\n        color: '#f6ad55',\n        marginBottom: 4,\n        textAlign: 'center',\n      }}>\n        CARTE COMPLTE\n      </div>\n      \n      <div style={{\n        position: 'relative',\n        width: 232,\n        height: 210,\n        background: 'rgba(255, 255, 255, 0.05)',\n      }}>\n        {/* Viewport indicator */}\n        <div style={{\n          position: 'absolute',\n          left: viewport.x * scale,\n          top: viewport.y * scale,\n          width: 20 * scale,\n          height: 20 * scale,\n          border: '2px solid #ffd700',\n          background: 'rgba(255, 215, 0, 0.1)',\n        }} />\n        \n        {/* Hero position */}\n        {heroPosition && (\n          <div style={{\n            position: 'absolute',\n            left: heroPosition.x * scale - 2,\n            top: heroPosition.y * scale - 2,\n            width: 4,\n            height: 4,\n            background: '#48bb78',\n            borderRadius: '50%',\n          }} />\n        )}\n        \n        {/* Points d'intrt */}\n        {Array.from(hexes.entries())\n          .filter(([_, hex]) => hex.entity || hex.poi)\n          .map(([key, hex]) => (\n            <div\n              key={key}\n              style={{\n                position: 'absolute',\n                left: hex.x * scale - 1,\n                top: hex.y * scale - 1,\n                width: 2,\n                height: 2,\n                background: hex.entity ? '#fc8181' : '#667eea',\n                borderRadius: '50%',\n              }}\n            />\n          ))}\n      </div>\n    </div>\n  );\n}\n\n// Helpers\nfunction getDifficultyColor(difficulty: string): string {\n  const colors: Record<string, string> = {\n    easy: '#48bb78',\n    normal: '#63b3ed',\n    hard: '#f6ad55',\n    nightmare: '#fc8181',\n  };\n  return colors[difficulty] || '#667eea';\n}","/**\n *  HomePage - Page d'accueil dplace dans son propre fichier\n */\n\nimport React from 'react';\nimport { Link } from 'react-router-dom';\n\nexport function HomePage(): React.ReactElement {\n  return (\n    <div style={{\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center',\n      justifyContent: 'center',\n      minHeight: '100vh',\n      gap: 32,\n      padding: 20,\n    }}>\n      <h1 style={{\n        fontSize: 48,\n        background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n        WebkitBackgroundClip: 'text',\n        WebkitTextFillColor: 'transparent',\n        marginBottom: 16,\n      }}>\n         Magic Stack Unified\n      </h1>\n      \n      <p style={{\n        fontSize: 18,\n        color: '#a0aec0',\n        textAlign: 'center',\n        maxWidth: 600,\n      }}>\n        Un seul code, tous les modes. Jeu, diteur, Chasse Temporelle.\n        Architecture unifie avec composants partags.\n      </p>\n      \n      <div style={{\n        display: 'grid',\n        gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))',\n        gap: 20,\n        width: '100%',\n        maxWidth: 1200,\n      }}>\n        <ModeCard\n          to=\"/game\"\n          icon=\"\"\n          title=\"Heroes of Time\"\n          description=\"Le jeu principal avec combat, exploration et paradoxes temporels\"\n          color=\"#667eea\"\n        />\n        \n        <ModeCard\n          to=\"/editor\"\n          icon=\"\"\n          title=\"World Editor\"\n          description=\"Crez vos propres cartes et scnarios\"\n          color=\"#48bb78\"\n        />\n        \n        <ModeCard\n          to=\"/chasse\"\n          icon=\"\"\n          title=\"Chasse Temporelle\"\n          description=\"Mode aventure 120x120 avec 4 difficults\"\n          color=\"#f6ad55\"\n        />\n        \n        <ModeCard\n          to=\"/multiplayer\"\n          icon=\"\"\n          title=\"Multijoueur HOMM3\"\n          description=\"Combat TCG, exploration et conqute du Nexus\"\n          color=\"#e53e3e\"\n        />\n        \n        <ModeCard\n          to=\"/ai-battle\"\n          icon=\"\"\n          title=\"IA vs IA Autoplay\"\n          description=\"Batailles automatiques avec formules quantiques\"\n          color=\"#9f7aea\"\n        />\n        \n        <ModeCard\n          to=\"/spectator\"\n          icon=\"\"\n          title=\"God Mode Spectateur\"\n          description=\"Observez tout le multivers en temps rel\"\n          color=\"#38b2ac\"\n        />\n        \n        <ModeCard\n          to=\"/backstory-editor\"\n          icon=\"\"\n          title=\"diteur de Backstory\"\n          description=\"Personnalisez les histoires et personnalits des hros IA\"\n          color=\"#f6e05e\"\n        />\n        \n        <ModeCard\n          to=\"/unified\"\n          icon=\"\"\n          title=\" Unified Map System\"\n          description=\"L'DITEUR EST LE JEU ! Structure, Resources, Timeline - tout unifi\"\n          color=\"#FF1493\"\n          featured={true}\n        />\n      </div>\n      \n      <div style={{\n        display: 'flex',\n        gap: 16,\n        marginTop: 32,\n      }}>\n        <StatusIndicator label=\"Rust\" port={3001} />\n        <StatusIndicator label=\"Java\" port={8080} />\n        <StatusIndicator label=\"Vector\" port={5001} />\n      </div>\n    </div>\n  );\n}\n\n// Carte de mode\nfunction ModeCard({ to, icon, title, description, color, featured }: {\n  to: string;\n  icon: string;\n  title: string;\n  description: string;\n  color: string;\n  featured?: boolean;\n}): React.ReactElement {\n  return (\n    <Link\n      to={to}\n      style={{\n        display: 'flex',\n        flexDirection: 'column',\n        padding: 24,\n        background: featured \n          ? `linear-gradient(135deg, ${color}20, ${color}10)`\n          : 'rgba(255, 255, 255, 0.05)',\n        border: featured ? `2px solid ${color}` : `1px solid ${color}40`,\n        borderRadius: 12,\n        textDecoration: 'none',\n        color: 'inherit',\n        transition: 'all 0.3s',\n        cursor: 'pointer',\n        boxShadow: featured ? `0 0 20px ${color}40` : 'none',\n        animation: featured ? 'pulse 2s infinite' : 'none',\n      }}\n      onMouseEnter={(e) => {\n        e.currentTarget.style.background = 'rgba(255, 255, 255, 0.1)';\n        e.currentTarget.style.transform = 'translateY(-4px)';\n        e.currentTarget.style.boxShadow = `0 10px 30px ${color}40`;\n      }}\n      onMouseLeave={(e) => {\n        e.currentTarget.style.background = 'rgba(255, 255, 255, 0.05)';\n        e.currentTarget.style.transform = 'translateY(0)';\n        e.currentTarget.style.boxShadow = 'none';\n      }}\n    >\n      <div style={{ fontSize: 48, marginBottom: 16 }}>{icon}</div>\n      <h3 style={{ fontSize: 20, color, marginBottom: 8 }}>{title}</h3>\n      <p style={{ fontSize: 14, color: '#a0aec0' }}>{description}</p>\n    </Link>\n  );\n}\n\n// Indicateur de status backend\nfunction StatusIndicator({ label, port }: { label: string; port: number }): React.ReactElement {\n  const [isOnline, setIsOnline] = React.useState(false);\n  \n  React.useEffect(() => {\n    fetch(`http://localhost:${port}/health`)\n      .then(() => setIsOnline(true))\n      .catch(() => setIsOnline(false));\n  }, [port]);\n  \n  return (\n    <div style={{\n      display: 'flex',\n      alignItems: 'center',\n      gap: 8,\n      padding: '8px 12px',\n      background: 'rgba(255, 255, 255, 0.05)',\n      borderRadius: 8,\n      fontSize: 12,\n    }}>\n      <div style={{\n        width: 8,\n        height: 8,\n        borderRadius: '50%',\n        background: isOnline ? '#48bb78' : '#fc8181',\n      }} />\n      <span>{label}</span>\n      <span style={{ color: '#718096' }}>:{port}</span>\n    </div>\n  );\n}\n","import React, { useState } from 'react';\n\ntype Mode = 'AI_VS_AI' | 'PVA' | 'PVP';\n\nconst DECKS = [\n  { id: 'agro', name: 'Deck Aggro' },\n  { id: 'control', name: 'Deck Contrle' },\n  { id: 'random', name: 'Deck Alatoire' },\n];\n\nexport function StartTCG(): React.ReactElement {\n  const [mode, setMode] = useState<Mode>('AI_VS_AI');\n  const [deck, setDeck] = useState('random');\n  const [gameId, setGameId] = useState<string | null>(null);\n  const [status, setStatus] = useState<string>('');\n\n  const start = async () => {\n    try {\n      const resp = await fetch('http://localhost:8082/api/combat/start', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ player1: 'P1', player2: 'AI', seed: Date.now().toString() })\n      });\n      const json = await resp.json();\n      setGameId(json.gameId);\n      setStatus('Partie cre');\n    } catch (e) {\n      setStatus('Erreur dmarrage');\n    }\n  };\n\n  return (\n    <div style={{ padding: 40 }}>\n      <h1> Start TCG</h1>\n      <div style={{ display: 'flex', gap: 20, marginBottom: 20 }}>\n        <select value={mode} onChange={(e) => setMode(e.target.value as Mode)}>\n          <option value=\"AI_VS_AI\">AI vs AI</option>\n          <option value=\"PVA\">Joueur vs AI</option>\n          <option value=\"PVP\">PvP (WIP)</option>\n        </select>\n        <select value={deck} onChange={(e) => setDeck(e.target.value)}>\n          {DECKS.map(d => <option key={d.id} value={d.id}>{d.name}</option>)}\n        </select>\n        <button onClick={start}> Dmarrer</button>\n      </div>\n      {status && <div>{status}</div>}\n      {gameId && (\n        <div>\n          <div>Game ID: {gameId}</div>\n          <div style={{ marginTop: 10 }}>\n            <a href=\"/combat\" style={{ color: '#7dd3fc' }}>Ouvrir lcran Combat</a>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default StartTCG;\n\n\n","/**\n *  Mode Multijoueur - En dveloppement\n */\n\nimport React from 'react';\nimport { Link } from 'react-router-dom';\n\nexport function MultiplayerMode(): React.ReactElement {\n  return (\n    <div style={{\n      padding: 40,\n      textAlign: 'center',\n      minHeight: '100vh',\n      background: 'linear-gradient(135deg, #0a0e1a 0%, #1a1d3a 100%)',\n      color: '#e8ecff',\n    }}>\n      <h1 style={{ fontSize: '3em', marginBottom: 20 }}> Mode Multijoueur</h1>\n      \n      <div style={{\n        maxWidth: 600,\n        margin: '0 auto',\n        padding: 30,\n        background: 'rgba(255, 255, 255, 0.05)',\n        borderRadius: 15,\n        border: '2px solid rgba(102, 126, 234, 0.3)',\n      }}>\n        <p style={{ fontSize: '1.2em', marginBottom: 30 }}>\n           En cours de migration depuis MULTIPLAYER_DEMO_HOMM3.html\n        </p>\n        \n        <div style={{ marginBottom: 30 }}>\n          <h3>Fonctionnalits prvues:</h3>\n          <ul style={{ textAlign: 'left', marginTop: 15 }}>\n            <li>Synchronisation temps rel via WebSocket</li>\n            <li>Lobbies de parties</li>\n            <li>Chat intgr</li>\n            <li>Support jusqu' 8 joueurs</li>\n            <li>Mode spectateur</li>\n          </ul>\n        </div>\n        \n        <div style={{ marginTop: 30 }}>\n          <Link to=\"/\" style={{\n            padding: '10px 30px',\n            background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n            color: 'white',\n            textDecoration: 'none',\n            borderRadius: 25,\n            display: 'inline-block',\n          }}>\n             Retour  l'accueil\n          </Link>\n        </div>\n      </div>\n    </div>\n  );\n}\n","/**\n *  Combat IA vs IA - Mode automatique\n */\n\nimport React from 'react';\nimport { Link } from 'react-router-dom';\n\nexport function AIBattleAutoplay(): React.ReactElement {\n  const [isRunning, setIsRunning] = React.useState(false);\n  const [battleLog, setBattleLog] = React.useState<string[]>([]);\n  \n  const startBattle = () => {\n    setIsRunning(true);\n    setBattleLog([\n      ' Dbut du combat...',\n      ' Dragon Rouge entre en jeu',\n      ' Archimage lance Boule de feu',\n      ' Dragon subit 45 dgts',\n      ' Dragon attaque avec Souffle ardent',\n      ' Archimage esquive!',\n      '... (combat en cours)'\n    ]);\n  };\n  \n  return (\n    <div style={{\n      padding: 40,\n      minHeight: '100vh',\n      background: 'linear-gradient(135deg, #0a0e1a 0%, #1a1d3a 100%)',\n      color: '#e8ecff',\n    }}>\n      <div style={{ maxWidth: 1200, margin: '0 auto' }}>\n        <h1 style={{ fontSize: '3em', textAlign: 'center', marginBottom: 30 }}>\n           IA vs IA - Combat Automatique\n        </h1>\n        \n        <div style={{\n          display: 'grid',\n          gridTemplateColumns: '1fr 2fr',\n          gap: 30,\n        }}>\n          {/* Panneau de contrle */}\n          <div style={{\n            padding: 20,\n            background: 'rgba(255, 255, 255, 0.05)',\n            borderRadius: 15,\n            border: '2px solid rgba(102, 126, 234, 0.3)',\n          }}>\n            <h2> Contrles</h2>\n            \n            <button\n              onClick={startBattle}\n              disabled={isRunning}\n              style={{\n                width: '100%',\n                padding: 15,\n                marginTop: 20,\n                background: isRunning \n                  ? 'rgba(100, 100, 100, 0.3)' \n                  : 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n                color: 'white',\n                border: 'none',\n                borderRadius: 10,\n                fontSize: '1.1em',\n                cursor: isRunning ? 'not-allowed' : 'pointer',\n              }}\n            >\n              {isRunning ? ' Combat en cours...' : ' Lancer le combat'}\n            </button>\n            \n            <button\n              onClick={() => {\n                setIsRunning(false);\n                setBattleLog([]);\n              }}\n              style={{\n                width: '100%',\n                padding: 15,\n                marginTop: 10,\n                background: 'rgba(255, 50, 50, 0.3)',\n                color: 'white',\n                border: '1px solid rgba(255, 50, 50, 0.5)',\n                borderRadius: 10,\n                fontSize: '1.1em',\n                cursor: 'pointer',\n              }}\n            >\n               Arrter\n            </button>\n            \n            <div style={{ marginTop: 30 }}>\n              <h3> Configuration</h3>\n              <label style={{ display: 'block', marginTop: 15 }}>\n                Vitesse:\n                <input \n                  type=\"range\" \n                  min=\"1\" \n                  max=\"10\" \n                  defaultValue=\"5\"\n                  style={{ width: '100%', marginTop: 5 }}\n                />\n              </label>\n              \n              <label style={{ display: 'block', marginTop: 15 }}>\n                <input type=\"checkbox\" defaultChecked /> \n                <span style={{ marginLeft: 5 }}>Animation dtaille</span>\n              </label>\n              \n              <label style={{ display: 'block', marginTop: 10 }}>\n                <input type=\"checkbox\" /> \n                <span style={{ marginLeft: 5 }}>Mode tournoi</span>\n              </label>\n            </div>\n          </div>\n          \n          {/* Zone de combat */}\n          <div style={{\n            padding: 20,\n            background: 'rgba(255, 255, 255, 0.05)',\n            borderRadius: 15,\n            border: '2px solid rgba(102, 126, 234, 0.3)',\n          }}>\n            <h2> Arne de Combat</h2>\n            \n            {/* Log de combat */}\n            <div style={{\n              marginTop: 20,\n              padding: 15,\n              background: 'rgba(0, 0, 0, 0.3)',\n              borderRadius: 10,\n              height: 400,\n              overflowY: 'auto',\n              fontFamily: 'monospace',\n            }}>\n              {battleLog.length > 0 ? (\n                battleLog.map((log, i) => (\n                  <div key={i} style={{ marginBottom: 5 }}>\n                    {log}\n                  </div>\n                ))\n              ) : (\n                <div style={{ color: 'rgba(255, 255, 255, 0.5)' }}>\n                  En attente du lancement du combat...\n                </div>\n              )}\n            </div>\n            \n            {/* Statistiques */}\n            <div style={{\n              marginTop: 20,\n              display: 'grid',\n              gridTemplateColumns: '1fr 1fr',\n              gap: 15,\n            }}>\n              <div style={{\n                padding: 10,\n                background: 'rgba(102, 126, 234, 0.2)',\n                borderRadius: 8,\n                textAlign: 'center',\n              }}>\n                <div style={{ fontSize: '2em' }}></div>\n                <div>Dragon Rouge</div>\n                <div style={{ fontSize: '0.9em', color: 'rgba(255, 255, 255, 0.7)' }}>\n                  PV: 450/500\n                </div>\n              </div>\n              \n              <div style={{\n                padding: 10,\n                background: 'rgba(118, 75, 162, 0.2)',\n                borderRadius: 8,\n                textAlign: 'center',\n              }}>\n                <div style={{ fontSize: '2em' }}></div>\n                <div>Archimage</div>\n                <div style={{ fontSize: '0.9em', color: 'rgba(255, 255, 255, 0.7)' }}>\n                  PV: 280/300\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        \n        <div style={{ textAlign: 'center', marginTop: 40 }}>\n          <Link to=\"/\" style={{\n            padding: '10px 30px',\n            background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n            color: 'white',\n            textDecoration: 'none',\n            borderRadius: 25,\n            display: 'inline-block',\n          }}>\n             Retour  l'accueil\n          </Link>\n        </div>\n      </div>\n    </div>\n  );\n}\n","/**\n *  Mode Spectateur - Vue omnisciente\n */\n\nimport React from 'react';\nimport { Link } from 'react-router-dom';\n\nexport function SpectatorGodMode(): React.ReactElement {\n  const [selectedDimension, setSelectedDimension] = React.useState('spatial');\n  const [timelinePosition, setTimelinePosition] = React.useState(50);\n  \n  return (\n    <div style={{\n      padding: 20,\n      minHeight: '100vh',\n      background: 'linear-gradient(135deg, #0a0e1a 0%, #1a1d3a 100%)',\n      color: '#e8ecff',\n    }}>\n      <div style={{ maxWidth: 1400, margin: '0 auto' }}>\n        <h1 style={{ \n          fontSize: '3em', \n          textAlign: 'center', \n          marginBottom: 30,\n          background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n          WebkitBackgroundClip: 'text',\n          WebkitTextFillColor: 'transparent',\n        }}>\n           Mode God - Vision Omnisciente\n        </h1>\n        \n        {/* Barre de contrle */}\n        <div style={{\n          padding: 15,\n          background: 'rgba(255, 255, 255, 0.05)',\n          borderRadius: 15,\n          border: '2px solid rgba(102, 126, 234, 0.3)',\n          marginBottom: 20,\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n        }}>\n          <div style={{ display: 'flex', gap: 10 }}>\n            {['spatial', 'temporal', 'causal', 'quantum'].map(dim => (\n              <button\n                key={dim}\n                onClick={() => setSelectedDimension(dim)}\n                style={{\n                  padding: '8px 20px',\n                  background: selectedDimension === dim \n                    ? 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)'\n                    : 'rgba(255, 255, 255, 0.1)',\n                  border: '1px solid rgba(102, 126, 234, 0.5)',\n                  borderRadius: 20,\n                  color: 'white',\n                  cursor: 'pointer',\n                  textTransform: 'capitalize',\n                }}\n              >\n                {dim === 'spatial' && ''} \n                {dim === 'temporal' && ''} \n                {dim === 'causal' && ''} \n                {dim === 'quantum' && ''} \n                {' ' + dim}\n              </button>\n            ))}\n          </div>\n          \n          <div style={{ display: 'flex', alignItems: 'center', gap: 15 }}>\n            <span>Timeline:</span>\n            <input \n              type=\"range\"\n              min=\"0\"\n              max=\"100\"\n              value={timelinePosition}\n              onChange={(e) => setTimelinePosition(Number(e.target.value))}\n              style={{ width: 200 }}\n            />\n            <span>Jour {Math.floor(timelinePosition * 3.65)}</span>\n          </div>\n        </div>\n        \n        {/* Zone de visualisation principale */}\n        <div style={{\n          display: 'grid',\n          gridTemplateColumns: '1fr 300px',\n          gap: 20,\n          height: 600,\n        }}>\n          {/* Vue principale */}\n          <div style={{\n            background: 'radial-gradient(circle at center, rgba(102, 126, 234, 0.1) 0%, rgba(0, 0, 0, 0.5) 100%)',\n            borderRadius: 15,\n            border: '2px solid rgba(102, 126, 234, 0.3)',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            position: 'relative',\n            overflow: 'hidden',\n          }}>\n            {/* Grille hexagonale simule */}\n            <div style={{\n              position: 'absolute',\n              inset: 0,\n              backgroundImage: `\n                repeating-linear-gradient(\n                  30deg,\n                  transparent,\n                  transparent 35px,\n                  rgba(102, 126, 234, 0.1) 35px,\n                  rgba(102, 126, 234, 0.1) 70px\n                ),\n                repeating-linear-gradient(\n                  -30deg,\n                  transparent,\n                  transparent 35px,\n                  rgba(118, 75, 162, 0.1) 35px,\n                  rgba(118, 75, 162, 0.1) 70px\n                )\n              `,\n              opacity: 0.5,\n            }} />\n            \n            <div style={{ \n              textAlign: 'center', \n              zIndex: 1,\n              padding: 40,\n              background: 'rgba(0, 0, 0, 0.7)',\n              borderRadius: 15,\n            }}>\n              <div style={{ fontSize: '4em', marginBottom: 20 }}>\n                {selectedDimension === 'spatial' && ''}\n                {selectedDimension === 'temporal' && ''}\n                {selectedDimension === 'causal' && ''}\n                {selectedDimension === 'quantum' && ''}\n              </div>\n              <h2>Vue {selectedDimension}</h2>\n              <p style={{ marginTop: 15, color: 'rgba(255, 255, 255, 0.7)' }}>\n                {selectedDimension === 'spatial' && 'Visualisation spatiale de tous les lments'}\n                {selectedDimension === 'temporal' && 'Timeline des vnements passs et futurs'}\n                {selectedDimension === 'causal' && 'Chanes de causalit et consquences'}\n                {selectedDimension === 'quantum' && 'tats quantiques superposs'}\n              </p>\n            </div>\n          </div>\n          \n          {/* Panneau d'informations */}\n          <div style={{\n            background: 'rgba(255, 255, 255, 0.05)',\n            borderRadius: 15,\n            border: '2px solid rgba(102, 126, 234, 0.3)',\n            padding: 20,\n            overflowY: 'auto',\n          }}>\n            <h3> Statistiques Globales</h3>\n            \n            <div style={{ marginTop: 20 }}>\n              <div style={{ marginBottom: 15 }}>\n                <div style={{ fontSize: '0.9em', color: 'rgba(255, 255, 255, 0.7)' }}>\n                  Entits actives\n                </div>\n                <div style={{ fontSize: '1.5em', fontWeight: 'bold' }}>\n                  1,247\n                </div>\n              </div>\n              \n              <div style={{ marginBottom: 15 }}>\n                <div style={{ fontSize: '0.9em', color: 'rgba(255, 255, 255, 0.7)' }}>\n                  vnements temporels\n                </div>\n                <div style={{ fontSize: '1.5em', fontWeight: 'bold' }}>\n                  89\n                </div>\n              </div>\n              \n              <div style={{ marginBottom: 15 }}>\n                <div style={{ fontSize: '0.9em', color: 'rgba(255, 255, 255, 0.7)' }}>\n                  Branches causales\n                </div>\n                <div style={{ fontSize: '1.5em', fontWeight: 'bold' }}>\n                  12\n                </div>\n              </div>\n              \n              <div style={{ marginBottom: 15 }}>\n                <div style={{ fontSize: '0.9em', color: 'rgba(255, 255, 255, 0.7)' }}>\n                  tats quantiques\n                </div>\n                <div style={{ fontSize: '1.5em', fontWeight: 'bold' }}>\n                  \n                </div>\n              </div>\n            </div>\n            \n            <hr style={{ \n              margin: '20px 0', \n              border: 'none', \n              borderTop: '1px solid rgba(255, 255, 255, 0.1)' \n            }} />\n            \n            <h4> Contrles Rapides</h4>\n            <div style={{ marginTop: 15 }}>\n              <button style={{\n                width: '100%',\n                padding: 10,\n                marginBottom: 10,\n                background: 'rgba(102, 126, 234, 0.2)',\n                border: '1px solid rgba(102, 126, 234, 0.5)',\n                borderRadius: 8,\n                color: 'white',\n                cursor: 'pointer',\n              }}>\n                 Pause Temporelle\n              </button>\n              \n              <button style={{\n                width: '100%',\n                padding: 10,\n                marginBottom: 10,\n                background: 'rgba(118, 75, 162, 0.2)',\n                border: '1px solid rgba(118, 75, 162, 0.5)',\n                borderRadius: 8,\n                color: 'white',\n                cursor: 'pointer',\n              }}>\n                 Reset Causalit\n              </button>\n              \n              <button style={{\n                width: '100%',\n                padding: 10,\n                background: 'rgba(255, 50, 50, 0.2)',\n                border: '1px solid rgba(255, 50, 50, 0.5)',\n                borderRadius: 8,\n                color: 'white',\n                cursor: 'pointer',\n              }}>\n                 Collapse Quantique\n              </button>\n            </div>\n          </div>\n        </div>\n        \n        {/* Retour */}\n        <div style={{ textAlign: 'center', marginTop: 40 }}>\n          <Link to=\"/\" style={{\n            padding: '10px 30px',\n            background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n            color: 'white',\n            textDecoration: 'none',\n            borderRadius: 25,\n            display: 'inline-block',\n          }}>\n             Retour  l'accueil\n          </Link>\n        </div>\n      </div>\n    </div>\n  );\n}\n","/**\n *  HROS CENTRALISS - Tous les 25 hros du jeu\n * \n * Source de vrit unique pour tous les hros de Heroes of Time\n * Compil depuis : hot/entities/ALL_HEROES_COMPLETE.json\n */\n\nexport interface Hero {\n  id: string;\n  name: string;\n  title: string;\n  class: string;\n  tier: 'LEGENDARY' | 'EPIC' | 'RARE' | 'COMMON';\n  icon_id: string;\n  fx_preset: string;\n  sound_event: string;\n  theme_color: string;\n  output_modes: {\n    literary: string;\n    runic: string;\n    iconic: string;\n  };\n  stats: {\n    attack: number;\n    defense: number;\n    health: number;\n    mana: number;\n    temporal_energy?: number;\n    quantum_affinity?: number;\n  };\n  abilities: Array<{\n    id: string;\n    name: string;\n    cost: number;\n    description: string;\n  }>;\n  description?: string;\n  flavor?: string;\n}\n\n// === LES 25 HROS COMPLETS ===\nexport const HEROES: Record<string, Hero> = {\n  // === HROS LGENDAIRES PRINCIPAUX (6) ===\n  arthur_pendragon: {\n    id: 'arthur_pendragon',\n    name: 'Arthur Pendragon',\n    title: 'Le Roi Temporel',\n    class: 'Roi-Chevalier',\n    tier: 'LEGENDARY',\n    icon_id: '',\n    fx_preset: 'artifact_shine',\n    sound_event: 'excalibur_draw',\n    theme_color: '#FFD700',\n    output_modes: {\n      literary: 'Le noble roi aux cheveux d\\'or, porteur d\\'Excalibur',\n      runic: '',\n      iconic: ''\n    },\n    stats: {\n      attack: 20,\n      defense: 18,\n      health: 180,\n      mana: 150,\n      temporal_energy: 100,\n      quantum_affinity: 0.9\n    },\n    abilities: [\n      {\n        id: 'excalibur',\n        name: 'Excalibur Quantique',\n        cost: 3,\n        description: 'Double les dgts pour ce tour'\n      },\n      {\n        id: 'table_ronde',\n        name: 'Table Ronde',\n        cost: 6,\n        description: 'Invoque 3 chevaliers alatoires'\n      }\n    ],\n    flavor: 'Le temps plie devant ma volont'\n  },\n\n  merlin: {\n    id: 'merlin',\n    name: 'Merlin',\n    title: 'L\\'Archimage Temporel',\n    class: 'Mage',\n    tier: 'LEGENDARY',\n    icon_id: '',\n    fx_preset: 'quantum_phase',\n    sound_event: 'magic_cast',\n    theme_color: '#9932CC',\n    output_modes: {\n      literary: 'Le vnrable archimage qui vit  rebours dans le temps',\n      runic: '',\n      iconic: ''\n    },\n    stats: {\n      attack: 15,\n      defense: 12,\n      health: 120,\n      mana: 250,\n      temporal_energy: 200,\n      quantum_affinity: 0.95\n    },\n    abilities: [\n      {\n        id: 'time_reverse',\n        name: 'Inversion Temporelle',\n        cost: 4,\n        description: 'Annule le dernier tour de l\\'adversaire'\n      },\n      {\n        id: 'prophecy',\n        name: 'Prophtie',\n        cost: 2,\n        description: 'Rvle les 3 prochaines cartes'\n      }\n    ],\n    description: 'Vit  rebours dans le temps, connat le futur'\n  },\n\n  morgana: {\n    id: 'morgana',\n    name: 'Morgana',\n    title: 'Tisseuse de Ralits',\n    class: 'Sorcire',\n    tier: 'LEGENDARY',\n    icon_id: '',\n    fx_preset: 'temporal_glitch',\n    sound_event: 'artifact_activate',\n    theme_color: '#8B008B',\n    output_modes: {\n      literary: 'La mystrieuse conseillre des ombres',\n      runic: '',\n      iconic: ''\n    },\n    stats: {\n      attack: 18,\n      defense: 14,\n      health: 140,\n      mana: 200,\n      temporal_energy: 150,\n      quantum_affinity: 0.85\n    },\n    abilities: [\n      {\n        id: 'illusion',\n        name: 'Illusion Quantique',\n        cost: 3,\n        description: 'Cre 2 copies d\\'une unit'\n      },\n      {\n        id: 'shadow_realm',\n        name: 'Royaume des Ombres',\n        cost: 5,\n        description: 'Cache toutes vos units pour 1 tour'\n      }\n    ]\n  },\n\n  lysandrel: {\n    id: 'lysandrel',\n    name: 'Lysandrel',\n    title: 'Le Forgeron de Ralit',\n    class: 'Reality Forger',\n    tier: 'LEGENDARY',\n    icon_id: '',\n    fx_preset: 'reality_distortion',\n    sound_event: 'reality_forge',\n    theme_color: '#FF6B6B',\n    output_modes: {\n      literary: 'Forge une seule ralit dominante parmi les possibles',\n      runic: '',\n      iconic: ''\n    },\n    stats: {\n      attack: 25,\n      defense: 20,\n      health: 180,\n      mana: 300,\n      temporal_energy: 300,\n      quantum_affinity: 0.9\n    },\n    abilities: [\n      {\n        id: 'reality_forge',\n        name: 'Forge de Ralit',\n        cost: 6,\n        description: 'Remplace le terrain par votre choix'\n      },\n      {\n        id: 'collapse',\n        name: 'Effondrement',\n        cost: 4,\n        description: 'Dtruit toutes les illusions et copies'\n      }\n    ],\n    description: 'Une seule ralit doit survivre'\n  },\n\n  ragnar_lothbrok: {\n    id: 'ragnar_lothbrok',\n    name: 'Ragnar Lothbrok',\n    title: 'Le Chef de Guerre Temporel',\n    class: 'Guerrier',\n    tier: 'LEGENDARY',\n    icon_id: '',\n    fx_preset: 'blood_rage',\n    sound_event: 'battle_cry',\n    theme_color: '#8B0000',\n    output_modes: {\n      literary: 'Le guerrier viking qui traverse les poques',\n      runic: '',\n      iconic: ''\n    },\n    stats: {\n      attack: 28,\n      defense: 22,\n      health: 200,\n      mana: 80,\n      temporal_energy: 50,\n      quantum_affinity: 0.6\n    },\n    abilities: [\n      {\n        id: 'berserker',\n        name: 'Rage du Berserker',\n        cost: 3,\n        description: '+10 attaque, -5 dfense pour 2 tours'\n      },\n      {\n        id: 'valhalla',\n        name: 'Appel du Valhalla',\n        cost: 5,\n        description: 'Ressuscite une unit tombe'\n      }\n    ]\n  },\n\n  claudius_memento: {\n    id: 'claudius_memento',\n    name: 'Claudius Memento',\n    title: 'L\\'Architecte du Multivers',\n    class: 'Architecte',\n    tier: 'LEGENDARY',\n    icon_id: '',\n    fx_preset: 'digital_matrix',\n    sound_event: 'code_compile',\n    theme_color: '#00CED1',\n    output_modes: {\n      literary: 'L\\'architecte qui code la ralit elle-mme',\n      runic: '',\n      iconic: ''\n    },\n    stats: {\n      attack: 16,\n      defense: 16,\n      health: 160,\n      mana: 180,\n      temporal_energy: 250,\n      quantum_affinity: 1.0\n    },\n    abilities: [\n      {\n        id: 'debug',\n        name: 'Mode Debug',\n        cost: 2,\n        description: 'Rvle toutes les cartes caches'\n      },\n      {\n        id: 'refactor',\n        name: 'Refactoring',\n        cost: 4,\n        description: 'Rorganise le plateau de jeu'\n      }\n    ]\n  },\n\n  // === HROS PIQUES (10) ===\n  lancelot: {\n    id: 'lancelot',\n    name: 'Lancelot',\n    title: 'Le Chevalier Parfait',\n    class: 'Chevalier',\n    tier: 'EPIC',\n    icon_id: '',\n    fx_preset: 'holy_light',\n    sound_event: 'sword_draw',\n    theme_color: '#4169E1',\n    output_modes: {\n      literary: 'Le plus noble des chevaliers de la Table Ronde',\n      runic: '',\n      iconic: ''\n    },\n    stats: {\n      attack: 22,\n      defense: 24,\n      health: 160,\n      mana: 100,\n      temporal_energy: 60\n    },\n    abilities: [\n      {\n        id: 'perfect_defense',\n        name: 'Dfense Parfaite',\n        cost: 2,\n        description: 'Bloque toute attaque ce tour'\n      }\n    ]\n  },\n\n  alice_prime: {\n    id: 'alice_prime',\n    name: 'Alice Prime',\n    title: 'L\\'Exploratrice Quantique',\n    class: 'Exploratrice',\n    tier: 'EPIC',\n    icon_id: '',\n    fx_preset: 'quantum_jump',\n    sound_event: 'portal_open',\n    theme_color: '#FF69B4',\n    output_modes: {\n      literary: 'Traverse les mondes parallles avec aisance',\n      runic: '',\n      iconic: ''\n    },\n    stats: {\n      attack: 18,\n      defense: 16,\n      health: 140,\n      mana: 150,\n      temporal_energy: 180,\n      quantum_affinity: 0.88\n    },\n    abilities: [\n      {\n        id: 'quantum_leap',\n        name: 'Saut Quantique',\n        cost: 3,\n        description: 'Tlporte n\\'importe o sur la carte'\n      },\n      {\n        id: 'temporal_echo',\n        name: 'cho Temporel',\n        cost: 4,\n        description: 'Rpte votre dernire action'\n      }\n    ]\n  },\n\n  vincent_vega: {\n    id: 'vincent_vega',\n    name: 'Vincent Vega',\n    title: 'Le Philosophe Arm',\n    class: 'Gunslinger',\n    tier: 'EPIC',\n    icon_id: '',\n    fx_preset: 'bullet_time',\n    sound_event: 'gun_shot',\n    theme_color: '#2F4F4F',\n    output_modes: {\n      literary: 'Matre du timing et de la philosophie applique',\n      runic: '',\n      iconic: ''\n    },\n    stats: {\n      attack: 30,\n      defense: 15,\n      health: 120,\n      mana: 90,\n      temporal_energy: 70\n    },\n    abilities: [\n      {\n        id: 'gun_perdu',\n        name: 'Gun Perdu',\n        cost: 3,\n        description: 'Tir garanti critique'\n      }\n    ]\n  },\n\n  nyx_lua: {\n    id: 'nyx_lua',\n    name: 'Nyx-Lua',\n    title: 'Tisseuse de Mondes Latents',\n    class: 'World Weaver',\n    tier: 'EPIC',\n    icon_id: '',\n    fx_preset: 'dimensional_weave',\n    sound_event: 'reality_shift',\n    theme_color: '#191970',\n    output_modes: {\n      literary: 'Tisse des mondes parallles dans l\\'ombre',\n      runic: '',\n      iconic: ''\n    },\n    stats: {\n      attack: 20,\n      defense: 15,\n      health: 140,\n      mana: 400,\n      temporal_energy: 400,\n      quantum_affinity: 0.95\n    },\n    abilities: [\n      {\n        id: 'world_weaving',\n        name: 'Tissage de Mondes',\n        cost: 5,\n        description: 'Cre une zone avec rgles alternatives'\n      }\n    ],\n    description: 'Tous les mondes possibles ont le droit d\\'exister'\n  },\n\n  jean_grofignon: {\n    id: 'jean_grofignon',\n    name: 'Jean-Grofignon',\n    title: 'L\\'Ontologique',\n    class: 'Philosophe',\n    tier: 'EPIC',\n    icon_id: '',\n    fx_preset: 'existential_crisis',\n    sound_event: 'hmm',\n    theme_color: '#8B4513',\n    output_modes: {\n      literary: 'Questionne l\\'existence mme de la bataille',\n      runic: '',\n      iconic: ''\n    },\n    stats: {\n      attack: 14,\n      defense: 14,\n      health: 140,\n      mana: 140,\n      temporal_energy: 140\n    },\n    abilities: [\n      {\n        id: 'ontological_doubt',\n        name: 'Doute Ontologique',\n        cost: 2,\n        description: 'L\\'ennemi passe son tour  rflchir'\n      }\n    ]\n  },\n\n  the_dude: {\n    id: 'the_dude',\n    name: 'The Dude',\n    title: 'Le Philosophe Dcontract',\n    class: 'Philosophe',\n    tier: 'EPIC',\n    icon_id: '',\n    fx_preset: 'chill_vibes',\n    sound_event: 'yeah_man',\n    theme_color: '#D2691E',\n    output_modes: {\n      literary: 'Aborde chaque combat avec une zen attitude',\n      runic: '',\n      iconic: ''\n    },\n    stats: {\n      attack: 16,\n      defense: 20,\n      health: 150,\n      mana: 100,\n      temporal_energy: 80\n    },\n    abilities: [\n      {\n        id: 'abide',\n        name: 'The Dude Abides',\n        cost: 1,\n        description: 'Immunit aux effets ngatifs pour 1 tour'\n      }\n    ]\n  },\n\n  christian_mckinsey: {\n    id: 'christian_mckinsey',\n    name: 'Christian McKinsey',\n    title: 'Le Consultant Quantique',\n    class: 'Consultant',\n    tier: 'EPIC',\n    icon_id: '',\n    fx_preset: 'excel_quantum',\n    sound_event: 'powerpoint',\n    theme_color: '#708090',\n    output_modes: {\n      literary: 'Optimise les flux temporels avec des tableaux Excel',\n      runic: '',\n      iconic: ''\n    },\n    stats: {\n      attack: 22,\n      defense: 22,\n      health: 150,\n      mana: 130,\n      temporal_energy: 100\n    },\n    abilities: [\n      {\n        id: 'excel_quantum',\n        name: 'Excel Quantique',\n        cost: 3,\n        description: 'Optimise toutes les stats de +20%'\n      }\n    ]\n  },\n\n  marie_basilisk: {\n    id: 'marie_basilisk',\n    name: 'Marie/Basilisk',\n    title: 'La Ptrificatrice',\n    class: 'Assassin',\n    tier: 'EPIC',\n    icon_id: '',\n    fx_preset: 'petrification',\n    sound_event: 'hiss',\n    theme_color: '#228B22',\n    output_modes: {\n      literary: 'Son regard transforme les ennemis en pierre',\n      runic: '',\n      iconic: ''\n    },\n    stats: {\n      attack: 35,\n      defense: 10,\n      health: 110,\n      mana: 120,\n      temporal_energy: 90\n    },\n    abilities: [\n      {\n        id: 'petrify',\n        name: 'Ptrification',\n        cost: 4,\n        description: 'Paralyse un ennemi pour 2 tours'\n      }\n    ]\n  },\n\n  axis: {\n    id: 'axis',\n    name: 'Axis',\n    title: 'Le Voyageur Linaire',\n    class: 'Voyageur',\n    tier: 'EPIC',\n    icon_id: '',\n    fx_preset: 'linear_path',\n    sound_event: 'whoosh',\n    theme_color: '#4682B4',\n    output_modes: {\n      literary: 'Voyage uniquement sur les axes cardinaux du temps',\n      runic: '',\n      iconic: ''\n    },\n    stats: {\n      attack: 20,\n      defense: 20,\n      health: 145,\n      mana: 145,\n      temporal_energy: 145\n    },\n    abilities: [\n      {\n        id: 'linear_travel',\n        name: 'Voyage Linaire',\n        cost: 2,\n        description: 'Dplacement instantan en ligne droite'\n      }\n    ]\n  },\n\n  // === HROS RARES (6) ===\n  gauvain: {\n    id: 'gauvain',\n    name: 'Gauvain',\n    title: 'Le Chevalier Solaire',\n    class: 'Chevalier',\n    tier: 'RARE',\n    icon_id: '',\n    fx_preset: 'solar_flare',\n    sound_event: 'light_burst',\n    theme_color: '#FFD700',\n    output_modes: {\n      literary: 'Sa force crot avec le soleil',\n      runic: '',\n      iconic: ''\n    },\n    stats: {\n      attack: 18,\n      defense: 16,\n      health: 130,\n      mana: 80,\n      temporal_energy: 40\n    },\n    abilities: [\n      {\n        id: 'solar_power',\n        name: 'Pouvoir Solaire',\n        cost: 2,\n        description: '+5 attaque en journe'\n      }\n    ]\n  },\n\n  perceval: {\n    id: 'perceval',\n    name: 'Perceval',\n    title: 'Le Chevalier du Graal',\n    class: 'Chevalier',\n    tier: 'RARE',\n    icon_id: '',\n    fx_preset: 'holy_grail',\n    sound_event: 'choir',\n    theme_color: '#FFD700',\n    output_modes: {\n      literary: 'Chercheur ternel du Saint Graal',\n      runic: '',\n      iconic: ''\n    },\n    stats: {\n      attack: 16,\n      defense: 18,\n      health: 135,\n      mana: 90,\n      temporal_energy: 50\n    },\n    abilities: [\n      {\n        id: 'grail_quest',\n        name: 'Qute du Graal',\n        cost: 3,\n        description: 'Pioche 2 cartes artefact'\n      }\n    ]\n  },\n\n  kay: {\n    id: 'kay',\n    name: 'Kay',\n    title: 'Le Snchal',\n    class: 'Soutien',\n    tier: 'RARE',\n    icon_id: '',\n    fx_preset: 'support_aura',\n    sound_event: 'buff',\n    theme_color: '#B8860B',\n    output_modes: {\n      literary: 'Frre adoptif et fidle soutien d\\'Arthur',\n      runic: '',\n      iconic: ''\n    },\n    stats: {\n      attack: 14,\n      defense: 20,\n      health: 140,\n      mana: 100,\n      temporal_energy: 60\n    },\n    abilities: [\n      {\n        id: 'rally',\n        name: 'Ralliement',\n        cost: 2,\n        description: '+2/+2  toutes les units allies'\n      }\n    ]\n  },\n\n  bedivere: {\n    id: 'bedivere',\n    name: 'Bedivere',\n    title: 'Le Fidle',\n    class: 'Chevalier',\n    tier: 'RARE',\n    icon_id: '',\n    fx_preset: 'loyalty',\n    sound_event: 'oath',\n    theme_color: '#4B0082',\n    output_modes: {\n      literary: 'Le dernier chevalier fidle jusqu\\' la fin',\n      runic: '',\n      iconic: ''\n    },\n    stats: {\n      attack: 17,\n      defense: 17,\n      health: 125,\n      mana: 85,\n      temporal_energy: 45\n    },\n    abilities: [\n      {\n        id: 'last_stand',\n        name: 'Dernier Rempart',\n        cost: 3,\n        description: 'Gagne +10/+10 si seul en jeu'\n      }\n    ]\n  },\n\n  mordred: {\n    id: 'mordred',\n    name: 'Mordred',\n    title: 'Le Tratre',\n    class: 'Chevalier Noir',\n    tier: 'RARE',\n    icon_id: '',\n    fx_preset: 'dark_energy',\n    sound_event: 'dark_laugh',\n    theme_color: '#8B0000',\n    output_modes: {\n      literary: 'Le fils rengat qui causa la chute de Camelot',\n      runic: '',\n      iconic: ''\n    },\n    stats: {\n      attack: 24,\n      defense: 12,\n      health: 120,\n      mana: 70,\n      temporal_energy: 30\n    },\n    abilities: [\n      {\n        id: 'betrayal',\n        name: 'Trahison',\n        cost: 4,\n        description: 'Vole le contrle d\\'une unit ennemie'\n      }\n    ]\n  },\n\n  viviane: {\n    id: 'viviane',\n    name: 'Viviane',\n    title: 'La Dame du Lac',\n    class: 'Enchanteresse',\n    tier: 'RARE',\n    icon_id: '',\n    fx_preset: 'water_magic',\n    sound_event: 'water_splash',\n    theme_color: '#00CED1',\n    output_modes: {\n      literary: 'Gardienne d\\'Excalibur dans les eaux mystiques',\n      runic: '',\n      iconic: ''\n    },\n    stats: {\n      attack: 15,\n      defense: 15,\n      health: 130,\n      mana: 160,\n      temporal_energy: 80,\n      quantum_affinity: 0.7\n    },\n    abilities: [\n      {\n        id: 'water_blessing',\n        name: 'Bndiction Aquatique',\n        cost: 3,\n        description: 'Soigne 30 PV  toutes les units'\n      }\n    ]\n  },\n\n  // === HROS COMMUNS (3) ===\n  chlamydius: {\n    id: 'chlamydius',\n    name: 'Chlamydius',\n    title: 'Le Mystrieux',\n    class: 'Inconnu',\n    tier: 'COMMON',\n    icon_id: '',\n    fx_preset: 'mystery',\n    sound_event: 'question',\n    theme_color: '#696969',\n    output_modes: {\n      literary: 'Un hros dont l\\'origine reste inconnue',\n      runic: '',\n      iconic: ''\n    },\n    stats: {\n      attack: 12,\n      defense: 12,\n      health: 100,\n      mana: 100,\n      temporal_energy: 50\n    },\n    abilities: [\n      {\n        id: 'random',\n        name: 'Effet Alatoire',\n        cost: 2,\n        description: 'Effet compltement alatoire'\n      }\n    ]\n  },\n\n  nexus_guardian: {\n    id: 'nexus_guardian',\n    name: 'Gardien du Nexus',\n    title: 'Le Protecteur',\n    class: 'Gardien',\n    tier: 'COMMON',\n    icon_id: '',\n    fx_preset: 'shield_wall',\n    sound_event: 'shield_up',\n    theme_color: '#4682B4',\n    output_modes: {\n      literary: 'Protge les portails entre les mondes',\n      runic: '',\n      iconic: ''\n    },\n    stats: {\n      attack: 10,\n      defense: 25,\n      health: 150,\n      mana: 60,\n      temporal_energy: 40\n    },\n    abilities: [\n      {\n        id: 'guardian_stance',\n        name: 'Position de Garde',\n        cost: 1,\n        description: 'Taunt et +5 dfense'\n      }\n    ]\n  },\n\n  grofi_scout: {\n    id: 'grofi_scout',\n    name: 'claireur Grofi',\n    title: 'L\\'claireur',\n    class: 'Scout',\n    tier: 'COMMON',\n    icon_id: '',\n    fx_preset: 'speed_boost',\n    sound_event: 'footsteps',\n    theme_color: '#228B22',\n    output_modes: {\n      literary: 'claireur rapide de la faction Grofi',\n      runic: '',\n      iconic: ''\n    },\n    stats: {\n      attack: 14,\n      defense: 8,\n      health: 80,\n      mana: 50,\n      temporal_energy: 60\n    },\n    abilities: [\n      {\n        id: 'scout',\n        name: 'Reconnaissance',\n        cost: 1,\n        description: 'Rvle 3 cases adjacentes'\n      }\n    ]\n  }\n};\n\n// Fonctions utilitaires\nexport function getHeroById(id: string): Hero | undefined {\n  return HEROES[id];\n}\n\nexport function getHeroesByTier(tier: Hero['tier']): Hero[] {\n  return Object.values(HEROES).filter(hero => hero.tier === tier);\n}\n\nexport function getHeroesByClass(heroClass: string): Hero[] {\n  return Object.values(HEROES).filter(hero => hero.class === heroClass);\n}\n\nexport function getAllHeroes(): Hero[] {\n  return Object.values(HEROES);\n}\n\nexport function getHeroCount(): number {\n  return Object.keys(HEROES).length;\n}\n\n// Export des catgories pour faciliter l'import\nexport const LEGENDARY_HEROES = getHeroesByTier('LEGENDARY');\nexport const EPIC_HEROES = getHeroesByTier('EPIC');\nexport const RARE_HEROES = getHeroesByTier('RARE');\nexport const COMMON_HEROES = getHeroesByTier('COMMON');\n\n// Stats globales\nexport const HEROES_STATS = {\n  total: getHeroCount(),\n  legendary: LEGENDARY_HEROES.length,\n  epic: EPIC_HEROES.length,\n  rare: RARE_HEROES.length,\n  common: COMMON_HEROES.length,\n  classes: [...new Set(Object.values(HEROES).map(h => h.class))],\n  averageStats: {\n    attack: Math.round(Object.values(HEROES).reduce((acc, h) => acc + h.stats.attack, 0) / getHeroCount()),\n    defense: Math.round(Object.values(HEROES).reduce((acc, h) => acc + h.stats.defense, 0) / getHeroCount()),\n    health: Math.round(Object.values(HEROES).reduce((acc, h) => acc + h.stats.health, 0) / getHeroCount()),\n    mana: Math.round(Object.values(HEROES).reduce((acc, h) => acc + h.stats.mana, 0) / getHeroCount())\n  }\n};\n","import React, { useState, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { HEROES } from '../../data/heroes';\n\ninterface HeroBackstory {\n  hero_id: string;\n  name: string;\n  title: string;\n  backstory: string;\n  personality_traits: string[];\n  speaking_style: string;\n  motivations: string[];\n  fears: string[];\n  special_memories: string[];\n  relationships: Record<string, string>;\n  combat_style: string;\n  quantum_signature: string;\n  temporal_affinity: string;\n  custom_prompts: string[];\n}\n\ninterface VectorDBStatus {\n  connected: boolean;\n  endpoint: string;\n  collection: string;\n}\n\nexport const HeroBackstoryEditor: React.FC = () => {\n  const [selectedHero, setSelectedHero] = useState<string>('alice');\n  const [backstory, setBackstory] = useState<HeroBackstory | null>(null);\n  const [isEditing, setIsEditing] = useState(false);\n  const [isSaving, setIsSaving] = useState(false);\n  const [vectorDBStatus, setVectorDBStatus] = useState<VectorDBStatus>({\n    connected: false,\n    endpoint: 'http://localhost:5001',\n    collection: 'hero_backstories'\n  });\n  const [showPreview, setShowPreview] = useState(false);\n  const [generatedDialogue, setGeneratedDialogue] = useState<string>('');\n\n  // Load backstory when hero changes\n  useEffect(() => {\n    loadBackstory(selectedHero);\n    checkVectorDBConnection();\n  }, [selectedHero]);\n\n  const checkVectorDBConnection = async () => {\n    try {\n      const response = await fetch(`${vectorDBStatus.endpoint}/health`);\n      if (response.ok) {\n        setVectorDBStatus(prev => ({ ...prev, connected: true }));\n      }\n    } catch (error) {\n      setVectorDBStatus(prev => ({ ...prev, connected: false }));\n    }\n  };\n\n  const loadBackstory = async (heroId: string) => {\n    // Try to load from vector DB first\n    if (vectorDBStatus.connected) {\n      try {\n        const response = await fetch(`${vectorDBStatus.endpoint}/backstory/${heroId}`);\n        if (response.ok) {\n          const data = await response.json();\n          setBackstory(data);\n          return;\n        }\n      } catch (error) {\n        console.error('Failed to load from vector DB:', error);\n      }\n    }\n\n    // Fallback to default backstory\n    const hero = HEROES[heroId];\n    if (hero) {\n      setBackstory({\n        hero_id: heroId,\n        name: hero.name,\n        title: hero.title,\n        backstory: hero.description || '',\n        personality_traits: [\n          'Courageux',\n          'Dtermin',\n          'Mystrieux'\n        ],\n        speaking_style: 'Formel et loquent',\n        motivations: [\n          'Sauver le multivers',\n          'Dcouvrir la vrit'\n        ],\n        fears: [\n          'Les paradoxes temporels',\n          'Perdre ses allis'\n        ],\n        special_memories: [\n          'La premire rencontre avec le Nexus',\n          'La bataille de la Convergence'\n        ],\n        relationships: {\n          vincent: 'Alli de confiance',\n          morgana: 'Rivale respecte'\n        },\n        combat_style: 'Stratgique et calcul',\n        quantum_signature: ' = 0.85',\n        temporal_affinity: 'Pass et Futur',\n        custom_prompts: []\n      });\n    }\n  };\n\n  const saveBackstory = async () => {\n    if (!backstory) return;\n    setIsSaving(true);\n\n    try {\n      if (vectorDBStatus.connected) {\n        // Save to vector DB\n        const response = await fetch(`${vectorDBStatus.endpoint}/backstory`, {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify(backstory)\n        });\n\n        if (response.ok) {\n          // Also index for semantic search\n          await fetch(`${vectorDBStatus.endpoint}/index`, {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({\n              collection: 'hero_backstories',\n              document: backstory,\n              embedding_fields: ['backstory', 'personality_traits', 'speaking_style']\n            })\n          });\n        }\n      } else {\n        // Save to localStorage as fallback\n        localStorage.setItem(`hero_backstory_${backstory.hero_id}`, JSON.stringify(backstory));\n      }\n\n      setIsEditing(false);\n    } catch (error) {\n      console.error('Failed to save backstory:', error);\n    } finally {\n      setIsSaving(false);\n    }\n  };\n\n  const generateDialogue = async () => {\n    if (!backstory) return;\n\n    const prompt = `\nTu es ${backstory.name}, ${backstory.title}.\n\nBACKSTORY:\n${backstory.backstory}\n\nPERSONNALIT:\n${backstory.personality_traits.join(', ')}\n\nSTYLE DE PAROLE:\n${backstory.speaking_style}\n\nMOTIVATIONS:\n${backstory.motivations.join(', ')}\n\nPEURS:\n${backstory.fears.join(', ')}\n\nSOUVENIRS IMPORTANTS:\n${backstory.special_memories.join('\\n')}\n\nGnre une rplique typique de ce personnage dans une situation de combat.\n    `;\n\n    try {\n      // Try Clippy Dev API first\n      const response = await fetch('http://localhost:5002/character/speak', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          character_prompt: prompt,\n          context: 'Combat contre un dragon quantique',\n          max_tokens: 150\n        })\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        setGeneratedDialogue(data.dialogue);\n      }\n    } catch (error) {\n      // Fallback to simple generation\n      setGeneratedDialogue(`\"Par le Nexus ! Ce dragon ne passera pas tant que je tiendrai cette pe !\"`);\n    }\n\n    setShowPreview(true);\n  };\n\n  const exportToPrompt = () => {\n    if (!backstory) return;\n\n    const prompt = `\n# ${backstory.name} - ${backstory.title}\n\n## Backstory\n${backstory.backstory}\n\n## Personnalit\n- Traits: ${backstory.personality_traits.join(', ')}\n- Style de parole: ${backstory.speaking_style}\n- Style de combat: ${backstory.combat_style}\n\n## Motivations\n${backstory.motivations.map(m => `- ${m}`).join('\\n')}\n\n## Peurs\n${backstory.fears.map(f => `- ${f}`).join('\\n')}\n\n## Souvenirs Cls\n${backstory.special_memories.map(m => `- ${m}`).join('\\n')}\n\n## Relations\n${Object.entries(backstory.relationships).map(([k, v]) => `- ${k}: ${v}`).join('\\n')}\n\n## Signature Quantique\n- Coefficient : ${backstory.quantum_signature}\n- Affinit Temporelle: ${backstory.temporal_affinity}\n\n## Prompts Personnaliss\n${backstory.custom_prompts.join('\\n')}\n    `;\n\n    // Copy to clipboard\n    navigator.clipboard.writeText(prompt);\n    alert('Prompt copi dans le presse-papier !');\n  };\n\n  if (!backstory) return <div>Chargement...</div>;\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-purple-900 via-black to-indigo-900 p-4\">\n      {/* Header */}\n      <div className=\"bg-black/60 rounded-lg p-6 mb-6 border-2 border-purple-500\">\n        <h1 className=\"text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-400 mb-4\">\n           diteur de Backstory des Hros\n        </h1>\n        \n        {/* Hero Selector */}\n        <div className=\"flex items-center gap-4 mb-4\">\n          <span className=\"text-white\">Hros:</span>\n          <select\n            value={selectedHero}\n            onChange={(e) => setSelectedHero(e.target.value)}\n            className=\"bg-gray-800 text-white px-4 py-2 rounded-lg border border-purple-500\"\n          >\n            {Object.values(HEROES).map(hero => (\n              <option key={hero.id} value={hero.id}>\n                {hero.icon_id} {hero.name} - {hero.title}\n              </option>\n            ))}\n          </select>\n          \n          {/* DB Status */}\n          <div className=\"ml-auto flex items-center gap-2\">\n            <div className={`w-3 h-3 rounded-full ${vectorDBStatus.connected ? 'bg-green-500' : 'bg-red-500'} animate-pulse`} />\n            <span className=\"text-sm text-gray-400\">\n              Vector DB: {vectorDBStatus.connected ? 'Connect' : 'Local Storage'}\n            </span>\n          </div>\n        </div>\n\n        {/* Action Buttons */}\n        <div className=\"flex gap-3\">\n          <button\n            onClick={() => setIsEditing(!isEditing)}\n            className=\"px-4 py-2 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg hover:scale-105 transition-all\"\n          >\n            {isEditing ? ' Aperu' : ' diter'}\n          </button>\n          \n          {isEditing && (\n            <button\n              onClick={saveBackstory}\n              disabled={isSaving}\n              className=\"px-4 py-2 bg-gradient-to-r from-green-600 to-teal-600 text-white rounded-lg hover:scale-105 transition-all disabled:opacity-50\"\n            >\n              {isSaving ? ' Sauvegarde...' : ' Sauvegarder'}\n            </button>\n          )}\n          \n          <button\n            onClick={generateDialogue}\n            className=\"px-4 py-2 bg-gradient-to-r from-pink-600 to-red-600 text-white rounded-lg hover:scale-105 transition-all\"\n          >\n             Tester Dialogue\n          </button>\n          \n          <button\n            onClick={exportToPrompt}\n            className=\"px-4 py-2 bg-gradient-to-r from-yellow-600 to-orange-600 text-white rounded-lg hover:scale-105 transition-all\"\n          >\n             Exporter Prompt\n          </button>\n        </div>\n      </div>\n\n      {/* Main Content */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        {/* Editor Panel */}\n        <motion.div\n          className=\"bg-black/60 rounded-lg p-6 border-2 border-purple-500\"\n          initial={{ opacity: 0, x: -50 }}\n          animate={{ opacity: 1, x: 0 }}\n        >\n          <h2 className=\"text-2xl font-bold text-purple-400 mb-4\">\n            {isEditing ? ' Mode dition' : ' Backstory'}\n          </h2>\n\n          {/* Backstory Text */}\n          <div className=\"mb-6\">\n            <label className=\"block text-white mb-2\">Histoire:</label>\n            {isEditing ? (\n              <textarea\n                value={backstory.backstory}\n                onChange={(e) => setBackstory({ ...backstory, backstory: e.target.value })}\n                className=\"w-full h-40 bg-gray-800 text-white p-3 rounded-lg border border-purple-500\"\n                placeholder=\"L'histoire du hros...\"\n              />\n            ) : (\n              <div className=\"bg-gray-800/50 p-4 rounded-lg text-gray-300\">\n                {backstory.backstory || 'Aucune histoire dfinie'}\n              </div>\n            )}\n          </div>\n\n          {/* Personality Traits */}\n          <div className=\"mb-6\">\n            <label className=\"block text-white mb-2\">Traits de Personnalit:</label>\n            {isEditing ? (\n              <div className=\"space-y-2\">\n                {backstory.personality_traits.map((trait, i) => (\n                  <div key={i} className=\"flex gap-2\">\n                    <input\n                      value={trait}\n                      onChange={(e) => {\n                        const newTraits = [...backstory.personality_traits];\n                        newTraits[i] = e.target.value;\n                        setBackstory({ ...backstory, personality_traits: newTraits });\n                      }}\n                      className=\"flex-1 bg-gray-800 text-white p-2 rounded-lg border border-purple-500\"\n                    />\n                    <button\n                      onClick={() => {\n                        const newTraits = backstory.personality_traits.filter((_, idx) => idx !== i);\n                        setBackstory({ ...backstory, personality_traits: newTraits });\n                      }}\n                      className=\"px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700\"\n                    >\n                      \n                    </button>\n                  </div>\n                ))}\n                <button\n                  onClick={() => {\n                    setBackstory({\n                      ...backstory,\n                      personality_traits: [...backstory.personality_traits, '']\n                    });\n                  }}\n                  className=\"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700\"\n                >\n                   Ajouter Trait\n                </button>\n              </div>\n            ) : (\n              <div className=\"flex flex-wrap gap-2\">\n                {backstory.personality_traits.map((trait, i) => (\n                  <span key={i} className=\"px-3 py-1 bg-purple-600/30 text-purple-300 rounded-full\">\n                    {trait}\n                  </span>\n                ))}\n              </div>\n            )}\n          </div>\n\n          {/* Speaking Style */}\n          <div className=\"mb-6\">\n            <label className=\"block text-white mb-2\">Style de Parole:</label>\n            {isEditing ? (\n              <input\n                value={backstory.speaking_style}\n                onChange={(e) => setBackstory({ ...backstory, speaking_style: e.target.value })}\n                className=\"w-full bg-gray-800 text-white p-3 rounded-lg border border-purple-500\"\n                placeholder=\"Comment le hros s'exprime...\"\n              />\n            ) : (\n              <div className=\"bg-gray-800/50 p-3 rounded-lg text-gray-300\">\n                {backstory.speaking_style}\n              </div>\n            )}\n          </div>\n\n          {/* Combat Style */}\n          <div className=\"mb-6\">\n            <label className=\"block text-white mb-2\">Style de Combat:</label>\n            {isEditing ? (\n              <input\n                value={backstory.combat_style}\n                onChange={(e) => setBackstory({ ...backstory, combat_style: e.target.value })}\n                className=\"w-full bg-gray-800 text-white p-3 rounded-lg border border-purple-500\"\n                placeholder=\"Approche au combat...\"\n              />\n            ) : (\n              <div className=\"bg-gray-800/50 p-3 rounded-lg text-gray-300\">\n                {backstory.combat_style}\n              </div>\n            )}\n          </div>\n        </motion.div>\n\n        {/* Right Panel */}\n        <motion.div\n          className=\"bg-black/60 rounded-lg p-6 border-2 border-purple-500\"\n          initial={{ opacity: 0, x: 50 }}\n          animate={{ opacity: 1, x: 0 }}\n        >\n          {/* Motivations & Fears */}\n          <div className=\"mb-6\">\n            <h3 className=\"text-xl font-bold text-purple-400 mb-3\"> Motivations & Peurs</h3>\n            \n            <div className=\"mb-4\">\n              <label className=\"block text-white mb-2\">Motivations:</label>\n              {isEditing ? (\n                <div className=\"space-y-2\">\n                  {backstory.motivations.map((mot, i) => (\n                    <input\n                      key={i}\n                      value={mot}\n                      onChange={(e) => {\n                        const newMot = [...backstory.motivations];\n                        newMot[i] = e.target.value;\n                        setBackstory({ ...backstory, motivations: newMot });\n                      }}\n                      className=\"w-full bg-gray-800 text-white p-2 rounded-lg border border-purple-500\"\n                    />\n                  ))}\n                </div>\n              ) : (\n                <ul className=\"list-disc list-inside text-gray-300\">\n                  {backstory.motivations.map((mot, i) => (\n                    <li key={i}>{mot}</li>\n                  ))}\n                </ul>\n              )}\n            </div>\n\n            <div className=\"mb-4\">\n              <label className=\"block text-white mb-2\">Peurs:</label>\n              {isEditing ? (\n                <div className=\"space-y-2\">\n                  {backstory.fears.map((fear, i) => (\n                    <input\n                      key={i}\n                      value={fear}\n                      onChange={(e) => {\n                        const newFears = [...backstory.fears];\n                        newFears[i] = e.target.value;\n                        setBackstory({ ...backstory, fears: newFears });\n                      }}\n                      className=\"w-full bg-gray-800 text-white p-2 rounded-lg border border-purple-500\"\n                    />\n                  ))}\n                </div>\n              ) : (\n                <ul className=\"list-disc list-inside text-gray-300\">\n                  {backstory.fears.map((fear, i) => (\n                    <li key={i}>{fear}</li>\n                  ))}\n                </ul>\n              )}\n            </div>\n          </div>\n\n          {/* Quantum Signature */}\n          <div className=\"mb-6\">\n            <h3 className=\"text-xl font-bold text-purple-400 mb-3\"> Signature Quantique</h3>\n            \n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <label className=\"block text-white mb-2\">Coefficient :</label>\n                {isEditing ? (\n                  <input\n                    value={backstory.quantum_signature}\n                    onChange={(e) => setBackstory({ ...backstory, quantum_signature: e.target.value })}\n                    className=\"w-full bg-gray-800 text-white p-2 rounded-lg border border-purple-500\"\n                  />\n                ) : (\n                  <div className=\"bg-purple-600/30 p-2 rounded-lg text-purple-300 text-center\">\n                    {backstory.quantum_signature}\n                  </div>\n                )}\n              </div>\n              \n              <div>\n                <label className=\"block text-white mb-2\">Affinit Temporelle:</label>\n                {isEditing ? (\n                  <input\n                    value={backstory.temporal_affinity}\n                    onChange={(e) => setBackstory({ ...backstory, temporal_affinity: e.target.value })}\n                    className=\"w-full bg-gray-800 text-white p-2 rounded-lg border border-purple-500\"\n                  />\n                ) : (\n                  <div className=\"bg-cyan-600/30 p-2 rounded-lg text-cyan-300 text-center\">\n                    {backstory.temporal_affinity}\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n\n          {/* Special Memories */}\n          <div className=\"mb-6\">\n            <h3 className=\"text-xl font-bold text-purple-400 mb-3\"> Souvenirs Importants</h3>\n            {isEditing ? (\n              <div className=\"space-y-2\">\n                {backstory.special_memories.map((memory, i) => (\n                  <textarea\n                    key={i}\n                    value={memory}\n                    onChange={(e) => {\n                      const newMemories = [...backstory.special_memories];\n                      newMemories[i] = e.target.value;\n                      setBackstory({ ...backstory, special_memories: newMemories });\n                    }}\n                    className=\"w-full h-20 bg-gray-800 text-white p-2 rounded-lg border border-purple-500\"\n                  />\n                ))}\n                <button\n                  onClick={() => {\n                    setBackstory({\n                      ...backstory,\n                      special_memories: [...backstory.special_memories, '']\n                    });\n                  }}\n                  className=\"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700\"\n                >\n                   Ajouter Souvenir\n                </button>\n              </div>\n            ) : (\n              <div className=\"space-y-2\">\n                {backstory.special_memories.map((memory, i) => (\n                  <div key={i} className=\"bg-gray-800/50 p-3 rounded-lg text-gray-300 italic\">\n                    \"{memory}\"\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n\n          {/* Custom Prompts */}\n          <div className=\"mb-6\">\n            <h3 className=\"text-xl font-bold text-purple-400 mb-3\"> Prompts IA Personnaliss</h3>\n            {isEditing ? (\n              <div className=\"space-y-2\">\n                {backstory.custom_prompts.map((prompt, i) => (\n                  <textarea\n                    key={i}\n                    value={prompt}\n                    onChange={(e) => {\n                      const newPrompts = [...backstory.custom_prompts];\n                      newPrompts[i] = e.target.value;\n                      setBackstory({ ...backstory, custom_prompts: newPrompts });\n                    }}\n                    className=\"w-full h-20 bg-gray-800 text-white p-2 rounded-lg border border-purple-500 font-mono text-sm\"\n                    placeholder=\"Instruction spciale pour l'IA...\"\n                  />\n                ))}\n                <button\n                  onClick={() => {\n                    setBackstory({\n                      ...backstory,\n                      custom_prompts: [...backstory.custom_prompts, '']\n                    });\n                  }}\n                  className=\"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700\"\n                >\n                   Ajouter Prompt\n                </button>\n              </div>\n            ) : (\n              backstory.custom_prompts.length > 0 ? (\n                <div className=\"space-y-2\">\n                  {backstory.custom_prompts.map((prompt, i) => (\n                    <div key={i} className=\"bg-gray-800/50 p-3 rounded-lg text-green-400 font-mono text-sm\">\n                      {prompt}\n                    </div>\n                  ))}\n                </div>\n              ) : (\n                <div className=\"text-gray-500 italic\">Aucun prompt personnalis</div>\n              )\n            )}\n          </div>\n        </motion.div>\n      </div>\n\n      {/* Dialogue Preview Modal */}\n      <AnimatePresence>\n        {showPreview && (\n          <motion.div\n            className=\"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4\"\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            onClick={() => setShowPreview(false)}\n          >\n            <motion.div\n              className=\"bg-gradient-to-br from-purple-900 to-black border-2 border-purple-500 rounded-lg p-8 max-w-2xl\"\n              initial={{ scale: 0.8 }}\n              animate={{ scale: 1 }}\n              exit={{ scale: 0.8 }}\n              onClick={(e) => e.stopPropagation()}\n            >\n              <h3 className=\"text-2xl font-bold text-purple-400 mb-4\">\n                 Dialogue Gnr\n              </h3>\n              \n              <div className=\"bg-black/50 rounded-lg p-6 mb-4\">\n                <div className=\"flex items-start gap-4\">\n                  <div className=\"text-4xl\">{HEROES[selectedHero].icon_id}</div>\n                  <div>\n                    <div className=\"text-white font-bold mb-2\">\n                      {backstory.name}\n                    </div>\n                    <div className=\"text-gray-300 italic text-lg\">\n                      {generatedDialogue}\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"text-sm text-gray-400 mb-4\">\n                <div>Style: {backstory.speaking_style}</div>\n                <div>Personnalit: {backstory.personality_traits.join(', ')}</div>\n              </div>\n\n              <div className=\"flex gap-3\">\n                <button\n                  onClick={generateDialogue}\n                  className=\"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700\"\n                >\n                   Rgnrer\n                </button>\n                <button\n                  onClick={() => setShowPreview(false)}\n                  className=\"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700\"\n                >\n                  Fermer\n                </button>\n              </div>\n            </motion.div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </div>\n  );\n};\n\nexport default HeroBackstoryEditor;\n","/**\n * Adaptateur pour les API V2\n * Pont entre le frontend et les backends Rust/Java/Python\n */\n\nexport interface V2Config {\n    rustBackend: string;\n    javaBackend: string;\n    pythonBackend: string;\n    wsEndpoint: string;\n}\n\nconst DEFAULT_CONFIG: V2Config = {\n    // Use proxied paths in production; fall back to localhost in dev via VITE_* envs elsewhere\n    rustBackend: '/engine',\n    javaBackend: '/api',\n    pythonBackend: '/vector',\n    wsEndpoint: 'ws://localhost:8001'\n};\n\nclass V2AdapterClass {\n    private config: V2Config;\n    private ws: WebSocket | null = null;\n    private wsConnected = false;\n    private reconnectTimeout: ReturnType<typeof setTimeout> | null = null;\n\n    constructor(config: V2Config = DEFAULT_CONFIG) {\n        this.config = config;\n    }\n\n    /**\n     * Connexion WebSocket pour les vnements temps rel\n     */\n    async connectWebSocket(): Promise<void> {\n        return new Promise((resolve, reject) => {\n            try {\n                this.ws = new WebSocket(this.config.wsEndpoint);\n                \n                this.ws.onopen = () => {\n                    console.log(' WebSocket V2 connect');\n                    this.wsConnected = true;\n                    resolve();\n                };\n\n                this.ws.onerror = (error) => {\n                    console.error(' Erreur WebSocket:', error);\n                    this.wsConnected = false;\n                    reject(error);\n                };\n\n                this.ws.onclose = () => {\n                    console.log(' WebSocket dconnect');\n                    this.wsConnected = false;\n                    this.scheduleReconnect();\n                };\n\n                this.ws.onmessage = (event) => {\n                    this.handleWebSocketMessage(event.data);\n                };\n            } catch (error) {\n                reject(error);\n            }\n        });\n    }\n\n    private scheduleReconnect() {\n        if (this.reconnectTimeout) return;\n        \n        this.reconnectTimeout = setTimeout(() => {\n            console.log(' Tentative de reconnexion...');\n            this.connectWebSocket().catch(console.error);\n            this.reconnectTimeout = null;\n        }, 5000);\n    }\n\n    private handleWebSocketMessage(data: string) {\n        try {\n            const message = JSON.parse(data);\n            console.log(' Message V2:', message);\n            // Dispatcher les vnements selon le type\n            window.dispatchEvent(new CustomEvent('v2-event', { detail: message }));\n        } catch (error) {\n            console.error('Erreur parsing message:', error);\n        }\n    }\n\n    /**\n     * API Rust - Tick temporel et calculs 6D\n     */\n    async tick(position: { x: number; y: number; z: number; t: number; c: number; psi: number }) {\n        const response = await fetch(`${this.config.rustBackend}/api/v2/tick`, {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({ position, timestamp: Date.now() })\n        });\n        return response.json();\n    }\n\n    async calculateDrift(positions: any[]) {\n        const response = await fetch(`${this.config.rustBackend}/api/v2/drift`, {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({ positions })\n        });\n        return response.json();\n    }\n\n    async calculateComplexEnergy(entity: any) {\n        const response = await fetch(`${this.config.rustBackend}/api/v2/energy`, {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({ entity })\n        });\n        return response.json();\n    }\n\n    async detectParadoxes(timeline: any[]) {\n        const response = await fetch(`${this.config.rustBackend}/api/v2/paradoxes`, {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({ timeline })\n        });\n        return response.json();\n    }\n\n    /**\n     * Cre ou met  jour une entit V2 ct serveur\n     */\n    async upsertEntity(entity: {\n        id: string;\n        position: { x: number; y: number; z?: number; t?: number; c?: number; psi?: number };\n        te?: number;\n        energy_complex?: { A?: number; amplitude?: number; phi?: number; phase?: number };\n    }) {\n        const response = await fetch(`${this.config.rustBackend}/api/v2/entity`, {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify(entity)\n        });\n        return response.json();\n    }\n\n    /**\n     * API Java - Interstice et persistance\n     */\n    async uploadToInterstice(data: any) {\n        const response = await fetch(`${this.config.javaBackend}/api/v2/interstice/upload`, {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify(data)\n        });\n        return response.json();\n    }\n\n    async downloadFromInterstice(id: string) {\n        const response = await fetch(`${this.config.javaBackend}/api/v2/interstice/${id}`);\n        return response.json();\n    }\n\n    /**\n     * API Python - Vector DB et LLM\n     */\n    async searchVectorDB(query: string, filters?: any) {\n        const response = await fetch(`${this.config.pythonBackend}/api/v2/search`, {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({ query, filters })\n        });\n        return response.json();\n    }\n\n    async extractEntities(text: string) {\n        const response = await fetch(`${this.config.pythonBackend}/api/v2/entities`, {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({ text })\n        });\n        return response.json();\n    }\n\n    /**\n     * Rgulateurs temporels\n     */\n    async activateVince(params: any) {\n        const response = await fetch(`${this.config.rustBackend}/api/v2/regulators/vince`, {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify(params)\n        });\n        return response.json();\n    }\n\n    async activateAnna(params: any) {\n        const response = await fetch(`${this.config.rustBackend}/api/v2/regulators/anna`, {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify(params)\n        });\n        return response.json();\n    }\n\n    async triggerOverload(params: any) {\n        const response = await fetch(`${this.config.rustBackend}/api/v2/regulators/overload`, {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify(params)\n        });\n        return response.json();\n    }\n\n    /**\n     * Envoi d'vnements via WebSocket\n     */\n    sendEvent(event: any) {\n        if (this.ws && this.wsConnected) {\n            this.ws.send(JSON.stringify(event));\n        } else {\n            console.warn('WebSocket non connect, vnement non envoy:', event);\n        }\n    }\n\n    /**\n     * Dconnexion\n     */\n    disconnect() {\n        if (this.reconnectTimeout) {\n            clearTimeout(this.reconnectTimeout);\n            this.reconnectTimeout = null;\n        }\n        if (this.ws) {\n            this.ws.close();\n            this.ws = null;\n        }\n        this.wsConnected = false;\n    }\n\n    /**\n     * Statut de connexion\n     */\n    isConnected(): boolean {\n        return this.wsConnected;\n    }\n}\n\n// Export singleton\nexport const V2Adapter = new V2AdapterClass();\n\n// Export pour usage dans les composants React\nexport default V2Adapter;\n","export var util;\n(function (util) {\n    util.assertEqual = (_) => { };\n    function assertIs(_arg) { }\n    util.assertIs = assertIs;\n    function assertNever(_x) {\n        throw new Error();\n    }\n    util.assertNever = assertNever;\n    util.arrayToEnum = (items) => {\n        const obj = {};\n        for (const item of items) {\n            obj[item] = item;\n        }\n        return obj;\n    };\n    util.getValidEnumValues = (obj) => {\n        const validKeys = util.objectKeys(obj).filter((k) => typeof obj[obj[k]] !== \"number\");\n        const filtered = {};\n        for (const k of validKeys) {\n            filtered[k] = obj[k];\n        }\n        return util.objectValues(filtered);\n    };\n    util.objectValues = (obj) => {\n        return util.objectKeys(obj).map(function (e) {\n            return obj[e];\n        });\n    };\n    util.objectKeys = typeof Object.keys === \"function\" // eslint-disable-line ban/ban\n        ? (obj) => Object.keys(obj) // eslint-disable-line ban/ban\n        : (object) => {\n            const keys = [];\n            for (const key in object) {\n                if (Object.prototype.hasOwnProperty.call(object, key)) {\n                    keys.push(key);\n                }\n            }\n            return keys;\n        };\n    util.find = (arr, checker) => {\n        for (const item of arr) {\n            if (checker(item))\n                return item;\n        }\n        return undefined;\n    };\n    util.isInteger = typeof Number.isInteger === \"function\"\n        ? (val) => Number.isInteger(val) // eslint-disable-line ban/ban\n        : (val) => typeof val === \"number\" && Number.isFinite(val) && Math.floor(val) === val;\n    function joinValues(array, separator = \" | \") {\n        return array.map((val) => (typeof val === \"string\" ? `'${val}'` : val)).join(separator);\n    }\n    util.joinValues = joinValues;\n    util.jsonStringifyReplacer = (_, value) => {\n        if (typeof value === \"bigint\") {\n            return value.toString();\n        }\n        return value;\n    };\n})(util || (util = {}));\nexport var objectUtil;\n(function (objectUtil) {\n    objectUtil.mergeShapes = (first, second) => {\n        return {\n            ...first,\n            ...second, // second overwrites first\n        };\n    };\n})(objectUtil || (objectUtil = {}));\nexport const ZodParsedType = util.arrayToEnum([\n    \"string\",\n    \"nan\",\n    \"number\",\n    \"integer\",\n    \"float\",\n    \"boolean\",\n    \"date\",\n    \"bigint\",\n    \"symbol\",\n    \"function\",\n    \"undefined\",\n    \"null\",\n    \"array\",\n    \"object\",\n    \"unknown\",\n    \"promise\",\n    \"void\",\n    \"never\",\n    \"map\",\n    \"set\",\n]);\nexport const getParsedType = (data) => {\n    const t = typeof data;\n    switch (t) {\n        case \"undefined\":\n            return ZodParsedType.undefined;\n        case \"string\":\n            return ZodParsedType.string;\n        case \"number\":\n            return Number.isNaN(data) ? ZodParsedType.nan : ZodParsedType.number;\n        case \"boolean\":\n            return ZodParsedType.boolean;\n        case \"function\":\n            return ZodParsedType.function;\n        case \"bigint\":\n            return ZodParsedType.bigint;\n        case \"symbol\":\n            return ZodParsedType.symbol;\n        case \"object\":\n            if (Array.isArray(data)) {\n                return ZodParsedType.array;\n            }\n            if (data === null) {\n                return ZodParsedType.null;\n            }\n            if (data.then && typeof data.then === \"function\" && data.catch && typeof data.catch === \"function\") {\n                return ZodParsedType.promise;\n            }\n            if (typeof Map !== \"undefined\" && data instanceof Map) {\n                return ZodParsedType.map;\n            }\n            if (typeof Set !== \"undefined\" && data instanceof Set) {\n                return ZodParsedType.set;\n            }\n            if (typeof Date !== \"undefined\" && data instanceof Date) {\n                return ZodParsedType.date;\n            }\n            return ZodParsedType.object;\n        default:\n            return ZodParsedType.unknown;\n    }\n};\n","import { util } from \"./helpers/util.js\";\nexport const ZodIssueCode = util.arrayToEnum([\n    \"invalid_type\",\n    \"invalid_literal\",\n    \"custom\",\n    \"invalid_union\",\n    \"invalid_union_discriminator\",\n    \"invalid_enum_value\",\n    \"unrecognized_keys\",\n    \"invalid_arguments\",\n    \"invalid_return_type\",\n    \"invalid_date\",\n    \"invalid_string\",\n    \"too_small\",\n    \"too_big\",\n    \"invalid_intersection_types\",\n    \"not_multiple_of\",\n    \"not_finite\",\n]);\nexport const quotelessJson = (obj) => {\n    const json = JSON.stringify(obj, null, 2);\n    return json.replace(/\"([^\"]+)\":/g, \"$1:\");\n};\nexport class ZodError extends Error {\n    get errors() {\n        return this.issues;\n    }\n    constructor(issues) {\n        super();\n        this.issues = [];\n        this.addIssue = (sub) => {\n            this.issues = [...this.issues, sub];\n        };\n        this.addIssues = (subs = []) => {\n            this.issues = [...this.issues, ...subs];\n        };\n        const actualProto = new.target.prototype;\n        if (Object.setPrototypeOf) {\n            // eslint-disable-next-line ban/ban\n            Object.setPrototypeOf(this, actualProto);\n        }\n        else {\n            this.__proto__ = actualProto;\n        }\n        this.name = \"ZodError\";\n        this.issues = issues;\n    }\n    format(_mapper) {\n        const mapper = _mapper ||\n            function (issue) {\n                return issue.message;\n            };\n        const fieldErrors = { _errors: [] };\n        const processError = (error) => {\n            for (const issue of error.issues) {\n                if (issue.code === \"invalid_union\") {\n                    issue.unionErrors.map(processError);\n                }\n                else if (issue.code === \"invalid_return_type\") {\n                    processError(issue.returnTypeError);\n                }\n                else if (issue.code === \"invalid_arguments\") {\n                    processError(issue.argumentsError);\n                }\n                else if (issue.path.length === 0) {\n                    fieldErrors._errors.push(mapper(issue));\n                }\n                else {\n                    let curr = fieldErrors;\n                    let i = 0;\n                    while (i < issue.path.length) {\n                        const el = issue.path[i];\n                        const terminal = i === issue.path.length - 1;\n                        if (!terminal) {\n                            curr[el] = curr[el] || { _errors: [] };\n                            // if (typeof el === \"string\") {\n                            //   curr[el] = curr[el] || { _errors: [] };\n                            // } else if (typeof el === \"number\") {\n                            //   const errorArray: any = [];\n                            //   errorArray._errors = [];\n                            //   curr[el] = curr[el] || errorArray;\n                            // }\n                        }\n                        else {\n                            curr[el] = curr[el] || { _errors: [] };\n                            curr[el]._errors.push(mapper(issue));\n                        }\n                        curr = curr[el];\n                        i++;\n                    }\n                }\n            }\n        };\n        processError(this);\n        return fieldErrors;\n    }\n    static assert(value) {\n        if (!(value instanceof ZodError)) {\n            throw new Error(`Not a ZodError: ${value}`);\n        }\n    }\n    toString() {\n        return this.message;\n    }\n    get message() {\n        return JSON.stringify(this.issues, util.jsonStringifyReplacer, 2);\n    }\n    get isEmpty() {\n        return this.issues.length === 0;\n    }\n    flatten(mapper = (issue) => issue.message) {\n        const fieldErrors = {};\n        const formErrors = [];\n        for (const sub of this.issues) {\n            if (sub.path.length > 0) {\n                const firstEl = sub.path[0];\n                fieldErrors[firstEl] = fieldErrors[firstEl] || [];\n                fieldErrors[firstEl].push(mapper(sub));\n            }\n            else {\n                formErrors.push(mapper(sub));\n            }\n        }\n        return { formErrors, fieldErrors };\n    }\n    get formErrors() {\n        return this.flatten();\n    }\n}\nZodError.create = (issues) => {\n    const error = new ZodError(issues);\n    return error;\n};\n","import { ZodIssueCode } from \"../ZodError.js\";\nimport { util, ZodParsedType } from \"../helpers/util.js\";\nconst errorMap = (issue, _ctx) => {\n    let message;\n    switch (issue.code) {\n        case ZodIssueCode.invalid_type:\n            if (issue.received === ZodParsedType.undefined) {\n                message = \"Required\";\n            }\n            else {\n                message = `Expected ${issue.expected}, received ${issue.received}`;\n            }\n            break;\n        case ZodIssueCode.invalid_literal:\n            message = `Invalid literal value, expected ${JSON.stringify(issue.expected, util.jsonStringifyReplacer)}`;\n            break;\n        case ZodIssueCode.unrecognized_keys:\n            message = `Unrecognized key(s) in object: ${util.joinValues(issue.keys, \", \")}`;\n            break;\n        case ZodIssueCode.invalid_union:\n            message = `Invalid input`;\n            break;\n        case ZodIssueCode.invalid_union_discriminator:\n            message = `Invalid discriminator value. Expected ${util.joinValues(issue.options)}`;\n            break;\n        case ZodIssueCode.invalid_enum_value:\n            message = `Invalid enum value. Expected ${util.joinValues(issue.options)}, received '${issue.received}'`;\n            break;\n        case ZodIssueCode.invalid_arguments:\n            message = `Invalid function arguments`;\n            break;\n        case ZodIssueCode.invalid_return_type:\n            message = `Invalid function return type`;\n            break;\n        case ZodIssueCode.invalid_date:\n            message = `Invalid date`;\n            break;\n        case ZodIssueCode.invalid_string:\n            if (typeof issue.validation === \"object\") {\n                if (\"includes\" in issue.validation) {\n                    message = `Invalid input: must include \"${issue.validation.includes}\"`;\n                    if (typeof issue.validation.position === \"number\") {\n                        message = `${message} at one or more positions greater than or equal to ${issue.validation.position}`;\n                    }\n                }\n                else if (\"startsWith\" in issue.validation) {\n                    message = `Invalid input: must start with \"${issue.validation.startsWith}\"`;\n                }\n                else if (\"endsWith\" in issue.validation) {\n                    message = `Invalid input: must end with \"${issue.validation.endsWith}\"`;\n                }\n                else {\n                    util.assertNever(issue.validation);\n                }\n            }\n            else if (issue.validation !== \"regex\") {\n                message = `Invalid ${issue.validation}`;\n            }\n            else {\n                message = \"Invalid\";\n            }\n            break;\n        case ZodIssueCode.too_small:\n            if (issue.type === \"array\")\n                message = `Array must contain ${issue.exact ? \"exactly\" : issue.inclusive ? `at least` : `more than`} ${issue.minimum} element(s)`;\n            else if (issue.type === \"string\")\n                message = `String must contain ${issue.exact ? \"exactly\" : issue.inclusive ? `at least` : `over`} ${issue.minimum} character(s)`;\n            else if (issue.type === \"number\")\n                message = `Number must be ${issue.exact ? `exactly equal to ` : issue.inclusive ? `greater than or equal to ` : `greater than `}${issue.minimum}`;\n            else if (issue.type === \"bigint\")\n                message = `Number must be ${issue.exact ? `exactly equal to ` : issue.inclusive ? `greater than or equal to ` : `greater than `}${issue.minimum}`;\n            else if (issue.type === \"date\")\n                message = `Date must be ${issue.exact ? `exactly equal to ` : issue.inclusive ? `greater than or equal to ` : `greater than `}${new Date(Number(issue.minimum))}`;\n            else\n                message = \"Invalid input\";\n            break;\n        case ZodIssueCode.too_big:\n            if (issue.type === \"array\")\n                message = `Array must contain ${issue.exact ? `exactly` : issue.inclusive ? `at most` : `less than`} ${issue.maximum} element(s)`;\n            else if (issue.type === \"string\")\n                message = `String must contain ${issue.exact ? `exactly` : issue.inclusive ? `at most` : `under`} ${issue.maximum} character(s)`;\n            else if (issue.type === \"number\")\n                message = `Number must be ${issue.exact ? `exactly` : issue.inclusive ? `less than or equal to` : `less than`} ${issue.maximum}`;\n            else if (issue.type === \"bigint\")\n                message = `BigInt must be ${issue.exact ? `exactly` : issue.inclusive ? `less than or equal to` : `less than`} ${issue.maximum}`;\n            else if (issue.type === \"date\")\n                message = `Date must be ${issue.exact ? `exactly` : issue.inclusive ? `smaller than or equal to` : `smaller than`} ${new Date(Number(issue.maximum))}`;\n            else\n                message = \"Invalid input\";\n            break;\n        case ZodIssueCode.custom:\n            message = `Invalid input`;\n            break;\n        case ZodIssueCode.invalid_intersection_types:\n            message = `Intersection results could not be merged`;\n            break;\n        case ZodIssueCode.not_multiple_of:\n            message = `Number must be a multiple of ${issue.multipleOf}`;\n            break;\n        case ZodIssueCode.not_finite:\n            message = \"Number must be finite\";\n            break;\n        default:\n            message = _ctx.defaultError;\n            util.assertNever(issue);\n    }\n    return { message };\n};\nexport default errorMap;\n","import defaultErrorMap from \"./locales/en.js\";\nlet overrideErrorMap = defaultErrorMap;\nexport { defaultErrorMap };\nexport function setErrorMap(map) {\n    overrideErrorMap = map;\n}\nexport function getErrorMap() {\n    return overrideErrorMap;\n}\n","import { getErrorMap } from \"../errors.js\";\nimport defaultErrorMap from \"../locales/en.js\";\nexport const makeIssue = (params) => {\n    const { data, path, errorMaps, issueData } = params;\n    const fullPath = [...path, ...(issueData.path || [])];\n    const fullIssue = {\n        ...issueData,\n        path: fullPath,\n    };\n    if (issueData.message !== undefined) {\n        return {\n            ...issueData,\n            path: fullPath,\n            message: issueData.message,\n        };\n    }\n    let errorMessage = \"\";\n    const maps = errorMaps\n        .filter((m) => !!m)\n        .slice()\n        .reverse();\n    for (const map of maps) {\n        errorMessage = map(fullIssue, { data, defaultError: errorMessage }).message;\n    }\n    return {\n        ...issueData,\n        path: fullPath,\n        message: errorMessage,\n    };\n};\nexport const EMPTY_PATH = [];\nexport function addIssueToContext(ctx, issueData) {\n    const overrideMap = getErrorMap();\n    const issue = makeIssue({\n        issueData: issueData,\n        data: ctx.data,\n        path: ctx.path,\n        errorMaps: [\n            ctx.common.contextualErrorMap, // contextual error map is first priority\n            ctx.schemaErrorMap, // then schema-bound map if available\n            overrideMap, // then global override map\n            overrideMap === defaultErrorMap ? undefined : defaultErrorMap, // then global default map\n        ].filter((x) => !!x),\n    });\n    ctx.common.issues.push(issue);\n}\nexport class ParseStatus {\n    constructor() {\n        this.value = \"valid\";\n    }\n    dirty() {\n        if (this.value === \"valid\")\n            this.value = \"dirty\";\n    }\n    abort() {\n        if (this.value !== \"aborted\")\n            this.value = \"aborted\";\n    }\n    static mergeArray(status, results) {\n        const arrayValue = [];\n        for (const s of results) {\n            if (s.status === \"aborted\")\n                return INVALID;\n            if (s.status === \"dirty\")\n                status.dirty();\n            arrayValue.push(s.value);\n        }\n        return { status: status.value, value: arrayValue };\n    }\n    static async mergeObjectAsync(status, pairs) {\n        const syncPairs = [];\n        for (const pair of pairs) {\n            const key = await pair.key;\n            const value = await pair.value;\n            syncPairs.push({\n                key,\n                value,\n            });\n        }\n        return ParseStatus.mergeObjectSync(status, syncPairs);\n    }\n    static mergeObjectSync(status, pairs) {\n        const finalObject = {};\n        for (const pair of pairs) {\n            const { key, value } = pair;\n            if (key.status === \"aborted\")\n                return INVALID;\n            if (value.status === \"aborted\")\n                return INVALID;\n            if (key.status === \"dirty\")\n                status.dirty();\n            if (value.status === \"dirty\")\n                status.dirty();\n            if (key.value !== \"__proto__\" && (typeof value.value !== \"undefined\" || pair.alwaysSet)) {\n                finalObject[key.value] = value.value;\n            }\n        }\n        return { status: status.value, value: finalObject };\n    }\n}\nexport const INVALID = Object.freeze({\n    status: \"aborted\",\n});\nexport const DIRTY = (value) => ({ status: \"dirty\", value });\nexport const OK = (value) => ({ status: \"valid\", value });\nexport const isAborted = (x) => x.status === \"aborted\";\nexport const isDirty = (x) => x.status === \"dirty\";\nexport const isValid = (x) => x.status === \"valid\";\nexport const isAsync = (x) => typeof Promise !== \"undefined\" && x instanceof Promise;\n","export var errorUtil;\n(function (errorUtil) {\n    errorUtil.errToObj = (message) => typeof message === \"string\" ? { message } : message || {};\n    // biome-ignore lint:\n    errorUtil.toString = (message) => typeof message === \"string\" ? message : message?.message;\n})(errorUtil || (errorUtil = {}));\n","import { ZodError, ZodIssueCode, } from \"./ZodError.js\";\nimport { defaultErrorMap, getErrorMap } from \"./errors.js\";\nimport { errorUtil } from \"./helpers/errorUtil.js\";\nimport { DIRTY, INVALID, OK, ParseStatus, addIssueToContext, isAborted, isAsync, isDirty, isValid, makeIssue, } from \"./helpers/parseUtil.js\";\nimport { util, ZodParsedType, getParsedType } from \"./helpers/util.js\";\nclass ParseInputLazyPath {\n    constructor(parent, value, path, key) {\n        this._cachedPath = [];\n        this.parent = parent;\n        this.data = value;\n        this._path = path;\n        this._key = key;\n    }\n    get path() {\n        if (!this._cachedPath.length) {\n            if (Array.isArray(this._key)) {\n                this._cachedPath.push(...this._path, ...this._key);\n            }\n            else {\n                this._cachedPath.push(...this._path, this._key);\n            }\n        }\n        return this._cachedPath;\n    }\n}\nconst handleResult = (ctx, result) => {\n    if (isValid(result)) {\n        return { success: true, data: result.value };\n    }\n    else {\n        if (!ctx.common.issues.length) {\n            throw new Error(\"Validation failed but no issues detected.\");\n        }\n        return {\n            success: false,\n            get error() {\n                if (this._error)\n                    return this._error;\n                const error = new ZodError(ctx.common.issues);\n                this._error = error;\n                return this._error;\n            },\n        };\n    }\n};\nfunction processCreateParams(params) {\n    if (!params)\n        return {};\n    const { errorMap, invalid_type_error, required_error, description } = params;\n    if (errorMap && (invalid_type_error || required_error)) {\n        throw new Error(`Can't use \"invalid_type_error\" or \"required_error\" in conjunction with custom error map.`);\n    }\n    if (errorMap)\n        return { errorMap: errorMap, description };\n    const customMap = (iss, ctx) => {\n        const { message } = params;\n        if (iss.code === \"invalid_enum_value\") {\n            return { message: message ?? ctx.defaultError };\n        }\n        if (typeof ctx.data === \"undefined\") {\n            return { message: message ?? required_error ?? ctx.defaultError };\n        }\n        if (iss.code !== \"invalid_type\")\n            return { message: ctx.defaultError };\n        return { message: message ?? invalid_type_error ?? ctx.defaultError };\n    };\n    return { errorMap: customMap, description };\n}\nexport class ZodType {\n    get description() {\n        return this._def.description;\n    }\n    _getType(input) {\n        return getParsedType(input.data);\n    }\n    _getOrReturnCtx(input, ctx) {\n        return (ctx || {\n            common: input.parent.common,\n            data: input.data,\n            parsedType: getParsedType(input.data),\n            schemaErrorMap: this._def.errorMap,\n            path: input.path,\n            parent: input.parent,\n        });\n    }\n    _processInputParams(input) {\n        return {\n            status: new ParseStatus(),\n            ctx: {\n                common: input.parent.common,\n                data: input.data,\n                parsedType: getParsedType(input.data),\n                schemaErrorMap: this._def.errorMap,\n                path: input.path,\n                parent: input.parent,\n            },\n        };\n    }\n    _parseSync(input) {\n        const result = this._parse(input);\n        if (isAsync(result)) {\n            throw new Error(\"Synchronous parse encountered promise.\");\n        }\n        return result;\n    }\n    _parseAsync(input) {\n        const result = this._parse(input);\n        return Promise.resolve(result);\n    }\n    parse(data, params) {\n        const result = this.safeParse(data, params);\n        if (result.success)\n            return result.data;\n        throw result.error;\n    }\n    safeParse(data, params) {\n        const ctx = {\n            common: {\n                issues: [],\n                async: params?.async ?? false,\n                contextualErrorMap: params?.errorMap,\n            },\n            path: params?.path || [],\n            schemaErrorMap: this._def.errorMap,\n            parent: null,\n            data,\n            parsedType: getParsedType(data),\n        };\n        const result = this._parseSync({ data, path: ctx.path, parent: ctx });\n        return handleResult(ctx, result);\n    }\n    \"~validate\"(data) {\n        const ctx = {\n            common: {\n                issues: [],\n                async: !!this[\"~standard\"].async,\n            },\n            path: [],\n            schemaErrorMap: this._def.errorMap,\n            parent: null,\n            data,\n            parsedType: getParsedType(data),\n        };\n        if (!this[\"~standard\"].async) {\n            try {\n                const result = this._parseSync({ data, path: [], parent: ctx });\n                return isValid(result)\n                    ? {\n                        value: result.value,\n                    }\n                    : {\n                        issues: ctx.common.issues,\n                    };\n            }\n            catch (err) {\n                if (err?.message?.toLowerCase()?.includes(\"encountered\")) {\n                    this[\"~standard\"].async = true;\n                }\n                ctx.common = {\n                    issues: [],\n                    async: true,\n                };\n            }\n        }\n        return this._parseAsync({ data, path: [], parent: ctx }).then((result) => isValid(result)\n            ? {\n                value: result.value,\n            }\n            : {\n                issues: ctx.common.issues,\n            });\n    }\n    async parseAsync(data, params) {\n        const result = await this.safeParseAsync(data, params);\n        if (result.success)\n            return result.data;\n        throw result.error;\n    }\n    async safeParseAsync(data, params) {\n        const ctx = {\n            common: {\n                issues: [],\n                contextualErrorMap: params?.errorMap,\n                async: true,\n            },\n            path: params?.path || [],\n            schemaErrorMap: this._def.errorMap,\n            parent: null,\n            data,\n            parsedType: getParsedType(data),\n        };\n        const maybeAsyncResult = this._parse({ data, path: ctx.path, parent: ctx });\n        const result = await (isAsync(maybeAsyncResult) ? maybeAsyncResult : Promise.resolve(maybeAsyncResult));\n        return handleResult(ctx, result);\n    }\n    refine(check, message) {\n        const getIssueProperties = (val) => {\n            if (typeof message === \"string\" || typeof message === \"undefined\") {\n                return { message };\n            }\n            else if (typeof message === \"function\") {\n                return message(val);\n            }\n            else {\n                return message;\n            }\n        };\n        return this._refinement((val, ctx) => {\n            const result = check(val);\n            const setError = () => ctx.addIssue({\n                code: ZodIssueCode.custom,\n                ...getIssueProperties(val),\n            });\n            if (typeof Promise !== \"undefined\" && result instanceof Promise) {\n                return result.then((data) => {\n                    if (!data) {\n                        setError();\n                        return false;\n                    }\n                    else {\n                        return true;\n                    }\n                });\n            }\n            if (!result) {\n                setError();\n                return false;\n            }\n            else {\n                return true;\n            }\n        });\n    }\n    refinement(check, refinementData) {\n        return this._refinement((val, ctx) => {\n            if (!check(val)) {\n                ctx.addIssue(typeof refinementData === \"function\" ? refinementData(val, ctx) : refinementData);\n                return false;\n            }\n            else {\n                return true;\n            }\n        });\n    }\n    _refinement(refinement) {\n        return new ZodEffects({\n            schema: this,\n            typeName: ZodFirstPartyTypeKind.ZodEffects,\n            effect: { type: \"refinement\", refinement },\n        });\n    }\n    superRefine(refinement) {\n        return this._refinement(refinement);\n    }\n    constructor(def) {\n        /** Alias of safeParseAsync */\n        this.spa = this.safeParseAsync;\n        this._def = def;\n        this.parse = this.parse.bind(this);\n        this.safeParse = this.safeParse.bind(this);\n        this.parseAsync = this.parseAsync.bind(this);\n        this.safeParseAsync = this.safeParseAsync.bind(this);\n        this.spa = this.spa.bind(this);\n        this.refine = this.refine.bind(this);\n        this.refinement = this.refinement.bind(this);\n        this.superRefine = this.superRefine.bind(this);\n        this.optional = this.optional.bind(this);\n        this.nullable = this.nullable.bind(this);\n        this.nullish = this.nullish.bind(this);\n        this.array = this.array.bind(this);\n        this.promise = this.promise.bind(this);\n        this.or = this.or.bind(this);\n        this.and = this.and.bind(this);\n        this.transform = this.transform.bind(this);\n        this.brand = this.brand.bind(this);\n        this.default = this.default.bind(this);\n        this.catch = this.catch.bind(this);\n        this.describe = this.describe.bind(this);\n        this.pipe = this.pipe.bind(this);\n        this.readonly = this.readonly.bind(this);\n        this.isNullable = this.isNullable.bind(this);\n        this.isOptional = this.isOptional.bind(this);\n        this[\"~standard\"] = {\n            version: 1,\n            vendor: \"zod\",\n            validate: (data) => this[\"~validate\"](data),\n        };\n    }\n    optional() {\n        return ZodOptional.create(this, this._def);\n    }\n    nullable() {\n        return ZodNullable.create(this, this._def);\n    }\n    nullish() {\n        return this.nullable().optional();\n    }\n    array() {\n        return ZodArray.create(this);\n    }\n    promise() {\n        return ZodPromise.create(this, this._def);\n    }\n    or(option) {\n        return ZodUnion.create([this, option], this._def);\n    }\n    and(incoming) {\n        return ZodIntersection.create(this, incoming, this._def);\n    }\n    transform(transform) {\n        return new ZodEffects({\n            ...processCreateParams(this._def),\n            schema: this,\n            typeName: ZodFirstPartyTypeKind.ZodEffects,\n            effect: { type: \"transform\", transform },\n        });\n    }\n    default(def) {\n        const defaultValueFunc = typeof def === \"function\" ? def : () => def;\n        return new ZodDefault({\n            ...processCreateParams(this._def),\n            innerType: this,\n            defaultValue: defaultValueFunc,\n            typeName: ZodFirstPartyTypeKind.ZodDefault,\n        });\n    }\n    brand() {\n        return new ZodBranded({\n            typeName: ZodFirstPartyTypeKind.ZodBranded,\n            type: this,\n            ...processCreateParams(this._def),\n        });\n    }\n    catch(def) {\n        const catchValueFunc = typeof def === \"function\" ? def : () => def;\n        return new ZodCatch({\n            ...processCreateParams(this._def),\n            innerType: this,\n            catchValue: catchValueFunc,\n            typeName: ZodFirstPartyTypeKind.ZodCatch,\n        });\n    }\n    describe(description) {\n        const This = this.constructor;\n        return new This({\n            ...this._def,\n            description,\n        });\n    }\n    pipe(target) {\n        return ZodPipeline.create(this, target);\n    }\n    readonly() {\n        return ZodReadonly.create(this);\n    }\n    isOptional() {\n        return this.safeParse(undefined).success;\n    }\n    isNullable() {\n        return this.safeParse(null).success;\n    }\n}\nconst cuidRegex = /^c[^\\s-]{8,}$/i;\nconst cuid2Regex = /^[0-9a-z]+$/;\nconst ulidRegex = /^[0-9A-HJKMNP-TV-Z]{26}$/i;\n// const uuidRegex =\n//   /^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i;\nconst uuidRegex = /^[0-9a-fA-F]{8}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{12}$/i;\nconst nanoidRegex = /^[a-z0-9_-]{21}$/i;\nconst jwtRegex = /^[A-Za-z0-9-_]+\\.[A-Za-z0-9-_]+\\.[A-Za-z0-9-_]*$/;\nconst durationRegex = /^[-+]?P(?!$)(?:(?:[-+]?\\d+Y)|(?:[-+]?\\d+[.,]\\d+Y$))?(?:(?:[-+]?\\d+M)|(?:[-+]?\\d+[.,]\\d+M$))?(?:(?:[-+]?\\d+W)|(?:[-+]?\\d+[.,]\\d+W$))?(?:(?:[-+]?\\d+D)|(?:[-+]?\\d+[.,]\\d+D$))?(?:T(?=[\\d+-])(?:(?:[-+]?\\d+H)|(?:[-+]?\\d+[.,]\\d+H$))?(?:(?:[-+]?\\d+M)|(?:[-+]?\\d+[.,]\\d+M$))?(?:[-+]?\\d+(?:[.,]\\d+)?S)?)??$/;\n// from https://stackoverflow.com/a/46181/1550155\n// old version: too slow, didn't support unicode\n// const emailRegex = /^((([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+(\\.([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+)*)|((\\x22)((((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(([\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x7f]|\\x21|[\\x23-\\x5b]|[\\x5d-\\x7e]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(\\\\([\\x01-\\x09\\x0b\\x0c\\x0d-\\x7f]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]))))*(((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(\\x22)))@((([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.)+(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))$/i;\n//old email regex\n// const emailRegex = /^(([^<>()[\\].,;:\\s@\"]+(\\.[^<>()[\\].,;:\\s@\"]+)*)|(\".+\"))@((?!-)([^<>()[\\].,;:\\s@\"]+\\.)+[^<>()[\\].,;:\\s@\"]{1,})[^-<>()[\\].,;:\\s@\"]$/i;\n// eslint-disable-next-line\n// const emailRegex =\n//   /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\])|(\\[IPv6:(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))\\])|([A-Za-z0-9]([A-Za-z0-9-]*[A-Za-z0-9])*(\\.[A-Za-z]{2,})+))$/;\n// const emailRegex =\n//   /^[a-zA-Z0-9\\.\\!\\#\\$\\%\\&\\'\\*\\+\\/\\=\\?\\^\\_\\`\\{\\|\\}\\~\\-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;\n// const emailRegex =\n//   /^(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])$/i;\nconst emailRegex = /^(?!\\.)(?!.*\\.\\.)([A-Z0-9_'+\\-\\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\\-]*\\.)+[A-Z]{2,}$/i;\n// const emailRegex =\n//   /^[a-z0-9.!#$%&*+/=?^_`{|}~-]+@[a-z0-9-]+(?:\\.[a-z0-9\\-]+)*$/i;\n// from https://thekevinscott.com/emojis-in-javascript/#writing-a-regular-expression\nconst _emojiRegex = `^(\\\\p{Extended_Pictographic}|\\\\p{Emoji_Component})+$`;\nlet emojiRegex;\n// faster, simpler, safer\nconst ipv4Regex = /^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/;\nconst ipv4CidrRegex = /^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\/(3[0-2]|[12]?[0-9])$/;\n// const ipv6Regex =\n// /^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/;\nconst ipv6Regex = /^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/;\nconst ipv6CidrRegex = /^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/;\n// https://stackoverflow.com/questions/7860392/determine-if-string-is-in-base64-using-javascript\nconst base64Regex = /^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/;\n// https://base64.guru/standards/base64url\nconst base64urlRegex = /^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/;\n// simple\n// const dateRegexSource = `\\\\d{4}-\\\\d{2}-\\\\d{2}`;\n// no leap year validation\n// const dateRegexSource = `\\\\d{4}-((0[13578]|10|12)-31|(0[13-9]|1[0-2])-30|(0[1-9]|1[0-2])-(0[1-9]|1\\\\d|2\\\\d))`;\n// with leap year validation\nconst dateRegexSource = `((\\\\d\\\\d[2468][048]|\\\\d\\\\d[13579][26]|\\\\d\\\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\\\d|30)|(02)-(0[1-9]|1\\\\d|2[0-8])))`;\nconst dateRegex = new RegExp(`^${dateRegexSource}$`);\nfunction timeRegexSource(args) {\n    let secondsRegexSource = `[0-5]\\\\d`;\n    if (args.precision) {\n        secondsRegexSource = `${secondsRegexSource}\\\\.\\\\d{${args.precision}}`;\n    }\n    else if (args.precision == null) {\n        secondsRegexSource = `${secondsRegexSource}(\\\\.\\\\d+)?`;\n    }\n    const secondsQuantifier = args.precision ? \"+\" : \"?\"; // require seconds if precision is nonzero\n    return `([01]\\\\d|2[0-3]):[0-5]\\\\d(:${secondsRegexSource})${secondsQuantifier}`;\n}\nfunction timeRegex(args) {\n    return new RegExp(`^${timeRegexSource(args)}$`);\n}\n// Adapted from https://stackoverflow.com/a/3143231\nexport function datetimeRegex(args) {\n    let regex = `${dateRegexSource}T${timeRegexSource(args)}`;\n    const opts = [];\n    opts.push(args.local ? `Z?` : `Z`);\n    if (args.offset)\n        opts.push(`([+-]\\\\d{2}:?\\\\d{2})`);\n    regex = `${regex}(${opts.join(\"|\")})`;\n    return new RegExp(`^${regex}$`);\n}\nfunction isValidIP(ip, version) {\n    if ((version === \"v4\" || !version) && ipv4Regex.test(ip)) {\n        return true;\n    }\n    if ((version === \"v6\" || !version) && ipv6Regex.test(ip)) {\n        return true;\n    }\n    return false;\n}\nfunction isValidJWT(jwt, alg) {\n    if (!jwtRegex.test(jwt))\n        return false;\n    try {\n        const [header] = jwt.split(\".\");\n        if (!header)\n            return false;\n        // Convert base64url to base64\n        const base64 = header\n            .replace(/-/g, \"+\")\n            .replace(/_/g, \"/\")\n            .padEnd(header.length + ((4 - (header.length % 4)) % 4), \"=\");\n        const decoded = JSON.parse(atob(base64));\n        if (typeof decoded !== \"object\" || decoded === null)\n            return false;\n        if (\"typ\" in decoded && decoded?.typ !== \"JWT\")\n            return false;\n        if (!decoded.alg)\n            return false;\n        if (alg && decoded.alg !== alg)\n            return false;\n        return true;\n    }\n    catch {\n        return false;\n    }\n}\nfunction isValidCidr(ip, version) {\n    if ((version === \"v4\" || !version) && ipv4CidrRegex.test(ip)) {\n        return true;\n    }\n    if ((version === \"v6\" || !version) && ipv6CidrRegex.test(ip)) {\n        return true;\n    }\n    return false;\n}\nexport class ZodString extends ZodType {\n    _parse(input) {\n        if (this._def.coerce) {\n            input.data = String(input.data);\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.string) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.string,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const status = new ParseStatus();\n        let ctx = undefined;\n        for (const check of this._def.checks) {\n            if (check.kind === \"min\") {\n                if (input.data.length < check.value) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_small,\n                        minimum: check.value,\n                        type: \"string\",\n                        inclusive: true,\n                        exact: false,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"max\") {\n                if (input.data.length > check.value) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_big,\n                        maximum: check.value,\n                        type: \"string\",\n                        inclusive: true,\n                        exact: false,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"length\") {\n                const tooBig = input.data.length > check.value;\n                const tooSmall = input.data.length < check.value;\n                if (tooBig || tooSmall) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    if (tooBig) {\n                        addIssueToContext(ctx, {\n                            code: ZodIssueCode.too_big,\n                            maximum: check.value,\n                            type: \"string\",\n                            inclusive: true,\n                            exact: true,\n                            message: check.message,\n                        });\n                    }\n                    else if (tooSmall) {\n                        addIssueToContext(ctx, {\n                            code: ZodIssueCode.too_small,\n                            minimum: check.value,\n                            type: \"string\",\n                            inclusive: true,\n                            exact: true,\n                            message: check.message,\n                        });\n                    }\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"email\") {\n                if (!emailRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"email\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"emoji\") {\n                if (!emojiRegex) {\n                    emojiRegex = new RegExp(_emojiRegex, \"u\");\n                }\n                if (!emojiRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"emoji\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"uuid\") {\n                if (!uuidRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"uuid\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"nanoid\") {\n                if (!nanoidRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"nanoid\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"cuid\") {\n                if (!cuidRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"cuid\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"cuid2\") {\n                if (!cuid2Regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"cuid2\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"ulid\") {\n                if (!ulidRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"ulid\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"url\") {\n                try {\n                    new URL(input.data);\n                }\n                catch {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"url\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"regex\") {\n                check.regex.lastIndex = 0;\n                const testResult = check.regex.test(input.data);\n                if (!testResult) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"regex\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"trim\") {\n                input.data = input.data.trim();\n            }\n            else if (check.kind === \"includes\") {\n                if (!input.data.includes(check.value, check.position)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: { includes: check.value, position: check.position },\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"toLowerCase\") {\n                input.data = input.data.toLowerCase();\n            }\n            else if (check.kind === \"toUpperCase\") {\n                input.data = input.data.toUpperCase();\n            }\n            else if (check.kind === \"startsWith\") {\n                if (!input.data.startsWith(check.value)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: { startsWith: check.value },\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"endsWith\") {\n                if (!input.data.endsWith(check.value)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: { endsWith: check.value },\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"datetime\") {\n                const regex = datetimeRegex(check);\n                if (!regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: \"datetime\",\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"date\") {\n                const regex = dateRegex;\n                if (!regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: \"date\",\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"time\") {\n                const regex = timeRegex(check);\n                if (!regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: \"time\",\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"duration\") {\n                if (!durationRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"duration\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"ip\") {\n                if (!isValidIP(input.data, check.version)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"ip\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"jwt\") {\n                if (!isValidJWT(input.data, check.alg)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"jwt\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"cidr\") {\n                if (!isValidCidr(input.data, check.version)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"cidr\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"base64\") {\n                if (!base64Regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"base64\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"base64url\") {\n                if (!base64urlRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"base64url\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else {\n                util.assertNever(check);\n            }\n        }\n        return { status: status.value, value: input.data };\n    }\n    _regex(regex, validation, message) {\n        return this.refinement((data) => regex.test(data), {\n            validation,\n            code: ZodIssueCode.invalid_string,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    _addCheck(check) {\n        return new ZodString({\n            ...this._def,\n            checks: [...this._def.checks, check],\n        });\n    }\n    email(message) {\n        return this._addCheck({ kind: \"email\", ...errorUtil.errToObj(message) });\n    }\n    url(message) {\n        return this._addCheck({ kind: \"url\", ...errorUtil.errToObj(message) });\n    }\n    emoji(message) {\n        return this._addCheck({ kind: \"emoji\", ...errorUtil.errToObj(message) });\n    }\n    uuid(message) {\n        return this._addCheck({ kind: \"uuid\", ...errorUtil.errToObj(message) });\n    }\n    nanoid(message) {\n        return this._addCheck({ kind: \"nanoid\", ...errorUtil.errToObj(message) });\n    }\n    cuid(message) {\n        return this._addCheck({ kind: \"cuid\", ...errorUtil.errToObj(message) });\n    }\n    cuid2(message) {\n        return this._addCheck({ kind: \"cuid2\", ...errorUtil.errToObj(message) });\n    }\n    ulid(message) {\n        return this._addCheck({ kind: \"ulid\", ...errorUtil.errToObj(message) });\n    }\n    base64(message) {\n        return this._addCheck({ kind: \"base64\", ...errorUtil.errToObj(message) });\n    }\n    base64url(message) {\n        // base64url encoding is a modification of base64 that can safely be used in URLs and filenames\n        return this._addCheck({\n            kind: \"base64url\",\n            ...errorUtil.errToObj(message),\n        });\n    }\n    jwt(options) {\n        return this._addCheck({ kind: \"jwt\", ...errorUtil.errToObj(options) });\n    }\n    ip(options) {\n        return this._addCheck({ kind: \"ip\", ...errorUtil.errToObj(options) });\n    }\n    cidr(options) {\n        return this._addCheck({ kind: \"cidr\", ...errorUtil.errToObj(options) });\n    }\n    datetime(options) {\n        if (typeof options === \"string\") {\n            return this._addCheck({\n                kind: \"datetime\",\n                precision: null,\n                offset: false,\n                local: false,\n                message: options,\n            });\n        }\n        return this._addCheck({\n            kind: \"datetime\",\n            precision: typeof options?.precision === \"undefined\" ? null : options?.precision,\n            offset: options?.offset ?? false,\n            local: options?.local ?? false,\n            ...errorUtil.errToObj(options?.message),\n        });\n    }\n    date(message) {\n        return this._addCheck({ kind: \"date\", message });\n    }\n    time(options) {\n        if (typeof options === \"string\") {\n            return this._addCheck({\n                kind: \"time\",\n                precision: null,\n                message: options,\n            });\n        }\n        return this._addCheck({\n            kind: \"time\",\n            precision: typeof options?.precision === \"undefined\" ? null : options?.precision,\n            ...errorUtil.errToObj(options?.message),\n        });\n    }\n    duration(message) {\n        return this._addCheck({ kind: \"duration\", ...errorUtil.errToObj(message) });\n    }\n    regex(regex, message) {\n        return this._addCheck({\n            kind: \"regex\",\n            regex: regex,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    includes(value, options) {\n        return this._addCheck({\n            kind: \"includes\",\n            value: value,\n            position: options?.position,\n            ...errorUtil.errToObj(options?.message),\n        });\n    }\n    startsWith(value, message) {\n        return this._addCheck({\n            kind: \"startsWith\",\n            value: value,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    endsWith(value, message) {\n        return this._addCheck({\n            kind: \"endsWith\",\n            value: value,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    min(minLength, message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: minLength,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    max(maxLength, message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: maxLength,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    length(len, message) {\n        return this._addCheck({\n            kind: \"length\",\n            value: len,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    /**\n     * Equivalent to `.min(1)`\n     */\n    nonempty(message) {\n        return this.min(1, errorUtil.errToObj(message));\n    }\n    trim() {\n        return new ZodString({\n            ...this._def,\n            checks: [...this._def.checks, { kind: \"trim\" }],\n        });\n    }\n    toLowerCase() {\n        return new ZodString({\n            ...this._def,\n            checks: [...this._def.checks, { kind: \"toLowerCase\" }],\n        });\n    }\n    toUpperCase() {\n        return new ZodString({\n            ...this._def,\n            checks: [...this._def.checks, { kind: \"toUpperCase\" }],\n        });\n    }\n    get isDatetime() {\n        return !!this._def.checks.find((ch) => ch.kind === \"datetime\");\n    }\n    get isDate() {\n        return !!this._def.checks.find((ch) => ch.kind === \"date\");\n    }\n    get isTime() {\n        return !!this._def.checks.find((ch) => ch.kind === \"time\");\n    }\n    get isDuration() {\n        return !!this._def.checks.find((ch) => ch.kind === \"duration\");\n    }\n    get isEmail() {\n        return !!this._def.checks.find((ch) => ch.kind === \"email\");\n    }\n    get isURL() {\n        return !!this._def.checks.find((ch) => ch.kind === \"url\");\n    }\n    get isEmoji() {\n        return !!this._def.checks.find((ch) => ch.kind === \"emoji\");\n    }\n    get isUUID() {\n        return !!this._def.checks.find((ch) => ch.kind === \"uuid\");\n    }\n    get isNANOID() {\n        return !!this._def.checks.find((ch) => ch.kind === \"nanoid\");\n    }\n    get isCUID() {\n        return !!this._def.checks.find((ch) => ch.kind === \"cuid\");\n    }\n    get isCUID2() {\n        return !!this._def.checks.find((ch) => ch.kind === \"cuid2\");\n    }\n    get isULID() {\n        return !!this._def.checks.find((ch) => ch.kind === \"ulid\");\n    }\n    get isIP() {\n        return !!this._def.checks.find((ch) => ch.kind === \"ip\");\n    }\n    get isCIDR() {\n        return !!this._def.checks.find((ch) => ch.kind === \"cidr\");\n    }\n    get isBase64() {\n        return !!this._def.checks.find((ch) => ch.kind === \"base64\");\n    }\n    get isBase64url() {\n        // base64url encoding is a modification of base64 that can safely be used in URLs and filenames\n        return !!this._def.checks.find((ch) => ch.kind === \"base64url\");\n    }\n    get minLength() {\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n        }\n        return min;\n    }\n    get maxLength() {\n        let max = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return max;\n    }\n}\nZodString.create = (params) => {\n    return new ZodString({\n        checks: [],\n        typeName: ZodFirstPartyTypeKind.ZodString,\n        coerce: params?.coerce ?? false,\n        ...processCreateParams(params),\n    });\n};\n// https://stackoverflow.com/questions/3966484/why-does-modulus-operator-return-fractional-number-in-javascript/31711034#31711034\nfunction floatSafeRemainder(val, step) {\n    const valDecCount = (val.toString().split(\".\")[1] || \"\").length;\n    const stepDecCount = (step.toString().split(\".\")[1] || \"\").length;\n    const decCount = valDecCount > stepDecCount ? valDecCount : stepDecCount;\n    const valInt = Number.parseInt(val.toFixed(decCount).replace(\".\", \"\"));\n    const stepInt = Number.parseInt(step.toFixed(decCount).replace(\".\", \"\"));\n    return (valInt % stepInt) / 10 ** decCount;\n}\nexport class ZodNumber extends ZodType {\n    constructor() {\n        super(...arguments);\n        this.min = this.gte;\n        this.max = this.lte;\n        this.step = this.multipleOf;\n    }\n    _parse(input) {\n        if (this._def.coerce) {\n            input.data = Number(input.data);\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.number) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.number,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        let ctx = undefined;\n        const status = new ParseStatus();\n        for (const check of this._def.checks) {\n            if (check.kind === \"int\") {\n                if (!util.isInteger(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_type,\n                        expected: \"integer\",\n                        received: \"float\",\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"min\") {\n                const tooSmall = check.inclusive ? input.data < check.value : input.data <= check.value;\n                if (tooSmall) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_small,\n                        minimum: check.value,\n                        type: \"number\",\n                        inclusive: check.inclusive,\n                        exact: false,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"max\") {\n                const tooBig = check.inclusive ? input.data > check.value : input.data >= check.value;\n                if (tooBig) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_big,\n                        maximum: check.value,\n                        type: \"number\",\n                        inclusive: check.inclusive,\n                        exact: false,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"multipleOf\") {\n                if (floatSafeRemainder(input.data, check.value) !== 0) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.not_multiple_of,\n                        multipleOf: check.value,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"finite\") {\n                if (!Number.isFinite(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.not_finite,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else {\n                util.assertNever(check);\n            }\n        }\n        return { status: status.value, value: input.data };\n    }\n    gte(value, message) {\n        return this.setLimit(\"min\", value, true, errorUtil.toString(message));\n    }\n    gt(value, message) {\n        return this.setLimit(\"min\", value, false, errorUtil.toString(message));\n    }\n    lte(value, message) {\n        return this.setLimit(\"max\", value, true, errorUtil.toString(message));\n    }\n    lt(value, message) {\n        return this.setLimit(\"max\", value, false, errorUtil.toString(message));\n    }\n    setLimit(kind, value, inclusive, message) {\n        return new ZodNumber({\n            ...this._def,\n            checks: [\n                ...this._def.checks,\n                {\n                    kind,\n                    value,\n                    inclusive,\n                    message: errorUtil.toString(message),\n                },\n            ],\n        });\n    }\n    _addCheck(check) {\n        return new ZodNumber({\n            ...this._def,\n            checks: [...this._def.checks, check],\n        });\n    }\n    int(message) {\n        return this._addCheck({\n            kind: \"int\",\n            message: errorUtil.toString(message),\n        });\n    }\n    positive(message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: 0,\n            inclusive: false,\n            message: errorUtil.toString(message),\n        });\n    }\n    negative(message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: 0,\n            inclusive: false,\n            message: errorUtil.toString(message),\n        });\n    }\n    nonpositive(message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: 0,\n            inclusive: true,\n            message: errorUtil.toString(message),\n        });\n    }\n    nonnegative(message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: 0,\n            inclusive: true,\n            message: errorUtil.toString(message),\n        });\n    }\n    multipleOf(value, message) {\n        return this._addCheck({\n            kind: \"multipleOf\",\n            value: value,\n            message: errorUtil.toString(message),\n        });\n    }\n    finite(message) {\n        return this._addCheck({\n            kind: \"finite\",\n            message: errorUtil.toString(message),\n        });\n    }\n    safe(message) {\n        return this._addCheck({\n            kind: \"min\",\n            inclusive: true,\n            value: Number.MIN_SAFE_INTEGER,\n            message: errorUtil.toString(message),\n        })._addCheck({\n            kind: \"max\",\n            inclusive: true,\n            value: Number.MAX_SAFE_INTEGER,\n            message: errorUtil.toString(message),\n        });\n    }\n    get minValue() {\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n        }\n        return min;\n    }\n    get maxValue() {\n        let max = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return max;\n    }\n    get isInt() {\n        return !!this._def.checks.find((ch) => ch.kind === \"int\" || (ch.kind === \"multipleOf\" && util.isInteger(ch.value)));\n    }\n    get isFinite() {\n        let max = null;\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"finite\" || ch.kind === \"int\" || ch.kind === \"multipleOf\") {\n                return true;\n            }\n            else if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n            else if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return Number.isFinite(min) && Number.isFinite(max);\n    }\n}\nZodNumber.create = (params) => {\n    return new ZodNumber({\n        checks: [],\n        typeName: ZodFirstPartyTypeKind.ZodNumber,\n        coerce: params?.coerce || false,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodBigInt extends ZodType {\n    constructor() {\n        super(...arguments);\n        this.min = this.gte;\n        this.max = this.lte;\n    }\n    _parse(input) {\n        if (this._def.coerce) {\n            try {\n                input.data = BigInt(input.data);\n            }\n            catch {\n                return this._getInvalidInput(input);\n            }\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.bigint) {\n            return this._getInvalidInput(input);\n        }\n        let ctx = undefined;\n        const status = new ParseStatus();\n        for (const check of this._def.checks) {\n            if (check.kind === \"min\") {\n                const tooSmall = check.inclusive ? input.data < check.value : input.data <= check.value;\n                if (tooSmall) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_small,\n                        type: \"bigint\",\n                        minimum: check.value,\n                        inclusive: check.inclusive,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"max\") {\n                const tooBig = check.inclusive ? input.data > check.value : input.data >= check.value;\n                if (tooBig) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_big,\n                        type: \"bigint\",\n                        maximum: check.value,\n                        inclusive: check.inclusive,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"multipleOf\") {\n                if (input.data % check.value !== BigInt(0)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.not_multiple_of,\n                        multipleOf: check.value,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else {\n                util.assertNever(check);\n            }\n        }\n        return { status: status.value, value: input.data };\n    }\n    _getInvalidInput(input) {\n        const ctx = this._getOrReturnCtx(input);\n        addIssueToContext(ctx, {\n            code: ZodIssueCode.invalid_type,\n            expected: ZodParsedType.bigint,\n            received: ctx.parsedType,\n        });\n        return INVALID;\n    }\n    gte(value, message) {\n        return this.setLimit(\"min\", value, true, errorUtil.toString(message));\n    }\n    gt(value, message) {\n        return this.setLimit(\"min\", value, false, errorUtil.toString(message));\n    }\n    lte(value, message) {\n        return this.setLimit(\"max\", value, true, errorUtil.toString(message));\n    }\n    lt(value, message) {\n        return this.setLimit(\"max\", value, false, errorUtil.toString(message));\n    }\n    setLimit(kind, value, inclusive, message) {\n        return new ZodBigInt({\n            ...this._def,\n            checks: [\n                ...this._def.checks,\n                {\n                    kind,\n                    value,\n                    inclusive,\n                    message: errorUtil.toString(message),\n                },\n            ],\n        });\n    }\n    _addCheck(check) {\n        return new ZodBigInt({\n            ...this._def,\n            checks: [...this._def.checks, check],\n        });\n    }\n    positive(message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: BigInt(0),\n            inclusive: false,\n            message: errorUtil.toString(message),\n        });\n    }\n    negative(message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: BigInt(0),\n            inclusive: false,\n            message: errorUtil.toString(message),\n        });\n    }\n    nonpositive(message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: BigInt(0),\n            inclusive: true,\n            message: errorUtil.toString(message),\n        });\n    }\n    nonnegative(message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: BigInt(0),\n            inclusive: true,\n            message: errorUtil.toString(message),\n        });\n    }\n    multipleOf(value, message) {\n        return this._addCheck({\n            kind: \"multipleOf\",\n            value,\n            message: errorUtil.toString(message),\n        });\n    }\n    get minValue() {\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n        }\n        return min;\n    }\n    get maxValue() {\n        let max = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return max;\n    }\n}\nZodBigInt.create = (params) => {\n    return new ZodBigInt({\n        checks: [],\n        typeName: ZodFirstPartyTypeKind.ZodBigInt,\n        coerce: params?.coerce ?? false,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodBoolean extends ZodType {\n    _parse(input) {\n        if (this._def.coerce) {\n            input.data = Boolean(input.data);\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.boolean) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.boolean,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodBoolean.create = (params) => {\n    return new ZodBoolean({\n        typeName: ZodFirstPartyTypeKind.ZodBoolean,\n        coerce: params?.coerce || false,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodDate extends ZodType {\n    _parse(input) {\n        if (this._def.coerce) {\n            input.data = new Date(input.data);\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.date) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.date,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        if (Number.isNaN(input.data.getTime())) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_date,\n            });\n            return INVALID;\n        }\n        const status = new ParseStatus();\n        let ctx = undefined;\n        for (const check of this._def.checks) {\n            if (check.kind === \"min\") {\n                if (input.data.getTime() < check.value) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_small,\n                        message: check.message,\n                        inclusive: true,\n                        exact: false,\n                        minimum: check.value,\n                        type: \"date\",\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"max\") {\n                if (input.data.getTime() > check.value) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_big,\n                        message: check.message,\n                        inclusive: true,\n                        exact: false,\n                        maximum: check.value,\n                        type: \"date\",\n                    });\n                    status.dirty();\n                }\n            }\n            else {\n                util.assertNever(check);\n            }\n        }\n        return {\n            status: status.value,\n            value: new Date(input.data.getTime()),\n        };\n    }\n    _addCheck(check) {\n        return new ZodDate({\n            ...this._def,\n            checks: [...this._def.checks, check],\n        });\n    }\n    min(minDate, message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: minDate.getTime(),\n            message: errorUtil.toString(message),\n        });\n    }\n    max(maxDate, message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: maxDate.getTime(),\n            message: errorUtil.toString(message),\n        });\n    }\n    get minDate() {\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n        }\n        return min != null ? new Date(min) : null;\n    }\n    get maxDate() {\n        let max = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return max != null ? new Date(max) : null;\n    }\n}\nZodDate.create = (params) => {\n    return new ZodDate({\n        checks: [],\n        coerce: params?.coerce || false,\n        typeName: ZodFirstPartyTypeKind.ZodDate,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodSymbol extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.symbol) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.symbol,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodSymbol.create = (params) => {\n    return new ZodSymbol({\n        typeName: ZodFirstPartyTypeKind.ZodSymbol,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodUndefined extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.undefined) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.undefined,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodUndefined.create = (params) => {\n    return new ZodUndefined({\n        typeName: ZodFirstPartyTypeKind.ZodUndefined,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodNull extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.null) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.null,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodNull.create = (params) => {\n    return new ZodNull({\n        typeName: ZodFirstPartyTypeKind.ZodNull,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodAny extends ZodType {\n    constructor() {\n        super(...arguments);\n        // to prevent instances of other classes from extending ZodAny. this causes issues with catchall in ZodObject.\n        this._any = true;\n    }\n    _parse(input) {\n        return OK(input.data);\n    }\n}\nZodAny.create = (params) => {\n    return new ZodAny({\n        typeName: ZodFirstPartyTypeKind.ZodAny,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodUnknown extends ZodType {\n    constructor() {\n        super(...arguments);\n        // required\n        this._unknown = true;\n    }\n    _parse(input) {\n        return OK(input.data);\n    }\n}\nZodUnknown.create = (params) => {\n    return new ZodUnknown({\n        typeName: ZodFirstPartyTypeKind.ZodUnknown,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodNever extends ZodType {\n    _parse(input) {\n        const ctx = this._getOrReturnCtx(input);\n        addIssueToContext(ctx, {\n            code: ZodIssueCode.invalid_type,\n            expected: ZodParsedType.never,\n            received: ctx.parsedType,\n        });\n        return INVALID;\n    }\n}\nZodNever.create = (params) => {\n    return new ZodNever({\n        typeName: ZodFirstPartyTypeKind.ZodNever,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodVoid extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.undefined) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.void,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodVoid.create = (params) => {\n    return new ZodVoid({\n        typeName: ZodFirstPartyTypeKind.ZodVoid,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodArray extends ZodType {\n    _parse(input) {\n        const { ctx, status } = this._processInputParams(input);\n        const def = this._def;\n        if (ctx.parsedType !== ZodParsedType.array) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.array,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        if (def.exactLength !== null) {\n            const tooBig = ctx.data.length > def.exactLength.value;\n            const tooSmall = ctx.data.length < def.exactLength.value;\n            if (tooBig || tooSmall) {\n                addIssueToContext(ctx, {\n                    code: tooBig ? ZodIssueCode.too_big : ZodIssueCode.too_small,\n                    minimum: (tooSmall ? def.exactLength.value : undefined),\n                    maximum: (tooBig ? def.exactLength.value : undefined),\n                    type: \"array\",\n                    inclusive: true,\n                    exact: true,\n                    message: def.exactLength.message,\n                });\n                status.dirty();\n            }\n        }\n        if (def.minLength !== null) {\n            if (ctx.data.length < def.minLength.value) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.too_small,\n                    minimum: def.minLength.value,\n                    type: \"array\",\n                    inclusive: true,\n                    exact: false,\n                    message: def.minLength.message,\n                });\n                status.dirty();\n            }\n        }\n        if (def.maxLength !== null) {\n            if (ctx.data.length > def.maxLength.value) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.too_big,\n                    maximum: def.maxLength.value,\n                    type: \"array\",\n                    inclusive: true,\n                    exact: false,\n                    message: def.maxLength.message,\n                });\n                status.dirty();\n            }\n        }\n        if (ctx.common.async) {\n            return Promise.all([...ctx.data].map((item, i) => {\n                return def.type._parseAsync(new ParseInputLazyPath(ctx, item, ctx.path, i));\n            })).then((result) => {\n                return ParseStatus.mergeArray(status, result);\n            });\n        }\n        const result = [...ctx.data].map((item, i) => {\n            return def.type._parseSync(new ParseInputLazyPath(ctx, item, ctx.path, i));\n        });\n        return ParseStatus.mergeArray(status, result);\n    }\n    get element() {\n        return this._def.type;\n    }\n    min(minLength, message) {\n        return new ZodArray({\n            ...this._def,\n            minLength: { value: minLength, message: errorUtil.toString(message) },\n        });\n    }\n    max(maxLength, message) {\n        return new ZodArray({\n            ...this._def,\n            maxLength: { value: maxLength, message: errorUtil.toString(message) },\n        });\n    }\n    length(len, message) {\n        return new ZodArray({\n            ...this._def,\n            exactLength: { value: len, message: errorUtil.toString(message) },\n        });\n    }\n    nonempty(message) {\n        return this.min(1, message);\n    }\n}\nZodArray.create = (schema, params) => {\n    return new ZodArray({\n        type: schema,\n        minLength: null,\n        maxLength: null,\n        exactLength: null,\n        typeName: ZodFirstPartyTypeKind.ZodArray,\n        ...processCreateParams(params),\n    });\n};\nfunction deepPartialify(schema) {\n    if (schema instanceof ZodObject) {\n        const newShape = {};\n        for (const key in schema.shape) {\n            const fieldSchema = schema.shape[key];\n            newShape[key] = ZodOptional.create(deepPartialify(fieldSchema));\n        }\n        return new ZodObject({\n            ...schema._def,\n            shape: () => newShape,\n        });\n    }\n    else if (schema instanceof ZodArray) {\n        return new ZodArray({\n            ...schema._def,\n            type: deepPartialify(schema.element),\n        });\n    }\n    else if (schema instanceof ZodOptional) {\n        return ZodOptional.create(deepPartialify(schema.unwrap()));\n    }\n    else if (schema instanceof ZodNullable) {\n        return ZodNullable.create(deepPartialify(schema.unwrap()));\n    }\n    else if (schema instanceof ZodTuple) {\n        return ZodTuple.create(schema.items.map((item) => deepPartialify(item)));\n    }\n    else {\n        return schema;\n    }\n}\nexport class ZodObject extends ZodType {\n    constructor() {\n        super(...arguments);\n        this._cached = null;\n        /**\n         * @deprecated In most cases, this is no longer needed - unknown properties are now silently stripped.\n         * If you want to pass through unknown properties, use `.passthrough()` instead.\n         */\n        this.nonstrict = this.passthrough;\n        // extend<\n        //   Augmentation extends ZodRawShape,\n        //   NewOutput extends util.flatten<{\n        //     [k in keyof Augmentation | keyof Output]: k extends keyof Augmentation\n        //       ? Augmentation[k][\"_output\"]\n        //       : k extends keyof Output\n        //       ? Output[k]\n        //       : never;\n        //   }>,\n        //   NewInput extends util.flatten<{\n        //     [k in keyof Augmentation | keyof Input]: k extends keyof Augmentation\n        //       ? Augmentation[k][\"_input\"]\n        //       : k extends keyof Input\n        //       ? Input[k]\n        //       : never;\n        //   }>\n        // >(\n        //   augmentation: Augmentation\n        // ): ZodObject<\n        //   extendShape<T, Augmentation>,\n        //   UnknownKeys,\n        //   Catchall,\n        //   NewOutput,\n        //   NewInput\n        // > {\n        //   return new ZodObject({\n        //     ...this._def,\n        //     shape: () => ({\n        //       ...this._def.shape(),\n        //       ...augmentation,\n        //     }),\n        //   }) as any;\n        // }\n        /**\n         * @deprecated Use `.extend` instead\n         *  */\n        this.augment = this.extend;\n    }\n    _getCached() {\n        if (this._cached !== null)\n            return this._cached;\n        const shape = this._def.shape();\n        const keys = util.objectKeys(shape);\n        this._cached = { shape, keys };\n        return this._cached;\n    }\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.object) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.object,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const { status, ctx } = this._processInputParams(input);\n        const { shape, keys: shapeKeys } = this._getCached();\n        const extraKeys = [];\n        if (!(this._def.catchall instanceof ZodNever && this._def.unknownKeys === \"strip\")) {\n            for (const key in ctx.data) {\n                if (!shapeKeys.includes(key)) {\n                    extraKeys.push(key);\n                }\n            }\n        }\n        const pairs = [];\n        for (const key of shapeKeys) {\n            const keyValidator = shape[key];\n            const value = ctx.data[key];\n            pairs.push({\n                key: { status: \"valid\", value: key },\n                value: keyValidator._parse(new ParseInputLazyPath(ctx, value, ctx.path, key)),\n                alwaysSet: key in ctx.data,\n            });\n        }\n        if (this._def.catchall instanceof ZodNever) {\n            const unknownKeys = this._def.unknownKeys;\n            if (unknownKeys === \"passthrough\") {\n                for (const key of extraKeys) {\n                    pairs.push({\n                        key: { status: \"valid\", value: key },\n                        value: { status: \"valid\", value: ctx.data[key] },\n                    });\n                }\n            }\n            else if (unknownKeys === \"strict\") {\n                if (extraKeys.length > 0) {\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.unrecognized_keys,\n                        keys: extraKeys,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (unknownKeys === \"strip\") {\n            }\n            else {\n                throw new Error(`Internal ZodObject error: invalid unknownKeys value.`);\n            }\n        }\n        else {\n            // run catchall validation\n            const catchall = this._def.catchall;\n            for (const key of extraKeys) {\n                const value = ctx.data[key];\n                pairs.push({\n                    key: { status: \"valid\", value: key },\n                    value: catchall._parse(new ParseInputLazyPath(ctx, value, ctx.path, key) //, ctx.child(key), value, getParsedType(value)\n                    ),\n                    alwaysSet: key in ctx.data,\n                });\n            }\n        }\n        if (ctx.common.async) {\n            return Promise.resolve()\n                .then(async () => {\n                const syncPairs = [];\n                for (const pair of pairs) {\n                    const key = await pair.key;\n                    const value = await pair.value;\n                    syncPairs.push({\n                        key,\n                        value,\n                        alwaysSet: pair.alwaysSet,\n                    });\n                }\n                return syncPairs;\n            })\n                .then((syncPairs) => {\n                return ParseStatus.mergeObjectSync(status, syncPairs);\n            });\n        }\n        else {\n            return ParseStatus.mergeObjectSync(status, pairs);\n        }\n    }\n    get shape() {\n        return this._def.shape();\n    }\n    strict(message) {\n        errorUtil.errToObj;\n        return new ZodObject({\n            ...this._def,\n            unknownKeys: \"strict\",\n            ...(message !== undefined\n                ? {\n                    errorMap: (issue, ctx) => {\n                        const defaultError = this._def.errorMap?.(issue, ctx).message ?? ctx.defaultError;\n                        if (issue.code === \"unrecognized_keys\")\n                            return {\n                                message: errorUtil.errToObj(message).message ?? defaultError,\n                            };\n                        return {\n                            message: defaultError,\n                        };\n                    },\n                }\n                : {}),\n        });\n    }\n    strip() {\n        return new ZodObject({\n            ...this._def,\n            unknownKeys: \"strip\",\n        });\n    }\n    passthrough() {\n        return new ZodObject({\n            ...this._def,\n            unknownKeys: \"passthrough\",\n        });\n    }\n    // const AugmentFactory =\n    //   <Def extends ZodObjectDef>(def: Def) =>\n    //   <Augmentation extends ZodRawShape>(\n    //     augmentation: Augmentation\n    //   ): ZodObject<\n    //     extendShape<ReturnType<Def[\"shape\"]>, Augmentation>,\n    //     Def[\"unknownKeys\"],\n    //     Def[\"catchall\"]\n    //   > => {\n    //     return new ZodObject({\n    //       ...def,\n    //       shape: () => ({\n    //         ...def.shape(),\n    //         ...augmentation,\n    //       }),\n    //     }) as any;\n    //   };\n    extend(augmentation) {\n        return new ZodObject({\n            ...this._def,\n            shape: () => ({\n                ...this._def.shape(),\n                ...augmentation,\n            }),\n        });\n    }\n    /**\n     * Prior to zod@1.0.12 there was a bug in the\n     * inferred type of merged objects. Please\n     * upgrade if you are experiencing issues.\n     */\n    merge(merging) {\n        const merged = new ZodObject({\n            unknownKeys: merging._def.unknownKeys,\n            catchall: merging._def.catchall,\n            shape: () => ({\n                ...this._def.shape(),\n                ...merging._def.shape(),\n            }),\n            typeName: ZodFirstPartyTypeKind.ZodObject,\n        });\n        return merged;\n    }\n    // merge<\n    //   Incoming extends AnyZodObject,\n    //   Augmentation extends Incoming[\"shape\"],\n    //   NewOutput extends {\n    //     [k in keyof Augmentation | keyof Output]: k extends keyof Augmentation\n    //       ? Augmentation[k][\"_output\"]\n    //       : k extends keyof Output\n    //       ? Output[k]\n    //       : never;\n    //   },\n    //   NewInput extends {\n    //     [k in keyof Augmentation | keyof Input]: k extends keyof Augmentation\n    //       ? Augmentation[k][\"_input\"]\n    //       : k extends keyof Input\n    //       ? Input[k]\n    //       : never;\n    //   }\n    // >(\n    //   merging: Incoming\n    // ): ZodObject<\n    //   extendShape<T, ReturnType<Incoming[\"_def\"][\"shape\"]>>,\n    //   Incoming[\"_def\"][\"unknownKeys\"],\n    //   Incoming[\"_def\"][\"catchall\"],\n    //   NewOutput,\n    //   NewInput\n    // > {\n    //   const merged: any = new ZodObject({\n    //     unknownKeys: merging._def.unknownKeys,\n    //     catchall: merging._def.catchall,\n    //     shape: () =>\n    //       objectUtil.mergeShapes(this._def.shape(), merging._def.shape()),\n    //     typeName: ZodFirstPartyTypeKind.ZodObject,\n    //   }) as any;\n    //   return merged;\n    // }\n    setKey(key, schema) {\n        return this.augment({ [key]: schema });\n    }\n    // merge<Incoming extends AnyZodObject>(\n    //   merging: Incoming\n    // ): //ZodObject<T & Incoming[\"_shape\"], UnknownKeys, Catchall> = (merging) => {\n    // ZodObject<\n    //   extendShape<T, ReturnType<Incoming[\"_def\"][\"shape\"]>>,\n    //   Incoming[\"_def\"][\"unknownKeys\"],\n    //   Incoming[\"_def\"][\"catchall\"]\n    // > {\n    //   // const mergedShape = objectUtil.mergeShapes(\n    //   //   this._def.shape(),\n    //   //   merging._def.shape()\n    //   // );\n    //   const merged: any = new ZodObject({\n    //     unknownKeys: merging._def.unknownKeys,\n    //     catchall: merging._def.catchall,\n    //     shape: () =>\n    //       objectUtil.mergeShapes(this._def.shape(), merging._def.shape()),\n    //     typeName: ZodFirstPartyTypeKind.ZodObject,\n    //   }) as any;\n    //   return merged;\n    // }\n    catchall(index) {\n        return new ZodObject({\n            ...this._def,\n            catchall: index,\n        });\n    }\n    pick(mask) {\n        const shape = {};\n        for (const key of util.objectKeys(mask)) {\n            if (mask[key] && this.shape[key]) {\n                shape[key] = this.shape[key];\n            }\n        }\n        return new ZodObject({\n            ...this._def,\n            shape: () => shape,\n        });\n    }\n    omit(mask) {\n        const shape = {};\n        for (const key of util.objectKeys(this.shape)) {\n            if (!mask[key]) {\n                shape[key] = this.shape[key];\n            }\n        }\n        return new ZodObject({\n            ...this._def,\n            shape: () => shape,\n        });\n    }\n    /**\n     * @deprecated\n     */\n    deepPartial() {\n        return deepPartialify(this);\n    }\n    partial(mask) {\n        const newShape = {};\n        for (const key of util.objectKeys(this.shape)) {\n            const fieldSchema = this.shape[key];\n            if (mask && !mask[key]) {\n                newShape[key] = fieldSchema;\n            }\n            else {\n                newShape[key] = fieldSchema.optional();\n            }\n        }\n        return new ZodObject({\n            ...this._def,\n            shape: () => newShape,\n        });\n    }\n    required(mask) {\n        const newShape = {};\n        for (const key of util.objectKeys(this.shape)) {\n            if (mask && !mask[key]) {\n                newShape[key] = this.shape[key];\n            }\n            else {\n                const fieldSchema = this.shape[key];\n                let newField = fieldSchema;\n                while (newField instanceof ZodOptional) {\n                    newField = newField._def.innerType;\n                }\n                newShape[key] = newField;\n            }\n        }\n        return new ZodObject({\n            ...this._def,\n            shape: () => newShape,\n        });\n    }\n    keyof() {\n        return createZodEnum(util.objectKeys(this.shape));\n    }\n}\nZodObject.create = (shape, params) => {\n    return new ZodObject({\n        shape: () => shape,\n        unknownKeys: \"strip\",\n        catchall: ZodNever.create(),\n        typeName: ZodFirstPartyTypeKind.ZodObject,\n        ...processCreateParams(params),\n    });\n};\nZodObject.strictCreate = (shape, params) => {\n    return new ZodObject({\n        shape: () => shape,\n        unknownKeys: \"strict\",\n        catchall: ZodNever.create(),\n        typeName: ZodFirstPartyTypeKind.ZodObject,\n        ...processCreateParams(params),\n    });\n};\nZodObject.lazycreate = (shape, params) => {\n    return new ZodObject({\n        shape,\n        unknownKeys: \"strip\",\n        catchall: ZodNever.create(),\n        typeName: ZodFirstPartyTypeKind.ZodObject,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodUnion extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        const options = this._def.options;\n        function handleResults(results) {\n            // return first issue-free validation if it exists\n            for (const result of results) {\n                if (result.result.status === \"valid\") {\n                    return result.result;\n                }\n            }\n            for (const result of results) {\n                if (result.result.status === \"dirty\") {\n                    // add issues from dirty option\n                    ctx.common.issues.push(...result.ctx.common.issues);\n                    return result.result;\n                }\n            }\n            // return invalid\n            const unionErrors = results.map((result) => new ZodError(result.ctx.common.issues));\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_union,\n                unionErrors,\n            });\n            return INVALID;\n        }\n        if (ctx.common.async) {\n            return Promise.all(options.map(async (option) => {\n                const childCtx = {\n                    ...ctx,\n                    common: {\n                        ...ctx.common,\n                        issues: [],\n                    },\n                    parent: null,\n                };\n                return {\n                    result: await option._parseAsync({\n                        data: ctx.data,\n                        path: ctx.path,\n                        parent: childCtx,\n                    }),\n                    ctx: childCtx,\n                };\n            })).then(handleResults);\n        }\n        else {\n            let dirty = undefined;\n            const issues = [];\n            for (const option of options) {\n                const childCtx = {\n                    ...ctx,\n                    common: {\n                        ...ctx.common,\n                        issues: [],\n                    },\n                    parent: null,\n                };\n                const result = option._parseSync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: childCtx,\n                });\n                if (result.status === \"valid\") {\n                    return result;\n                }\n                else if (result.status === \"dirty\" && !dirty) {\n                    dirty = { result, ctx: childCtx };\n                }\n                if (childCtx.common.issues.length) {\n                    issues.push(childCtx.common.issues);\n                }\n            }\n            if (dirty) {\n                ctx.common.issues.push(...dirty.ctx.common.issues);\n                return dirty.result;\n            }\n            const unionErrors = issues.map((issues) => new ZodError(issues));\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_union,\n                unionErrors,\n            });\n            return INVALID;\n        }\n    }\n    get options() {\n        return this._def.options;\n    }\n}\nZodUnion.create = (types, params) => {\n    return new ZodUnion({\n        options: types,\n        typeName: ZodFirstPartyTypeKind.ZodUnion,\n        ...processCreateParams(params),\n    });\n};\n/////////////////////////////////////////////////////\n/////////////////////////////////////////////////////\n//////////                                 //////////\n//////////      ZodDiscriminatedUnion      //////////\n//////////                                 //////////\n/////////////////////////////////////////////////////\n/////////////////////////////////////////////////////\nconst getDiscriminator = (type) => {\n    if (type instanceof ZodLazy) {\n        return getDiscriminator(type.schema);\n    }\n    else if (type instanceof ZodEffects) {\n        return getDiscriminator(type.innerType());\n    }\n    else if (type instanceof ZodLiteral) {\n        return [type.value];\n    }\n    else if (type instanceof ZodEnum) {\n        return type.options;\n    }\n    else if (type instanceof ZodNativeEnum) {\n        // eslint-disable-next-line ban/ban\n        return util.objectValues(type.enum);\n    }\n    else if (type instanceof ZodDefault) {\n        return getDiscriminator(type._def.innerType);\n    }\n    else if (type instanceof ZodUndefined) {\n        return [undefined];\n    }\n    else if (type instanceof ZodNull) {\n        return [null];\n    }\n    else if (type instanceof ZodOptional) {\n        return [undefined, ...getDiscriminator(type.unwrap())];\n    }\n    else if (type instanceof ZodNullable) {\n        return [null, ...getDiscriminator(type.unwrap())];\n    }\n    else if (type instanceof ZodBranded) {\n        return getDiscriminator(type.unwrap());\n    }\n    else if (type instanceof ZodReadonly) {\n        return getDiscriminator(type.unwrap());\n    }\n    else if (type instanceof ZodCatch) {\n        return getDiscriminator(type._def.innerType);\n    }\n    else {\n        return [];\n    }\n};\nexport class ZodDiscriminatedUnion extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.object) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.object,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const discriminator = this.discriminator;\n        const discriminatorValue = ctx.data[discriminator];\n        const option = this.optionsMap.get(discriminatorValue);\n        if (!option) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_union_discriminator,\n                options: Array.from(this.optionsMap.keys()),\n                path: [discriminator],\n            });\n            return INVALID;\n        }\n        if (ctx.common.async) {\n            return option._parseAsync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            });\n        }\n        else {\n            return option._parseSync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            });\n        }\n    }\n    get discriminator() {\n        return this._def.discriminator;\n    }\n    get options() {\n        return this._def.options;\n    }\n    get optionsMap() {\n        return this._def.optionsMap;\n    }\n    /**\n     * The constructor of the discriminated union schema. Its behaviour is very similar to that of the normal z.union() constructor.\n     * However, it only allows a union of objects, all of which need to share a discriminator property. This property must\n     * have a different value for each object in the union.\n     * @param discriminator the name of the discriminator property\n     * @param types an array of object schemas\n     * @param params\n     */\n    static create(discriminator, options, params) {\n        // Get all the valid discriminator values\n        const optionsMap = new Map();\n        // try {\n        for (const type of options) {\n            const discriminatorValues = getDiscriminator(type.shape[discriminator]);\n            if (!discriminatorValues.length) {\n                throw new Error(`A discriminator value for key \\`${discriminator}\\` could not be extracted from all schema options`);\n            }\n            for (const value of discriminatorValues) {\n                if (optionsMap.has(value)) {\n                    throw new Error(`Discriminator property ${String(discriminator)} has duplicate value ${String(value)}`);\n                }\n                optionsMap.set(value, type);\n            }\n        }\n        return new ZodDiscriminatedUnion({\n            typeName: ZodFirstPartyTypeKind.ZodDiscriminatedUnion,\n            discriminator,\n            options,\n            optionsMap,\n            ...processCreateParams(params),\n        });\n    }\n}\nfunction mergeValues(a, b) {\n    const aType = getParsedType(a);\n    const bType = getParsedType(b);\n    if (a === b) {\n        return { valid: true, data: a };\n    }\n    else if (aType === ZodParsedType.object && bType === ZodParsedType.object) {\n        const bKeys = util.objectKeys(b);\n        const sharedKeys = util.objectKeys(a).filter((key) => bKeys.indexOf(key) !== -1);\n        const newObj = { ...a, ...b };\n        for (const key of sharedKeys) {\n            const sharedValue = mergeValues(a[key], b[key]);\n            if (!sharedValue.valid) {\n                return { valid: false };\n            }\n            newObj[key] = sharedValue.data;\n        }\n        return { valid: true, data: newObj };\n    }\n    else if (aType === ZodParsedType.array && bType === ZodParsedType.array) {\n        if (a.length !== b.length) {\n            return { valid: false };\n        }\n        const newArray = [];\n        for (let index = 0; index < a.length; index++) {\n            const itemA = a[index];\n            const itemB = b[index];\n            const sharedValue = mergeValues(itemA, itemB);\n            if (!sharedValue.valid) {\n                return { valid: false };\n            }\n            newArray.push(sharedValue.data);\n        }\n        return { valid: true, data: newArray };\n    }\n    else if (aType === ZodParsedType.date && bType === ZodParsedType.date && +a === +b) {\n        return { valid: true, data: a };\n    }\n    else {\n        return { valid: false };\n    }\n}\nexport class ZodIntersection extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        const handleParsed = (parsedLeft, parsedRight) => {\n            if (isAborted(parsedLeft) || isAborted(parsedRight)) {\n                return INVALID;\n            }\n            const merged = mergeValues(parsedLeft.value, parsedRight.value);\n            if (!merged.valid) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.invalid_intersection_types,\n                });\n                return INVALID;\n            }\n            if (isDirty(parsedLeft) || isDirty(parsedRight)) {\n                status.dirty();\n            }\n            return { status: status.value, value: merged.data };\n        };\n        if (ctx.common.async) {\n            return Promise.all([\n                this._def.left._parseAsync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                }),\n                this._def.right._parseAsync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                }),\n            ]).then(([left, right]) => handleParsed(left, right));\n        }\n        else {\n            return handleParsed(this._def.left._parseSync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            }), this._def.right._parseSync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            }));\n        }\n    }\n}\nZodIntersection.create = (left, right, params) => {\n    return new ZodIntersection({\n        left: left,\n        right: right,\n        typeName: ZodFirstPartyTypeKind.ZodIntersection,\n        ...processCreateParams(params),\n    });\n};\n// type ZodTupleItems = [ZodTypeAny, ...ZodTypeAny[]];\nexport class ZodTuple extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.array) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.array,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        if (ctx.data.length < this._def.items.length) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.too_small,\n                minimum: this._def.items.length,\n                inclusive: true,\n                exact: false,\n                type: \"array\",\n            });\n            return INVALID;\n        }\n        const rest = this._def.rest;\n        if (!rest && ctx.data.length > this._def.items.length) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.too_big,\n                maximum: this._def.items.length,\n                inclusive: true,\n                exact: false,\n                type: \"array\",\n            });\n            status.dirty();\n        }\n        const items = [...ctx.data]\n            .map((item, itemIndex) => {\n            const schema = this._def.items[itemIndex] || this._def.rest;\n            if (!schema)\n                return null;\n            return schema._parse(new ParseInputLazyPath(ctx, item, ctx.path, itemIndex));\n        })\n            .filter((x) => !!x); // filter nulls\n        if (ctx.common.async) {\n            return Promise.all(items).then((results) => {\n                return ParseStatus.mergeArray(status, results);\n            });\n        }\n        else {\n            return ParseStatus.mergeArray(status, items);\n        }\n    }\n    get items() {\n        return this._def.items;\n    }\n    rest(rest) {\n        return new ZodTuple({\n            ...this._def,\n            rest,\n        });\n    }\n}\nZodTuple.create = (schemas, params) => {\n    if (!Array.isArray(schemas)) {\n        throw new Error(\"You must pass an array of schemas to z.tuple([ ... ])\");\n    }\n    return new ZodTuple({\n        items: schemas,\n        typeName: ZodFirstPartyTypeKind.ZodTuple,\n        rest: null,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodRecord extends ZodType {\n    get keySchema() {\n        return this._def.keyType;\n    }\n    get valueSchema() {\n        return this._def.valueType;\n    }\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.object) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.object,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const pairs = [];\n        const keyType = this._def.keyType;\n        const valueType = this._def.valueType;\n        for (const key in ctx.data) {\n            pairs.push({\n                key: keyType._parse(new ParseInputLazyPath(ctx, key, ctx.path, key)),\n                value: valueType._parse(new ParseInputLazyPath(ctx, ctx.data[key], ctx.path, key)),\n                alwaysSet: key in ctx.data,\n            });\n        }\n        if (ctx.common.async) {\n            return ParseStatus.mergeObjectAsync(status, pairs);\n        }\n        else {\n            return ParseStatus.mergeObjectSync(status, pairs);\n        }\n    }\n    get element() {\n        return this._def.valueType;\n    }\n    static create(first, second, third) {\n        if (second instanceof ZodType) {\n            return new ZodRecord({\n                keyType: first,\n                valueType: second,\n                typeName: ZodFirstPartyTypeKind.ZodRecord,\n                ...processCreateParams(third),\n            });\n        }\n        return new ZodRecord({\n            keyType: ZodString.create(),\n            valueType: first,\n            typeName: ZodFirstPartyTypeKind.ZodRecord,\n            ...processCreateParams(second),\n        });\n    }\n}\nexport class ZodMap extends ZodType {\n    get keySchema() {\n        return this._def.keyType;\n    }\n    get valueSchema() {\n        return this._def.valueType;\n    }\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.map) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.map,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const keyType = this._def.keyType;\n        const valueType = this._def.valueType;\n        const pairs = [...ctx.data.entries()].map(([key, value], index) => {\n            return {\n                key: keyType._parse(new ParseInputLazyPath(ctx, key, ctx.path, [index, \"key\"])),\n                value: valueType._parse(new ParseInputLazyPath(ctx, value, ctx.path, [index, \"value\"])),\n            };\n        });\n        if (ctx.common.async) {\n            const finalMap = new Map();\n            return Promise.resolve().then(async () => {\n                for (const pair of pairs) {\n                    const key = await pair.key;\n                    const value = await pair.value;\n                    if (key.status === \"aborted\" || value.status === \"aborted\") {\n                        return INVALID;\n                    }\n                    if (key.status === \"dirty\" || value.status === \"dirty\") {\n                        status.dirty();\n                    }\n                    finalMap.set(key.value, value.value);\n                }\n                return { status: status.value, value: finalMap };\n            });\n        }\n        else {\n            const finalMap = new Map();\n            for (const pair of pairs) {\n                const key = pair.key;\n                const value = pair.value;\n                if (key.status === \"aborted\" || value.status === \"aborted\") {\n                    return INVALID;\n                }\n                if (key.status === \"dirty\" || value.status === \"dirty\") {\n                    status.dirty();\n                }\n                finalMap.set(key.value, value.value);\n            }\n            return { status: status.value, value: finalMap };\n        }\n    }\n}\nZodMap.create = (keyType, valueType, params) => {\n    return new ZodMap({\n        valueType,\n        keyType,\n        typeName: ZodFirstPartyTypeKind.ZodMap,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodSet extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.set) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.set,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const def = this._def;\n        if (def.minSize !== null) {\n            if (ctx.data.size < def.minSize.value) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.too_small,\n                    minimum: def.minSize.value,\n                    type: \"set\",\n                    inclusive: true,\n                    exact: false,\n                    message: def.minSize.message,\n                });\n                status.dirty();\n            }\n        }\n        if (def.maxSize !== null) {\n            if (ctx.data.size > def.maxSize.value) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.too_big,\n                    maximum: def.maxSize.value,\n                    type: \"set\",\n                    inclusive: true,\n                    exact: false,\n                    message: def.maxSize.message,\n                });\n                status.dirty();\n            }\n        }\n        const valueType = this._def.valueType;\n        function finalizeSet(elements) {\n            const parsedSet = new Set();\n            for (const element of elements) {\n                if (element.status === \"aborted\")\n                    return INVALID;\n                if (element.status === \"dirty\")\n                    status.dirty();\n                parsedSet.add(element.value);\n            }\n            return { status: status.value, value: parsedSet };\n        }\n        const elements = [...ctx.data.values()].map((item, i) => valueType._parse(new ParseInputLazyPath(ctx, item, ctx.path, i)));\n        if (ctx.common.async) {\n            return Promise.all(elements).then((elements) => finalizeSet(elements));\n        }\n        else {\n            return finalizeSet(elements);\n        }\n    }\n    min(minSize, message) {\n        return new ZodSet({\n            ...this._def,\n            minSize: { value: minSize, message: errorUtil.toString(message) },\n        });\n    }\n    max(maxSize, message) {\n        return new ZodSet({\n            ...this._def,\n            maxSize: { value: maxSize, message: errorUtil.toString(message) },\n        });\n    }\n    size(size, message) {\n        return this.min(size, message).max(size, message);\n    }\n    nonempty(message) {\n        return this.min(1, message);\n    }\n}\nZodSet.create = (valueType, params) => {\n    return new ZodSet({\n        valueType,\n        minSize: null,\n        maxSize: null,\n        typeName: ZodFirstPartyTypeKind.ZodSet,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodFunction extends ZodType {\n    constructor() {\n        super(...arguments);\n        this.validate = this.implement;\n    }\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.function) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.function,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        function makeArgsIssue(args, error) {\n            return makeIssue({\n                data: args,\n                path: ctx.path,\n                errorMaps: [ctx.common.contextualErrorMap, ctx.schemaErrorMap, getErrorMap(), defaultErrorMap].filter((x) => !!x),\n                issueData: {\n                    code: ZodIssueCode.invalid_arguments,\n                    argumentsError: error,\n                },\n            });\n        }\n        function makeReturnsIssue(returns, error) {\n            return makeIssue({\n                data: returns,\n                path: ctx.path,\n                errorMaps: [ctx.common.contextualErrorMap, ctx.schemaErrorMap, getErrorMap(), defaultErrorMap].filter((x) => !!x),\n                issueData: {\n                    code: ZodIssueCode.invalid_return_type,\n                    returnTypeError: error,\n                },\n            });\n        }\n        const params = { errorMap: ctx.common.contextualErrorMap };\n        const fn = ctx.data;\n        if (this._def.returns instanceof ZodPromise) {\n            // Would love a way to avoid disabling this rule, but we need\n            // an alias (using an arrow function was what caused 2651).\n            // eslint-disable-next-line @typescript-eslint/no-this-alias\n            const me = this;\n            return OK(async function (...args) {\n                const error = new ZodError([]);\n                const parsedArgs = await me._def.args.parseAsync(args, params).catch((e) => {\n                    error.addIssue(makeArgsIssue(args, e));\n                    throw error;\n                });\n                const result = await Reflect.apply(fn, this, parsedArgs);\n                const parsedReturns = await me._def.returns._def.type\n                    .parseAsync(result, params)\n                    .catch((e) => {\n                    error.addIssue(makeReturnsIssue(result, e));\n                    throw error;\n                });\n                return parsedReturns;\n            });\n        }\n        else {\n            // Would love a way to avoid disabling this rule, but we need\n            // an alias (using an arrow function was what caused 2651).\n            // eslint-disable-next-line @typescript-eslint/no-this-alias\n            const me = this;\n            return OK(function (...args) {\n                const parsedArgs = me._def.args.safeParse(args, params);\n                if (!parsedArgs.success) {\n                    throw new ZodError([makeArgsIssue(args, parsedArgs.error)]);\n                }\n                const result = Reflect.apply(fn, this, parsedArgs.data);\n                const parsedReturns = me._def.returns.safeParse(result, params);\n                if (!parsedReturns.success) {\n                    throw new ZodError([makeReturnsIssue(result, parsedReturns.error)]);\n                }\n                return parsedReturns.data;\n            });\n        }\n    }\n    parameters() {\n        return this._def.args;\n    }\n    returnType() {\n        return this._def.returns;\n    }\n    args(...items) {\n        return new ZodFunction({\n            ...this._def,\n            args: ZodTuple.create(items).rest(ZodUnknown.create()),\n        });\n    }\n    returns(returnType) {\n        return new ZodFunction({\n            ...this._def,\n            returns: returnType,\n        });\n    }\n    implement(func) {\n        const validatedFunc = this.parse(func);\n        return validatedFunc;\n    }\n    strictImplement(func) {\n        const validatedFunc = this.parse(func);\n        return validatedFunc;\n    }\n    static create(args, returns, params) {\n        return new ZodFunction({\n            args: (args ? args : ZodTuple.create([]).rest(ZodUnknown.create())),\n            returns: returns || ZodUnknown.create(),\n            typeName: ZodFirstPartyTypeKind.ZodFunction,\n            ...processCreateParams(params),\n        });\n    }\n}\nexport class ZodLazy extends ZodType {\n    get schema() {\n        return this._def.getter();\n    }\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        const lazySchema = this._def.getter();\n        return lazySchema._parse({ data: ctx.data, path: ctx.path, parent: ctx });\n    }\n}\nZodLazy.create = (getter, params) => {\n    return new ZodLazy({\n        getter: getter,\n        typeName: ZodFirstPartyTypeKind.ZodLazy,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodLiteral extends ZodType {\n    _parse(input) {\n        if (input.data !== this._def.value) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                received: ctx.data,\n                code: ZodIssueCode.invalid_literal,\n                expected: this._def.value,\n            });\n            return INVALID;\n        }\n        return { status: \"valid\", value: input.data };\n    }\n    get value() {\n        return this._def.value;\n    }\n}\nZodLiteral.create = (value, params) => {\n    return new ZodLiteral({\n        value: value,\n        typeName: ZodFirstPartyTypeKind.ZodLiteral,\n        ...processCreateParams(params),\n    });\n};\nfunction createZodEnum(values, params) {\n    return new ZodEnum({\n        values,\n        typeName: ZodFirstPartyTypeKind.ZodEnum,\n        ...processCreateParams(params),\n    });\n}\nexport class ZodEnum extends ZodType {\n    _parse(input) {\n        if (typeof input.data !== \"string\") {\n            const ctx = this._getOrReturnCtx(input);\n            const expectedValues = this._def.values;\n            addIssueToContext(ctx, {\n                expected: util.joinValues(expectedValues),\n                received: ctx.parsedType,\n                code: ZodIssueCode.invalid_type,\n            });\n            return INVALID;\n        }\n        if (!this._cache) {\n            this._cache = new Set(this._def.values);\n        }\n        if (!this._cache.has(input.data)) {\n            const ctx = this._getOrReturnCtx(input);\n            const expectedValues = this._def.values;\n            addIssueToContext(ctx, {\n                received: ctx.data,\n                code: ZodIssueCode.invalid_enum_value,\n                options: expectedValues,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n    get options() {\n        return this._def.values;\n    }\n    get enum() {\n        const enumValues = {};\n        for (const val of this._def.values) {\n            enumValues[val] = val;\n        }\n        return enumValues;\n    }\n    get Values() {\n        const enumValues = {};\n        for (const val of this._def.values) {\n            enumValues[val] = val;\n        }\n        return enumValues;\n    }\n    get Enum() {\n        const enumValues = {};\n        for (const val of this._def.values) {\n            enumValues[val] = val;\n        }\n        return enumValues;\n    }\n    extract(values, newDef = this._def) {\n        return ZodEnum.create(values, {\n            ...this._def,\n            ...newDef,\n        });\n    }\n    exclude(values, newDef = this._def) {\n        return ZodEnum.create(this.options.filter((opt) => !values.includes(opt)), {\n            ...this._def,\n            ...newDef,\n        });\n    }\n}\nZodEnum.create = createZodEnum;\nexport class ZodNativeEnum extends ZodType {\n    _parse(input) {\n        const nativeEnumValues = util.getValidEnumValues(this._def.values);\n        const ctx = this._getOrReturnCtx(input);\n        if (ctx.parsedType !== ZodParsedType.string && ctx.parsedType !== ZodParsedType.number) {\n            const expectedValues = util.objectValues(nativeEnumValues);\n            addIssueToContext(ctx, {\n                expected: util.joinValues(expectedValues),\n                received: ctx.parsedType,\n                code: ZodIssueCode.invalid_type,\n            });\n            return INVALID;\n        }\n        if (!this._cache) {\n            this._cache = new Set(util.getValidEnumValues(this._def.values));\n        }\n        if (!this._cache.has(input.data)) {\n            const expectedValues = util.objectValues(nativeEnumValues);\n            addIssueToContext(ctx, {\n                received: ctx.data,\n                code: ZodIssueCode.invalid_enum_value,\n                options: expectedValues,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n    get enum() {\n        return this._def.values;\n    }\n}\nZodNativeEnum.create = (values, params) => {\n    return new ZodNativeEnum({\n        values: values,\n        typeName: ZodFirstPartyTypeKind.ZodNativeEnum,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodPromise extends ZodType {\n    unwrap() {\n        return this._def.type;\n    }\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.promise && ctx.common.async === false) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.promise,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const promisified = ctx.parsedType === ZodParsedType.promise ? ctx.data : Promise.resolve(ctx.data);\n        return OK(promisified.then((data) => {\n            return this._def.type.parseAsync(data, {\n                path: ctx.path,\n                errorMap: ctx.common.contextualErrorMap,\n            });\n        }));\n    }\n}\nZodPromise.create = (schema, params) => {\n    return new ZodPromise({\n        type: schema,\n        typeName: ZodFirstPartyTypeKind.ZodPromise,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodEffects extends ZodType {\n    innerType() {\n        return this._def.schema;\n    }\n    sourceType() {\n        return this._def.schema._def.typeName === ZodFirstPartyTypeKind.ZodEffects\n            ? this._def.schema.sourceType()\n            : this._def.schema;\n    }\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        const effect = this._def.effect || null;\n        const checkCtx = {\n            addIssue: (arg) => {\n                addIssueToContext(ctx, arg);\n                if (arg.fatal) {\n                    status.abort();\n                }\n                else {\n                    status.dirty();\n                }\n            },\n            get path() {\n                return ctx.path;\n            },\n        };\n        checkCtx.addIssue = checkCtx.addIssue.bind(checkCtx);\n        if (effect.type === \"preprocess\") {\n            const processed = effect.transform(ctx.data, checkCtx);\n            if (ctx.common.async) {\n                return Promise.resolve(processed).then(async (processed) => {\n                    if (status.value === \"aborted\")\n                        return INVALID;\n                    const result = await this._def.schema._parseAsync({\n                        data: processed,\n                        path: ctx.path,\n                        parent: ctx,\n                    });\n                    if (result.status === \"aborted\")\n                        return INVALID;\n                    if (result.status === \"dirty\")\n                        return DIRTY(result.value);\n                    if (status.value === \"dirty\")\n                        return DIRTY(result.value);\n                    return result;\n                });\n            }\n            else {\n                if (status.value === \"aborted\")\n                    return INVALID;\n                const result = this._def.schema._parseSync({\n                    data: processed,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n                if (result.status === \"aborted\")\n                    return INVALID;\n                if (result.status === \"dirty\")\n                    return DIRTY(result.value);\n                if (status.value === \"dirty\")\n                    return DIRTY(result.value);\n                return result;\n            }\n        }\n        if (effect.type === \"refinement\") {\n            const executeRefinement = (acc) => {\n                const result = effect.refinement(acc, checkCtx);\n                if (ctx.common.async) {\n                    return Promise.resolve(result);\n                }\n                if (result instanceof Promise) {\n                    throw new Error(\"Async refinement encountered during synchronous parse operation. Use .parseAsync instead.\");\n                }\n                return acc;\n            };\n            if (ctx.common.async === false) {\n                const inner = this._def.schema._parseSync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n                if (inner.status === \"aborted\")\n                    return INVALID;\n                if (inner.status === \"dirty\")\n                    status.dirty();\n                // return value is ignored\n                executeRefinement(inner.value);\n                return { status: status.value, value: inner.value };\n            }\n            else {\n                return this._def.schema._parseAsync({ data: ctx.data, path: ctx.path, parent: ctx }).then((inner) => {\n                    if (inner.status === \"aborted\")\n                        return INVALID;\n                    if (inner.status === \"dirty\")\n                        status.dirty();\n                    return executeRefinement(inner.value).then(() => {\n                        return { status: status.value, value: inner.value };\n                    });\n                });\n            }\n        }\n        if (effect.type === \"transform\") {\n            if (ctx.common.async === false) {\n                const base = this._def.schema._parseSync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n                if (!isValid(base))\n                    return INVALID;\n                const result = effect.transform(base.value, checkCtx);\n                if (result instanceof Promise) {\n                    throw new Error(`Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.`);\n                }\n                return { status: status.value, value: result };\n            }\n            else {\n                return this._def.schema._parseAsync({ data: ctx.data, path: ctx.path, parent: ctx }).then((base) => {\n                    if (!isValid(base))\n                        return INVALID;\n                    return Promise.resolve(effect.transform(base.value, checkCtx)).then((result) => ({\n                        status: status.value,\n                        value: result,\n                    }));\n                });\n            }\n        }\n        util.assertNever(effect);\n    }\n}\nZodEffects.create = (schema, effect, params) => {\n    return new ZodEffects({\n        schema,\n        typeName: ZodFirstPartyTypeKind.ZodEffects,\n        effect,\n        ...processCreateParams(params),\n    });\n};\nZodEffects.createWithPreprocess = (preprocess, schema, params) => {\n    return new ZodEffects({\n        schema,\n        effect: { type: \"preprocess\", transform: preprocess },\n        typeName: ZodFirstPartyTypeKind.ZodEffects,\n        ...processCreateParams(params),\n    });\n};\nexport { ZodEffects as ZodTransformer };\nexport class ZodOptional extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType === ZodParsedType.undefined) {\n            return OK(undefined);\n        }\n        return this._def.innerType._parse(input);\n    }\n    unwrap() {\n        return this._def.innerType;\n    }\n}\nZodOptional.create = (type, params) => {\n    return new ZodOptional({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodOptional,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodNullable extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType === ZodParsedType.null) {\n            return OK(null);\n        }\n        return this._def.innerType._parse(input);\n    }\n    unwrap() {\n        return this._def.innerType;\n    }\n}\nZodNullable.create = (type, params) => {\n    return new ZodNullable({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodNullable,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodDefault extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        let data = ctx.data;\n        if (ctx.parsedType === ZodParsedType.undefined) {\n            data = this._def.defaultValue();\n        }\n        return this._def.innerType._parse({\n            data,\n            path: ctx.path,\n            parent: ctx,\n        });\n    }\n    removeDefault() {\n        return this._def.innerType;\n    }\n}\nZodDefault.create = (type, params) => {\n    return new ZodDefault({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodDefault,\n        defaultValue: typeof params.default === \"function\" ? params.default : () => params.default,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodCatch extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        // newCtx is used to not collect issues from inner types in ctx\n        const newCtx = {\n            ...ctx,\n            common: {\n                ...ctx.common,\n                issues: [],\n            },\n        };\n        const result = this._def.innerType._parse({\n            data: newCtx.data,\n            path: newCtx.path,\n            parent: {\n                ...newCtx,\n            },\n        });\n        if (isAsync(result)) {\n            return result.then((result) => {\n                return {\n                    status: \"valid\",\n                    value: result.status === \"valid\"\n                        ? result.value\n                        : this._def.catchValue({\n                            get error() {\n                                return new ZodError(newCtx.common.issues);\n                            },\n                            input: newCtx.data,\n                        }),\n                };\n            });\n        }\n        else {\n            return {\n                status: \"valid\",\n                value: result.status === \"valid\"\n                    ? result.value\n                    : this._def.catchValue({\n                        get error() {\n                            return new ZodError(newCtx.common.issues);\n                        },\n                        input: newCtx.data,\n                    }),\n            };\n        }\n    }\n    removeCatch() {\n        return this._def.innerType;\n    }\n}\nZodCatch.create = (type, params) => {\n    return new ZodCatch({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodCatch,\n        catchValue: typeof params.catch === \"function\" ? params.catch : () => params.catch,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodNaN extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.nan) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.nan,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return { status: \"valid\", value: input.data };\n    }\n}\nZodNaN.create = (params) => {\n    return new ZodNaN({\n        typeName: ZodFirstPartyTypeKind.ZodNaN,\n        ...processCreateParams(params),\n    });\n};\nexport const BRAND = Symbol(\"zod_brand\");\nexport class ZodBranded extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        const data = ctx.data;\n        return this._def.type._parse({\n            data,\n            path: ctx.path,\n            parent: ctx,\n        });\n    }\n    unwrap() {\n        return this._def.type;\n    }\n}\nexport class ZodPipeline extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.common.async) {\n            const handleAsync = async () => {\n                const inResult = await this._def.in._parseAsync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n                if (inResult.status === \"aborted\")\n                    return INVALID;\n                if (inResult.status === \"dirty\") {\n                    status.dirty();\n                    return DIRTY(inResult.value);\n                }\n                else {\n                    return this._def.out._parseAsync({\n                        data: inResult.value,\n                        path: ctx.path,\n                        parent: ctx,\n                    });\n                }\n            };\n            return handleAsync();\n        }\n        else {\n            const inResult = this._def.in._parseSync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            });\n            if (inResult.status === \"aborted\")\n                return INVALID;\n            if (inResult.status === \"dirty\") {\n                status.dirty();\n                return {\n                    status: \"dirty\",\n                    value: inResult.value,\n                };\n            }\n            else {\n                return this._def.out._parseSync({\n                    data: inResult.value,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n            }\n        }\n    }\n    static create(a, b) {\n        return new ZodPipeline({\n            in: a,\n            out: b,\n            typeName: ZodFirstPartyTypeKind.ZodPipeline,\n        });\n    }\n}\nexport class ZodReadonly extends ZodType {\n    _parse(input) {\n        const result = this._def.innerType._parse(input);\n        const freeze = (data) => {\n            if (isValid(data)) {\n                data.value = Object.freeze(data.value);\n            }\n            return data;\n        };\n        return isAsync(result) ? result.then((data) => freeze(data)) : freeze(result);\n    }\n    unwrap() {\n        return this._def.innerType;\n    }\n}\nZodReadonly.create = (type, params) => {\n    return new ZodReadonly({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodReadonly,\n        ...processCreateParams(params),\n    });\n};\n////////////////////////////////////////\n////////////////////////////////////////\n//////////                    //////////\n//////////      z.custom      //////////\n//////////                    //////////\n////////////////////////////////////////\n////////////////////////////////////////\nfunction cleanParams(params, data) {\n    const p = typeof params === \"function\" ? params(data) : typeof params === \"string\" ? { message: params } : params;\n    const p2 = typeof p === \"string\" ? { message: p } : p;\n    return p2;\n}\nexport function custom(check, _params = {}, \n/**\n * @deprecated\n *\n * Pass `fatal` into the params object instead:\n *\n * ```ts\n * z.string().custom((val) => val.length > 5, { fatal: false })\n * ```\n *\n */\nfatal) {\n    if (check)\n        return ZodAny.create().superRefine((data, ctx) => {\n            const r = check(data);\n            if (r instanceof Promise) {\n                return r.then((r) => {\n                    if (!r) {\n                        const params = cleanParams(_params, data);\n                        const _fatal = params.fatal ?? fatal ?? true;\n                        ctx.addIssue({ code: \"custom\", ...params, fatal: _fatal });\n                    }\n                });\n            }\n            if (!r) {\n                const params = cleanParams(_params, data);\n                const _fatal = params.fatal ?? fatal ?? true;\n                ctx.addIssue({ code: \"custom\", ...params, fatal: _fatal });\n            }\n            return;\n        });\n    return ZodAny.create();\n}\nexport { ZodType as Schema, ZodType as ZodSchema };\nexport const late = {\n    object: ZodObject.lazycreate,\n};\nexport var ZodFirstPartyTypeKind;\n(function (ZodFirstPartyTypeKind) {\n    ZodFirstPartyTypeKind[\"ZodString\"] = \"ZodString\";\n    ZodFirstPartyTypeKind[\"ZodNumber\"] = \"ZodNumber\";\n    ZodFirstPartyTypeKind[\"ZodNaN\"] = \"ZodNaN\";\n    ZodFirstPartyTypeKind[\"ZodBigInt\"] = \"ZodBigInt\";\n    ZodFirstPartyTypeKind[\"ZodBoolean\"] = \"ZodBoolean\";\n    ZodFirstPartyTypeKind[\"ZodDate\"] = \"ZodDate\";\n    ZodFirstPartyTypeKind[\"ZodSymbol\"] = \"ZodSymbol\";\n    ZodFirstPartyTypeKind[\"ZodUndefined\"] = \"ZodUndefined\";\n    ZodFirstPartyTypeKind[\"ZodNull\"] = \"ZodNull\";\n    ZodFirstPartyTypeKind[\"ZodAny\"] = \"ZodAny\";\n    ZodFirstPartyTypeKind[\"ZodUnknown\"] = \"ZodUnknown\";\n    ZodFirstPartyTypeKind[\"ZodNever\"] = \"ZodNever\";\n    ZodFirstPartyTypeKind[\"ZodVoid\"] = \"ZodVoid\";\n    ZodFirstPartyTypeKind[\"ZodArray\"] = \"ZodArray\";\n    ZodFirstPartyTypeKind[\"ZodObject\"] = \"ZodObject\";\n    ZodFirstPartyTypeKind[\"ZodUnion\"] = \"ZodUnion\";\n    ZodFirstPartyTypeKind[\"ZodDiscriminatedUnion\"] = \"ZodDiscriminatedUnion\";\n    ZodFirstPartyTypeKind[\"ZodIntersection\"] = \"ZodIntersection\";\n    ZodFirstPartyTypeKind[\"ZodTuple\"] = \"ZodTuple\";\n    ZodFirstPartyTypeKind[\"ZodRecord\"] = \"ZodRecord\";\n    ZodFirstPartyTypeKind[\"ZodMap\"] = \"ZodMap\";\n    ZodFirstPartyTypeKind[\"ZodSet\"] = \"ZodSet\";\n    ZodFirstPartyTypeKind[\"ZodFunction\"] = \"ZodFunction\";\n    ZodFirstPartyTypeKind[\"ZodLazy\"] = \"ZodLazy\";\n    ZodFirstPartyTypeKind[\"ZodLiteral\"] = \"ZodLiteral\";\n    ZodFirstPartyTypeKind[\"ZodEnum\"] = \"ZodEnum\";\n    ZodFirstPartyTypeKind[\"ZodEffects\"] = \"ZodEffects\";\n    ZodFirstPartyTypeKind[\"ZodNativeEnum\"] = \"ZodNativeEnum\";\n    ZodFirstPartyTypeKind[\"ZodOptional\"] = \"ZodOptional\";\n    ZodFirstPartyTypeKind[\"ZodNullable\"] = \"ZodNullable\";\n    ZodFirstPartyTypeKind[\"ZodDefault\"] = \"ZodDefault\";\n    ZodFirstPartyTypeKind[\"ZodCatch\"] = \"ZodCatch\";\n    ZodFirstPartyTypeKind[\"ZodPromise\"] = \"ZodPromise\";\n    ZodFirstPartyTypeKind[\"ZodBranded\"] = \"ZodBranded\";\n    ZodFirstPartyTypeKind[\"ZodPipeline\"] = \"ZodPipeline\";\n    ZodFirstPartyTypeKind[\"ZodReadonly\"] = \"ZodReadonly\";\n})(ZodFirstPartyTypeKind || (ZodFirstPartyTypeKind = {}));\n// requires TS 4.4+\nclass Class {\n    constructor(..._) { }\n}\nconst instanceOfType = (\n// const instanceOfType = <T extends new (...args: any[]) => any>(\ncls, params = {\n    message: `Input not instance of ${cls.name}`,\n}) => custom((data) => data instanceof cls, params);\nconst stringType = ZodString.create;\nconst numberType = ZodNumber.create;\nconst nanType = ZodNaN.create;\nconst bigIntType = ZodBigInt.create;\nconst booleanType = ZodBoolean.create;\nconst dateType = ZodDate.create;\nconst symbolType = ZodSymbol.create;\nconst undefinedType = ZodUndefined.create;\nconst nullType = ZodNull.create;\nconst anyType = ZodAny.create;\nconst unknownType = ZodUnknown.create;\nconst neverType = ZodNever.create;\nconst voidType = ZodVoid.create;\nconst arrayType = ZodArray.create;\nconst objectType = ZodObject.create;\nconst strictObjectType = ZodObject.strictCreate;\nconst unionType = ZodUnion.create;\nconst discriminatedUnionType = ZodDiscriminatedUnion.create;\nconst intersectionType = ZodIntersection.create;\nconst tupleType = ZodTuple.create;\nconst recordType = ZodRecord.create;\nconst mapType = ZodMap.create;\nconst setType = ZodSet.create;\nconst functionType = ZodFunction.create;\nconst lazyType = ZodLazy.create;\nconst literalType = ZodLiteral.create;\nconst enumType = ZodEnum.create;\nconst nativeEnumType = ZodNativeEnum.create;\nconst promiseType = ZodPromise.create;\nconst effectsType = ZodEffects.create;\nconst optionalType = ZodOptional.create;\nconst nullableType = ZodNullable.create;\nconst preprocessType = ZodEffects.createWithPreprocess;\nconst pipelineType = ZodPipeline.create;\nconst ostring = () => stringType().optional();\nconst onumber = () => numberType().optional();\nconst oboolean = () => booleanType().optional();\nexport const coerce = {\n    string: ((arg) => ZodString.create({ ...arg, coerce: true })),\n    number: ((arg) => ZodNumber.create({ ...arg, coerce: true })),\n    boolean: ((arg) => ZodBoolean.create({\n        ...arg,\n        coerce: true,\n    })),\n    bigint: ((arg) => ZodBigInt.create({ ...arg, coerce: true })),\n    date: ((arg) => ZodDate.create({ ...arg, coerce: true })),\n};\nexport { anyType as any, arrayType as array, bigIntType as bigint, booleanType as boolean, dateType as date, discriminatedUnionType as discriminatedUnion, effectsType as effect, enumType as enum, functionType as function, instanceOfType as instanceof, intersectionType as intersection, lazyType as lazy, literalType as literal, mapType as map, nanType as nan, nativeEnumType as nativeEnum, neverType as never, nullType as null, nullableType as nullable, numberType as number, objectType as object, oboolean, onumber, optionalType as optional, ostring, pipelineType as pipeline, preprocessType as preprocess, promiseType as promise, recordType as record, setType as set, strictObjectType as strictObject, stringType as string, symbolType as symbol, effectsType as transformer, tupleType as tuple, undefinedType as undefined, unionType as union, unknownType as unknown, voidType as void, };\nexport const NEVER = INVALID;\n","/**\n *  UNIFIED MAP SYSTEM SCHEMAS\n * \n * Dfinition des formats world.json et map.json\n * pour l'diteur unifi o l'diteur EST le jeu !\n */\n\nimport { z } from 'zod';\n\n// ========== WORLD SCHEMA (Structure) ==========\n\n/**\n * Position hexagonale dans la grille\n */\nexport const HexPositionSchema = z.object({\n  q: z.number(), // Coordonne axiale q\n  r: z.number(), // Coordonne axiale r\n});\n\n/**\n * Terrain hexagonal avec type et proprits\n */\nexport const HexTerrainSchema = z.object({\n  position: HexPositionSchema,\n  type: z.enum(['grass', 'forest', 'mountain', 'water', 'desert', 'snow', 'lava', 'void']),\n  elevation: z.number().default(0), // -10  10\n  passable: z.boolean().default(true),\n  movementCost: z.number().default(1),\n  properties: z.record(z.any()).optional(),\n});\n\n/**\n * Rgion nomme regroupant plusieurs hexagones\n */\nexport const RegionSchema = z.object({\n  id: z.string(),\n  name: z.string(),\n  color: z.string(), // Couleur pour l'affichage\n  hexes: z.array(HexPositionSchema),\n  properties: z.object({\n    faction: z.string().optional(),\n    difficulty: z.enum(['easy', 'normal', 'hard', 'nightmare']).optional(),\n    temporalZone: z.string().optional(), // past, present, future\n  }).optional(),\n});\n\n/**\n * Connexion spatiale entre rgions\n */\nexport const SpatialConnectionSchema = z.object({\n  id: z.string(),\n  from: z.string(), // Region ID\n  to: z.string(), // Region ID\n  type: z.enum(['road', 'portal', 'bridge', 'teleport']),\n  bidirectional: z.boolean().default(true),\n  cost: z.number().default(1),\n});\n\n/**\n * Structure complte du monde (terrain)\n */\nexport const WorldSchema = z.object({\n  version: z.literal('2.0'),\n  id: z.string(),\n  name: z.string(),\n  description: z.string().optional(),\n  dimensions: z.object({\n    width: z.number().positive(),\n    height: z.number().positive(),\n  }),\n  hexagons: z.array(HexTerrainSchema),\n  regions: z.array(RegionSchema).default([]),\n  connections: z.array(SpatialConnectionSchema).default([]),\n  metadata: z.object({\n    author: z.string().optional(),\n    created: z.string().datetime().optional(),\n    tags: z.array(z.string()).optional(),\n  }).optional(),\n});\n\n// ========== MAP SCHEMA (World + Instances) ==========\n\n/**\n * Position 6D complte pour les entits\n */\nexport const Position6DSchema = z.object({\n  x: z.number(), // Position X dans l'espace\n  y: z.number(), // Position Y dans l'espace\n  z: z.number().default(0), // Altitude/Profondeur\n  t: z.number().default(0), // Temps (timeline)\n  c: z.number().default(0), // Causalit\n  psi: z.number().min(0).max(1).default(0), // Quantum (probabilit)\n});\n\n/**\n * nergie complexe pour les entits avances\n */\nexport const EnergyComplexSchema = z.object({\n  A: z.number().min(0).max(100), // Amplitude\n  phi: z.number().min(-180).max(180), // Phase\n});\n\n/**\n * Icne/Resource place sur la map\n */\nexport const PlacedResourceSchema = z.object({\n  id: z.string(),\n  type: z.enum(['hero', 'creature', 'artifact', 'resource', 'building', 'marker', 'portal']),\n  subtype: z.string(), // hero_id, creature_id, etc.\n  emoji: z.string(), // Reprsentation visuelle\n  name: z.string(),\n  position_6d: Position6DSchema,\n  \n  // Proprits optionnelles\n  size: z.number().default(40),\n  rotation: z.number().default(0),\n  opacity: z.number().min(0).max(1).default(1),\n  \n  // Proprits temporelles\n  temporal: z.object({\n    cycle: z.number().optional(), // Rptition en secondes\n    te: z.number().optional(), // Temps entit\n    appearDay: z.number().optional(), // Jour d'apparition\n    disappearDay: z.number().optional(), // Jour de disparition\n  }).optional(),\n  \n  // nergie complexe (pour entits avances)\n  energy_complex: EnergyComplexSchema.optional(),\n  \n  // Donnes spcifiques au type\n  data: z.record(z.any()).optional(),\n});\n\n/**\n * Connexion entre ressources (causalit, etc.)\n */\nexport const ResourceConnectionSchema = z.object({\n  id: z.string(),\n  from: z.string(), // Resource ID\n  to: z.string(), // Resource ID\n  type: z.enum(['temporal', 'causal', 'quantum', 'energy']),\n  strength: z.number().min(0).max(1).default(0.5),\n  properties: z.object({\n    interference: z.number().optional(),\n    delay: z.number().optional(),\n    condition: z.string().optional(),\n  }).optional(),\n});\n\n/**\n * vnement temporel dans la timeline\n */\nexport const TemporalEventSchema = z.object({\n  id: z.string(),\n  day: z.number().positive(),\n  type: z.string(),\n  name: z.string(),\n  description: z.string().optional(),\n  \n  // Ce qui se passe\n  action: z.object({\n    spawn: z.array(PlacedResourceSchema).optional(),\n    remove: z.array(z.string()).optional(), // Resource IDs  supprimer\n    modify: z.array(z.object({\n      resourceId: z.string(),\n      changes: z.record(z.any()),\n    })).optional(),\n  }).optional(),\n  \n  // Conditions\n  conditions: z.array(z.string()).optional(),\n  \n  // Rptition\n  repeat: z.object({\n    interval: z.number(), // Tous les X jours\n    times: z.number().optional(), // Nombre de rptitions (infini si absent)\n  }).optional(),\n});\n\n/**\n * Rgulateurs V2\n */\nexport const RegulatorsSchema = z.object({\n  vince: z.object({\n    active: z.boolean().default(false),\n    intensity: z.number().default(1),\n    zone: z.string().optional(),\n  }),\n  anna: z.object({\n    active: z.boolean().default(false),\n    decayRate: z.number().default(5),\n    zone: z.string().optional(),\n  }),\n  overload: z.object({\n    stack: z.number().default(0),\n    maxStack: z.number().default(10),\n    threshold: z.number().default(7),\n  }),\n});\n\n/**\n * Conditions de victoire\n */\nexport const VictoryConditionSchema = z.object({\n  type: z.enum(['elimination', 'capture', 'survive', 'collect', 'custom']),\n  description: z.string(),\n  parameters: z.record(z.any()).optional(),\n});\n\n/**\n * Configuration complte de la map (world + instances)\n */\nexport const MapSchema = z.object({\n  version: z.literal('2.0'),\n  id: z.string(),\n  name: z.string(),\n  description: z.string().optional(),\n  \n  // Rfrence ou embed du world\n  world: z.union([\n    z.string(), // ID/path du world\n    WorldSchema, // World embed complet\n  ]),\n  \n  // Resources places\n  resources: z.array(PlacedResourceSchema).default([]),\n  connections: z.array(ResourceConnectionSchema).default([]),\n  \n  // Timeline\n  timeline: z.object({\n    events: z.array(TemporalEventSchema).default([]),\n    maxDays: z.number().default(100),\n    startDay: z.number().default(1),\n  }),\n  \n  // Rgulateurs V2\n  regulators: RegulatorsSchema,\n  \n  // Conditions de jeu\n  victory_conditions: z.array(VictoryConditionSchema).default([]),\n  defeat_conditions: z.array(VictoryConditionSchema).default([]),\n  \n  // Configuration initiale\n  initial_state: z.object({\n    resources: z.object({\n      gold: z.number().default(1000),\n      crystals: z.number().default(100),\n      energy: z.number().default(50),\n      temporal: z.number().default(25),\n      quantum: z.number().default(10),\n    }),\n    tw: z.number().default(0),\n    te: z.number().default(0),\n  }),\n  \n  // Mtadonnes\n  metadata: z.object({\n    author: z.string().optional(),\n    created: z.string().datetime().optional(),\n    modified: z.string().datetime().optional(),\n    tags: z.array(z.string()).optional(),\n    difficulty: z.enum(['easy', 'normal', 'hard', 'nightmare']).optional(),\n    playerCount: z.object({\n      min: z.number().default(1),\n      max: z.number().default(8),\n    }).optional(),\n  }).optional(),\n});\n\n// ========== TYPES EXPORTS ==========\n\nexport type HexPosition = z.infer<typeof HexPositionSchema>;\nexport type HexTerrain = z.infer<typeof HexTerrainSchema>;\nexport type Region = z.infer<typeof RegionSchema>;\nexport type SpatialConnection = z.infer<typeof SpatialConnectionSchema>;\nexport type World = z.infer<typeof WorldSchema>;\n\nexport type Position6D = z.infer<typeof Position6DSchema>;\nexport type EnergyComplex = z.infer<typeof EnergyComplexSchema>;\nexport type PlacedResource = z.infer<typeof PlacedResourceSchema>;\nexport type ResourceConnection = z.infer<typeof ResourceConnectionSchema>;\nexport type TemporalEvent = z.infer<typeof TemporalEventSchema>;\nexport type Regulators = z.infer<typeof RegulatorsSchema>;\nexport type VictoryCondition = z.infer<typeof VictoryConditionSchema>;\nexport type Map = z.infer<typeof MapSchema>;\n\n// ========== HELPERS ==========\n\n/**\n * Valide un world JSON\n */\nexport function validateWorld(data: unknown): World {\n  return WorldSchema.parse(data);\n}\n\n/**\n * Valide une map JSON\n */\nexport function validateMap(data: unknown): Map {\n  return MapSchema.parse(data);\n}\n\n/**\n * Cre un world vide\n */\nexport function createEmptyWorld(name: string, width: number, height: number): World {\n  const hexagons: HexTerrain[] = [];\n  \n  // Gnre une grille hexagonale (axial coordinates)\n  // On utilise un pattern plus compact pour les coordonnes axiales\n  for (let r = 0; r < height; r++) {\n    for (let q = 0; q < width; q++) {\n      // Dcalage pour les lignes impaires (offset-r)\n      const offsetQ = q - Math.floor(r / 2);\n      hexagons.push({\n        position: { q: offsetQ, r },\n        type: 'grass',\n        elevation: 0,\n        passable: true,\n        movementCost: 1,\n      });\n    }\n  }\n  \n  return {\n    version: '2.0',\n    id: `world_${Date.now()}`,\n    name,\n    dimensions: { width, height },\n    hexagons,\n    regions: [],\n    connections: [],\n  };\n}\n\n/**\n * Cre une map vide  partir d'un world\n */\nexport function createEmptyMap(name: string, worldIdOrWorld: string | World): Map {\n  return {\n    version: '2.0',\n    id: `map_${Date.now()}`,\n    name,\n    world: worldIdOrWorld,\n    resources: [],\n    connections: [],\n    timeline: {\n      events: [],\n      maxDays: 100,\n      startDay: 1,\n    },\n    regulators: {\n      vince: { active: false, intensity: 1 },\n      anna: { active: false, decayRate: 5 },\n      overload: { stack: 0, maxStack: 10, threshold: 7 },\n    },\n    victory_conditions: [],\n    defeat_conditions: [],\n    initial_state: {\n      resources: {\n        gold: 1000,\n        crystals: 100,\n        energy: 50,\n        temporal: 25,\n        quantum: 10,\n      },\n      tw: 0,\n      te: 0,\n    },\n  };\n}\n","/**\n *  MAP FILE SERVICE\n * Service pour sauvegarder et charger les worlds et maps\n * Gre l'import/export en JSON et la communication avec le backend\n */\n\nimport type { World, Map } from '../shared/schemas/unified-map.schema';\nimport { validateWorld, validateMap } from '../shared/schemas/unified-map.schema';\n\nexport interface SaveResult {\n  success: boolean;\n  path?: string;\n  error?: string;\n}\n\nexport interface LoadResult<T> {\n  success: boolean;\n  data?: T;\n  error?: string;\n}\n\nclass MapFileServiceClass {\n  private readonly STORAGE_KEY_WORLDS = 'unified_worlds';\n  private readonly STORAGE_KEY_MAPS = 'unified_maps';\n  private readonly BACKEND_URL = 'http://localhost:8082/api';\n\n  // ===== SAUVEGARDE =====\n\n  /**\n   * Sauvegarde un world localement\n   */\n  async saveWorldLocal(world: World): Promise<SaveResult> {\n    try {\n      const worlds = this.getLocalWorlds();\n      worlds[world.id] = world;\n      localStorage.setItem(this.STORAGE_KEY_WORLDS, JSON.stringify(worlds));\n      \n      return {\n        success: true,\n        path: `local:worlds/${world.id}`,\n      };\n    } catch (error) {\n      return {\n        success: false,\n        error: `Erreur de sauvegarde locale: ${error}`,\n      };\n    }\n  }\n\n  /**\n   * Sauvegarde un world sur le backend\n   */\n  async saveWorldBackend(world: World): Promise<SaveResult> {\n    try {\n      const response = await fetch(`${this.BACKEND_URL}/worlds`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(world),\n      });\n\n      if (!response.ok) {\n        throw new Error(`HTTP ${response.status}`);\n      }\n\n      const result = await response.json();\n      \n      return {\n        success: true,\n        path: result.path || `backend:worlds/${world.id}`,\n      };\n    } catch (error) {\n      // Fallback sur sauvegarde locale si backend offline\n      console.warn('Backend offline, sauvegarde locale', error);\n      return this.saveWorldLocal(world);\n    }\n  }\n\n  /**\n   * Sauvegarde une map localement\n   */\n  async saveMapLocal(map: Map): Promise<SaveResult> {\n    try {\n      const maps = this.getLocalMaps();\n      maps[map.id] = map;\n      localStorage.setItem(this.STORAGE_KEY_MAPS, JSON.stringify(maps));\n      \n      return {\n        success: true,\n        path: `local:maps/${map.id}`,\n      };\n    } catch (error) {\n      return {\n        success: false,\n        error: `Erreur de sauvegarde locale: ${error}`,\n      };\n    }\n  }\n\n  /**\n   * Sauvegarde une map sur le backend\n   */\n  async saveMapBackend(map: Map): Promise<SaveResult> {\n    try {\n      const response = await fetch(`${this.BACKEND_URL}/maps`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(map),\n      });\n\n      if (!response.ok) {\n        throw new Error(`HTTP ${response.status}`);\n      }\n\n      const result = await response.json();\n      \n      return {\n        success: true,\n        path: result.path || `backend:maps/${map.id}`,\n      };\n    } catch (error) {\n      // Fallback sur sauvegarde locale si backend offline\n      console.warn('Backend offline, sauvegarde locale', error);\n      return this.saveMapLocal(map);\n    }\n  }\n\n  /**\n   * Upload une map vers l'Interstice\n   */\n  async uploadToInterstice(map: Map): Promise<SaveResult> {\n    try {\n      const response = await fetch('http://localhost:8082/api/interstice/upload', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          type: 'unified_map',\n          name: map.name,\n          data: map,\n          metadata: {\n            version: map.version,\n            author: map.metadata?.author,\n            created: map.metadata?.created,\n            tags: map.metadata?.tags,\n          },\n        }),\n      });\n\n      if (!response.ok) {\n        throw new Error(`HTTP ${response.status}`);\n      }\n\n      const result = await response.json();\n      \n      return {\n        success: true,\n        path: `interstice:${result.interstice_id}`,\n      };\n    } catch (error) {\n      return {\n        success: false,\n        error: `Erreur upload Interstice: ${error}`,\n      };\n    }\n  }\n\n  // ===== CHARGEMENT =====\n\n  /**\n   * Charge un world depuis le local storage\n   */\n  async loadWorldLocal(worldId: string): Promise<LoadResult<World>> {\n    try {\n      const worlds = this.getLocalWorlds();\n      const world = worlds[worldId];\n      \n      if (!world) {\n        return {\n          success: false,\n          error: `World ${worldId} non trouv`,\n        };\n      }\n\n      const validated = validateWorld(world);\n      \n      return {\n        success: true,\n        data: validated,\n      };\n    } catch (error) {\n      return {\n        success: false,\n        error: `Erreur de chargement: ${error}`,\n      };\n    }\n  }\n\n  /**\n   * Charge un world depuis le backend\n   */\n  async loadWorldBackend(worldId: string): Promise<LoadResult<World>> {\n    try {\n      const response = await fetch(`${this.BACKEND_URL}/worlds/${worldId}`);\n      \n      if (!response.ok) {\n        throw new Error(`HTTP ${response.status}`);\n      }\n\n      const data = await response.json();\n      const validated = validateWorld(data);\n      \n      return {\n        success: true,\n        data: validated,\n      };\n    } catch (error) {\n      // Fallback sur chargement local si backend offline\n      console.warn('Backend offline, chargement local', error);\n      return this.loadWorldLocal(worldId);\n    }\n  }\n\n  /**\n   * Charge une map depuis le local storage\n   */\n  async loadMapLocal(mapId: string): Promise<LoadResult<Map>> {\n    try {\n      const maps = this.getLocalMaps();\n      const map = maps[mapId];\n      \n      if (!map) {\n        return {\n          success: false,\n          error: `Map ${mapId} non trouve`,\n        };\n      }\n\n      const validated = validateMap(map);\n      \n      return {\n        success: true,\n        data: validated,\n      };\n    } catch (error) {\n      return {\n        success: false,\n        error: `Erreur de chargement: ${error}`,\n      };\n    }\n  }\n\n  /**\n   * Charge une map depuis le backend\n   */\n  async loadMapBackend(mapId: string): Promise<LoadResult<Map>> {\n    try {\n      const response = await fetch(`${this.BACKEND_URL}/maps/${mapId}`);\n      \n      if (!response.ok) {\n        throw new Error(`HTTP ${response.status}`);\n      }\n\n      const data = await response.json();\n      const validated = validateMap(data);\n      \n      return {\n        success: true,\n        data: validated,\n      };\n    } catch (error) {\n      // Fallback sur chargement local si backend offline\n      console.warn('Backend offline, chargement local', error);\n      return this.loadMapLocal(mapId);\n    }\n  }\n\n  // ===== LISTING =====\n\n  /**\n   * Liste tous les worlds disponibles\n   */\n  async listWorlds(): Promise<{ local: World[]; backend: World[] }> {\n    const local = Object.values(this.getLocalWorlds());\n    \n    let backend: World[] = [];\n    try {\n      const response = await fetch(`${this.BACKEND_URL}/worlds`);\n      if (response.ok) {\n        backend = await response.json();\n      }\n    } catch (error) {\n      console.warn('Backend offline pour listing', error);\n    }\n\n    return { local, backend };\n  }\n\n  /**\n   * Liste toutes les maps disponibles\n   */\n  async listMaps(): Promise<{ local: Map[]; backend: Map[] }> {\n    const local = Object.values(this.getLocalMaps());\n    \n    let backend: Map[] = [];\n    try {\n      const response = await fetch(`${this.BACKEND_URL}/maps`);\n      if (response.ok) {\n        backend = await response.json();\n      }\n    } catch (error) {\n      console.warn('Backend offline pour listing', error);\n    }\n\n    return { local, backend };\n  }\n\n  // ===== IMPORT/EXPORT =====\n\n  /**\n   * Exporte world + map en un seul fichier JSON\n   */\n  exportBundle(world: World, map: Map): string {\n    return JSON.stringify({\n      version: '2.0',\n      type: 'unified_bundle',\n      exported: new Date().toISOString(),\n      world,\n      map,\n    }, null, 2);\n  }\n\n  /**\n   * Importe un bundle world + map\n   */\n  async importBundle(jsonData: string): Promise<LoadResult<{ world: World; map: Map }>> {\n    try {\n      const data = JSON.parse(jsonData);\n      \n      if (data.type !== 'unified_bundle') {\n        throw new Error('Format invalide, attendu: unified_bundle');\n      }\n\n      const world = validateWorld(data.world);\n      const map = validateMap(data.map);\n      \n      return {\n        success: true,\n        data: { world, map },\n      };\n    } catch (error) {\n      return {\n        success: false,\n        error: `Erreur d'import: ${error}`,\n      };\n    }\n  }\n\n  /**\n   * Tlcharge un fichier JSON\n   */\n  downloadFile(data: string, filename: string): void {\n    const blob = new Blob([data], { type: 'application/json' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = filename;\n    a.click();\n    URL.revokeObjectURL(url);\n  }\n\n  // ===== HELPERS =====\n\n  private getLocalWorlds(): Record<string, World> {\n    const stored = localStorage.getItem(this.STORAGE_KEY_WORLDS);\n    return stored ? JSON.parse(stored) : {};\n  }\n\n  private getLocalMaps(): Record<string, Map> {\n    const stored = localStorage.getItem(this.STORAGE_KEY_MAPS);\n    return stored ? JSON.parse(stored) : {};\n  }\n\n  /**\n   * Nettoie le cache local\n   */\n  clearLocalCache(): void {\n    localStorage.removeItem(this.STORAGE_KEY_WORLDS);\n    localStorage.removeItem(this.STORAGE_KEY_MAPS);\n  }\n\n  /**\n   * Obtient les statistiques de stockage\n   */\n  getStorageStats(): {\n    worldsCount: number;\n    mapsCount: number;\n    totalSize: number;\n  } {\n    const worlds = this.getLocalWorlds();\n    const maps = this.getLocalMaps();\n    \n    const worldsSize = JSON.stringify(worlds).length;\n    const mapsSize = JSON.stringify(maps).length;\n    \n    return {\n      worldsCount: Object.keys(worlds).length,\n      mapsCount: Object.keys(maps).length,\n      totalSize: worldsSize + mapsSize,\n    };\n  }\n}\n\n// Singleton\nexport const MapFileService = new MapFileServiceClass();\n","/**\n *  UNIFIED MAP STORE\n * \n * Store Zustand unifi pour l'diteur o l'diteur EST le jeu !\n * Gre l'tat partag entre tous les modes.\n */\n\nimport { create } from 'zustand';\nimport { devtools, persist } from 'zustand/middleware';\nimport type {\n  World,\n  Map,\n  PlacedResource,\n  ResourceConnection,\n  TemporalEvent,\n  HexTerrain,\n  Region,\n  Regulators,\n  Position6D,\n} from '../schemas/unified-map.schema';\nimport { createEmptyWorld, createEmptyMap } from '../schemas/unified-map.schema';\nimport { MapFileService } from '../../services/MapFileService';\n\n// ========== TYPES ==========\n\nexport type EditorMode = 'structure' | 'resources' | 'timeline' | 'play' | 'overlay';\nexport type Tool = 'select' | 'paint' | 'place' | 'connect' | 'delete' | 'region';\n\ninterface TemporalState {\n  tw: number;\n  te: number;\n  drift: number;\n  debt: number;\n  currentDay: number;\n}\n\ninterface UnifiedMapState {\n  // ===== Current Files =====\n  currentWorld: World | null;\n  currentMap: Map | null;\n  worldPath: string | null;\n  mapPath: string | null;\n  \n  // ===== Editor State =====\n  mode: EditorMode;\n  tool: Tool;\n  selectedHex: { q: number; r: number } | null;\n  selectedResource: PlacedResource | null;\n  selectedRegion: Region | null;\n  selectedEvent: TemporalEvent | null;\n  \n  // ===== Temporal State =====\n  temporal: TemporalState;\n  simulationRunning: boolean;\n  \n  // ===== UI State =====\n  showGrid: boolean;\n  showRegions: boolean;\n  showConnections: boolean;\n  showTimeline: boolean;\n  zoomLevel: number;\n  viewOffset: { x: number; y: number };\n  \n  // ===== Brush/Tools State =====\n  brushSize: number;\n  brushTerrain: HexTerrain['type'];\n  selectedIcon: { emoji: string; category: string; name: string } | null;\n  connectionStart: string | null; // Resource ID for connection\n  \n  // ===== History =====\n  undoStack: any[];\n  redoStack: any[];\n  \n  // ===== Actions - File Management =====\n  newWorld: (name: string, width: number, height: number) => void;\n  loadWorld: (world: World, path?: string) => void;\n  saveWorld: () => Promise<void>;\n  \n  newMap: (name: string) => void;\n  loadMap: (map: Map, path?: string) => void;\n  saveMap: () => Promise<void>;\n  \n  exportToFile: () => void;\n  importFromFile: (data: string) => void;\n  \n  // ===== Actions - Mode & Tools =====\n  setMode: (mode: EditorMode) => void;\n  setTool: (tool: Tool) => void;\n  \n  // ===== Actions - Structure Editing (World) =====\n  paintTerrain: (q: number, r: number) => void;\n  setBrushTerrain: (terrain: HexTerrain['type']) => void;\n  setBrushSize: (size: number) => void;\n  \n  createRegion: (name: string, hexes: { q: number; r: number }[]) => void;\n  updateRegion: (id: string, updates: Partial<Region>) => void;\n  deleteRegion: (id: string) => void;\n  \n  // ===== Actions - Resource Editing (Map) =====\n  placeResource: (x: number, y: number) => void;\n  placeResourceWithIcon: (x: number, y: number, icon: { emoji: string; name: string; category: string }) => void;\n  updateResource: (id: string, updates: Partial<PlacedResource>) => void;\n  deleteResource: (id: string) => void;\n  \n  createConnection: (from: string, to: string, type: ResourceConnection['type']) => void;\n  deleteConnection: (id: string) => void;\n  \n  // ===== Actions - Timeline Editing =====\n  addEvent: (event: Omit<TemporalEvent, 'id'>) => void;\n  updateEvent: (id: string, updates: Partial<TemporalEvent>) => void;\n  deleteEvent: (id: string) => void;\n  setCurrentDay: (day: number) => void;\n  \n  // ===== Actions - Regulators =====\n  updateRegulators: (updates: Partial<Regulators>) => void;\n  activateRegulator: (type: 'vince' | 'anna' | 'overload') => void;\n  \n  // ===== Actions - Simulation =====\n  startSimulation: () => void;\n  stopSimulation: () => void;\n  tick: () => void;\n  playMap: () => void;\n  \n  // ===== Actions - UI =====\n  setZoom: (level: number) => void;\n  pan: (dx: number, dy: number) => void;\n  toggleGrid: () => void;\n  toggleRegions: () => void;\n  toggleConnections: () => void;\n  toggleTimeline: () => void;\n  \n  // ===== Actions - History =====\n  undo: () => void;\n  redo: () => void;\n  \n  // ===== Helpers =====\n  getVisibleResources: () => PlacedResource[];\n  getActiveEvents: () => TemporalEvent[];\n  canPlayMap: () => boolean;\n}\n\n// ========== STORE ==========\n\nexport const useUnifiedMapStore = create<UnifiedMapState>()(\n  devtools(\n    persist(\n      (set, get) => ({\n        // ===== Initial State =====\n        currentWorld: null,\n        currentMap: null,\n        worldPath: null,\n        mapPath: null,\n        \n        mode: 'structure',\n        tool: 'paint',\n        selectedHex: null,\n        selectedResource: null,\n        selectedRegion: null,\n        selectedEvent: null,\n        \n        temporal: {\n          tw: 0,\n          te: 0,\n          drift: 0,\n          debt: 0,\n          currentDay: 1,\n        },\n        simulationRunning: false,\n        \n        showGrid: true,\n        showRegions: true,\n        showConnections: true,\n        showTimeline: false,\n        zoomLevel: 1,\n        viewOffset: { x: 0, y: 0 },\n        \n        brushSize: 1,\n        brushTerrain: 'grass',\n        selectedIcon: null,\n        connectionStart: null,\n        \n        undoStack: [],\n        redoStack: [],\n        \n        // ===== File Management =====\n        newWorld: (name, width, height) => {\n          const world = createEmptyWorld(name, width, height);\n          set({\n            currentWorld: world,\n            worldPath: null,\n            mode: 'structure',\n            tool: 'paint',\n          });\n        },\n        \n        loadWorld: (world, path) => {\n          set({\n            currentWorld: world,\n            worldPath: path || null,\n          });\n        },\n        \n        saveWorld: async () => {\n          const { currentWorld, worldPath } = get();\n          if (!currentWorld) return;\n          \n          const result = await MapFileService.saveWorldBackend(currentWorld);\n          if (result.success) {\n            set({ worldPath: result.path });\n            console.log(' World sauvegard:', result.path);\n          } else {\n            console.error(' Erreur sauvegarde world:', result.error);\n          }\n        },\n        \n        newMap: (name) => {\n          const { currentWorld } = get();\n          if (!currentWorld) {\n            console.error('No world loaded! Create or load a world first.');\n            return;\n          }\n          \n          const map = createEmptyMap(name, currentWorld);\n          set({\n            currentMap: map,\n            mapPath: null,\n            mode: 'resources',\n            tool: 'place',\n          });\n        },\n        \n        loadMap: (map, path) => {\n          set({\n            currentMap: map,\n            mapPath: path || null,\n            mode: 'resources',\n          });\n        },\n        \n        saveMap: async () => {\n          const { currentMap, mapPath } = get();\n          if (!currentMap) return;\n          \n          const result = await MapFileService.saveMapBackend(currentMap);\n          if (result.success) {\n            set({ mapPath: result.path });\n            console.log(' Map sauvegarde:', result.path);\n          } else {\n            console.error(' Erreur sauvegarde map:', result.error);\n          }\n        },\n        \n        exportToFile: () => {\n          const { currentWorld, currentMap } = get();\n          if (!currentWorld || !currentMap) {\n            console.error('World et Map requis pour export');\n            return;\n          }\n          \n          const bundle = MapFileService.exportBundle(currentWorld, currentMap);\n          MapFileService.downloadFile(bundle, `unified_map_${Date.now()}.json`);\n        },\n        \n        importFromFile: async (jsonData) => {\n          const result = await MapFileService.importBundle(jsonData);\n          if (result.success && result.data) {\n            get().loadWorld(result.data.world);\n            get().loadMap(result.data.map);\n            console.log(' Import russi');\n          } else {\n            console.error(' Erreur import:', result.error);\n          }\n        },\n        \n        // ===== Mode & Tools =====\n        setMode: (mode) => {\n          set({ mode });\n          \n          // Auto-select appropriate tool\n          if (mode === 'structure') {\n            set({ tool: 'paint' });\n          } else if (mode === 'resources') {\n            set({ tool: 'place' });\n          } else if (mode === 'timeline') {\n            set({ tool: 'select' });\n          }\n        },\n        \n        setTool: (tool) => set({ tool }),\n        \n        // ===== Structure Editing =====\n        paintTerrain: (q, r) => {\n          const { currentWorld, brushTerrain, brushSize } = get();\n          if (!currentWorld) return;\n          \n          const updatedHexagons = [...currentWorld.hexagons];\n          const radius = Math.floor(brushSize / 2);\n          \n          // Paint in a radius around the clicked hex\n          for (let dq = -radius; dq <= radius; dq++) {\n            for (let dr = -radius; dr <= radius; dr++) {\n              if (Math.abs(dq + dr) > radius) continue;\n              \n              const hexIndex = updatedHexagons.findIndex(\n                h => h.position.q === q + dq && h.position.r === r + dr\n              );\n              \n              if (hexIndex !== -1) {\n                updatedHexagons[hexIndex] = {\n                  ...updatedHexagons[hexIndex],\n                  type: brushTerrain,\n                };\n              }\n            }\n          }\n          \n          set({\n            currentWorld: {\n              ...currentWorld,\n              hexagons: updatedHexagons,\n            },\n          });\n        },\n        \n        setBrushTerrain: (terrain) => set({ brushTerrain: terrain }),\n        setBrushSize: (size) => set({ brushSize: Math.max(1, Math.min(9, size)) }),\n        \n        createRegion: (name, hexes) => {\n          const { currentWorld } = get();\n          if (!currentWorld) return;\n          \n          const newRegion: Region = {\n            id: `region_${Date.now()}`,\n            name,\n            color: `#${Math.floor(Math.random() * 16777215).toString(16)}`,\n            hexes,\n          };\n          \n          set({\n            currentWorld: {\n              ...currentWorld,\n              regions: [...currentWorld.regions, newRegion],\n            },\n          });\n        },\n        \n        updateRegion: (id, updates) => {\n          const { currentWorld } = get();\n          if (!currentWorld) return;\n          \n          set({\n            currentWorld: {\n              ...currentWorld,\n              regions: currentWorld.regions.map(r =>\n                r.id === id ? { ...r, ...updates } : r\n              ),\n            },\n          });\n        },\n        \n        deleteRegion: (id) => {\n          const { currentWorld } = get();\n          if (!currentWorld) return;\n          \n          set({\n            currentWorld: {\n              ...currentWorld,\n              regions: currentWorld.regions.filter(r => r.id !== id),\n            },\n          });\n        },\n        \n        // ===== Resource Editing =====\n        placeResourceWithIcon: (x, y, iconInfo) => {\n          const { currentMap, temporal } = get();\n          if (!currentMap) return;\n          const categoryToType: Record<string, PlacedResource['type']> = {\n            ' Cratures': 'creature',\n            ' Ressources': 'resource',\n            ' Btiments': 'building',\n            ' Marqueurs': 'marker',\n            ' Temporel': 'marker',\n            ' Combats': 'artifact',\n            ' Terrains': 'marker'\n          };\n          const typ = categoryToType[iconInfo.category] || 'marker';\n          const newResource: PlacedResource = {\n            id: `resource_${Date.now()}`,\n            type: typ,\n            subtype: iconInfo.name,\n            emoji: iconInfo.emoji,\n            name: iconInfo.name,\n            position_6d: { x, y, z: 0, t: temporal.currentDay, c: 0, psi: 0 },\n            size: 40,\n            rotation: 0,\n            opacity: 1,\n          };\n          set({\n            currentMap: { ...currentMap, resources: [...currentMap.resources, newResource] },\n          });\n        },\n        placeResource: (x, y) => {\n          const { currentMap, selectedIcon, temporal } = get();\n          if (!currentMap || !selectedIcon) return;\n          \n          const newResource: PlacedResource = {\n            id: `resource_${Date.now()}`,\n            type: 'marker', // TODO: Dterminer selon l'icne\n            subtype: selectedIcon.name,\n            emoji: selectedIcon.emoji,\n            name: selectedIcon.name,\n            position_6d: {\n              x,\n              y,\n              z: 0,\n              t: temporal.currentDay,\n              c: 0,\n              psi: 0,\n            },\n            size: 40,\n            rotation: 0,\n            opacity: 1,\n          };\n          \n          set({\n            currentMap: {\n              ...currentMap,\n              resources: [...currentMap.resources, newResource],\n            },\n          });\n        },\n        \n        updateResource: (id, updates) => {\n          const { currentMap } = get();\n          if (!currentMap) return;\n          \n          set({\n            currentMap: {\n              ...currentMap,\n              resources: currentMap.resources.map(r =>\n                r.id === id ? { ...r, ...updates } : r\n              ),\n            },\n          });\n        },\n        \n        deleteResource: (id) => {\n          const { currentMap } = get();\n          if (!currentMap) return;\n          \n          set({\n            currentMap: {\n              ...currentMap,\n              resources: currentMap.resources.filter(r => r.id !== id),\n              connections: currentMap.connections.filter(\n                c => c.from !== id && c.to !== id\n              ),\n            },\n          });\n        },\n        \n        createConnection: (from, to, type) => {\n          const { currentMap } = get();\n          if (!currentMap) return;\n          \n          const newConnection: ResourceConnection = {\n            id: `conn_${Date.now()}`,\n            from,\n            to,\n            type,\n            strength: 0.5,\n          };\n          \n          set({\n            currentMap: {\n              ...currentMap,\n              connections: [...currentMap.connections, newConnection],\n            },\n            connectionStart: null,\n          });\n        },\n        \n        deleteConnection: (id) => {\n          const { currentMap } = get();\n          if (!currentMap) return;\n          \n          set({\n            currentMap: {\n              ...currentMap,\n              connections: currentMap.connections.filter(c => c.id !== id),\n            },\n          });\n        },\n        \n        // ===== Timeline =====\n        addEvent: (eventData) => {\n          const { currentMap } = get();\n          if (!currentMap) return;\n          \n          const newEvent: TemporalEvent = {\n            ...eventData,\n            id: `event_${Date.now()}`,\n          };\n          \n          set({\n            currentMap: {\n              ...currentMap,\n              timeline: {\n                ...currentMap.timeline,\n                events: [...currentMap.timeline.events, newEvent],\n              },\n            },\n          });\n        },\n        \n        updateEvent: (id, updates) => {\n          const { currentMap } = get();\n          if (!currentMap) return;\n          \n          set({\n            currentMap: {\n              ...currentMap,\n              timeline: {\n                ...currentMap.timeline,\n                events: currentMap.timeline.events.map(e =>\n                  e.id === id ? { ...e, ...updates } : e\n                ),\n              },\n            },\n          });\n        },\n        \n        deleteEvent: (id) => {\n          const { currentMap } = get();\n          if (!currentMap) return;\n          \n          set({\n            currentMap: {\n              ...currentMap,\n              timeline: {\n                ...currentMap.timeline,\n                events: currentMap.timeline.events.filter(e => e.id !== id),\n              },\n            },\n          });\n        },\n        \n        setCurrentDay: (day) => {\n          set(state => ({\n            temporal: { ...state.temporal, currentDay: day },\n          }));\n        },\n        \n        // ===== Regulators =====\n        updateRegulators: (updates) => {\n          const { currentMap } = get();\n          if (!currentMap) return;\n          \n          set({\n            currentMap: {\n              ...currentMap,\n              regulators: { ...currentMap.regulators, ...updates },\n            },\n          });\n        },\n        \n        activateRegulator: (type) => {\n          const { currentMap } = get();\n          if (!currentMap) return;\n          \n          const updates: Partial<Regulators> = {};\n          \n          if (type === 'vince') {\n            updates.vince = { ...currentMap.regulators.vince, active: true };\n          } else if (type === 'anna') {\n            updates.anna = { ...currentMap.regulators.anna, active: true };\n          } else if (type === 'overload') {\n            updates.overload = {\n              ...currentMap.regulators.overload,\n              stack: currentMap.regulators.overload.stack + 1,\n            };\n          }\n          \n          get().updateRegulators(updates);\n        },\n        \n        // ===== Simulation =====\n        startSimulation: () => set({ simulationRunning: true }),\n        stopSimulation: () => set({ simulationRunning: false }),\n        \n        tick: () => {\n          const { temporal, simulationRunning } = get();\n          if (!simulationRunning) return;\n          \n          set({\n            temporal: {\n              ...temporal,\n              tw: temporal.tw + 0.1,\n              te: temporal.te + 0.095,\n              drift: Math.abs((temporal.tw + 0.1) - (temporal.te + 0.095)),\n              debt: temporal.debt + (temporal.drift > 1 ? 0.01 : -0.01),\n            },\n          });\n        },\n        \n        playMap: () => {\n          const { currentMap } = get();\n          if (!currentMap) {\n            console.error('No map to play!');\n            return;\n          }\n          \n          set({ mode: 'play' });\n          // TODO: Lancer le jeu avec la map actuelle\n          console.log('Playing map:', currentMap.name);\n        },\n        \n        // ===== UI =====\n        setZoom: (level) => set({ zoomLevel: Math.max(0.5, Math.min(3, level)) }),\n        pan: (dx, dy) => {\n          set(state => ({\n            viewOffset: {\n              x: state.viewOffset.x + dx,\n              y: state.viewOffset.y + dy,\n            },\n          }));\n        },\n        \n        toggleGrid: () => set(state => ({ showGrid: !state.showGrid })),\n        toggleRegions: () => set(state => ({ showRegions: !state.showRegions })),\n        toggleConnections: () => set(state => ({ showConnections: !state.showConnections })),\n        toggleTimeline: () => set(state => ({ showTimeline: !state.showTimeline })),\n        \n        // ===== History =====\n        undo: () => {\n          // TODO: Implmenter undo/redo\n          console.log('Undo');\n        },\n        \n        redo: () => {\n          // TODO: Implmenter undo/redo\n          console.log('Redo');\n        },\n        \n        // ===== Helpers =====\n        getVisibleResources: () => {\n          const { currentMap, temporal } = get();\n          if (!currentMap) return [];\n          \n          return currentMap.resources.filter(r => {\n            // Filtre selon le jour actuel et la visibilit temporelle\n            const appearDay = r.temporal?.appearDay || 1;\n            const disappearDay = r.temporal?.disappearDay || Infinity;\n            \n            return temporal.currentDay >= appearDay && temporal.currentDay <= disappearDay;\n          });\n        },\n        \n        getActiveEvents: () => {\n          const { currentMap, temporal } = get();\n          if (!currentMap) return [];\n          \n          return currentMap.timeline.events.filter(e => {\n            if (e.day === temporal.currentDay) return true;\n            \n            // Check rptitions\n            if (e.repeat) {\n              const daysSince = temporal.currentDay - e.day;\n              if (daysSince > 0 && daysSince % e.repeat.interval === 0) {\n                if (!e.repeat.times || daysSince / e.repeat.interval <= e.repeat.times) {\n                  return true;\n                }\n              }\n            }\n            \n            return false;\n          });\n        },\n        \n        canPlayMap: () => {\n          const { currentWorld, currentMap } = get();\n          return !!(currentWorld && currentMap && currentMap.resources.length > 0);\n        },\n      }),\n      {\n        name: 'unified-map-store',\n        partialize: (state) => ({\n          // Persist seulement certaines parties\n          worldPath: state.worldPath,\n          mapPath: state.mapPath,\n          showGrid: state.showGrid,\n          showRegions: state.showRegions,\n          showConnections: state.showConnections,\n          zoomLevel: state.zoomLevel,\n          brushSize: state.brushSize,\n        }),\n      }\n    )\n  )\n);\n","/**\n *  STRUCTURE EDITOR\n * diteur de terrain hexagonal (remplace world-editor)\n */\n\nimport React, { useRef, useEffect, useState } from 'react';\nimport { useUnifiedMapStore } from '../../../shared/store/unifiedMapStore';\n\nexport function StructureEditor(): React.ReactElement {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const {\n    currentWorld,\n    selectedHex,\n    brushTerrain,\n    brushSize,\n    showGrid,\n    showRegions,\n    zoomLevel,\n    viewOffset,\n    paintTerrain,\n    setTool,\n  } = useUnifiedMapStore();\n\n  const [isDrawing, setIsDrawing] = useState(false);\n\n  // Taille des hexagones\n  const HEX_SIZE = 30 * zoomLevel;\n  const HEX_WIDTH = Math.sqrt(3) * HEX_SIZE;\n  const HEX_HEIGHT = 2 * HEX_SIZE;\n\n  // Couleurs par type de terrain\n  const TERRAIN_COLORS: Record<string, string> = {\n    grass: '#4ade80',\n    forest: '#16a34a',\n    mountain: '#a8a29e',\n    water: '#3b82f6',\n    desert: '#fbbf24',\n    snow: '#e0e7ff',\n    lava: '#ef4444',\n    void: '#1e1b4b',\n  };\n\n  // Convertir coordonnes pixel en hex\n  const pixelToHex = (x: number, y: number) => {\n    const adjustedX = (x - viewOffset.x) / zoomLevel;\n    const adjustedY = (y - viewOffset.y) / zoomLevel;\n    \n    const q = (adjustedX * Math.sqrt(3) / 3 - adjustedY / 3) / HEX_SIZE;\n    const r = (adjustedY * 2 / 3) / HEX_SIZE;\n    \n    return {\n      q: Math.round(q),\n      r: Math.round(r),\n    };\n  };\n\n  // Convertir coordonnes hex en pixel\n  const hexToPixel = (q: number, r: number) => {\n    const x = HEX_SIZE * (Math.sqrt(3) * q + Math.sqrt(3) / 2 * r);\n    const y = HEX_SIZE * (3 / 2 * r);\n    \n    return {\n      x: x * zoomLevel + viewOffset.x + 100, // Offset pour centrer\n      y: y * zoomLevel + viewOffset.y + 100,\n    };\n  };\n\n  // Dessiner un hexagone\n  const drawHex = (ctx: CanvasRenderingContext2D, centerX: number, centerY: number, color: string, highlight = false) => {\n    ctx.beginPath();\n    for (let i = 0; i < 6; i++) {\n      const angle = (Math.PI / 3) * i - Math.PI / 6;\n      const x = centerX + HEX_SIZE * Math.cos(angle);\n      const y = centerY + HEX_SIZE * Math.sin(angle);\n      if (i === 0) {\n        ctx.moveTo(x, y);\n      } else {\n        ctx.lineTo(x, y);\n      }\n    }\n    ctx.closePath();\n    \n    // Remplissage\n    ctx.fillStyle = color;\n    ctx.fill();\n    \n    // Bordure\n    if (showGrid) {\n      ctx.strokeStyle = highlight ? '#fbbf24' : 'rgba(255, 255, 255, 0.2)';\n      ctx.lineWidth = highlight ? 2 : 1;\n      ctx.stroke();\n    }\n  };\n\n  // Resize canvas\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n    \n    const resize = () => {\n      canvas.width = window.innerWidth;\n      canvas.height = window.innerHeight - 200;\n    };\n    \n    resize();\n    window.addEventListener('resize', resize);\n    return () => window.removeEventListener('resize', resize);\n  }, []);\n\n  // Rendu du canvas\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    if (!canvas || !currentWorld) return;\n    \n    const ctx = canvas.getContext('2d');\n    if (!ctx) return;\n    \n    // S'assurer que le canvas a les bonnes dimensions\n    if (canvas.width === 0 || canvas.height === 0) {\n      canvas.width = window.innerWidth;\n      canvas.height = window.innerHeight - 200;\n    }\n    \n    // Clear\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    \n    // Background\n    ctx.fillStyle = '#0a0e1a';\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\n    \n    // Dessiner tous les hexagones\n    currentWorld.hexagons.forEach(hex => {\n      const pixel = hexToPixel(hex.position.q, hex.position.r);\n      const color = TERRAIN_COLORS[hex.type] || '#4ade80';\n      const isSelected = selectedHex?.q === hex.position.q && selectedHex?.r === hex.position.r;\n      \n      drawHex(ctx, pixel.x, pixel.y, color, isSelected);\n    });\n    \n    // Dessiner les rgions si actives\n    if (showRegions) {\n      currentWorld.regions.forEach(region => {\n        ctx.strokeStyle = region.color;\n        ctx.lineWidth = 3;\n        ctx.globalAlpha = 0.5;\n        \n        region.hexes.forEach(hex => {\n          const pixel = hexToPixel(hex.q, hex.r);\n          drawHex(ctx, pixel.x, pixel.y, 'transparent', false);\n        });\n        \n        ctx.globalAlpha = 1;\n      });\n    }\n  }, [currentWorld, selectedHex, showGrid, showRegions, zoomLevel, viewOffset]);\n\n  // Gestion des events souris\n  const handleMouseDown = (e: React.MouseEvent) => {\n    setIsDrawing(true);\n    handleMouseMove(e);\n  };\n\n  const handleMouseMove = (e: React.MouseEvent) => {\n    if (!isDrawing) return;\n    \n    const rect = canvasRef.current?.getBoundingClientRect();\n    if (!rect) return;\n    \n    const x = e.clientX - rect.left;\n    const y = e.clientY - rect.top;\n    const hex = pixelToHex(x, y);\n    \n    paintTerrain(hex.q, hex.r);\n  };\n\n  const handleMouseUp = () => {\n    setIsDrawing(false);\n  };\n\n  const handleCanvasClick = (e: React.MouseEvent) => {\n    const rect = canvasRef.current?.getBoundingClientRect();\n    if (!rect) return;\n    \n    const x = e.clientX - rect.left;\n    const y = e.clientY - rect.top;\n    const hex = pixelToHex(x, y);\n    \n    paintTerrain(hex.q, hex.r);\n  };\n\n  return (\n    <div style={{\n      width: '100%',\n      height: '100%',\n      position: 'relative',\n      overflow: 'hidden',\n    }}>\n      <canvas\n        ref={canvasRef}\n        style={{\n          cursor: 'crosshair',\n          display: 'block',\n          width: '100%',\n          height: '100%',\n        }}\n        onMouseDown={handleMouseDown}\n        onMouseMove={handleMouseMove}\n        onMouseUp={handleMouseUp}\n        onMouseLeave={handleMouseUp}\n        onClick={handleCanvasClick}\n      />\n      \n      {/* Info overlay */}\n      <div style={{\n        position: 'absolute',\n        top: 20,\n        right: 20,\n        background: 'rgba(0, 0, 0, 0.8)',\n        padding: 15,\n        borderRadius: 10,\n        border: '1px solid rgba(102, 126, 234, 0.5)',\n      }}>\n        <h3 style={{ margin: 0, marginBottom: 10, fontSize: 16 }}>\n           Mode Structure\n        </h3>\n        <div style={{ fontSize: 12, display: 'flex', flexDirection: 'column', gap: 5 }}>\n          <div>Terrain: {brushTerrain}</div>\n          <div>Taille: {brushSize}</div>\n          <div>World: {currentWorld?.name}</div>\n          <div>Dimensions: {currentWorld?.dimensions.width} x {currentWorld?.dimensions.height}</div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","/**\n *  MODE SELECTOR\n * Permet de switcher entre les diffrents modes de l'diteur unifi\n */\n\nimport React from 'react';\nimport type { EditorMode } from '../../../shared/store/unifiedMapStore';\n\ninterface Props {\n  currentMode: EditorMode;\n  onModeChange: (mode: EditorMode) => void;\n}\n\nexport function ModeSelector({ currentMode, onModeChange }: Props): React.ReactElement {\n  const modes: { mode: EditorMode; label: string; icon: string; color: string }[] = [\n    { mode: 'structure', label: 'Structure', icon: '', color: '#4299e1' },\n    { mode: 'resources', label: 'Resources', icon: '', color: '#48bb78' },\n    { mode: 'timeline', label: 'Timeline', icon: '', color: '#ed8936' },\n    { mode: 'overlay', label: 'Overlay', icon: '', color: '#9f7aea' },\n    { mode: 'play', label: 'Play', icon: '', color: '#f56565' },\n  ];\n\n  return (\n    <div style={{\n      display: 'flex',\n      gap: 4,\n      background: 'rgba(0, 0, 0, 0.3)',\n      padding: 4,\n      borderRadius: 12,\n      border: '1px solid rgba(102, 126, 234, 0.3)',\n    }}>\n      {modes.map(({ mode, label, icon, color }) => (\n        <button\n          key={mode}\n          onClick={() => onModeChange(mode)}\n          style={{\n            padding: '8px 16px',\n            background: currentMode === mode \n              ? `linear-gradient(135deg, ${color}dd, ${color}99)`\n              : 'rgba(255, 255, 255, 0.05)',\n            border: currentMode === mode\n              ? `2px solid ${color}`\n              : '2px solid transparent',\n            borderRadius: 8,\n            color: 'white',\n            cursor: 'pointer',\n            fontSize: 14,\n            fontWeight: currentMode === mode ? 'bold' : 'normal',\n            display: 'flex',\n            alignItems: 'center',\n            gap: 6,\n            transition: 'all 0.2s',\n            transform: currentMode === mode ? 'scale(1.05)' : 'scale(1)',\n          }}\n          onMouseEnter={(e) => {\n            if (currentMode !== mode) {\n              e.currentTarget.style.background = 'rgba(255, 255, 255, 0.1)';\n              e.currentTarget.style.transform = 'scale(1.02)';\n            }\n          }}\n          onMouseLeave={(e) => {\n            if (currentMode !== mode) {\n              e.currentTarget.style.background = 'rgba(255, 255, 255, 0.05)';\n              e.currentTarget.style.transform = 'scale(1)';\n            }\n          }}\n        >\n          <span style={{ fontSize: 18 }}>{icon}</span>\n          <span>{label}</span>\n        </button>\n      ))}\n    </div>\n  );\n}\n","/**\n *  TOOL PALETTE\n * Palette d'outils contextuelle selon le mode\n */\n\nimport React from 'react';\nimport { useUnifiedMapStore } from '../../../shared/store/unifiedMapStore';\nimport type { EditorMode, Tool } from '../../../shared/store/unifiedMapStore';\n\ninterface Props {\n  mode: EditorMode;\n}\n\nexport function ToolPalette({ mode }: Props): React.ReactElement {\n  const {\n    tool,\n    setTool,\n    brushTerrain,\n    setBrushTerrain,\n    brushSize,\n    setBrushSize,\n    selectedIcon,\n  } = useUnifiedMapStore();\n\n  // Outils disponibles selon le mode\n  const getTools = (): { tool: Tool; icon: string; label: string }[] => {\n    switch (mode) {\n      case 'structure':\n        return [\n          { tool: 'paint', icon: '', label: 'Peindre' },\n          { tool: 'select', icon: '', label: 'Slectionner' },\n          { tool: 'region', icon: '', label: 'Rgions' },\n        ];\n      case 'resources':\n        return [\n          { tool: 'place', icon: '', label: 'Placer' },\n          { tool: 'select', icon: '', label: 'Slectionner' },\n          { tool: 'connect', icon: '', label: 'Connecter' },\n          { tool: 'delete', icon: '', label: 'Supprimer' },\n        ];\n      case 'timeline':\n        return [\n          { tool: 'select', icon: '', label: 'Slectionner' },\n          { tool: 'place', icon: '', label: 'vnement' },\n        ];\n      default:\n        return [];\n    }\n  };\n\n  // Terrains disponibles\n  const terrains = [\n    { type: 'grass', color: '#4ade80', label: 'Herbe' },\n    { type: 'forest', color: '#16a34a', label: 'Fort' },\n    { type: 'mountain', color: '#a8a29e', label: 'Montagne' },\n    { type: 'water', color: '#3b82f6', label: 'Eau' },\n    { type: 'desert', color: '#fbbf24', label: 'Dsert' },\n    { type: 'snow', color: '#e0e7ff', label: 'Neige' },\n    { type: 'lava', color: '#ef4444', label: 'Lave' },\n    { type: 'void', color: '#1e1b4b', label: 'Vide' },\n  ];\n\n  return (\n    <div style={{\n      width: 280,\n      background: 'linear-gradient(180deg, #1a1a2e, #16213e)',\n      padding: 20,\n      borderRight: '2px solid rgba(102, 126, 234, 0.3)',\n      overflowY: 'auto',\n      display: 'flex',\n      flexDirection: 'column',\n      gap: 20,\n    }}>\n      <h3 style={{\n        margin: 0,\n        fontSize: 18,\n        background: 'linear-gradient(45deg, #667eea, #764ba2)',\n        WebkitBackgroundClip: 'text',\n        WebkitTextFillColor: 'transparent',\n      }}>\n         Outils\n      </h3>\n      \n      {/* Slecteur d'outils */}\n      <div style={{ display: 'flex', flexWrap: 'wrap', gap: 8 }}>\n        {getTools().map(({ tool: t, icon, label }) => (\n          <button\n            key={t}\n            onClick={() => setTool(t)}\n            title={label}\n            style={{\n              width: 60,\n              height: 60,\n              background: tool === t\n                ? 'linear-gradient(135deg, #667eea, #764ba2)'\n                : 'rgba(255, 255, 255, 0.1)',\n              border: tool === t\n                ? '2px solid #667eea'\n                : '2px solid transparent',\n              borderRadius: 10,\n              color: 'white',\n              cursor: 'pointer',\n              fontSize: 24,\n              display: 'flex',\n              flexDirection: 'column',\n              alignItems: 'center',\n              justifyContent: 'center',\n              gap: 2,\n              transition: 'all 0.2s',\n            }}\n          >\n            {icon}\n            <span style={{ fontSize: 9 }}>{label}</span>\n          </button>\n        ))}\n      </div>\n      \n      {/* Options pour le mode Structure */}\n      {mode === 'structure' && (\n        <>\n          <div>\n            <h4 style={{ margin: '0 0 10px 0', fontSize: 14 }}>Terrain</h4>\n            <div style={{ display: 'grid', gridTemplateColumns: 'repeat(4, 1fr)', gap: 8 }}>\n              {terrains.map(({ type, color, label }) => (\n                <button\n                  key={type}\n                  onClick={() => setBrushTerrain(type as any)}\n                  title={label}\n                  style={{\n                    width: 50,\n                    height: 50,\n                    background: color,\n                    border: brushTerrain === type\n                      ? '3px solid white'\n                      : '1px solid rgba(255, 255, 255, 0.3)',\n                    borderRadius: 8,\n                    cursor: 'pointer',\n                    position: 'relative',\n                  }}\n                >\n                  {brushTerrain === type && (\n                    <div style={{\n                      position: 'absolute',\n                      top: -8,\n                      right: -8,\n                      background: 'white',\n                      borderRadius: '50%',\n                      width: 20,\n                      height: 20,\n                      display: 'flex',\n                      alignItems: 'center',\n                      justifyContent: 'center',\n                      fontSize: 12,\n                    }}>\n                      \n                    </div>\n                  )}\n                </button>\n              ))}\n            </div>\n          </div>\n          \n          <div>\n            <h4 style={{ margin: '0 0 10px 0', fontSize: 14 }}>Taille du pinceau: {brushSize}</h4>\n            <input\n              type=\"range\"\n              min=\"1\"\n              max=\"9\"\n              step=\"2\"\n              value={brushSize}\n              onChange={(e) => setBrushSize(Number(e.target.value))}\n              style={{\n                width: '100%',\n                accentColor: '#667eea',\n              }}\n            />\n          </div>\n        </>\n      )}\n      \n      {/* Options pour le mode Resources */}\n      {mode === 'resources' && selectedIcon && (\n        <div style={{\n          padding: 10,\n          background: 'rgba(102, 126, 234, 0.1)',\n          borderRadius: 10,\n          border: '1px solid rgba(102, 126, 234, 0.3)',\n        }}>\n          <h4 style={{ margin: '0 0 10px 0', fontSize: 14 }}>Icne slectionne</h4>\n          <div style={{\n            display: 'flex',\n            alignItems: 'center',\n            gap: 10,\n          }}>\n            <div style={{\n              fontSize: 32,\n              width: 50,\n              height: 50,\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'center',\n              background: 'rgba(255, 255, 255, 0.1)',\n              borderRadius: 8,\n            }}>\n              {selectedIcon.emoji}\n            </div>\n            <div>\n              <div style={{ fontSize: 12, fontWeight: 'bold' }}>{selectedIcon.name}</div>\n              <div style={{ fontSize: 10, color: 'rgba(255, 255, 255, 0.7)' }}>{selectedIcon.category}</div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","/**\n *  TIMELINE BAR\n * Barre de timeline pour naviguer dans le temps\n */\n\nimport React from 'react';\nimport { useUnifiedMapStore } from '../../../shared/store/unifiedMapStore';\n\nexport function TimelineBar(): React.ReactElement {\n  const {\n    temporal,\n    setCurrentDay,\n    currentMap,\n    simulationRunning,\n    startSimulation,\n    stopSimulation,\n  } = useUnifiedMapStore();\n\n  const maxDays = currentMap?.timeline.maxDays || 100;\n  const events = currentMap?.timeline.events || [];\n\n  // Trouver les vnements pour chaque jour\n  const getEventsForDay = (day: number) => {\n    return events.filter(e => e.day === day);\n  };\n\n  return (\n    <div style={{\n      height: 120,\n      background: 'linear-gradient(180deg, rgba(26, 31, 46, 0.95) 0%, rgba(20, 24, 36, 0.9) 100%)',\n      borderTop: '2px solid rgba(102, 126, 234, 0.3)',\n      padding: '10px 20px',\n      display: 'flex',\n      flexDirection: 'column',\n      gap: 10,\n    }}>\n      {/* Contrles temporels */}\n      <div style={{\n        display: 'flex',\n        alignItems: 'center',\n        gap: 15,\n      }}>\n        <h3 style={{\n          margin: 0,\n          fontSize: 16,\n          display: 'flex',\n          alignItems: 'center',\n          gap: 8,\n        }}>\n           Timeline\n        </h3>\n        \n        <button\n          onClick={() => simulationRunning ? stopSimulation() : startSimulation()}\n          style={{\n            padding: '6px 12px',\n            background: simulationRunning\n              ? 'linear-gradient(135deg, #f56565, #e53e3e)'\n              : 'linear-gradient(135deg, #48bb78, #38a169)',\n            border: 'none',\n            borderRadius: 6,\n            color: 'white',\n            cursor: 'pointer',\n            fontSize: 12,\n            fontWeight: 'bold',\n          }}\n        >\n          {simulationRunning ? ' Pause' : ' Play'}\n        </button>\n        \n        <div style={{\n          display: 'flex',\n          alignItems: 'center',\n          gap: 10,\n          marginLeft: 'auto',\n        }}>\n          <span style={{ fontSize: 14 }}>Jour {temporal.currentDay} / {maxDays}</span>\n          <div style={{\n            display: 'flex',\n            gap: 5,\n          }}>\n            <button\n              onClick={() => setCurrentDay(Math.max(1, temporal.currentDay - 1))}\n              style={{\n                padding: '4px 8px',\n                background: 'rgba(255, 255, 255, 0.1)',\n                border: '1px solid rgba(255, 255, 255, 0.2)',\n                borderRadius: 4,\n                color: 'white',\n                cursor: 'pointer',\n                fontSize: 16,\n              }}\n            >\n              \n            </button>\n            <button\n              onClick={() => setCurrentDay(Math.min(maxDays, temporal.currentDay + 1))}\n              style={{\n                padding: '4px 8px',\n                background: 'rgba(255, 255, 255, 0.1)',\n                border: '1px solid rgba(255, 255, 255, 0.2)',\n                borderRadius: 4,\n                color: 'white',\n                cursor: 'pointer',\n                fontSize: 16,\n              }}\n            >\n              \n            </button>\n          </div>\n        </div>\n      </div>\n      \n      {/* Barre de progression */}\n      <div style={{\n        position: 'relative',\n        height: 40,\n        background: 'rgba(0, 0, 0, 0.3)',\n        borderRadius: 8,\n        overflow: 'hidden',\n      }}>\n        {/* Marqueurs d'vnements */}\n        {events.map(event => {\n          const position = (event.day / maxDays) * 100;\n          return (\n            <div\n              key={event.id}\n              title={`Jour ${event.day}: ${event.name}`}\n              style={{\n                position: 'absolute',\n                left: `${position}%`,\n                top: 0,\n                width: 2,\n                height: '100%',\n                background: 'linear-gradient(180deg, transparent, #fbbf24, transparent)',\n                cursor: 'pointer',\n              }}\n              onClick={() => setCurrentDay(event.day)}\n            />\n          )}\n        )}\n        \n        {/* Curseur actuel */}\n        <div\n          style={{\n            position: 'absolute',\n            left: `${(temporal.currentDay / maxDays) * 100}%`,\n            top: -5,\n            width: 4,\n            height: 50,\n            background: 'linear-gradient(135deg, #667eea, #764ba2)',\n            borderRadius: 2,\n            boxShadow: '0 2px 10px rgba(102, 126, 234, 0.5)',\n            transform: 'translateX(-50%)',\n          }}\n        />\n        \n        {/* Slider interactif */}\n        <input\n          type=\"range\"\n          min=\"1\"\n          max={maxDays}\n          value={temporal.currentDay}\n          onChange={(e) => setCurrentDay(Number(e.target.value))}\n          style={{\n            position: 'absolute',\n            top: 0,\n            left: 0,\n            width: '100%',\n            height: '100%',\n            opacity: 0,\n            cursor: 'pointer',\n          }}\n        />\n      </div>\n      \n      {/* Infos temporelles */}\n      <div style={{\n        display: 'flex',\n        gap: 20,\n        fontSize: 11,\n        color: 'rgba(255, 255, 255, 0.7)',\n      }}>\n        <span>TW: {temporal.tw.toFixed(1)}</span>\n        <span>TE: {temporal.te.toFixed(1)}</span>\n        <span>Drive: {temporal.drift.toFixed(2)}</span>\n        <span>Dette: {temporal.debt.toFixed(2)}</span>\n        <span>vnements aujourd'hui: {getEventsForDay(temporal.currentDay).length}</span>\n      </div>\n    </div>\n  );\n}\n","/**\n *  PLAY CONTROLS\n * Contrles pour le mode jeu\n */\n\nimport React from 'react';\nimport { useUnifiedMapStore } from '../../../shared/store/unifiedMapStore';\n\nexport function PlayControls(): React.ReactElement {\n  const {\n    setMode,\n    temporal,\n    currentMap,\n  } = useUnifiedMapStore();\n\n  return (\n    <div style={{\n      width: 300,\n      background: 'linear-gradient(180deg, #1a1a2e, #16213e)',\n      padding: 20,\n      borderLeft: '2px solid rgba(102, 126, 234, 0.3)',\n      display: 'flex',\n      flexDirection: 'column',\n      gap: 20,\n    }}>\n      <h3 style={{\n        margin: 0,\n        fontSize: 18,\n        background: 'linear-gradient(45deg, #f56565, #ed8936)',\n        WebkitBackgroundClip: 'text',\n        WebkitTextFillColor: 'transparent',\n      }}>\n         Mode Jeu\n      </h3>\n      \n      {/* Infos de la partie */}\n      <div style={{\n        padding: 15,\n        background: 'rgba(245, 101, 101, 0.1)',\n        borderRadius: 10,\n        border: '1px solid rgba(245, 101, 101, 0.3)',\n      }}>\n        <h4 style={{ margin: '0 0 10px 0', fontSize: 14 }}>Partie en cours</h4>\n        <div style={{ fontSize: 12, display: 'flex', flexDirection: 'column', gap: 5 }}>\n          <div>Map: {currentMap?.name}</div>\n          <div>Jour: {temporal.currentDay}</div>\n          <div>Ressources: {currentMap?.resources.length || 0}</div>\n          <div>vnements: {currentMap?.timeline.events.length || 0}</div>\n        </div>\n      </div>\n      \n      {/* Actions de jeu */}\n      <div style={{\n        display: 'flex',\n        flexDirection: 'column',\n        gap: 10,\n      }}>\n        <button\n          style={{\n            padding: '12px',\n            background: 'linear-gradient(135deg, #48bb78, #38a169)',\n            border: 'none',\n            borderRadius: 8,\n            color: 'white',\n            cursor: 'pointer',\n            fontWeight: 'bold',\n            fontSize: 14,\n          }}\n        >\n           Fin de Tour\n        </button>\n        \n        <button\n          style={{\n            padding: '12px',\n            background: 'linear-gradient(135deg, #4299e1, #3182ce)',\n            border: 'none',\n            borderRadius: 8,\n            color: 'white',\n            cursor: 'pointer',\n            fontWeight: 'bold',\n            fontSize: 14,\n          }}\n        >\n           Sauvegarder\n        </button>\n        \n        <button\n          onClick={() => setMode('resources')}\n          style={{\n            padding: '12px',\n            background: 'rgba(255, 255, 255, 0.1)',\n            border: '1px solid rgba(255, 255, 255, 0.3)',\n            borderRadius: 8,\n            color: 'white',\n            cursor: 'pointer',\n            fontSize: 14,\n          }}\n        >\n           Retour  l'dition\n        </button>\n      </div>\n      \n      {/* Stats de jeu */}\n      <div style={{\n        marginTop: 'auto',\n        padding: 15,\n        background: 'rgba(0, 0, 0, 0.3)',\n        borderRadius: 10,\n        fontSize: 11,\n      }}>\n        <h4 style={{ margin: '0 0 10px 0', fontSize: 12 }}>Statistiques</h4>\n        <div style={{ display: 'flex', flexDirection: 'column', gap: 3 }}>\n          <div>FPS: 60</div>\n          <div>Ping: 12ms</div>\n          <div>Joueurs: 1/8</div>\n          <div>Mode: Local</div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","/**\n *  STATUS BAR\n * Barre de statut avec infos systme\n */\n\nimport React, { useState, useEffect } from 'react';\nimport { useUnifiedMapStore } from '../../../shared/store/unifiedMapStore';\n\nexport function StatusBar(): React.ReactElement {\n  const {\n    mode,\n    tool,\n    currentWorld,\n    currentMap,\n    zoomLevel,\n  } = useUnifiedMapStore();\n\n  const [time, setTime] = useState(new Date());\n  const [backends, setBackends] = useState({\n    rust: 'checking',\n    java: 'checking',\n    vector: 'checking',\n    ws: 'checking',\n  });\n\n  // Update time\n  useEffect(() => {\n    const timer = setInterval(() => setTime(new Date()), 1000);\n    return () => clearInterval(timer);\n  }, []);\n\n  // Check backends status\n  useEffect(() => {\n    const checkBackends = async () => {\n      // Rust backend\n      fetch('/engine/health')\n        .then(res => setBackends(b => ({ ...b, rust: res.ok ? 'online' : 'offline' })))\n        .catch(() => setBackends(b => ({ ...b, rust: 'offline' })));\n      \n      // Java backend\n      fetch('/api/health')\n        .then(res => setBackends(b => ({ ...b, java: res.ok ? 'online' : 'offline' })))\n        .catch(() => setBackends(b => ({ ...b, java: 'offline' })));\n      \n      // Vector DB\n      fetch('/vector/health')\n        .then(res => setBackends(b => ({ ...b, vector: res.ok ? 'online' : 'offline' })))\n        .catch(() => setBackends(b => ({ ...b, vector: 'offline' })));\n      \n      // WebSocket\n      const ws = new WebSocket('ws://localhost:8001');\n      ws.onopen = () => {\n        setBackends(b => ({ ...b, ws: 'online' }));\n        ws.close();\n      };\n      ws.onerror = () => setBackends(b => ({ ...b, ws: 'offline' }));\n    };\n\n    checkBackends();\n    const interval = setInterval(checkBackends, 30000); // Check every 30s\n    return () => clearInterval(interval);\n  }, []);\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'online': return '#48bb78';\n      case 'offline': return '#f56565';\n      case 'checking': return '#fbbf24';\n      default: return '#a0aec0';\n    }\n  };\n\n  return (\n    <footer style={{\n      height: 30,\n      background: 'linear-gradient(180deg, rgba(20, 24, 36, 0.95) 0%, rgba(0, 0, 0, 0.9) 100%)',\n      borderTop: '1px solid rgba(102, 126, 234, 0.2)',\n      padding: '0 20px',\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'space-between',\n      fontSize: 11,\n      color: 'rgba(255, 255, 255, 0.7)',\n    }}>\n      {/* Left: Mode & Tool */}\n      <div style={{ display: 'flex', gap: 15 }}>\n        <span>Mode: <strong style={{ color: '#667eea' }}>{mode}</strong></span>\n        <span>Outil: <strong>{tool}</strong></span>\n        <span>Zoom: <strong>{(zoomLevel * 100).toFixed(0)}%</strong></span>\n      </div>\n      \n      {/* Center: Files */}\n      <div style={{ display: 'flex', gap: 15 }}>\n        {currentWorld && (\n          <span> {currentWorld.name}</span>\n        )}\n        {currentMap && (\n          <span> {currentMap.name}</span>\n        )}\n      </div>\n      \n      {/* Right: Backends status */}\n      <div style={{ display: 'flex', gap: 10, alignItems: 'center' }}>\n        {Object.entries(backends).map(([name, status]) => (\n          <div key={name} style={{ display: 'flex', alignItems: 'center', gap: 4 }}>\n            <div\n              style={{\n                width: 8,\n                height: 8,\n                borderRadius: '50%',\n                background: getStatusColor(status),\n                boxShadow: status === 'online' ? `0 0 4px ${getStatusColor(status)}` : 'none',\n              }}\n            />\n            <span style={{ textTransform: 'uppercase', fontSize: 10 }}>\n              {name}\n            </span>\n          </div>\n        ))}\n        <span style={{ marginLeft: 10, color: 'rgba(255, 255, 255, 0.5)' }}>\n          {time.toLocaleTimeString()}\n        </span>\n      </div>\n    </footer>\n  );\n}\n","/**\n *  ASSETS SERVICE\n * Service unifi pour charger tous les assets depuis VECTOR_DB_ASSETS\n */\n\n// Types pour les assets\nexport interface HeroAsset {\n  id: string;\n  name: string;\n  icon: string;\n  category: string;\n  sound_hover?: string;\n  sound_activate?: string;\n  voice_type?: string;\n  theme_color?: string;\n  visual_effects?: string[];\n  backstory?: string;\n  stats?: {\n    power: number;\n    knowledge: number;\n    temporal: number;\n    quantum: number;\n  };\n}\n\nexport interface CreatureAsset {\n  id: string;\n  name: string;\n  icon: string;\n  category: string;\n  tier: number;\n  sound_hover?: string;\n  sound_activate?: string;\n  theme_color?: string;\n  visual_effects?: string[];\n  abilities?: string[];\n}\n\nexport interface ArtifactAsset {\n  id: string;\n  name: string;\n  icon: string;\n  category: string;\n  tier: number;\n  sound_hover?: string;\n  sound_activate?: string;\n  theme_color?: string;\n  visual_effects?: string[];\n  effects?: string[];\n}\n\nexport interface Formula {\n  id: string;\n  name: string;\n  category: 'temporal' | 'quantum' | 'causal' | 'dimensional' | 'energy';\n  formula: string;\n  description?: string;\n  cost?: number;\n}\n\nexport interface AudioMapping {\n  [key: string]: {\n    icon: string;\n    sound_hover?: string;\n    sound_activate?: string;\n    theme_color?: string;\n    visual_effects?: string[];\n  };\n}\n\nclass AssetsServiceClass {\n  private heroes: Map<string, HeroAsset> = new Map();\n  private creatures: Map<string, CreatureAsset> = new Map();\n  private artifacts: Map<string, ArtifactAsset> = new Map();\n  private formulas: Map<string, Formula> = new Map();\n  private audioMappings: AudioMapping = {};\n  private loaded = false;\n  \n  // NOUVEAU: Portails pour pocket worlds\n  private static portals = new Map([\n    ['portal_avalon', { name: 'Portail Avalon', icon: '', type: 'dimensional' }],\n    ['portal_pocket', { name: 'Portail de Poche', icon: '', type: 'pocket_world' }],\n    ['portal_temporal', { name: 'Portail Temporel', icon: '', type: 'temporal' }]\n  ]);\n\n  // Donnes intgres depuis VECTOR_DB_ASSETS\n  private readonly ASSETS_DATA = {\n    heroes: {\n      jean_grofignon_complete: {\n        id: 'jean_grofignon_complete',\n        name: 'Jean Grofignon',\n        icon: '',\n        category: 'COSMIC',\n        sound_hover: 'deep_magic',\n        sound_activate: 'quantum_beep',\n        voice_type: 'cosmic_chill',\n        theme_color: '#FFD700',\n        visual_effects: ['cosmic_particles', 'joint_smoke', 'canap_glow'],\n        backstory: 'Le fumeur cosmique qui comprend tout depuis son canap',\n        stats: { power: 99, knowledge: 99, temporal: 99, quantum: 99 }\n      },\n      arthur_pendragon: {\n        id: 'arthur_pendragon',\n        name: 'Arthur Pendragon',\n        icon: '',\n        category: 'LEGENDARY',\n        sound_hover: 'metal_clang',\n        sound_activate: 'power_up',\n        voice_type: 'commanding_noble',\n        theme_color: '#C0A080',\n        visual_effects: ['golden_aura', 'excalibur_glow', 'royal_particles'],\n        backstory: 'Le roi lgendaire avec Excalibur Ultimate',\n        stats: { power: 95, knowledge: 70, temporal: 60, quantum: 50 }\n      },\n      merlin_wizard: {\n        id: 'merlin_wizard',\n        name: 'Merlin',\n        icon: '',\n        category: 'LEGENDARY',\n        sound_hover: 'mystical_harmonics',\n        sound_activate: 'deep_magic',\n        voice_type: 'ethereal_wise',\n        theme_color: '#4A90E2',\n        visual_effects: ['dragon_transformation', 'elemental_swirl', 'wisdom_glow'],\n        backstory: 'Le mage lgendaire qui peut se transformer en dragon',\n        stats: { power: 80, knowledge: 99, temporal: 90, quantum: 85 }\n      },\n      grokaen_architect: {\n        id: 'grokaen_architect',\n        name: 'GROKN',\n        icon: '',\n        category: 'HOME_MAGES',\n        sound_hover: 'electronic_buzz',\n        sound_activate: 'hexagon_activation',\n        voice_type: 'system_architect',\n        theme_color: '#00FFFF',\n        visual_effects: ['6d_architecture', 'magic_stack_build', 'formula_cascade'],\n        backstory: 'L\\'architecte temporel crateur de la Magic Stack',\n        stats: { power: 75, knowledge: 95, temporal: 99, quantum: 90 }\n      },\n      anna_sorceress: {\n        id: 'anna_sorceress',\n        name: 'Anna',\n        icon: '',\n        category: 'PARADOXAL',\n        sound_hover: 'ice_crack',\n        sound_activate: 'deep_magic',\n        voice_type: 'temporal_power',\n        theme_color: '#9932CC',\n        visual_effects: ['time_nexus', 'power_swirl', 'temporal_aura'],\n        backstory: 'La gardienne du Nexus Temporel',\n        stats: { power: 85, knowledge: 80, temporal: 99, quantum: 70 }\n      }\n    },\n    \n    creatures: {\n      red_dragon: {\n        id: 'red_dragon',\n        name: 'Dragon Rouge',\n        icon: '',\n        category: 'EPIC',\n        tier: 7,\n        sound_hover: 'fire_whoosh',\n        sound_activate: 'power_up',\n        theme_color: '#FF0000',\n        visual_effects: ['fire_breath', 'wing_flap', 'treasure_guard'],\n        abilities: ['Fire Breath', 'Fear Aura', 'Fly']\n      },\n      phoenix: {\n        id: 'phoenix',\n        name: 'Phnix',\n        icon: '',\n        category: 'QUANTUM',\n        tier: 6,\n        sound_hover: 'fire_whoosh',\n        sound_activate: 'mystical_harmonics',\n        theme_color: '#FF6347',\n        visual_effects: ['fire_aura', 'rebirth_flames', 'eternal_flight'],\n        abilities: ['Rebirth', 'Fire Immunity', 'Quantum Phase']\n      },\n      unicorn: {\n        id: 'unicorn',\n        name: 'Licorne',\n        icon: '',\n        category: 'EPIC',\n        tier: 5,\n        sound_hover: 'crystalline',\n        sound_activate: 'mystical_harmonics',\n        theme_color: '#E6E6FA',\n        visual_effects: ['horn_glow', 'purification_light', 'healing_aura'],\n        abilities: ['Purify', 'Heal', 'Magic Resistance']\n      },\n      archangel: {\n        id: 'archangel',\n        name: 'Archange',\n        icon: '',\n        category: 'EPIC',\n        tier: 7,\n        sound_hover: 'ancient_resonance',\n        sound_activate: 'crystalline',\n        theme_color: '#FFD700',\n        visual_effects: ['divine_light', 'golden_wings', 'resurrection_glow'],\n        abilities: ['Resurrect', 'Divine Shield', 'Fly']\n      }\n    },\n    \n    artifacts: {\n      excalibur_ultimate: {\n        id: 'excalibur_ultimate',\n        name: 'Excalibur Ultimate',\n        icon: '',\n        category: 'LEGENDARY',\n        tier: 5,\n        sound_hover: 'metal_clang',\n        sound_activate: 'power_up',\n        theme_color: '#FFD700',\n        visual_effects: ['golden_glow', 'power_surge'],\n        effects: ['+25 Power', 'Ignore Defense', 'Temporal Strike']\n      },\n      cosmic_chaos_resolution: {\n        id: 'cosmic_chaos_resolution',\n        name: 'Rsolution du Chaos Cosmique',\n        icon: '',\n        category: 'COSMIC',\n        tier: 5,\n        sound_hover: 'quantum_beep',\n        sound_activate: 'deep_magic',\n        theme_color: '#9400D3',\n        visual_effects: ['reality_warp', 'cosmic_swirl'],\n        effects: ['Reality Control', 'Paradox Immunity', 'Quantum Mastery']\n      },\n      tesseract_prison: {\n        id: 'tesseract_prison',\n        name: 'Prison Tesseract',\n        icon: '',\n        category: 'QUATRIEME_MUR',\n        tier: 4,\n        sound_hover: 'electronic_buzz',\n        sound_activate: 'quantum_beep',\n        theme_color: '#00CED1',\n        visual_effects: ['4d_rotation', 'spatial_lock'],\n        effects: ['Dimensional Prison', 'Space Fold', 'Quantum Lock']\n      }\n    },\n    \n    formulas: {\n      temporal_shift: {\n        id: 'temporal_shift',\n        name: 'Dcalage Temporel',\n        category: 'temporal',\n        formula: '(t) =   e^(it)  R(t)',\n        description: 'Dplace une entit dans le temps',\n        cost: 20\n      },\n      quantum_collapse: {\n        id: 'quantum_collapse',\n        name: 'Effondrement Quantique',\n        category: 'quantum',\n        formula: '| = (_i|i)  |n',\n        description: 'Force une superposition  s\\'effondrer',\n        cost: 30\n      },\n      causal_fork: {\n        id: 'causal_fork',\n        name: 'Fourche Causale',\n        category: 'causal',\n        formula: 'C(tt) = P()d  (t-t)',\n        description: 'Cre une bifurcation dans la causalit',\n        cost: 40\n      },\n      energy_complex: {\n        id: 'energy_complex',\n        name: 'nergie Complexe',\n        category: 'energy',\n        formula: 'E = A  e^(i) + ',\n        description: 'Manipule l\\'nergie en amplitude et phase',\n        cost: 25\n      }\n    }\n  };\n\n  async initialize(): Promise<void> {\n    if (this.loaded) return;\n\n    // Charger les hros\n    Object.entries(this.ASSETS_DATA.heroes).forEach(([id, hero]) => {\n      this.heroes.set(id, hero);\n    });\n\n    // Charger les cratures\n    Object.entries(this.ASSETS_DATA.creatures).forEach(([id, creature]) => {\n      this.creatures.set(id, creature);\n    });\n\n    // Charger les artefacts\n    Object.entries(this.ASSETS_DATA.artifacts).forEach(([id, artifact]) => {\n      this.artifacts.set(id, artifact);\n    });\n\n    // Charger les formules\n    Object.entries(this.ASSETS_DATA.formulas).forEach(([id, formula]) => {\n      this.formulas.set(id, formula as Formula);\n    });\n\n    this.loaded = true;\n    console.log(' Assets loaded:', {\n      heroes: this.heroes.size,\n      creatures: this.creatures.size,\n      artifacts: this.artifacts.size,\n      formulas: this.formulas.size\n    });\n  }\n\n  // Getters pour les assets\n  getHero(id: string): HeroAsset | undefined {\n    return this.heroes.get(id);\n  }\n\n  getAllHeroes(): HeroAsset[] {\n    return Array.from(this.heroes.values());\n  }\n\n  getCreature(id: string): CreatureAsset | undefined {\n    return this.creatures.get(id);\n  }\n\n  getAllCreatures(): CreatureAsset[] {\n    return Array.from(this.creatures.values());\n  }\n\n  getArtifact(id: string): ArtifactAsset | undefined {\n    return this.artifacts.get(id);\n  }\n\n  getAllArtifacts(): ArtifactAsset[] {\n    return Array.from(this.artifacts.values());\n  }\n\n  getFormula(id: string): Formula | undefined {\n    return this.formulas.get(id);\n  }\n\n  getAllFormulas(): Formula[] {\n    return Array.from(this.formulas.values());\n  }\n\n  getFormulasByCategory(category: Formula['category']): Formula[] {\n    return Array.from(this.formulas.values()).filter(f => f.category === category);\n  }\n\n  // Obtenir toutes les icnes pour l'diteur\n  getAllIcons(): { emoji: string; name: string; category: string }[] {\n    const icons: { emoji: string; name: string; category: string }[] = [];\n    \n    // Hros\n    this.heroes.forEach(hero => {\n      icons.push({\n        emoji: hero.icon,\n        name: hero.name,\n        category: ' Hros'\n      });\n    });\n    \n    // Cratures\n    this.creatures.forEach(creature => {\n      icons.push({\n        emoji: creature.icon,\n        name: creature.name,\n        category: ' Cratures'\n      });\n    });\n    \n    // Artefacts\n    this.artifacts.forEach(artifact => {\n      icons.push({\n        emoji: artifact.icon,\n        name: artifact.name,\n        category: ' Artefacts'\n      });\n    });\n    \n    return icons;\n  }\n\n  // Recherche par texte\n  search(query: string): {\n    heroes: HeroAsset[];\n    creatures: CreatureAsset[];\n    artifacts: ArtifactAsset[];\n    formulas: Formula[];\n  } {\n    const q = query.toLowerCase();\n    \n    return {\n      heroes: Array.from(this.heroes.values()).filter(h => \n        h.name.toLowerCase().includes(q) || \n        h.backstory?.toLowerCase().includes(q)\n      ),\n      creatures: Array.from(this.creatures.values()).filter(c => \n        c.name.toLowerCase().includes(q) ||\n        c.abilities?.some(a => a.toLowerCase().includes(q))\n      ),\n      artifacts: Array.from(this.artifacts.values()).filter(a => \n        a.name.toLowerCase().includes(q) ||\n        a.effects?.some(e => e.toLowerCase().includes(q))\n      ),\n      formulas: Array.from(this.formulas.values()).filter(f => \n        f.name.toLowerCase().includes(q) ||\n        f.description?.toLowerCase().includes(q)\n      )\n    };\n  }\n  \n  // Mthodes pour PORTAILS\n  static getPortal(id: string) {\n    return AssetsServiceClass.portals.get(id);\n  }\n  \n  static getAllPortals() {\n    return Array.from(AssetsServiceClass.portals.entries()).map(([id, portal]) => ({\n      id,\n      ...portal,\n      category: 'portal'\n    }));\n  }\n}\n\n// Singleton\nexport const AssetsService = new AssetsServiceClass();\n","/**\n *  PLAY MAP BRIDGE\n * Fait le pont entre l'diteur unifi et le mode jeu\n * Charge la map actuelle dans le GameView\n */\n\nimport React, { useEffect, useState } from 'react';\nimport { useUnifiedMapStore } from '../../shared/store/unifiedMapStore';\nimport { HexGrid } from '../../shared/components/HexGrid';\nimport { ResourceBar } from '../../shared/components/ResourceBar';\nimport { TemporalDisplay } from '../../shared/components/TemporalDisplay';\nimport { AssetsService } from '../../services/AssetsService';\n\ninterface GameEntity {\n  id: string;\n  type: 'hero' | 'creature' | 'artifact' | 'building' | 'portal';\n  position: { x: number; y: number; z: number };\n  icon: string;\n  name: string;\n  owner: number; // ID du joueur\n  stats?: any;\n  destination?: string; // Pour les portails\n}\n\ninterface GameState {\n  entities: GameEntity[];\n  resources: {\n    gold: number;\n    crystals: number;\n    energy: number;\n    temporal: number;\n    quantum: number;\n  };\n  temporal: {\n    tw: number;\n    te: number;\n    drift: number;\n    debt: number;\n    currentDay: number;\n  };\n  turn: number;\n  activePlayer: number;\n}\n\nexport function PlayMapBridge(): React.ReactElement {\n  const {\n    currentWorld,\n    currentMap,\n    temporal,\n    setMode,\n  } = useUnifiedMapStore();\n\n  const [gameState, setGameState] = useState<GameState>({\n    entities: [],\n    resources: currentMap?.initial_state.resources || {\n      gold: 1000,\n      crystals: 100,\n      energy: 50,\n      temporal: 25,\n      quantum: 10,\n    },\n    temporal: {\n      ...temporal,\n      tw: currentMap?.initial_state.tw || 0,\n      te: currentMap?.initial_state.te || 0,\n    },\n    turn: 1,\n    activePlayer: 0,\n  });\n\n  const [selectedEntity, setSelectedEntity] = useState<GameEntity | null>(null);\n  const [isPlaying, setIsPlaying] = useState(true);\n\n  // Initialiser les assets\n  useEffect(() => {\n    AssetsService.initialize();\n  }, []);\n\n  // Convertir les resources de la map en entits de jeu\n  useEffect(() => {\n    if (!currentMap) return;\n\n    const entities: GameEntity[] = currentMap.resources.map(resource => {\n      // Rcuprer les infos depuis AssetsService\n      let stats = undefined;\n      \n      if (resource.type === 'hero') {\n        const heroData = AssetsService.getHero(resource.subtype);\n        if (heroData) {\n          stats = heroData.stats;\n        }\n      } else if (resource.type === 'creature') {\n        const creatureData = AssetsService.getCreature(resource.subtype);\n        if (creatureData) {\n          stats = { tier: creatureData.tier };\n        }\n      }\n\n      return {\n        id: resource.id,\n        type: resource.type as GameEntity['type'],\n        position: {\n          x: resource.position_6d.x,\n          y: resource.position_6d.y,\n          z: resource.position_6d.z,\n        },\n        icon: resource.emoji,\n        name: resource.name,\n        owner: 0, // Joueur 0 par dfaut\n        stats,\n      };\n    });\n\n    setGameState(prev => ({ ...prev, entities }));\n  }, [currentMap]);\n\n  // Grer les vnements temporels\n  useEffect(() => {\n    if (!currentMap) return;\n\n    const activeEvents = currentMap.timeline.events.filter(event => {\n      if (event.day === gameState.temporal.currentDay) return true;\n      \n      // Check rptitions\n      if (event.repeat) {\n        const daysSince = gameState.temporal.currentDay - event.day;\n        if (daysSince > 0 && daysSince % event.repeat.interval === 0) {\n          if (!event.repeat.times || daysSince / event.repeat.interval <= event.repeat.times) {\n            return true;\n          }\n        }\n      }\n      \n      return false;\n    });\n\n    // Appliquer les vnements\n    activeEvents.forEach(event => {\n      console.log(` vnement jour ${gameState.temporal.currentDay}: ${event.name}`);\n      \n      if (event.action?.spawn) {\n        // Ajouter de nouvelles entits\n        const newEntities = event.action.spawn.map(spawn => ({\n          id: spawn.id,\n          type: spawn.type as GameEntity['type'],\n          position: {\n            x: spawn.position_6d.x,\n            y: spawn.position_6d.y,\n            z: spawn.position_6d.z,\n          },\n          icon: spawn.emoji,\n          name: spawn.name,\n          owner: 0,\n        }));\n        \n        setGameState(prev => ({\n          ...prev,\n          entities: [...prev.entities, ...newEntities],\n        }));\n      }\n    });\n  }, [gameState.temporal.currentDay, currentMap]);\n\n  // Fin de tour\n  const endTurn = () => {\n    setGameState(prev => ({\n      ...prev,\n      turn: prev.turn + 1,\n      temporal: {\n        ...prev.temporal,\n        currentDay: prev.temporal.currentDay + 1,\n        tw: prev.temporal.tw + 1,\n        te: prev.temporal.te + 0.95,\n        drift: Math.abs((prev.temporal.tw + 1) - (prev.temporal.te + 0.95)),\n      },\n      resources: {\n        ...prev.resources,\n        gold: prev.resources.gold + 100,\n        crystals: prev.resources.crystals + 10,\n        energy: Math.min(100, prev.resources.energy + 10),\n      },\n    }));\n  };\n\n  // Dplacer une entit\n  const moveEntity = (entityId: string, newX: number, newY: number) => {\n    setGameState(prev => ({\n      ...prev,\n      entities: prev.entities.map(e =>\n        e.id === entityId\n          ? { ...e, position: { ...e.position, x: newX, y: newY }}\n          : e\n      ),\n    }));\n  };\n\n  if (!currentWorld || !currentMap) {\n    return (\n      <div style={{\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        height: '100vh',\n        background: 'linear-gradient(135deg, #0a0e1a 0%, #1a1d3a 100%)',\n      }}>\n        <div style={{ textAlign: 'center', color: 'white' }}>\n          <h2>Aucune map  jouer !</h2>\n          <button\n            onClick={() => setMode('structure')}\n            style={{\n              marginTop: 20,\n              padding: '12px 24px',\n              background: 'linear-gradient(135deg, #667eea, #764ba2)',\n              border: 'none',\n              borderRadius: 8,\n              color: 'white',\n              cursor: 'pointer',\n              fontSize: 16,\n            }}\n          >\n            Retour  l'diteur\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div style={{\n      display: 'flex',\n      flexDirection: 'column',\n      height: '100vh',\n      background: '#0a0e1a',\n    }}>\n      {/* Header avec ressources */}\n      <header style={{\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        padding: '12px 20px',\n        background: 'linear-gradient(180deg, rgba(20, 24, 36, 0.95) 0%, rgba(26, 31, 46, 0.9) 100%)',\n        borderBottom: '1px solid rgba(102, 126, 234, 0.3)',\n      }}>\n        <div style={{ display: 'flex', alignItems: 'center', gap: 20 }}>\n          <h2 style={{\n            margin: 0,\n            fontSize: 20,\n            background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n            WebkitBackgroundClip: 'text',\n            WebkitTextFillColor: 'transparent',\n          }}>\n             {currentMap.name}\n          </h2>\n          <span style={{ color: 'rgba(255,255,255,0.6)', fontSize: 14 }}>\n            Tour {gameState.turn}  Jour {gameState.temporal.currentDay}\n          </span>\n        </div>\n        \n        <TemporalDisplay\n          temporal={gameState.temporal}\n          variant=\"compact\"\n          showEnergy={true}\n        />\n      </header>\n      \n      {/* Barre de ressources */}\n      <div style={{\n        padding: '0 20px',\n        background: 'rgba(20, 24, 36, 0.5)',\n      }}>\n        <ResourceBar\n          resources={gameState.resources}\n          maxValues={{\n            gold: 9999,\n            crystals: 999,\n            energy: 100,\n            temporal: 100,\n            quantum: 50,\n          }}\n          variant=\"horizontal\"\n        />\n      </div>\n      \n      {/* Zone de jeu principale */}\n      <main style={{\n        flex: 1,\n        position: 'relative',\n        overflow: 'hidden',\n        display: 'flex',\n      }}>\n        {/* Canvas de jeu */}\n        <div style={{\n          flex: 1,\n          position: 'relative',\n          background: 'radial-gradient(circle at center, rgba(102, 126, 234, 0.05) 0%, rgba(0, 0, 0, 0.3) 100%)',\n        }}>\n          {/* Grille hexagonale en fond */}\n          {currentWorld && (\n            <div style={{ position: 'absolute', top: 0, left: 0, width: '100%', height: '100%', opacity: 0.3 }}>\n              <HexGrid\n                width={currentWorld.dimensions.width}\n                height={currentWorld.dimensions.height}\n                onHexClick={(q, r) => {\n                  if (selectedEntity) {\n                    // Convertir coordonnes hex en pixel pour le dplacement\n                    moveEntity(selectedEntity.id, q * 60, r * 60);\n                    setSelectedEntity(null);\n                  }\n                }}\n              />\n            </div>\n          )}\n          \n          {/* Entits */}\n          {gameState.entities.map(entity => (\n            <div\n              key={entity.id}\n              onClick={() => setSelectedEntity(entity)}\n              style={{\n                position: 'absolute',\n                left: entity.position.x,\n                top: entity.position.y,\n                width: 50,\n                height: 50,\n                fontSize: 32,\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                cursor: 'pointer',\n                background: selectedEntity?.id === entity.id \n                  ? 'radial-gradient(circle, rgba(102, 126, 234, 0.5), transparent)'\n                  : 'transparent',\n                border: selectedEntity?.id === entity.id \n                  ? '2px solid #667eea'\n                  : 'none',\n                borderRadius: '50%',\n                transition: 'all 0.2s',\n                transform: entity.position.z ? `translateZ(${entity.position.z * 10}px)` : undefined,\n              }}\n              title={entity.name}\n            >\n              {entity.icon}\n            </div>\n          ))}\n        </div>\n        \n        {/* Panneau latral */}\n        <aside style={{\n          width: 300,\n          background: 'linear-gradient(180deg, #1a1a2e, #16213e)',\n          padding: 20,\n          borderLeft: '2px solid rgba(102, 126, 234, 0.3)',\n          overflowY: 'auto',\n        }}>\n          {selectedEntity ? (\n            <div>\n              <h3 style={{\n                fontSize: 18,\n                marginBottom: 15,\n                background: 'linear-gradient(45deg, #667eea, #764ba2)',\n                WebkitBackgroundClip: 'text',\n                WebkitTextFillColor: 'transparent',\n              }}>\n                {selectedEntity.icon} {selectedEntity.name}\n              </h3>\n              <div style={{ fontSize: 12, color: 'rgba(255,255,255,0.7)' }}>\n                <div>Type: {selectedEntity.type}</div>\n                <div>Position: ({selectedEntity.position.x}, {selectedEntity.position.y})</div>\n                {selectedEntity.stats && (\n                  <div style={{ marginTop: 10 }}>\n                    <div>Stats:</div>\n                    {Object.entries(selectedEntity.stats).map(([key, value]) => (\n                      <div key={key} style={{ marginLeft: 10 }}>\n                        {key}: {value}\n                      </div>\n                    ))}\n                  </div>\n                )}\n              </div>\n              <button\n                onClick={() => setSelectedEntity(null)}\n                style={{\n                  marginTop: 15,\n                  padding: '8px 16px',\n                  background: 'rgba(255, 255, 255, 0.1)',\n                  border: '1px solid rgba(255, 255, 255, 0.3)',\n                  borderRadius: 6,\n                  color: 'white',\n                  cursor: 'pointer',\n                  fontSize: 12,\n                  width: '100%',\n                }}\n              >\n                Dslectionner\n              </button>\n            </div>\n          ) : (\n            <div style={{ color: 'rgba(255,255,255,0.5)', fontSize: 14 }}>\n              Cliquez sur une entit pour la slectionner\n            </div>\n          )}\n          \n          {/* Conditions de victoire */}\n          {currentMap.victory_conditions.length > 0 && (\n            <div style={{ marginTop: 30 }}>\n              <h4 style={{ fontSize: 14, marginBottom: 10 }}>Conditions de victoire</h4>\n              {currentMap.victory_conditions.map((condition, i) => (\n                <div key={i} style={{\n                  padding: 8,\n                  background: 'rgba(72, 187, 120, 0.1)',\n                  borderRadius: 6,\n                  marginBottom: 8,\n                  fontSize: 12,\n                  color: 'rgba(255,255,255,0.8)',\n                }}>\n                  {condition.description}\n                </div>\n              ))}\n            </div>\n          )}\n        </aside>\n      </main>\n      \n      {/* Footer avec actions */}\n      <footer style={{\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        padding: '12px 20px',\n        background: 'rgba(20, 24, 36, 0.9)',\n        borderTop: '1px solid rgba(102, 126, 234, 0.3)',\n      }}>\n        <div style={{ display: 'flex', gap: 10 }}>\n          <button\n            onClick={endTurn}\n            style={{\n              padding: '10px 20px',\n              background: 'linear-gradient(135deg, #48bb78, #38a169)',\n              border: 'none',\n              borderRadius: 8,\n              color: 'white',\n              cursor: 'pointer',\n              fontWeight: 'bold',\n              fontSize: 14,\n            }}\n          >\n             Fin de Tour\n          </button>\n          \n          <button\n            onClick={() => setIsPlaying(!isPlaying)}\n            style={{\n              padding: '10px 20px',\n              background: isPlaying\n                ? 'linear-gradient(135deg, #f56565, #e53e3e)'\n                : 'linear-gradient(135deg, #4299e1, #3182ce)',\n              border: 'none',\n              borderRadius: 8,\n              color: 'white',\n              cursor: 'pointer',\n              fontSize: 14,\n            }}\n          >\n            {isPlaying ? ' Pause' : ' Reprendre'}\n          </button>\n        </div>\n        \n        <button\n          onClick={() => setMode('resources')}\n          style={{\n            padding: '10px 20px',\n            background: 'rgba(255, 255, 255, 0.1)',\n            border: '1px solid rgba(255, 255, 255, 0.3)',\n            borderRadius: 8,\n            color: 'white',\n            cursor: 'pointer',\n            fontSize: 14,\n          }}\n        >\n           Retour  l'diteur\n        </button>\n      </footer>\n    </div>\n  );\n}\n","/**\n *  UNIFIED MAP SYSTEM\n * \n * L'DITEUR EST LE JEU !\n * Unifie world-editor, MapIconPlacer et SpatioTemporalMapEditor\n */\n\nimport React, { useState, useEffect, lazy, Suspense } from 'react';\nimport V2Adapter from '../../shared/v2-adapter';\nimport { MapFileService } from '../../services/MapFileService';\nimport { useUnifiedMapStore } from '../../shared/store/unifiedMapStore';\nimport type { EditorMode } from '../../shared/store/unifiedMapStore';\n\n// Import dynamique des diteurs existants\nconst MapIconPlacerV2 = lazy(() => import('../editor/MapIconPlacerV2').then(m => ({ default: m.default })));\nconst SpatioTemporalMapEditor = lazy(() => import('../../shared/components/SpatioTemporalMapEditor').then(m => ({ default: m.SpatioTemporalMapEditor })));\n\n// Pour world-editor, on va crer un wrapper plus tard\nimport { StructureEditor } from './components/StructureEditor';\nimport { ModeSelector } from './components/ModeSelector';\nimport { ToolPalette } from './components/ToolPalette';\nimport { TimelineBar } from './components/TimelineBar';\nimport { PlayControls } from './components/PlayControls';\nimport { StatusBar } from './components/StatusBar';\nimport { PlayMapBridge } from './PlayMapBridge';\n\nexport function UnifiedMapSystem(): React.ReactElement {\n  const {\n    mode,\n    setMode,\n    currentWorld,\n    currentMap,\n    temporal,\n    showGrid,\n    showRegions,\n    showConnections,\n    showTimeline,\n    zoomLevel,\n    newWorld,\n    newMap,\n    exportToFile,\n    playMap,\n    canPlayMap,\n  } = useUnifiedMapStore();\n\n  // Initialize AssetsService\n  useEffect(() => {\n    import('../../services/AssetsService').then(({ AssetsService }) => {\n      AssetsService.initialize();\n    });\n  }, []);\n\n  // Auto-create world/map si ncessaire\n  useEffect(() => {\n    if (!currentWorld) {\n      console.log('Creating default world...');\n      newWorld('Nouveau Monde', 20, 20); // Plus petit pour commencer\n    }\n  }, [currentWorld, newWorld]);\n\n  useEffect(() => {\n    if (currentWorld && !currentMap) {\n      console.log('Creating default map...');\n      newMap('Nouvelle Map');\n    }\n  }, [currentWorld, currentMap, newMap]);\n\n  // Rendu selon le mode\n  const renderEditor = () => {\n    switch (mode) {\n      case 'structure':\n        return <StructureEditor />;\n      \n      case 'resources':\n        return (\n          <Suspense fallback={<LoadingEditor />}>\n            <MapIconPlacerV2\n              onPlace={(res) => {\n                useUnifiedMapStore.getState().placeResource(res.position_6d.x, res.position_6d.y);\n              }}\n              onUpdate={(id, updates) => {\n                useUnifiedMapStore.getState().updateResource(id, updates as any);\n              }}\n              onDelete={(id) => {\n                useUnifiedMapStore.getState().deleteResource(id);\n              }}\n              onConnect={(from, to, type) => {\n                useUnifiedMapStore.getState().createConnection(from, to, type as any);\n              }}\n            />\n          </Suspense>\n        );\n      \n      case 'timeline':\n        return (\n          <Suspense fallback={<LoadingEditor />}>\n            <TimelineWrapper />\n          </Suspense>\n        );\n      \n      case 'play':\n        return <PlayMapBridge />;\n      \n      case 'overlay':\n        return <OverlayMode />;\n      \n      default:\n        return <StructureEditor />;\n    }\n  };\n\n  return (\n    <div style={{\n      display: 'flex',\n      flexDirection: 'column',\n      height: '100vh',\n      background: 'linear-gradient(135deg, #0a0e1a 0%, #1a1d3a 100%)',\n      color: 'white',\n      overflow: 'hidden',\n    }}>\n      {/* Header avec slecteur de mode */}\n      <header style={{\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        padding: '12px 20px',\n        background: 'linear-gradient(180deg, rgba(20, 24, 36, 0.95) 0%, rgba(26, 31, 46, 0.9) 100%)',\n        borderBottom: '2px solid rgba(102, 126, 234, 0.5)',\n        boxShadow: '0 2px 10px rgba(0,0,0,0.3)',\n      }}>\n        <div style={{ display: 'flex', alignItems: 'center', gap: 20 }}>\n          <h1 style={{\n            fontSize: 24,\n            fontWeight: 'bold',\n            background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n            WebkitBackgroundClip: 'text',\n            WebkitTextFillColor: 'transparent',\n            margin: 0,\n          }}>\n             Unified Map System\n          </h1>\n          \n          <ModeSelector\n            currentMode={mode}\n            onModeChange={setMode}\n          />\n        </div>\n        \n        <div style={{ display: 'flex', gap: 10 }}>\n          {/* Boutons d'action rapide */}\n          <button\n            onClick={() => newWorld('Nouveau Monde', 50, 50)}\n            style={{\n              padding: '8px 16px',\n              background: 'rgba(102, 126, 234, 0.2)',\n              border: '1px solid rgba(102, 126, 234, 0.5)',\n              borderRadius: 8,\n              color: 'white',\n              cursor: 'pointer',\n              fontSize: 14,\n            }}\n          >\n             Nouveau World\n          </button>\n\n          <button\n            onClick={async () => {\n              if (useUnifiedMapStore.getState().currentMap) {\n                await useUnifiedMapStore.getState().saveMap();\n              }\n            }}\n            style={{\n              padding: '8px 16px',\n              background: 'rgba(72, 187, 120, 0.2)',\n              border: '1px solid rgba(72, 187, 120, 0.5)',\n              borderRadius: 8,\n              color: 'white',\n              cursor: 'pointer',\n              fontSize: 14,\n            }}\n          >\n             Save Map\n          </button>\n\n          <button\n            onClick={async () => {\n              const { local } = await MapFileService.listMaps();\n              if (local && local.length > 0) {\n                // charge la dernire entre\n                const last = local[local.length - 1];\n                useUnifiedMapStore.getState().loadMap(last);\n              }\n            }}\n            style={{\n              padding: '8px 16px',\n              background: 'rgba(66, 153, 225, 0.2)',\n              border: '1px solid rgba(66, 153, 225, 0.5)',\n              borderRadius: 8,\n              color: 'white',\n              cursor: 'pointer',\n              fontSize: 14,\n            }}\n          >\n             Load Last\n          </button>\n          \n          <button\n            onClick={exportToFile}\n            style={{\n              padding: '8px 16px',\n              background: 'rgba(102, 126, 234, 0.2)',\n              border: '1px solid rgba(102, 126, 234, 0.5)',\n              borderRadius: 8,\n              color: 'white',\n              cursor: 'pointer',\n              fontSize: 14,\n            }}\n          >\n             Export\n          </button>\n          \n          {canPlayMap() && (\n            <button\n              onClick={playMap}\n              style={{\n                padding: '8px 20px',\n                background: 'linear-gradient(135deg, #48bb78 0%, #38a169 100%)',\n                border: 'none',\n                borderRadius: 8,\n                color: 'white',\n                cursor: 'pointer',\n                fontWeight: 'bold',\n                fontSize: 14,\n                boxShadow: '0 2px 8px rgba(72, 187, 120, 0.3)',\n              }}\n            >\n               PLAY THIS MAP\n            </button>\n          )}\n\n          {canPlayMap() && (\n            <button\n              onClick={async () => {\n                const state = useUnifiedMapStore.getState();\n                const map = state.currentMap;\n                if (!map) return;\n                // Push toutes les resources vers le moteur\n                for (const r of map.resources) {\n                  try {\n                    await V2Adapter.upsertEntity({\n                      id: r.id,\n                      position: { x: r.position_6d.x, y: r.position_6d.y },\n                      te: r.temporal?.te ?? map.initial_state.te,\n                      energy_complex: r.energy_complex ? { A: r.energy_complex.A, phi: r.energy_complex.phi } : { A: 50, phi: 0 }\n                    });\n                  } catch (e) {\n                    // continue\n                  }\n                }\n              }}\n              style={{\n                padding: '8px 16px',\n                background: 'rgba(237, 137, 54, 0.2)',\n                border: '1px solid rgba(237, 137, 54, 0.5)',\n                borderRadius: 8,\n                color: 'white',\n                cursor: 'pointer',\n                fontSize: 14,\n              }}\n            >\n               Sync to Engine\n            </button>\n          )}\n        </div>\n      </header>\n      \n      {/* Container principal avec palette et canvas */}\n      <div style={{\n        flex: 1,\n        display: 'flex',\n        position: 'relative',\n        overflow: 'hidden',\n      }}>\n        {/* Palette d'outils  gauche */}\n        {mode !== 'play' && (\n          <ToolPalette mode={mode} />\n        )}\n        \n        {/* Canvas principal */}\n        <main style={{\n          flex: 1,\n          position: 'relative',\n          overflow: 'hidden',\n        }}>\n          {renderEditor()}\n        </main>\n        \n        {/* Contrles de jeu  droite (mode play) */}\n        {mode === 'play' && (\n          <PlayControls />\n        )}\n      </div>\n      \n      {/* Timeline en bas (si active) */}\n      {showTimeline && (\n        <TimelineBar />\n      )}\n      \n      {/* Status bar */}\n      <StatusBar />\n    </div>\n  );\n}\n\n// ========== WRAPPERS POUR LES DITEURS EXISTANTS ==========\n\nfunction MapIconPlacerWrapper(): React.ReactElement {\n  // Adapter MapIconPlacerV2 pour utiliser le store unifi\n  const store = useUnifiedMapStore();\n  \n  // MapIconPlacerV2 a sa propre logique, on le wrap\n  return (\n    <div style={{ width: '100%', height: '100%' }}>\n      <MapIconPlacerV2 />\n      {/* TODO: Synchroniser avec le store unifi */}\n    </div>\n  );\n}\n\nfunction TimelineWrapper(): React.ReactElement {\n  const store = useUnifiedMapStore();\n  \n  return (\n    <SpatioTemporalMapEditor\n      mapWidth={store.currentWorld?.dimensions.width || 50}\n      mapHeight={store.currentWorld?.dimensions.height || 50}\n      currentDay={store.temporal.currentDay}\n      onEventPlace={(event) => {\n        // Adapter l'vnement pour le store unifi\n        store.addEvent({\n          day: event.time,\n          type: 'spawn',\n          name: event.entity.name,\n          description: `${event.entity.name} apparat`,\n          action: {\n            spawn: [{\n              id: event.id,\n              type: event.entity.type as any,\n              subtype: event.entity.id,\n              emoji: event.entity.icon,\n              name: event.entity.name,\n              position_6d: {\n                x: event.x,\n                y: event.y,\n                z: event.z || 0,\n                t: event.time,\n                c: 0,\n                psi: 0,\n              },\n            }],\n          },\n        });\n      }}\n    />\n  );\n}\n\n\n\nfunction OverlayMode(): React.ReactElement {\n  // Mode overlay avec tous les diteurs superposs\n  return (\n    <div style={{\n      width: '100%',\n      height: '100%',\n      position: 'relative',\n    }}>\n      {/* Structure en fond */}\n      <div style={{\n        position: 'absolute',\n        top: 0,\n        left: 0,\n        width: '100%',\n        height: '100%',\n        opacity: 0.5,\n      }}>\n        <StructureEditor />\n      </div>\n      \n      {/* Resources par dessus */}\n      <div style={{\n        position: 'absolute',\n        top: 0,\n        left: 0,\n        width: '100%',\n        height: '100%',\n        opacity: 0.7,\n        pointerEvents: 'none',\n      }}>\n        <Suspense fallback={null}>\n          <MapIconPlacerWrapper />\n        </Suspense>\n      </div>\n      \n      {/* Timeline indicators */}\n      <div style={{\n        position: 'absolute',\n        top: 10,\n        right: 10,\n        background: 'rgba(0,0,0,0.8)',\n        padding: 15,\n        borderRadius: 10,\n        border: '1px solid rgba(102, 126, 234, 0.5)',\n      }}>\n        <h3 style={{ margin: 0, marginBottom: 10 }}>Mode Overlay</h3>\n        <p style={{ margin: 0, fontSize: 12, color: 'rgba(255,255,255,0.7)' }}>\n          Tous les layers visibles\n        </p>\n      </div>\n    </div>\n  );\n}\n\nfunction LoadingEditor(): React.ReactElement {\n  return (\n    <div style={{\n      width: '100%',\n      height: '100%',\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n    }}>\n      <div style={{\n        fontSize: 24,\n        color: 'rgba(255,255,255,0.5)',\n      }}>\n        Chargement...\n      </div>\n    </div>\n  );\n}\n","import React, { useEffect, useRef, useState } from 'react';\nimport './AIBattleWrapper.css';\n\ninterface BattleEvent {\n    type: 'attack' | 'spell' | 'move' | 'defend' | 'heal';\n    source: 'ia1' | 'ia2';\n    target?: 'ia1' | 'ia2';\n    damage?: number;\n    spell?: string;\n    formula?: string;\n    position?: { x: number; y: number; z?: number; t?: number; c?: number; psi?: number };\n}\n\ninterface BattleState {\n    round: number;\n    scenario: 'classic' | 'temporal' | 'quantum' | '6d';\n    ia1: {\n        hp: number;\n        energy: number;\n        position: { x: number; y: number };\n        wins: number;\n    };\n    ia2: {\n        hp: number;\n        energy: number;\n        position: { x: number; y: number };\n        wins: number;\n    };\n}\n\nexport const AIBattleWrapper: React.FC = () => {\n    const iframeRef = useRef<HTMLIFrameElement>(null);\n    const [isConnected, setIsConnected] = useState(false);\n    const [battleState, setBattleState] = useState<BattleState | null>(null);\n    const [useV2API, setUseV2API] = useState(false);\n    const [wsStatus, setWsStatus] = useState<'disconnected' | 'connecting' | 'connected'>('disconnected');\n\n    // Chemin vers le fichier HTML original\n    const htmlPath = '/demos/experimental/IA_VS_IA_AUTOPLAY.html';\n\n    useEffect(() => {\n        if (!iframeRef.current) return;\n\n        // couter les messages de l'iframe\n        const handleMessage = async (event: MessageEvent) => {\n            if (event.data.type === 'battle-event') {\n                const battleEvent = event.data.payload as BattleEvent;\n                \n                if (useV2API) {\n                    // Envoyer l'vnement au backend V2\n                    await sendToV2Backend(battleEvent);\n                }\n\n                // Mettre  jour l'tat local\n                console.log('Battle Event:', battleEvent);\n            } else if (event.data.type === 'battle-state') {\n                setBattleState(event.data.payload);\n            }\n        };\n\n        window.addEventListener('message', handleMessage);\n\n        // Injecter du code dans l'iframe pour intercepter les vnements\n        const injectBridge = () => {\n            const iframe = iframeRef.current;\n            if (!iframe?.contentWindow) return;\n\n            try {\n                // Attendre que l'iframe soit charge\n                iframe.onload = () => {\n                    const iframeWindow = iframe.contentWindow;\n                    if (!iframeWindow) return;\n\n                    // Injecter un script pour intercepter les actions\n                    const script = iframeWindow.document.createElement('script');\n                    script.textContent = `\n                        // Sauvegarder les fonctions originales\n                        const originalPerformAttack = window.performAttack;\n                        const originalPerformSpell = window.performSpecialSpell;\n                        const originalGameTick = window.gameTick;\n                        \n                        // Surcharger pour envoyer des messages au parent\n                        window.performAttack = function(iaNumber, type) {\n                            const result = originalPerformAttack.apply(this, arguments);\n                            \n                            // Envoyer l'vnement au parent React\n                            window.parent.postMessage({\n                                type: 'battle-event',\n                                payload: {\n                                    type: 'attack',\n                                    source: iaNumber === 1 ? 'ia1' : 'ia2',\n                                    target: iaNumber === 1 ? 'ia2' : 'ia1',\n                                    spell: type\n                                }\n                            }, '*');\n                            \n                            return result;\n                        };\n                        \n                        window.performSpecialSpell = function(iaNumber, spellType) {\n                            const result = originalPerformSpell.apply(this, arguments);\n                            \n                            // Envoyer l'vnement au parent React\n                            window.parent.postMessage({\n                                type: 'battle-event',\n                                payload: {\n                                    type: 'spell',\n                                    source: iaNumber === 1 ? 'ia1' : 'ia2',\n                                    spell: spellType,\n                                    formula: window.spells[spellType]?.formula\n                                }\n                            }, '*');\n                            \n                            return result;\n                        };\n                        \n                        // Envoyer l'tat  chaque tick\n                        window.gameTick = function() {\n                            const result = originalGameTick.apply(this, arguments);\n                            \n                            window.parent.postMessage({\n                                type: 'battle-state',\n                                payload: window.gameState\n                            }, '*');\n                            \n                            return result;\n                        };\n                        \n                        console.log(' Bridge V2 API inject avec succs');\n                    `;\n                    iframeWindow.document.head.appendChild(script);\n                    setIsConnected(true);\n                };\n            } catch (error) {\n                console.error('Erreur injection bridge:', error);\n            }\n        };\n\n        injectBridge();\n\n        return () => {\n            window.removeEventListener('message', handleMessage);\n        };\n    }, [useV2API]);\n\n    // Connexion aux API V2\n    useEffect(() => {\n        if (!useV2API) return;\n\n        const connectToV2 = async () => {\n            setWsStatus('connecting');\n            \n            try {\n                // Importer l'adaptateur V2\n                const { V2Adapter } = await import('../../shared/v2-adapter');\n                \n                // Se connecter au WebSocket\n                await V2Adapter.connectWebSocket();\n                setWsStatus('connected');\n                \n                console.log(' Connect aux API V2');\n            } catch (error) {\n                console.error('Erreur connexion V2:', error);\n                setWsStatus('disconnected');\n            }\n        };\n\n        connectToV2();\n    }, [useV2API]);\n\n    // Envoyer les vnements au backend V2\n    const sendToV2Backend = async (event: BattleEvent) => {\n        try {\n            // Formater pour l'API V2\n            const v2Event = {\n                type: 'COMBAT_ACTION',\n                timestamp: Date.now(),\n                data: {\n                    action: event.type,\n                    source: event.source,\n                    target: event.target,\n                    value: event.damage,\n                    formula: event.formula,\n                    position: event.position || { x: 0, y: 0, z: 0, t: Date.now(), c: 0, psi: 0 }\n                }\n            };\n\n            // Envoyer au backend Rust (port 3001)\n            const response = await fetch('http://localhost:3001/api/v2/combat/action', {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify(v2Event)\n            });\n\n            if (response.ok) {\n                const result = await response.json();\n                console.log('V2 Response:', result);\n                \n                // Si le backend renvoie une action IA, l'excuter dans l'iframe\n                if (result.ai_action) {\n                    executeAIAction(result.ai_action);\n                }\n            }\n        } catch (error) {\n            console.error('Erreur envoi V2:', error);\n        }\n    };\n\n    // Excuter une action renvoye par l'IA backend\n    const executeAIAction = (action: any) => {\n        if (!iframeRef.current?.contentWindow) return;\n        \n        // Envoyer la commande  l'iframe\n        iframeRef.current.contentWindow.postMessage({\n            type: 'execute-action',\n            payload: action\n        }, '*');\n    };\n\n    // Contrles pour dmarrer avec V2 ou en local\n    const handleStartWithV2 = () => {\n        setUseV2API(true);\n        if (iframeRef.current?.contentWindow) {\n            // Dmarrer la bataille dans l'iframe\n            (iframeRef.current.contentWindow as any).startBattle?.();\n        }\n    };\n\n    const handleStartLocal = () => {\n        setUseV2API(false);\n        if (iframeRef.current?.contentWindow) {\n            (iframeRef.current.contentWindow as any).startBattle?.();\n        }\n    };\n\n    return (\n        <div className=\"ai-battle-wrapper\">\n            <div className=\"battle-controls\">\n                <div className=\"control-panel\">\n                    <h2> Mode Combat IA vs IA</h2>\n                    \n                    <div className=\"mode-selector\">\n                        <button \n                            className={`mode-btn ${!useV2API ? 'active' : ''}`}\n                            onClick={() => setUseV2API(false)}\n                        >\n                            Mode Local (HTML Original)\n                        </button>\n                        <button \n                            className={`mode-btn ${useV2API ? 'active' : ''}`}\n                            onClick={() => setUseV2API(true)}\n                        >\n                            Mode V2 API (Backend Rust)\n                        </button>\n                    </div>\n\n                    {useV2API && (\n                        <div className=\"v2-status\">\n                            <span className={`status-indicator ${wsStatus}`}>\n                                {wsStatus === 'connected' ? '' : wsStatus === 'connecting' ? '' : ''}\n                            </span>\n                            <span>Backend V2: {wsStatus}</span>\n                        </div>\n                    )}\n\n                    <div className=\"action-buttons\">\n                        <button \n                            className=\"action-btn start\"\n                            onClick={handleStartWithV2}\n                            disabled={useV2API && wsStatus !== 'connected'}\n                        >\n                             Dmarrer avec V2\n                        </button>\n                        <button \n                            className=\"action-btn start-local\"\n                            onClick={handleStartLocal}\n                        >\n                             Dmarrer en Local\n                        </button>\n                    </div>\n\n                    {battleState && (\n                        <div className=\"battle-info\">\n                            <h3>tat du Combat</h3>\n                            <div className=\"info-grid\">\n                                <div>Round: {battleState.round}</div>\n                                <div>Scnario: {battleState.scenario}</div>\n                                <div>IA1 HP: {battleState.ia1.hp}</div>\n                                <div>IA2 HP: {battleState.ia2.hp}</div>\n                            </div>\n                        </div>\n                    )}\n                </div>\n\n                <div className=\"bridge-status\">\n                    <span className={`bridge-indicator ${isConnected ? 'connected' : 'disconnected'}`}>\n                        {isConnected ? ' Bridge actif' : ' Bridge inactif'}\n                    </span>\n                </div>\n            </div>\n\n            <div className=\"battle-iframe-container\">\n                <iframe\n                    ref={iframeRef}\n                    src={htmlPath}\n                    title=\"IA vs IA Battle\"\n                    className=\"battle-iframe\"\n                    sandbox=\"allow-same-origin allow-scripts\"\n                />\n            </div>\n        </div>\n    );\n};\n\nexport default AIBattleWrapper;\n","import React, { useEffect, useRef, useState } from 'react';\nimport './ChasseMegaMapWrapper.css';\n\ninterface MapPosition {\n    x: number;\n    y: number;\n    z: number;\n    t: number;  // Dimension temporelle\n    c: number;  // Causalit\n    psi: number; // Quantique\n}\n\ninterface GameEvent {\n    type: 'move' | 'collect' | 'battle' | 'portal' | 'temporal_shift';\n    position: MapPosition;\n    entity?: string;\n    value?: any;\n}\n\nexport const ChasseMegaMapWrapper: React.FC = () => {\n    const iframeRef = useRef<HTMLIFrameElement>(null);\n    const [isConnected, setIsConnected] = useState(false);\n    const [currentPosition, setCurrentPosition] = useState<MapPosition>({\n        x: 0, y: 0, z: 0, t: 0, c: 0, psi: 0\n    });\n    const [useV2API, setUseV2API] = useState(false);\n    const [wsStatus, setWsStatus] = useState<'disconnected' | 'connecting' | 'connected'>('disconnected');\n    const [gameState, setGameState] = useState({\n        day: 1,\n        week: 1,\n        month: 1,\n        resources: {\n            gold: 1000,\n            wood: 20,\n            ore: 20,\n            gems: 10,\n            temporalEnergy: 100\n        }\n    });\n\n    // Chemin vers le HTML original\n    const htmlPath = '/CHASSE_TEMPORELLE_MEGA_MAP.html';\n\n    useEffect(() => {\n        if (!iframeRef.current) return;\n\n        // couter les messages de l'iframe\n        const handleMessage = async (event: MessageEvent) => {\n            if (event.data.type === 'map-event') {\n                const gameEvent = event.data.payload as GameEvent;\n                \n                if (useV2API) {\n                    // Envoyer au backend V2 pour calculs 6D\n                    await sendToV2Backend(gameEvent);\n                }\n\n                // Mettre  jour la position locale\n                if (gameEvent.position) {\n                    setCurrentPosition(gameEvent.position);\n                }\n\n                console.log('Map Event:', gameEvent);\n            } else if (event.data.type === 'game-state') {\n                setGameState(event.data.payload);\n            }\n        };\n\n        window.addEventListener('message', handleMessage);\n\n        // Injecter le bridge dans l'iframe\n        const injectBridge = () => {\n            const iframe = iframeRef.current;\n            if (!iframe?.contentWindow) return;\n\n            iframe.onload = () => {\n                const iframeWindow = iframe.contentWindow;\n                if (!iframeWindow) return;\n\n                // Injecter le script bridge\n                const script = iframeWindow.document.createElement('script');\n                script.textContent = `\n                    // Bridge V2 pour CHASSE TEMPORELLE\n                    console.log(' Bridge Chasse Temporelle V2 initialis');\n                    \n                    // Intercepter les mouvements de la map\n                    const originalHandleHexClick = window.handleHexClick || function() {};\n                    window.handleHexClick = function(x, y) {\n                        const result = originalHandleHexClick.apply(this, arguments);\n                        \n                        // Envoyer l'vnement au parent React\n                        window.parent.postMessage({\n                            type: 'map-event',\n                            payload: {\n                                type: 'move',\n                                position: {\n                                    x: x,\n                                    y: y,\n                                    z: 0,\n                                    t: Date.now(),\n                                    c: 0,\n                                    psi: Math.random()\n                                }\n                            }\n                        }, '*');\n                        \n                        return result;\n                    };\n                    \n                    // Intercepter les portails temporels\n                    const originalOpenPortal = window.openPortal || function() {};\n                    window.openPortal = function(portalData) {\n                        const result = originalOpenPortal.apply(this, arguments);\n                        \n                        window.parent.postMessage({\n                            type: 'map-event',\n                            payload: {\n                                type: 'portal',\n                                position: portalData.position,\n                                value: portalData\n                            }\n                        }, '*');\n                        \n                        return result;\n                    };\n                    \n                    // Envoyer l'tat du jeu priodiquement\n                    setInterval(() => {\n                        if (window.gameState) {\n                            window.parent.postMessage({\n                                type: 'game-state',\n                                payload: window.gameState\n                            }, '*');\n                        }\n                    }, 1000);\n                `;\n                iframeWindow.document.head.appendChild(script);\n                setIsConnected(true);\n            };\n        };\n\n        injectBridge();\n\n        return () => {\n            window.removeEventListener('message', handleMessage);\n        };\n    }, [useV2API]);\n\n    // Connexion aux API V2\n    useEffect(() => {\n        if (!useV2API) return;\n\n        const connectToV2 = async () => {\n            setWsStatus('connecting');\n            \n            try {\n                // Importer l'adaptateur V2\n                const { V2Adapter } = await import('../../shared/v2-adapter');\n                \n                // Se connecter au WebSocket et au systme de tick\n                await V2Adapter.connectWebSocket();\n                \n                // Dmarrer le tick temporel\n                const tickInterval = setInterval(async () => {\n                    const tickResult = await V2Adapter.tick(currentPosition);\n                    console.log(' Tick V2:', tickResult);\n                    \n                    // Calculer la drive temporelle\n                    if (tickResult.drift) {\n                        const driftResult = await V2Adapter.calculateDrift([currentPosition]);\n                        console.log(' Drive temporelle:', driftResult);\n                    }\n                }, 100); // Tick toutes les 100ms comme requis par V2\n                \n                setWsStatus('connected');\n                console.log(' Connect aux API V2 avec tick temporel');\n                \n                return () => clearInterval(tickInterval);\n            } catch (error) {\n                console.error('Erreur connexion V2:', error);\n                setWsStatus('disconnected');\n            }\n        };\n\n        connectToV2();\n    }, [useV2API, currentPosition]);\n\n    // Envoyer les vnements au backend V2\n    const sendToV2Backend = async (event: GameEvent) => {\n        try {\n            const { V2Adapter } = await import('../../shared/v2-adapter');\n            \n            // Formater pour l'API V2\n            const v2Event = {\n                type: 'MAP_ACTION',\n                timestamp: Date.now(),\n                data: {\n                    action: event.type,\n                    position: event.position,\n                    entity: event.entity,\n                    value: event.value\n                }\n            };\n\n            // Calculer l'nergie complexe de la position\n            const energyResult = await V2Adapter.calculateComplexEnergy({\n                position: event.position,\n                type: 'hero'\n            });\n            console.log(' nergie complexe:', energyResult);\n\n            // Dtecter les paradoxes temporels\n            if (event.type === 'temporal_shift') {\n                const paradoxResult = await V2Adapter.detectParadoxes([event.position]);\n                console.log(' Dtection paradoxes:', paradoxResult);\n                \n                if (paradoxResult.paradoxes?.length > 0) {\n                    // Activer le rgulateur Vince\n                    await V2Adapter.activateVince({\n                        position: event.position,\n                        severity: 'high'\n                    });\n                }\n            }\n\n            // Envoyer au backend Rust\n            const response = await fetch('http://localhost:3001/api/v2/map/action', {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify(v2Event)\n            });\n\n            if (response.ok) {\n                const result = await response.json();\n                console.log('V2 Response:', result);\n            }\n        } catch (error) {\n            console.error('Erreur envoi V2:', error);\n        }\n    };\n\n    // Tlporter  une position spcifique\n    const teleportTo = (x: number, y: number, t?: number) => {\n        if (!iframeRef.current?.contentWindow) return;\n        \n        iframeRef.current.contentWindow.postMessage({\n            type: 'teleport',\n            payload: { x, y, t: t || Date.now() }\n        }, '*');\n        \n        setCurrentPosition(prev => ({ ...prev, x, y, t: t || prev.t }));\n    };\n\n    // Activer le mode voyage temporel\n    const activateTimeTravel = () => {\n        if (!iframeRef.current?.contentWindow) return;\n        \n        iframeRef.current.contentWindow.postMessage({\n            type: 'time-travel',\n            payload: { active: true }\n        }, '*');\n    };\n\n    return (\n        <div className=\"chasse-mega-wrapper\">\n            <div className=\"chasse-controls\">\n                <div className=\"control-header\">\n                    <h2> CHASSE TEMPORELLE - Map Mga 6x6</h2>\n                    \n                    <div className=\"mode-selector\">\n                        <button \n                            className={`mode-btn ${!useV2API ? 'active' : ''}`}\n                            onClick={() => setUseV2API(false)}\n                        >\n                            Mode Local\n                        </button>\n                        <button \n                            className={`mode-btn ${useV2API ? 'active' : ''}`}\n                            onClick={() => setUseV2API(true)}\n                        >\n                            Mode V2 API (Navigation 6D)\n                        </button>\n                    </div>\n\n                    {useV2API && (\n                        <div className=\"v2-indicators\">\n                            <span className={`indicator ${wsStatus}`}>\n                                {wsStatus === 'connected' ? '' : wsStatus === 'connecting' ? '' : ''}\n                            </span>\n                            <span>WebSocket: {wsStatus}</span>\n                            <span className=\"tick-indicator\"> Tick 100ms</span>\n                        </div>\n                    )}\n                </div>\n\n                <div className=\"position-display\">\n                    <h3>Position 6D</h3>\n                    <div className=\"coords-grid\">\n                        <div>X: {currentPosition.x}</div>\n                        <div>Y: {currentPosition.y}</div>\n                        <div>Z: {currentPosition.z}</div>\n                        <div>T: {new Date(currentPosition.t).toLocaleTimeString()}</div>\n                        <div>C: {currentPosition.c.toFixed(2)}</div>\n                        <div>: {currentPosition.psi.toFixed(3)}</div>\n                    </div>\n                </div>\n\n                <div className=\"game-stats\">\n                    <h3>tat du Jeu</h3>\n                    <div className=\"stats-grid\">\n                        <div> Jour {gameState.day}, Semaine {gameState.week}</div>\n                        <div> Or: {gameState.resources.gold}</div>\n                        <div> Bois: {gameState.resources.wood}</div>\n                        <div> Minerai: {gameState.resources.ore}</div>\n                        <div> Gemmes: {gameState.resources.gems}</div>\n                        <div> nergie: {gameState.resources.temporalEnergy}</div>\n                    </div>\n                </div>\n\n                <div className=\"quick-actions\">\n                    <button \n                        className=\"action-btn\"\n                        onClick={() => teleportTo(0, 0)}\n                    >\n                         Retour Base\n                    </button>\n                    <button \n                        className=\"action-btn temporal\"\n                        onClick={activateTimeTravel}\n                    >\n                         Voyage Temporel\n                    </button>\n                    <button \n                        className=\"action-btn portal\"\n                        onClick={() => teleportTo(50, 50, Date.now() - 86400000)}\n                    >\n                         Portail -1 Jour\n                    </button>\n                </div>\n\n                <div className=\"bridge-status\">\n                    <span className={`bridge-indicator ${isConnected ? 'connected' : 'disconnected'}`}>\n                        {isConnected ? ' Bridge actif' : ' Bridge inactif'}\n                    </span>\n                </div>\n            </div>\n\n            <div className=\"chasse-iframe-container\">\n                <iframe\n                    ref={iframeRef}\n                    src={htmlPath}\n                    title=\"Chasse Temporelle Mega Map\"\n                    className=\"chasse-iframe\"\n                    sandbox=\"allow-same-origin allow-scripts\"\n                />\n            </div>\n        </div>\n    );\n};\n\nexport default ChasseMegaMapWrapper;\n","/**\n *  Magic Stack Unified - Application principale\n * Un seul code pour le jeu ET l'diteur\n */\n\nimport React from 'react';\nimport { BrowserRouter, Routes, Route, Link } from 'react-router-dom';\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\nimport { GameView } from './modes/game/GameView';\nimport { EditorView } from './modes/editor/EditorView';\nimport { ChasseView } from './modes/chasse/ChasseView';\nimport { HomePage } from './pages/HomePage';\nimport { StartTCG } from './pages/StartTCG';\nimport { MultiplayerMode } from './modes/multiplayer/MultiplayerMode';\nimport { AIBattleAutoplay } from './modes/ai-battle/AIBattleAutoplay';\nimport { SpectatorGodMode } from './modes/spectator/SpectatorGodMode';\nimport { HeroBackstoryEditor } from './modes/editor/HeroBackstoryEditor';\nimport { UnifiedMapSystem } from './modes/unified/UnifiedMapSystem';\nimport AIBattleWrapper from './modes/combat/AIBattleWrapper';\nimport ChasseMegaMapWrapper from './modes/chasse/ChasseMegaMapWrapper';\n\nconst queryClient = new QueryClient();\n\nexport function App(): React.ReactElement {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <BrowserRouter>\n        <div className=\"app-container\" style={{\n          minHeight: '100vh',\n          background: 'linear-gradient(135deg, #0a0e1a 0%, #1a1d3a 100%)',\n          color: '#e8ecff',\n        }}>\n          <Routes>\n            {/* Page d'accueil */}\n            <Route path=\"/\" element={<HomePage />} />\n            \n            {/* Modes de jeu */}\n            <Route path=\"/game/*\" element={<GameView />} />\n            <Route path=\"/editor/*\" element={<EditorView />} />\n            <Route path=\"/chasse/*\" element={<ChasseView />} />\n            \n            {/* Nouveaux modes intgrs */}\n            <Route path=\"/multiplayer\" element={<MultiplayerMode />} />\n            <Route path=\"/ai-battle\" element={<AIBattleAutoplay />} />\n            <Route path=\"/spectator\" element={<SpectatorGodMode />} />\n            <Route path=\"/backstory-editor\" element={<HeroBackstoryEditor />} />\n            \n            {/*  UNIFIED MAP SYSTEM - L'DITEUR EST LE JEU ! */}\n            <Route path=\"/unified\" element={<UnifiedMapSystem />} />\n            \n            {/*  COMBAT IA vs IA avec connexion V2 */}\n            <Route path=\"/combat\" element={<AIBattleWrapper />} />\n            <Route path=\"/start-tcg\" element={<StartTCG />} />\n            \n            {/*  CHASSE TEMPORELLE MEGA MAP 6x6 */}\n            <Route path=\"/chasse-mega\" element={<ChasseMegaMapWrapper />} />\n            \n            {/* Autres pages */}\n            <Route path=\"/settings\" element={<SettingsPage />} />\n            <Route path=\"/about\" element={<AboutPage />} />\n          </Routes>\n        </div>\n      </BrowserRouter>\n    </QueryClientProvider>\n  );\n}\n\n\n\n// Pages temporaires\nfunction SettingsPage(): React.ReactElement {\n  return (\n    <div style={{ padding: 40 }}>\n      <h1> Paramtres</h1>\n      <Link to=\"/\"> Retour</Link>\n    </div>\n  );\n}\n\nfunction AboutPage(): React.ReactElement {\n  return (\n    <div style={{ padding: 40 }}>\n      <h1>  propos</h1>\n      <p>Magic Stack Unified - Architecture React unifie</p>\n      <p>Claude Nexus - Intgrateur des Trfonds d'Avalon</p>\n      <Link to=\"/\"> Retour</Link>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport App from './App';\nimport './index.css';\n\nReactDOM.createRoot(document.getElementById('root')!).render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n);\n"],"file":"assets/index-Dtevmlj4.js"}