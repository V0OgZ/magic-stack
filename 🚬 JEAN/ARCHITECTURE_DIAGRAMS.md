# üèóÔ∏è **ARCHITECTURE HEROES OF TIME - VERSION COMPL√àTE**

## üéØ **VUE D'ENSEMBLE DU SYST√àME**

```mermaid
graph TB
    subgraph "üéÆ Frontends Multiples"
        DASH[Dashboard Principal<br/>Port 9000]
        MAIN[Frontend Principal<br/>Port 8000]
        TEMP[Interface Temporelle<br/>Port 5174]
        QUANT[Quantum Visualizer<br/>Port 8001]
        COLL[Collection & Grammar<br/>Port 5175]
        TEST[Test Runner<br/>Port 8888]
        EDIT[√âditeur Visuel<br/>Port 8081]
    end
    
    subgraph "üîß Backend Core"
        API[REST API<br/>Port 8080]
        TEMP_ENGINE[TemporalEngineService]
        AI_SERVICE[LimitedAIService]
        COLLAPSE[CausalCollapseService]
        DECAY[TemporalDecayHybridService]
        REPLAY[ReplayService]
        ADMIN[AdminService]
    end
    
    subgraph "üóÑÔ∏è Base de Donn√©es"
        DB[(H2 Database)]
        GAMES[Games]
        HEROES[Heroes]
        PLAYERS[Players]
        PSI_STATES[PsiStates]
        REPLAYS[Replays]
    end
    
    subgraph "üéØ Contr√¥leurs"
        GAME_CTRL[GameController]
        TEMP_CTRL[TemporalController]
        AI_CTRL[LimitedAIController]
        COLLAPSE_CTRL[CausalController]
        DECAY_CTRL[TemporalDecayController]
        REPLAY_CTRL[ReplayController]
        ADMIN_CTRL[AdminController]
    end
    
    subgraph "üß† Services Avanc√©s"
        GROFI[GROFI System]
        QUANTUM[Quantum Mechanics]
        CAUSAL[Causality Engine]
        MEMORY[Pattern Memory]
    end
    
    DASH --> API
    MAIN --> API
    TEMP --> API
    QUANT --> API
    COLL --> API
    TEST --> API
    EDIT --> API
    
    API --> GAME_CTRL
    API --> TEMP_CTRL
    API --> AI_CTRL
    API --> COLLAPSE_CTRL
    API --> DECAY_CTRL
    API --> REPLAY_CTRL
    API --> ADMIN_CTRL
    
    GAME_CTRL --> TEMP_ENGINE
    TEMP_CTRL --> TEMP_ENGINE
    AI_CTRL --> AI_SERVICE
    COLLAPSE_CTRL --> COLLAPSE
    DECAY_CTRL --> DECAY
    REPLAY_CTRL --> REPLAY
    ADMIN_CTRL --> ADMIN
    
    TEMP_ENGINE --> DB
    AI_SERVICE --> DB
    COLLAPSE --> DB
    DECAY --> DB
    REPLAY --> DB
    ADMIN --> DB
    
    TEMP_ENGINE --> GROFI
    AI_SERVICE --> MEMORY
    COLLAPSE --> QUANTUM
    DECAY --> CAUSAL
```

---

## üß† **SYST√àME IA CLAUDIUS-MEMENTO**

### **Architecture IA**

```mermaid
graph LR
    subgraph "üéÆ Interface Jeu"
        UI[Interface Joueur]
        API[API Backend]
    end
    
    subgraph "üß† Cerveau IA"
        DEC[Module D√©cision]
        MEM[Module M√©moire]
        SIM[Module Simulation]
        OPT[Module Optimisation]
    end
    
    subgraph "üö® Limitations"
        DEPTH[Profondeur Max]
        TIME[Timeout Calcul]
        SIMS[Simulations Max]
        ERROR[Erreurs Volontaires]
    end
    
    subgraph "üåê Graphe Global"
        GLOBAL[Graphe Probabiliste]
        COLLAPSE[Collapse Causale]
        TIMELINE[Timelines Multiples]
        PSI[√âtats Psi]
    end
    
    UI --> API
    API --> DEC
    DEC --> MEM
    DEC --> SIM
    SIM --> GLOBAL
    GLOBAL --> COLLAPSE
    GLOBAL --> TIMELINE
    GLOBAL --> PSI
    
    DEC --> DEPTH
    DEC --> TIME
    DEC --> SIMS
    DEC --> ERROR
```

### **Niveaux de Difficult√©**

| Niveau | Profondeur | Simulations | Temps (ms) | Erreurs | √âtats Psi |
|--------|------------|-------------|------------|---------|-----------|
| **EASY** | 2 | 20 | 2000 | 25% | 10 |
| **MEDIUM** | 4 | 50 | 5000 | 15% | 20 |
| **HARD** | 6 | 100 | 8000 | 10% | 30 |
| **EXPERT** | 8 | 200 | 12000 | 5% | 50 |
| **PARADOX** | 10 | 500 | 20000 | 2% | 100 |

---

## ‚ö° **SYST√àME COLLAPSE CAUSALE**

### **Types de Collapse**

```mermaid
graph TD
    A[üéØ Action Planifi√©e] --> B{üîç Type de Collapse}
    
    B -->|üí• INTERACTION| C[Collision d'√âtats]
    B -->|üëÅÔ∏è OBSERVATION| D[D√©tection d'√âtat]
    B -->|‚öì ANCHORING| E[Stabilisation Artefact]
    
    C --> F[Calcul Interf√©rence]
    D --> G[Probabilit√© Observation]
    E --> H[Facteur Stabilit√©]
    
    F --> I[üìä R√©sultat D√©terministe]
    G --> I
    H --> I
    
    I --> J[üéÆ Ex√©cution Action]
```

### **Calculs Quantiques**

```java
// Probabilit√© de collapse INTERACTION
P(INTERACTION) = Œ£(œài * œàj) pour tous les √©tats superpos√©s

// Probabilit√© de collapse OBSERVATION  
P(OBSERVATION) = |œà|¬≤ pour l'√©tat le plus probable

// Probabilit√© de collapse ANCHORING
P(ANCHORING) = Œ£(artifacts * stability_factor)
```

---

## üï∞Ô∏è **SYST√àME TEMPORAL DECAY HYBRIDE**

### **Architecture Unifi√©e**

```mermaid
graph TB
    subgraph "üîÑ Syst√®me Hybride"
        LEGACY[Legacy Decay<br/>Timeline-based]
        DK20[DK20 Decay<br/>Date-based]
        HYBRID[Hybrid Decay<br/>Unified]
    end
    
    subgraph "üìä Calculs"
        TIMELINE[Timeline Decay]
        HERO[Hero Decay]
        BUILDING[Building Decay]
        ARTIFACT[Artifact Decay]
    end
    
    subgraph "üéØ R√©sultats"
        DECAY_RATE[Taux de D√©cay]
        STABILITY[Stabilit√©]
        RECOVERY[R√©cup√©ration]
    end
    
    LEGACY --> TIMELINE
    DK20 --> HERO
    HYBRID --> BUILDING
    HYBRID --> ARTIFACT
    
    TIMELINE --> DECAY_RATE
    HERO --> STABILITY
    BUILDING --> RECOVERY
    ARTIFACT --> DECAY_RATE
```

### **Formules de D√©cay**

```java
// D√©cay Timeline (Legacy)
decay_rate = base_rate * timeline_factor * temporal_energy

// D√©cay Hero (DK20)
hero_decay = hero_level * time_factor * activity_penalty

// D√©cay Hybride
hybrid_decay = (legacy_decay + dk20_decay) / 2 * stability_factor
```

---

## üé¨ **CENTRE DE REPLAY**

### **Architecture Replay**

```mermaid
graph LR
    subgraph "üìÅ Sc√©narios"
        HOTS[HOTS Files<br/>26 sc√©narios]
        HSP[HSP Replays<br/>Format JSON]
    end
    
    subgraph "üéÆ Interface"
        REPLAY_UI[Centre de Replay]
        CONTROLS[Contr√¥les Play/Pause]
        NAV[Navigation Tours]
        SPEED[Vitesse 0.5x-2x]
    end
    
    subgraph "üîß Backend"
        REPLAY_SERVICE[ReplayService]
        PARSER[HOTS Parser]
        EXECUTOR[Replay Executor]
    end
    
    HOTS --> PARSER
    HSP --> EXECUTOR
    PARSER --> REPLAY_SERVICE
    EXECUTOR --> REPLAY_SERVICE
    REPLAY_SERVICE --> REPLAY_UI
    REPLAY_UI --> CONTROLS
    REPLAY_UI --> NAV
    REPLAY_UI --> SPEED
```

### **Format HSP (Heroes Scenario Playback)**

```json
{
  "metadata": {
    "scenario": "jean_vs_claudius_epic",
    "duration": "25 minutes",
    "players": ["Jean-Grofignon", "Claudius"],
    "turns": 150
  },
  "turns": [
    {
      "turn": 1,
      "actions": [
        {
          "hero": "Jean-Grofignon",
          "action": "MOV",
          "target": "@15,15",
          "timestamp": "2025-07-22T10:30:00"
        }
      ],
      "psi_states": ["œà001", "œà002"],
      "timeline": "‚Ñ¨1"
    }
  ]
}
```

---

## üåü **MODE √âTH√âR√â - UIs CACH√âES**

### **Interfaces R√©cup√©r√©es**

```mermaid
graph TB
    subgraph "üåü Mode √âth√©r√©"
        ETHEREAL[Interface √âth√©r√©e<br/>Port 9000]
    end
    
    subgraph "üÉè UIs Cach√©es"
        CARDS[Heroes Cards Visualizer<br/>16 cartes interactives]
        EPOCH[Epoch Visualizer<br/>Timeline officielle]
        PANOPTICON[Panopticon 3D<br/>Interface 3D]
        FORGE[Quantum Runic Forge<br/>Forge runique]
        MOSAIC[Mosaic Dashboard<br/>Dashboard alternatif]
        FORMULA[Formula Translator<br/>Traducteur formules]
    end
    
    ETHEREAL --> CARDS
    ETHEREAL --> EPOCH
    ETHEREAL --> PANOPTICON
    ETHEREAL --> FORGE
    ETHEREAL --> MOSAIC
    ETHEREAL --> FORMULA
```

---

## üé® **√âDITEUR VISUEL QUANTIQUE**

### **Architecture √âditeur**

```mermaid
graph TB
    subgraph "üé® Interface √âditeur"
        CANVAS[Canvas de Dessin]
        TIMELINE[√âditeur Timeline]
        BOARD[Plateau de Jeu]
        MACROS[Macros Personnalis√©es]
    end
    
    subgraph "üîß G√©n√©ration"
        SCRIPT_GEN[G√©n√©rateur de Script]
        HOTS_OUT[HOTS Output]
        JSON_OUT[JSON Output]
        VALIDATION[Validation Syntaxe]
    end
    
    subgraph "üéÆ Int√©gration"
        HOTSEAT[Mode Hot Seat]
        MULTIPLAYER[Mode Multiplayer]
        AI[Mode IA]
        REPLAY[Mode Replay]
    end
    
    CANVAS --> SCRIPT_GEN
    TIMELINE --> SCRIPT_GEN
    BOARD --> SCRIPT_GEN
    MACROS --> SCRIPT_GEN
    
    SCRIPT_GEN --> HOTS_OUT
    SCRIPT_GEN --> JSON_OUT
    SCRIPT_GEN --> VALIDATION
    
    HOTS_OUT --> HOTSEAT
    HOTS_OUT --> MULTIPLAYER
    HOTS_OUT --> AI
    HOTS_OUT --> REPLAY
```

---

## üèõÔ∏è **SYST√àME ADMIN**

### **Fonctionnalit√©s Admin**

```mermaid
graph LR
    subgraph "üëë Admin Panel"
        ADMIN_UI[Interface Admin]
        GAME_MGMT[Gestion Parties]
        PLAYER_MGMT[Gestion Joueurs]
        SYSTEM_MGMT[Gestion Syst√®me]
    end
    
    subgraph "üîß Services"
        ADMIN_SERVICE[AdminService]
        GAME_SERVICE[GameService]
        PLAYER_SERVICE[PlayerService]
        SYSTEM_SERVICE[SystemService]
    end
    
    subgraph "üìä Monitoring"
        METRICS[M√©triques]
        LOGS[Logs]
        ALERTS[Alertes]
        REPORTS[Rapports]
    end
    
    ADMIN_UI --> ADMIN_SERVICE
    GAME_MGMT --> GAME_SERVICE
    PLAYER_MGMT --> PLAYER_SERVICE
    SYSTEM_MGMT --> SYSTEM_SERVICE
    
    ADMIN_SERVICE --> METRICS
    GAME_SERVICE --> LOGS
    PLAYER_SERVICE --> ALERTS
    SYSTEM_SERVICE --> REPORTS
```

---

## üéØ **PORTS ET SERVICES**

### **Allocation des Ports**

| Port | Service | Description |
|------|---------|-------------|
| **9000** | Dashboard Principal | Interface principale avec Centre de Replay et Mode √âth√©r√© |
| **8000** | Frontend Principal | Jeu principal avec interface chiad√©e |
| **8080** | Backend API | API REST Spring Boot |
| **5174** | Interface Temporelle | Effets visuels temporels |
| **8001** | Quantum Visualizer | D3.js + graphiques quantiques |
| **5175** | Collection & Grammar | Visualiseur de collection et traducteur |
| **8888** | Test Runner | Interface de tests |
| **8081** | √âditeur Visuel | IDE quantique-temporel |

### **Services Backend**

```java
// Services Principaux
TemporalEngineService          // Moteur temporel principal
LimitedAIService              // IA avec limitations
CausalCollapseService         // Collapse causale
TemporalDecayHybridService    // D√©cay temporel unifi√©
ReplayService                 // Syst√®me de replay
AdminService                  // Administration

// Contr√¥leurs
GameController                // Gestion des parties
TemporalController            // Contr√¥le temporel
LimitedAIController          // Contr√¥le IA
CausalController             // Contr√¥le collapse
TemporalDecayController      // Contr√¥le decay
ReplayController             // Contr√¥le replay
AdminController              // Contr√¥le admin
```

---

## üßÆ **MOD√àLES DE DONN√âES**

### **Entit√©s Principales**

```mermaid
erDiagram
    GAME ||--o{ HERO : contains
    GAME ||--o{ GAME_TILE : contains
    GAME ||--o{ PSI_STATE : contains
    GAME ||--o{ PLAYER : has
    
    HERO ||--o{ INVENTORY : has
    HERO ||--o{ ARTIFACT : uses
    
    PLAYER ||--o{ GAME : participates
    
    GAME {
        Long id
        String gameName
        Integer currentTurn
        String currentPlayer
        GameStatus status
        String currentTimeline
    }
    
    HERO {
        Long id
        String name
        Integer health
        Integer level
        String playerId
        Map inventory
    }
    
    PSI_STATE {
        Long id
        String stateId
        ComplexAmplitude amplitude
        Double probability
        String timeline
    }
```

---

## üöÄ **WORKFLOW DE D√âVELOPPEMENT**

### **Pipeline d'Int√©gration**

```mermaid
graph LR
    A[üìù D√©veloppement] --> B[üß™ Tests Locaux]
    B --> C[üîç Code Review]
    C --> D[üöÄ D√©ploiement]
    D --> E[üìä Monitoring]
    E --> F[üîÑ Feedback]
    F --> A
```

### **Scripts de Contr√¥le**

```bash
# Contr√¥le principal
./hots help                    # Aide compl√®te
./hots status                  # Statut des services
./hots start                   # D√©marrage complet
./hots test quick              # Tests rapides
./hots test report             # Rapport complet

# Services sp√©cifiques
./hots editor                  # √âditeur visuel
./hots admin                   # Interface admin
./hots replay center           # Centre de replay
./hots test uis                # Test des UIs
```

---

## üéØ **ROADMAP FUTURE**

### **Prochaines Impl√©mentations**

1. **ü§ñ IA Avanc√©e**
   - Apprentissage par renforcement
   - Strat√©gies adaptatives
   - IA coop√©rative

2. **üåê Multiplayer R√©el**
   - WebSocket temps r√©el
   - Synchronisation temporelle
   - Tournois en ligne

3. **üé® Interface 3D**
   - Rendu WebGL
   - Navigation 3D
   - Effets visuels avanc√©s

4. **üì± Mobile**
   - Application mobile
   - Synchronisation cloud
   - Notifications push

---

## üèÜ **SYST√àMES IMPL√âMENT√âS**

### **‚úÖ Syst√®mes Complets**

1. **ü§ñ IA Claudius-Memento** - Algorithme maximal avec limitations
2. **üé¨ Centre de Replay** - 26 sc√©narios HOTS + format HSP
3. **üåü Mode √âth√©r√©** - 6 UIs cach√©es r√©cup√©r√©es
4. **üé® √âditeur Visuel** - IDE quantique-temporel
5. **üëë Syst√®me Admin** - Gestion compl√®te
6. **‚ö° Collapse Causale** - 3 types de collapse
7. **üï∞Ô∏è Temporal Decay Hybride** - Syst√®me unifi√©
8. **üå´Ô∏è Brouillard de Causalit√©** - 7 √©tats + timelines
9. **üìú Langage HOTS** - Scripting quantique-temporel
10. **üèõÔ∏è GROFI System** - Jean-Grofignon's quantum mechanics

### **üéØ Syst√®mes en D√©veloppement**

1. **üèõÔ∏è Interface de Ville** - Gestion de base
2. **‚öîÔ∏è Interface de Combat** - Combat hexagonale
3. **üë§ Interface de H√©ros** - Progression compl√®te
4. **üßô‚Äç‚ôÇÔ∏è Syst√®me de Magie** - Grimoire basique
5. **üó∫Ô∏è Minimap** - Navigation avanc√©e
6. **üí∞ Gestion √âconomique** - Ressources d√©taill√©es

---

**üèÜ L'architecture Heroes of Time est maintenant compl√®te et pr√™te pour la production !**